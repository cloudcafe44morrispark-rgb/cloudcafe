function j2(t,e){for(var r=0;r<e.length;r++){const a=e[r];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in t)){const h=Object.getOwnPropertyDescriptor(a,u);h&&Object.defineProperty(t,u,h.get?h:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const g of h.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function r(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(u){if(u.ep)return;u.ep=!0;const h=r(u);fetch(u.href,h)}})();var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wh={exports:{}},xl={},vh={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im;function B2(){if(Im)return gt;Im=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.iterator;function T($){return $===null||typeof $!="object"?null:($=C&&$[C]||$["@@iterator"],typeof $=="function"?$:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,D={};function L($,ae,ke){this.props=$,this.context=ae,this.refs=D,this.updater=ke||R}L.prototype.isReactComponent={},L.prototype.setState=function($,ae){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ae,"setState")},L.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function U(){}U.prototype=L.prototype;function W($,ae,ke){this.props=$,this.context=ae,this.refs=D,this.updater=ke||R}var j=W.prototype=new U;j.constructor=W,k(j,L.prototype),j.isPureReactComponent=!0;var q=Array.isArray,Z=Object.prototype.hasOwnProperty,te={current:null},ee={key:!0,ref:!0,__self:!0,__source:!0};function ue($,ae,ke){var Me,ct={},pe=null,yt=null;if(ae!=null)for(Me in ae.ref!==void 0&&(yt=ae.ref),ae.key!==void 0&&(pe=""+ae.key),ae)Z.call(ae,Me)&&!ee.hasOwnProperty(Me)&&(ct[Me]=ae[Me]);var $e=arguments.length-2;if($e===1)ct.children=ke;else if(1<$e){for(var wt=Array($e),Gt=0;Gt<$e;Gt++)wt[Gt]=arguments[Gt+2];ct.children=wt}if($&&$.defaultProps)for(Me in $e=$.defaultProps,$e)ct[Me]===void 0&&(ct[Me]=$e[Me]);return{$$typeof:t,type:$,key:pe,ref:yt,props:ct,_owner:te.current}}function se($,ae){return{$$typeof:t,type:$.type,key:ae,ref:$.ref,props:$.props,_owner:$._owner}}function Ue($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function ge($){var ae={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(ke){return ae[ke]})}var he=/\/+/g;function Te($,ae){return typeof $=="object"&&$!==null&&$.key!=null?ge(""+$.key):ae.toString(36)}function Ie($,ae,ke,Me,ct){var pe=typeof $;(pe==="undefined"||pe==="boolean")&&($=null);var yt=!1;if($===null)yt=!0;else switch(pe){case"string":case"number":yt=!0;break;case"object":switch($.$$typeof){case t:case e:yt=!0}}if(yt)return yt=$,ct=ct(yt),$=Me===""?"."+Te(yt,0):Me,q(ct)?(ke="",$!=null&&(ke=$.replace(he,"$&/")+"/"),Ie(ct,ae,ke,"",function(Gt){return Gt})):ct!=null&&(Ue(ct)&&(ct=se(ct,ke+(!ct.key||yt&&yt.key===ct.key?"":(""+ct.key).replace(he,"$&/")+"/")+$)),ae.push(ct)),1;if(yt=0,Me=Me===""?".":Me+":",q($))for(var $e=0;$e<$.length;$e++){pe=$[$e];var wt=Me+Te(pe,$e);yt+=Ie(pe,ae,ke,wt,ct)}else if(wt=T($),typeof wt=="function")for($=wt.call($),$e=0;!(pe=$.next()).done;)pe=pe.value,wt=Me+Te(pe,$e++),yt+=Ie(pe,ae,ke,wt,ct);else if(pe==="object")throw ae=String($),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.");return yt}function Q($,ae,ke){if($==null)return $;var Me=[],ct=0;return Ie($,Me,"","",function(pe){return ae.call(ke,pe,ct++)}),Me}function Re($){if($._status===-1){var ae=$._result;ae=ae(),ae.then(function(ke){($._status===0||$._status===-1)&&($._status=1,$._result=ke)},function(ke){($._status===0||$._status===-1)&&($._status=2,$._result=ke)}),$._status===-1&&($._status=0,$._result=ae)}if($._status===1)return $._result.default;throw $._result}var fe={current:null},de={transition:null},Ne={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:de,ReactCurrentOwner:te};function Ae(){throw Error("act(...) is not supported in production builds of React.")}return gt.Children={map:Q,forEach:function($,ae,ke){Q($,function(){ae.apply(this,arguments)},ke)},count:function($){var ae=0;return Q($,function(){ae++}),ae},toArray:function($){return Q($,function(ae){return ae})||[]},only:function($){if(!Ue($))throw Error("React.Children.only expected to receive a single React element child.");return $}},gt.Component=L,gt.Fragment=r,gt.Profiler=u,gt.PureComponent=W,gt.StrictMode=a,gt.Suspense=y,gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ne,gt.act=Ae,gt.cloneElement=function($,ae,ke){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var Me=k({},$.props),ct=$.key,pe=$.ref,yt=$._owner;if(ae!=null){if(ae.ref!==void 0&&(pe=ae.ref,yt=te.current),ae.key!==void 0&&(ct=""+ae.key),$.type&&$.type.defaultProps)var $e=$.type.defaultProps;for(wt in ae)Z.call(ae,wt)&&!ee.hasOwnProperty(wt)&&(Me[wt]=ae[wt]===void 0&&$e!==void 0?$e[wt]:ae[wt])}var wt=arguments.length-2;if(wt===1)Me.children=ke;else if(1<wt){$e=Array(wt);for(var Gt=0;Gt<wt;Gt++)$e[Gt]=arguments[Gt+2];Me.children=$e}return{$$typeof:t,type:$.type,key:ct,ref:pe,props:Me,_owner:yt}},gt.createContext=function($){return $={$$typeof:g,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:h,_context:$},$.Consumer=$},gt.createElement=ue,gt.createFactory=function($){var ae=ue.bind(null,$);return ae.type=$,ae},gt.createRef=function(){return{current:null}},gt.forwardRef=function($){return{$$typeof:v,render:$}},gt.isValidElement=Ue,gt.lazy=function($){return{$$typeof:A,_payload:{_status:-1,_result:$},_init:Re}},gt.memo=function($,ae){return{$$typeof:w,type:$,compare:ae===void 0?null:ae}},gt.startTransition=function($){var ae=de.transition;de.transition={};try{$()}finally{de.transition=ae}},gt.unstable_act=Ae,gt.useCallback=function($,ae){return fe.current.useCallback($,ae)},gt.useContext=function($){return fe.current.useContext($)},gt.useDebugValue=function(){},gt.useDeferredValue=function($){return fe.current.useDeferredValue($)},gt.useEffect=function($,ae){return fe.current.useEffect($,ae)},gt.useId=function(){return fe.current.useId()},gt.useImperativeHandle=function($,ae,ke){return fe.current.useImperativeHandle($,ae,ke)},gt.useInsertionEffect=function($,ae){return fe.current.useInsertionEffect($,ae)},gt.useLayoutEffect=function($,ae){return fe.current.useLayoutEffect($,ae)},gt.useMemo=function($,ae){return fe.current.useMemo($,ae)},gt.useReducer=function($,ae,ke){return fe.current.useReducer($,ae,ke)},gt.useRef=function($){return fe.current.useRef($)},gt.useState=function($){return fe.current.useState($)},gt.useSyncExternalStore=function($,ae,ke){return fe.current.useSyncExternalStore($,ae,ke)},gt.useTransition=function(){return fe.current.useTransition()},gt.version="18.3.1",gt}var Rm;function $f(){return Rm||(Rm=1,vh.exports=B2()),vh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km;function L2(){if(km)return xl;km=1;var t=$f(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function g(v,y,w){var A,C={},T=null,R=null;w!==void 0&&(T=""+w),y.key!==void 0&&(T=""+y.key),y.ref!==void 0&&(R=y.ref);for(A in y)a.call(y,A)&&!h.hasOwnProperty(A)&&(C[A]=y[A]);if(v&&v.defaultProps)for(A in y=v.defaultProps,y)C[A]===void 0&&(C[A]=y[A]);return{$$typeof:e,type:v,key:T,ref:R,props:C,_owner:u.current}}return xl.Fragment=r,xl.jsx=g,xl.jsxs=g,xl}var Om;function F2(){return Om||(Om=1,wh.exports=L2()),wh.exports}var x=F2(),uu={},bh={exports:{}},Tn={},Eh={exports:{}},Ch={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function U2(){return Pm||(Pm=1,(function(t){function e(de,Ne){var Ae=de.length;de.push(Ne);e:for(;0<Ae;){var $=Ae-1>>>1,ae=de[$];if(0<u(ae,Ne))de[$]=Ne,de[Ae]=ae,Ae=$;else break e}}function r(de){return de.length===0?null:de[0]}function a(de){if(de.length===0)return null;var Ne=de[0],Ae=de.pop();if(Ae!==Ne){de[0]=Ae;e:for(var $=0,ae=de.length,ke=ae>>>1;$<ke;){var Me=2*($+1)-1,ct=de[Me],pe=Me+1,yt=de[pe];if(0>u(ct,Ae))pe<ae&&0>u(yt,ct)?(de[$]=yt,de[pe]=Ae,$=pe):(de[$]=ct,de[Me]=Ae,$=Me);else if(pe<ae&&0>u(yt,Ae))de[$]=yt,de[pe]=Ae,$=pe;else break e}}return Ne}function u(de,Ne){var Ae=de.sortIndex-Ne.sortIndex;return Ae!==0?Ae:de.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;t.unstable_now=function(){return h.now()}}else{var g=Date,v=g.now();t.unstable_now=function(){return g.now()-v}}var y=[],w=[],A=1,C=null,T=3,R=!1,k=!1,D=!1,L=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(de){for(var Ne=r(w);Ne!==null;){if(Ne.callback===null)a(w);else if(Ne.startTime<=de)a(w),Ne.sortIndex=Ne.expirationTime,e(y,Ne);else break;Ne=r(w)}}function q(de){if(D=!1,j(de),!k)if(r(y)!==null)k=!0,Re(Z);else{var Ne=r(w);Ne!==null&&fe(q,Ne.startTime-de)}}function Z(de,Ne){k=!1,D&&(D=!1,U(ue),ue=-1),R=!0;var Ae=T;try{for(j(Ne),C=r(y);C!==null&&(!(C.expirationTime>Ne)||de&&!ge());){var $=C.callback;if(typeof $=="function"){C.callback=null,T=C.priorityLevel;var ae=$(C.expirationTime<=Ne);Ne=t.unstable_now(),typeof ae=="function"?C.callback=ae:C===r(y)&&a(y),j(Ne)}else a(y);C=r(y)}if(C!==null)var ke=!0;else{var Me=r(w);Me!==null&&fe(q,Me.startTime-Ne),ke=!1}return ke}finally{C=null,T=Ae,R=!1}}var te=!1,ee=null,ue=-1,se=5,Ue=-1;function ge(){return!(t.unstable_now()-Ue<se)}function he(){if(ee!==null){var de=t.unstable_now();Ue=de;var Ne=!0;try{Ne=ee(!0,de)}finally{Ne?Te():(te=!1,ee=null)}}else te=!1}var Te;if(typeof W=="function")Te=function(){W(he)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Q=Ie.port2;Ie.port1.onmessage=he,Te=function(){Q.postMessage(null)}}else Te=function(){L(he,0)};function Re(de){ee=de,te||(te=!0,Te())}function fe(de,Ne){ue=L(function(){de(t.unstable_now())},Ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(de){de.callback=null},t.unstable_continueExecution=function(){k||R||(k=!0,Re(Z))},t.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<de?Math.floor(1e3/de):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return r(y)},t.unstable_next=function(de){switch(T){case 1:case 2:case 3:var Ne=3;break;default:Ne=T}var Ae=T;T=Ne;try{return de()}finally{T=Ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(de,Ne){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var Ae=T;T=de;try{return Ne()}finally{T=Ae}},t.unstable_scheduleCallback=function(de,Ne,Ae){var $=t.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?$+Ae:$):Ae=$,de){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Ae+ae,de={id:A++,callback:Ne,priorityLevel:de,startTime:Ae,expirationTime:ae,sortIndex:-1},Ae>$?(de.sortIndex=Ae,e(w,de),r(y)===null&&de===r(w)&&(D?(U(ue),ue=-1):D=!0,fe(q,Ae-$))):(de.sortIndex=ae,e(y,de),k||R||(k=!0,Re(Z))),de},t.unstable_shouldYield=ge,t.unstable_wrapCallback=function(de){var Ne=T;return function(){var Ae=T;T=Ne;try{return de.apply(this,arguments)}finally{T=Ae}}}})(Ch)),Ch}var Dm;function V2(){return Dm||(Dm=1,Eh.exports=U2()),Eh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function W2(){if(Mm)return Tn;Mm=1;var t=$f(),e=V2();function r(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,m=1;m<arguments.length;m++)l+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function h(s,l){g(s,l),g(s+"Capture",l)}function g(s,l){for(u[s]=l,s=0;s<l.length;s++)a.add(l[s])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},C={};function T(s){return y.call(C,s)?!0:y.call(A,s)?!1:w.test(s)?C[s]=!0:(A[s]=!0,!1)}function R(s,l,m,b){if(m!==null&&m.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return b?!1:m!==null?!m.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function k(s,l,m,b){if(l===null||typeof l>"u"||R(s,l,m,b))return!0;if(b)return!1;if(m!==null)switch(m.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function D(s,l,m,b,_,N,M){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=b,this.attributeNamespace=_,this.mustUseProperty=m,this.propertyName=s,this.type=l,this.sanitizeURL=N,this.removeEmptyString=M}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){L[s]=new D(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];L[l]=new D(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){L[s]=new D(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){L[s]=new D(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){L[s]=new D(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){L[s]=new D(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){L[s]=new D(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){L[s]=new D(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){L[s]=new D(s,5,!1,s.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function W(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(U,W);L[l]=new D(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(U,W);L[l]=new D(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(U,W);L[l]=new D(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){L[s]=new D(s,1,!1,s.toLowerCase(),null,!1,!1)}),L.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){L[s]=new D(s,1,!1,s.toLowerCase(),null,!0,!0)});function j(s,l,m,b){var _=L.hasOwnProperty(l)?L[l]:null;(_!==null?_.type!==0:b||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(k(l,m,_,b)&&(m=null),b||_===null?T(l)&&(m===null?s.removeAttribute(l):s.setAttribute(l,""+m)):_.mustUseProperty?s[_.propertyName]=m===null?_.type===3?!1:"":m:(l=_.attributeName,b=_.attributeNamespace,m===null?s.removeAttribute(l):(_=_.type,m=_===3||_===4&&m===!0?"":""+m,b?s.setAttributeNS(b,l,m):s.setAttribute(l,m))))}var q=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),te=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),Ue=Symbol.for("react.provider"),ge=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),de=Symbol.iterator;function Ne(s){return s===null||typeof s!="object"?null:(s=de&&s[de]||s["@@iterator"],typeof s=="function"?s:null)}var Ae=Object.assign,$;function ae(s){if($===void 0)try{throw Error()}catch(m){var l=m.stack.trim().match(/\n( *(at )?)/);$=l&&l[1]||""}return`
`+$+s}var ke=!1;function Me(s,l){if(!s||ke)return"";ke=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ce){var b=ce}Reflect.construct(s,[],l)}else{try{l.call()}catch(ce){b=ce}s.call(l.prototype)}else{try{throw Error()}catch(ce){b=ce}s()}}catch(ce){if(ce&&b&&typeof ce.stack=="string"){for(var _=ce.stack.split(`
`),N=b.stack.split(`
`),M=_.length-1,H=N.length-1;1<=M&&0<=H&&_[M]!==N[H];)H--;for(;1<=M&&0<=H;M--,H--)if(_[M]!==N[H]){if(M!==1||H!==1)do if(M--,H--,0>H||_[M]!==N[H]){var X=`
`+_[M].replace(" at new "," at ");return s.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",s.displayName)),X}while(1<=M&&0<=H);break}}}finally{ke=!1,Error.prepareStackTrace=m}return(s=s?s.displayName||s.name:"")?ae(s):""}function ct(s){switch(s.tag){case 5:return ae(s.type);case 16:return ae("Lazy");case 13:return ae("Suspense");case 19:return ae("SuspenseList");case 0:case 2:case 15:return s=Me(s.type,!1),s;case 11:return s=Me(s.type.render,!1),s;case 1:return s=Me(s.type,!0),s;default:return""}}function pe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ee:return"Fragment";case te:return"Portal";case se:return"Profiler";case ue:return"StrictMode";case Te:return"Suspense";case Ie:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case ge:return(s.displayName||"Context")+".Consumer";case Ue:return(s._context.displayName||"Context")+".Provider";case he:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Q:return l=s.displayName||null,l!==null?l:pe(s.type)||"Memo";case Re:l=s._payload,s=s._init;try{return pe(s(l))}catch{}}return null}function yt(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(l);case 8:return l===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function $e(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function wt(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Gt(s){var l=wt(s)?"checked":"value",m=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),b=""+s[l];if(!s.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var _=m.get,N=m.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return _.call(this)},set:function(M){b=""+M,N.call(this,M)}}),Object.defineProperty(s,l,{enumerable:m.enumerable}),{getValue:function(){return b},setValue:function(M){b=""+M},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function br(s){s._valueTracker||(s._valueTracker=Gt(s))}function _s(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var m=l.getValue(),b="";return s&&(b=wt(s)?s.checked?"true":"false":s.value),s=b,s!==m?(l.setValue(s),!0):!1}function mt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function vn(s,l){var m=l.checked;return Ae({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??s._wrapperState.initialChecked})}function fn(s,l){var m=l.defaultValue==null?"":l.defaultValue,b=l.checked!=null?l.checked:l.defaultChecked;m=$e(l.value!=null?l.value:m),s._wrapperState={initialChecked:b,initialValue:m,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function cs(s,l){l=l.checked,l!=null&&j(s,"checked",l,!1)}function Bt(s,l){cs(s,l);var m=$e(l.value),b=l.type;if(m!=null)b==="number"?(m===0&&s.value===""||s.value!=m)&&(s.value=""+m):s.value!==""+m&&(s.value=""+m);else if(b==="submit"||b==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?tt(s,l.type,m):l.hasOwnProperty("defaultValue")&&tt(s,l.type,$e(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function Nt(s,l,m){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var b=l.type;if(!(b!=="submit"&&b!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,m||l===s.value||(s.value=l),s.defaultValue=l}m=s.name,m!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,m!==""&&(s.name=m)}function tt(s,l,m){(l!=="number"||mt(s.ownerDocument)!==s)&&(m==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+m&&(s.defaultValue=""+m))}var $n=Array.isArray;function Pe(s,l,m,b){if(s=s.options,l){l={};for(var _=0;_<m.length;_++)l["$"+m[_]]=!0;for(m=0;m<s.length;m++)_=l.hasOwnProperty("$"+s[m].value),s[m].selected!==_&&(s[m].selected=_),_&&b&&(s[m].defaultSelected=!0)}else{for(m=""+$e(m),l=null,_=0;_<s.length;_++){if(s[_].value===m){s[_].selected=!0,b&&(s[_].defaultSelected=!0);return}l!==null||s[_].disabled||(l=s[_])}l!==null&&(l.selected=!0)}}function hr(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(r(91));return Ae({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Xn(s,l){var m=l.value;if(m==null){if(m=l.children,l=l.defaultValue,m!=null){if(l!=null)throw Error(r(92));if($n(m)){if(1<m.length)throw Error(r(93));m=m[0]}l=m}l==null&&(l=""),m=l}s._wrapperState={initialValue:$e(m)}}function bn(s,l){var m=$e(l.value),b=$e(l.defaultValue);m!=null&&(m=""+m,m!==s.value&&(s.value=m),l.defaultValue==null&&s.defaultValue!==m&&(s.defaultValue=m)),b!=null&&(s.defaultValue=""+b)}function ci(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function Rr(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ui(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?Rr(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var rn,fr=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,m,b,_){MSApp.execUnsafeLocalFunction(function(){return s(l,m,b,_)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(rn=rn||document.createElement("div"),rn.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=rn.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function mn(s,l){if(l){var m=s.firstChild;if(m&&m===s.lastChild&&m.nodeType===3){m.nodeValue=l;return}}s.textContent=l}var kn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ns=["Webkit","ms","Moz","O"];Object.keys(kn).forEach(function(s){Ns.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),kn[l]=kn[s]})});function $t(s,l,m){return l==null||typeof l=="boolean"||l===""?"":m||typeof l!="number"||l===0||kn.hasOwnProperty(s)&&kn[s]?(""+l).trim():l+"px"}function _e(s,l){s=s.style;for(var m in l)if(l.hasOwnProperty(m)){var b=m.indexOf("--")===0,_=$t(m,l[m],b);m==="float"&&(m="cssFloat"),b?s.setProperty(m,_):s[m]=_}}var Jt=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Et(s,l){if(l){if(Jt[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(r(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(r(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(r(61))}if(l.style!=null&&typeof l.style!="object")throw Error(r(62))}}function Mt(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var On=null;function nn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var di=null,ht=null,$r=null;function hi(s){if(s=rl(s)){if(typeof di!="function")throw Error(r(280));var l=s.stateNode;l&&(l=Ac(l),di(s.stateNode,s.type,l))}}function nt(s){ht?$r?$r.push(s):$r=[s]:ht=s}function Ct(){if(ht){var s=ht,l=$r;if($r=ht=null,hi(s),l)for(s=0;s<l.length;s++)hi(l[s])}}function sr(s,l){return s(l)}function At(){}var gn=!1;function Xt(s,l,m){if(gn)return s(l,m);gn=!0;try{return sr(s,l,m)}finally{gn=!1,(ht!==null||$r!==null)&&(At(),Ct())}}function Ot(s,l){var m=s.stateNode;if(m===null)return null;var b=Ac(m);if(b===null)return null;m=b[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(s=s.type,b=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!b;break e;default:s=!1}if(s)return null;if(m&&typeof m!="function")throw Error(r(231,l,typeof m));return m}var Ts=!1;if(v)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{Ts=!1}function Xr(s,l,m,b,_,N,M,H,X){var ce=Array.prototype.slice.call(arguments,3);try{l.apply(m,ce)}catch(we){this.onError(we)}}var ir=!1,_r=null,Ur=!1,Oe=null,fi={onError:function(s){ir=!0,_r=s}};function Mo(s,l,m,b,_,N,M,H,X){ir=!1,_r=null,Xr.apply(fi,arguments)}function sn(s,l,m,b,_,N,M,H,X){if(Mo.apply(this,arguments),ir){if(ir){var ce=_r;ir=!1,_r=null}else throw Error(r(198));Ur||(Ur=!0,Oe=ce)}}function En(s){var l=s,m=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(m=l.return),s=l.return;while(s)}return l.tag===3?m:null}function Yi(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function qi(s){if(En(s)!==s)throw Error(r(188))}function Yn(s){var l=s.alternate;if(!l){if(l=En(s),l===null)throw Error(r(188));return l!==s?null:s}for(var m=s,b=l;;){var _=m.return;if(_===null)break;var N=_.alternate;if(N===null){if(b=_.return,b!==null){m=b;continue}break}if(_.child===N.child){for(N=_.child;N;){if(N===m)return qi(_),s;if(N===b)return qi(_),l;N=N.sibling}throw Error(r(188))}if(m.return!==b.return)m=_,b=N;else{for(var M=!1,H=_.child;H;){if(H===m){M=!0,m=_,b=N;break}if(H===b){M=!0,b=_,m=N;break}H=H.sibling}if(!M){for(H=N.child;H;){if(H===m){M=!0,m=N,b=_;break}if(H===b){M=!0,b=N,m=_;break}H=H.sibling}if(!M)throw Error(r(189))}}if(m.alternate!==b)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?s:l}function nc(s){return s=Yn(s),s!==null?sc(s):null}function sc(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=sc(s);if(l!==null)return l;s=s.sibling}return null}var Pn=e.unstable_scheduleCallback,Vr=e.unstable_cancelCallback,Ut=e.unstable_shouldYield,ic=e.unstable_requestPaint,Rt=e.unstable_now,jo=e.unstable_getCurrentPriorityLevel,me=e.unstable_ImmediatePriority,ac=e.unstable_UserBlockingPriority,Lt=e.unstable_NormalPriority,mi=e.unstable_LowPriority,oc=e.unstable_IdlePriority,bt=null,ut=null;function pt(s){if(ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(bt,s,void 0,(s.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:Er,Bo=Math.log,Lo=Math.LN2;function Er(s){return s>>>=0,s===0?32:31-(Bo(s)/Lo|0)|0}var Dn=64,Da=4194304;function Ft(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Mn(s,l){var m=s.pendingLanes;if(m===0)return 0;var b=0,_=s.suspendedLanes,N=s.pingedLanes,M=m&268435455;if(M!==0){var H=M&~_;H!==0?b=Ft(H):(N&=M,N!==0&&(b=Ft(N)))}else M=m&~_,M!==0?b=Ft(M):N!==0&&(b=Ft(N));if(b===0)return 0;if(l!==0&&l!==b&&(l&_)===0&&(_=b&-b,N=l&-l,_>=N||_===16&&(N&4194240)!==0))return l;if((b&4)!==0&&(b|=m&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=b;0<l;)m=31-pn(l),_=1<<m,b|=s[m],l&=~_;return b}function Ju(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gi(s,l){for(var m=s.suspendedLanes,b=s.pingedLanes,_=s.expirationTimes,N=s.pendingLanes;0<N;){var M=31-pn(N),H=1<<M,X=_[M];X===-1?((H&m)===0||(H&b)!==0)&&(_[M]=Ju(H,l)):X<=l&&(s.expiredLanes|=H),N&=~H}}function kt(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function kr(){var s=Dn;return Dn<<=1,(Dn&4194240)===0&&(Dn=64),s}function re(s){for(var l=[],m=0;31>m;m++)l.push(s);return l}function F(s,l,m){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-pn(l),s[l]=m}function ze(s,l){var m=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var b=s.eventTimes;for(s=s.expirationTimes;0<m;){var _=31-pn(m),N=1<<_;l[_]=0,b[_]=-1,s[_]=-1,m&=~N}}function mr(s,l){var m=s.entangledLanes|=l;for(s=s.entanglements;m;){var b=31-pn(m),_=1<<b;_&l|s[b]&l&&(s[b]|=l),m&=~_}}var dt=0;function lc(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Ma,an,Ge,Vt,Fo,Uo=!1,pi=[],jn=null,qn=null,Is=null,er=new Map,us=new Map,Yr=[],Ze="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cc(s,l){switch(s){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":er.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":us.delete(l.pointerId)}}function st(s,l,m,b,_,N){return s===null||s.nativeEvent!==N?(s={blockedOn:l,domEventName:m,eventSystemFlags:b,nativeEvent:N,targetContainers:[_]},l!==null&&(l=rl(l),l!==null&&an(l)),s):(s.eventSystemFlags|=b,l=s.targetContainers,_!==null&&l.indexOf(_)===-1&&l.push(_),s)}function Or(s,l,m,b,_){switch(l){case"focusin":return jn=st(jn,s,l,m,b,_),!0;case"dragenter":return qn=st(qn,s,l,m,b,_),!0;case"mouseover":return Is=st(Is,s,l,m,b,_),!0;case"pointerover":var N=_.pointerId;return er.set(N,st(er.get(N)||null,s,l,m,b,_)),!0;case"gotpointercapture":return N=_.pointerId,us.set(N,st(us.get(N)||null,s,l,m,b,_)),!0}return!1}function uc(s){var l=ia(s.target);if(l!==null){var m=En(l);if(m!==null){if(l=m.tag,l===13){if(l=Yi(m),l!==null){s.blockedOn=l,Fo(s.priority,function(){Ge(m)});return}}else if(l===3&&m.stateNode.current.memoizedState.isDehydrated){s.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}s.blockedOn=null}function xi(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var m=ja(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(m===null){m=s.nativeEvent;var b=new m.constructor(m.type,m);On=b,m.target.dispatchEvent(b),On=null}else return l=rl(m),l!==null&&an(l),s.blockedOn=m,!1;l.shift()}return!0}function Vo(s,l,m){xi(s)&&m.delete(l)}function Ws(){Uo=!1,jn!==null&&xi(jn)&&(jn=null),qn!==null&&xi(qn)&&(qn=null),Is!==null&&xi(Is)&&(Is=null),er.forEach(Vo),us.forEach(Vo)}function Ki(s,l){s.blockedOn===l&&(s.blockedOn=null,Uo||(Uo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ws)))}function ds(s){function l(_){return Ki(_,s)}if(0<pi.length){Ki(pi[0],s);for(var m=1;m<pi.length;m++){var b=pi[m];b.blockedOn===s&&(b.blockedOn=null)}}for(jn!==null&&Ki(jn,s),qn!==null&&Ki(qn,s),Is!==null&&Ki(Is,s),er.forEach(l),us.forEach(l),m=0;m<Yr.length;m++)b=Yr[m],b.blockedOn===s&&(b.blockedOn=null);for(;0<Yr.length&&(m=Yr[0],m.blockedOn===null);)uc(m),m.blockedOn===null&&Yr.shift()}var Kn=q.ReactCurrentBatchConfig,Rs=!0;function dc(s,l,m,b){var _=dt,N=Kn.transition;Kn.transition=null;try{dt=1,zs(s,l,m,b)}finally{dt=_,Kn.transition=N}}function Zi(s,l,m,b){var _=dt,N=Kn.transition;Kn.transition=null;try{dt=4,zs(s,l,m,b)}finally{dt=_,Kn.transition=N}}function zs(s,l,m,b){if(Rs){var _=ja(s,l,m,b);if(_===null)cd(s,l,b,Pr,m),cc(s,b);else if(Or(_,s,l,m,b))b.stopPropagation();else if(cc(s,b),l&4&&-1<Ze.indexOf(s)){for(;_!==null;){var N=rl(_);if(N!==null&&Ma(N),N=ja(s,l,m,b),N===null&&cd(s,l,b,Pr,m),N===_)break;_=N}_!==null&&b.stopPropagation()}else cd(s,l,b,null,m)}}var Pr=null;function ja(s,l,m,b){if(Pr=null,s=nn(b),s=ia(s),s!==null)if(l=En(s),l===null)s=null;else if(m=l.tag,m===13){if(s=Yi(l),s!==null)return s;s=null}else if(m===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return Pr=s,null}function Wo(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jo()){case me:return 1;case ac:return 4;case Lt:case mi:return 16;case oc:return 536870912;default:return 16}default:return 16}}var hs=null,zo=null,Ba=null;function hc(){if(Ba)return Ba;var s,l=zo,m=l.length,b,_="value"in hs?hs.value:hs.textContent,N=_.length;for(s=0;s<m&&l[s]===_[s];s++);var M=m-s;for(b=1;b<=M&&l[m-b]===_[N-b];b++);return Ba=_.slice(s,1<b?1-b:void 0)}function St(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Qi(){return!0}function Ji(){return!1}function gr(s){function l(m,b,_,N,M){this._reactName=m,this._targetInst=_,this.type=b,this.nativeEvent=N,this.target=M,this.currentTarget=null;for(var H in s)s.hasOwnProperty(H)&&(m=s[H],this[H]=m?m(N):N[H]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Qi:Ji,this.isPropagationStopped=Ji,this}return Ae(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),l}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},le=gr(yi),ot=Ae({},yi,{view:0,detail:0}),Dr=gr(ot),wi,La,ea,Fa=Ae({},ot,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ea&&(ea&&s.type==="mousemove"?(wi=s.screenX-ea.screenX,La=s.screenY-ea.screenY):La=wi=0,ea=s),wi)},movementY:function(s){return"movementY"in s?s.movementY:La}}),fc=gr(Fa),Ho=Ae({},Fa,{dataTransfer:0}),Cr=gr(Ho),Go=Ae({},ot,{relatedTarget:0}),Wt=gr(Go),Ua=Ae({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Hs=gr(Ua),Pt=Ae({},yi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ye=gr(Pt),ed=Ae({},yi,{data:0}),jt=gr(ed),Gs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},td={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zn(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=td[s])?!!l[s]:!1}function ta(){return Zn}var mc=Ae({},ot,{key:function(s){if(s.key){var l=Gs[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=St(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?vi[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(s){return s.type==="keypress"?St(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?St(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),$o=gr(mc),gc=Ae({},Fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xo=gr(gc),rd=Ae({},ot,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),bi=gr(rd),Yo=Ae({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),nd=gr(Yo),ra=Ae({},Fa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),sd=gr(ra),ks=[9,13,27,32],Ei=v&&"CompositionEvent"in window,Wr=null;v&&"documentMode"in document&&(Wr=document.documentMode);var pc=v&&"TextEvent"in window&&!Wr,Bn=v&&(!Ei||Wr&&8<Wr&&11>=Wr),xc=" ",Va=!1;function yc(s,l){switch(s){case"keyup":return ks.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var qr=!1;function id(s,l){switch(s){case"compositionend":return qo(l);case"keypress":return l.which!==32?null:(Va=!0,xc);case"textInput":return s=l.data,s===xc&&Va?null:s;default:return null}}function Ko(s,l){if(qr)return s==="compositionend"||!Ei&&yc(s,l)?(s=hc(),Ba=zo=hs=null,qr=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Bn&&l.locale!=="ko"?null:l.data;default:return null}}var na={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vt(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!na[s.type]:l==="textarea"}function sa(s,l,m,b){nt(b),l=bc(l,"onChange"),0<l.length&&(m=new le("onChange","change",null,m,b),s.push({event:m,listeners:l}))}var O=null,n=null;function i(s){G0(s,0)}function o(s){var l=Ha(s);if(_s(l))return s}function c(s,l){if(s==="change")return l}var d=!1;if(v){var f;if(v){var p="oninput"in document;if(!p){var E=document.createElement("div");E.setAttribute("oninput","return;"),p=typeof E.oninput=="function"}f=p}else f=!1;d=f&&(!document.documentMode||9<document.documentMode)}function S(){O&&(O.detachEvent("onpropertychange",I),n=O=null)}function I(s){if(s.propertyName==="value"&&o(n)){var l=[];sa(l,n,s,nn(s)),Xt(i,l)}}function P(s,l,m){s==="focusin"?(S(),O=l,n=m,O.attachEvent("onpropertychange",I)):s==="focusout"&&S()}function B(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return o(n)}function V(s,l){if(s==="click")return o(l)}function G(s,l){if(s==="input"||s==="change")return o(l)}function Y(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var J=typeof Object.is=="function"?Object.is:Y;function oe(s,l){if(J(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var m=Object.keys(s),b=Object.keys(l);if(m.length!==b.length)return!1;for(b=0;b<m.length;b++){var _=m[b];if(!y.call(l,_)||!J(s[_],l[_]))return!1}return!0}function Ee(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ce(s,l){var m=Ee(s);s=0;for(var b;m;){if(m.nodeType===3){if(b=s+m.textContent.length,s<=l&&b>=l)return{node:m,offset:l-s};s=b}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Ee(m)}}function ye(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?ye(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function ft(){for(var s=window,l=mt();l instanceof s.HTMLIFrameElement;){try{var m=typeof l.contentWindow.location.href=="string"}catch{m=!1}if(m)s=l.contentWindow;else break;l=mt(s.document)}return l}function it(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function on(s){var l=ft(),m=s.focusedElem,b=s.selectionRange;if(l!==m&&m&&m.ownerDocument&&ye(m.ownerDocument.documentElement,m)){if(b!==null&&it(m)){if(l=b.start,s=b.end,s===void 0&&(s=l),"selectionStart"in m)m.selectionStart=l,m.selectionEnd=Math.min(s,m.value.length);else if(s=(l=m.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var _=m.textContent.length,N=Math.min(b.start,_);b=b.end===void 0?N:Math.min(b.end,_),!s.extend&&N>b&&(_=b,b=N,N=_),_=Ce(m,N);var M=Ce(m,b);_&&M&&(s.rangeCount!==1||s.anchorNode!==_.node||s.anchorOffset!==_.offset||s.focusNode!==M.node||s.focusOffset!==M.offset)&&(l=l.createRange(),l.setStart(_.node,_.offset),s.removeAllRanges(),N>b?(s.addRange(l),s.extend(M.node,M.offset)):(l.setEnd(M.node,M.offset),s.addRange(l)))}}for(l=[],s=m;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<l.length;m++)s=l[m],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Ln=v&&"documentMode"in document&&11>=document.documentMode,Ar=null,It=null,ar=null,Kr=!1;function $s(s,l,m){var b=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Kr||Ar==null||Ar!==mt(b)||(b=Ar,"selectionStart"in b&&it(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),ar&&oe(ar,b)||(ar=b,b=bc(It,"onSelect"),0<b.length&&(l=new le("onSelect","select",null,l,m),s.push({event:l,listeners:b}),l.target=Ar)))}function fs(s,l){var m={};return m[s.toLowerCase()]=l.toLowerCase(),m["Webkit"+s]="webkit"+l,m["Moz"+s]="moz"+l,m}var Ci={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionend:fs("Transition","TransitionEnd")},Zo={},B0={};v&&(B0=document.createElement("div").style,"AnimationEvent"in window||(delete Ci.animationend.animation,delete Ci.animationiteration.animation,delete Ci.animationstart.animation),"TransitionEvent"in window||delete Ci.transitionend.transition);function wc(s){if(Zo[s])return Zo[s];if(!Ci[s])return s;var l=Ci[s],m;for(m in l)if(l.hasOwnProperty(m)&&m in B0)return Zo[s]=l[m];return s}var L0=wc("animationend"),F0=wc("animationiteration"),U0=wc("animationstart"),V0=wc("transitionend"),W0=new Map,z0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(s,l){W0.set(s,l),h(l,[s])}for(var ad=0;ad<z0.length;ad++){var od=z0[ad],Gw=od.toLowerCase(),$w=od[0].toUpperCase()+od.slice(1);Ai(Gw,"on"+$w)}Ai(L0,"onAnimationEnd"),Ai(F0,"onAnimationIteration"),Ai(U0,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(V0,"onTransitionEnd"),g("onMouseEnter",["mouseout","mouseover"]),g("onMouseLeave",["mouseout","mouseover"]),g("onPointerEnter",["pointerout","pointerover"]),g("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function H0(s,l,m){var b=s.type||"unknown-event";s.currentTarget=m,sn(b,l,void 0,s),s.currentTarget=null}function G0(s,l){l=(l&4)!==0;for(var m=0;m<s.length;m++){var b=s[m],_=b.event;b=b.listeners;e:{var N=void 0;if(l)for(var M=b.length-1;0<=M;M--){var H=b[M],X=H.instance,ce=H.currentTarget;if(H=H.listener,X!==N&&_.isPropagationStopped())break e;H0(_,H,ce),N=X}else for(M=0;M<b.length;M++){if(H=b[M],X=H.instance,ce=H.currentTarget,H=H.listener,X!==N&&_.isPropagationStopped())break e;H0(_,H,ce),N=X}}}if(Ur)throw s=Oe,Ur=!1,Oe=null,s}function qt(s,l){var m=l[gd];m===void 0&&(m=l[gd]=new Set);var b=s+"__bubble";m.has(b)||($0(l,s,2,!1),m.add(b))}function ld(s,l,m){var b=0;l&&(b|=4),$0(m,s,b,l)}var vc="_reactListening"+Math.random().toString(36).slice(2);function Jo(s){if(!s[vc]){s[vc]=!0,a.forEach(function(m){m!=="selectionchange"&&(Xw.has(m)||ld(m,!1,s),ld(m,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[vc]||(l[vc]=!0,ld("selectionchange",!1,l))}}function $0(s,l,m,b){switch(Wo(l)){case 1:var _=dc;break;case 4:_=Zi;break;default:_=zs}m=_.bind(null,l,m,s),_=void 0,!Ts||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(_=!0),b?_!==void 0?s.addEventListener(l,m,{capture:!0,passive:_}):s.addEventListener(l,m,!0):_!==void 0?s.addEventListener(l,m,{passive:_}):s.addEventListener(l,m,!1)}function cd(s,l,m,b,_){var N=b;if((l&1)===0&&(l&2)===0&&b!==null)e:for(;;){if(b===null)return;var M=b.tag;if(M===3||M===4){var H=b.stateNode.containerInfo;if(H===_||H.nodeType===8&&H.parentNode===_)break;if(M===4)for(M=b.return;M!==null;){var X=M.tag;if((X===3||X===4)&&(X=M.stateNode.containerInfo,X===_||X.nodeType===8&&X.parentNode===_))return;M=M.return}for(;H!==null;){if(M=ia(H),M===null)return;if(X=M.tag,X===5||X===6){b=N=M;continue e}H=H.parentNode}}b=b.return}Xt(function(){var ce=N,we=nn(m),be=[];e:{var xe=W0.get(s);if(xe!==void 0){var De=le,Fe=s;switch(s){case"keypress":if(St(m)===0)break e;case"keydown":case"keyup":De=$o;break;case"focusin":Fe="focus",De=Wt;break;case"focusout":Fe="blur",De=Wt;break;case"beforeblur":case"afterblur":De=Wt;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=Cr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=bi;break;case L0:case F0:case U0:De=Hs;break;case V0:De=nd;break;case"scroll":De=Dr;break;case"wheel":De=sd;break;case"copy":case"cut":case"paste":De=Ye;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=Xo}var Ve=(l&4)!==0,Sr=!Ve&&s==="scroll",ne=Ve?xe!==null?xe+"Capture":null:xe;Ve=[];for(var K=ce,ie;K!==null;){ie=K;var Se=ie.stateNode;if(ie.tag===5&&Se!==null&&(ie=Se,ne!==null&&(Se=Ot(K,ne),Se!=null&&Ve.push(el(K,Se,ie)))),Sr)break;K=K.return}0<Ve.length&&(xe=new De(xe,Fe,null,m,we),be.push({event:xe,listeners:Ve}))}}if((l&7)===0){e:{if(xe=s==="mouseover"||s==="pointerover",De=s==="mouseout"||s==="pointerout",xe&&m!==On&&(Fe=m.relatedTarget||m.fromElement)&&(ia(Fe)||Fe[Xs]))break e;if((De||xe)&&(xe=we.window===we?we:(xe=we.ownerDocument)?xe.defaultView||xe.parentWindow:window,De?(Fe=m.relatedTarget||m.toElement,De=ce,Fe=Fe?ia(Fe):null,Fe!==null&&(Sr=En(Fe),Fe!==Sr||Fe.tag!==5&&Fe.tag!==6)&&(Fe=null)):(De=null,Fe=ce),De!==Fe)){if(Ve=fc,Se="onMouseLeave",ne="onMouseEnter",K="mouse",(s==="pointerout"||s==="pointerover")&&(Ve=Xo,Se="onPointerLeave",ne="onPointerEnter",K="pointer"),Sr=De==null?xe:Ha(De),ie=Fe==null?xe:Ha(Fe),xe=new Ve(Se,K+"leave",De,m,we),xe.target=Sr,xe.relatedTarget=ie,Se=null,ia(we)===ce&&(Ve=new Ve(ne,K+"enter",Fe,m,we),Ve.target=ie,Ve.relatedTarget=Sr,Se=Ve),Sr=Se,De&&Fe)t:{for(Ve=De,ne=Fe,K=0,ie=Ve;ie;ie=Wa(ie))K++;for(ie=0,Se=ne;Se;Se=Wa(Se))ie++;for(;0<K-ie;)Ve=Wa(Ve),K--;for(;0<ie-K;)ne=Wa(ne),ie--;for(;K--;){if(Ve===ne||ne!==null&&Ve===ne.alternate)break t;Ve=Wa(Ve),ne=Wa(ne)}Ve=null}else Ve=null;De!==null&&X0(be,xe,De,Ve,!1),Fe!==null&&Sr!==null&&X0(be,Sr,Fe,Ve,!0)}}e:{if(xe=ce?Ha(ce):window,De=xe.nodeName&&xe.nodeName.toLowerCase(),De==="select"||De==="input"&&xe.type==="file")var We=c;else if(vt(xe))if(d)We=G;else{We=B;var qe=P}else(De=xe.nodeName)&&De.toLowerCase()==="input"&&(xe.type==="checkbox"||xe.type==="radio")&&(We=V);if(We&&(We=We(s,ce))){sa(be,We,m,we);break e}qe&&qe(s,xe,ce),s==="focusout"&&(qe=xe._wrapperState)&&qe.controlled&&xe.type==="number"&&tt(xe,"number",xe.value)}switch(qe=ce?Ha(ce):window,s){case"focusin":(vt(qe)||qe.contentEditable==="true")&&(Ar=qe,It=ce,ar=null);break;case"focusout":ar=It=Ar=null;break;case"mousedown":Kr=!0;break;case"contextmenu":case"mouseup":case"dragend":Kr=!1,$s(be,m,we);break;case"selectionchange":if(Ln)break;case"keydown":case"keyup":$s(be,m,we)}var Ke;if(Ei)e:{switch(s){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else qr?yc(s,m)&&(rt="onCompositionEnd"):s==="keydown"&&m.keyCode===229&&(rt="onCompositionStart");rt&&(Bn&&m.locale!=="ko"&&(qr||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&qr&&(Ke=hc()):(hs=we,zo="value"in hs?hs.value:hs.textContent,qr=!0)),qe=bc(ce,rt),0<qe.length&&(rt=new jt(rt,s,null,m,we),be.push({event:rt,listeners:qe}),Ke?rt.data=Ke:(Ke=qo(m),Ke!==null&&(rt.data=Ke)))),(Ke=pc?id(s,m):Ko(s,m))&&(ce=bc(ce,"onBeforeInput"),0<ce.length&&(we=new jt("onBeforeInput","beforeinput",null,m,we),be.push({event:we,listeners:ce}),we.data=Ke))}G0(be,l)})}function el(s,l,m){return{instance:s,listener:l,currentTarget:m}}function bc(s,l){for(var m=l+"Capture",b=[];s!==null;){var _=s,N=_.stateNode;_.tag===5&&N!==null&&(_=N,N=Ot(s,m),N!=null&&b.unshift(el(s,N,_)),N=Ot(s,l),N!=null&&b.push(el(s,N,_))),s=s.return}return b}function Wa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function X0(s,l,m,b,_){for(var N=l._reactName,M=[];m!==null&&m!==b;){var H=m,X=H.alternate,ce=H.stateNode;if(X!==null&&X===b)break;H.tag===5&&ce!==null&&(H=ce,_?(X=Ot(m,N),X!=null&&M.unshift(el(m,X,H))):_||(X=Ot(m,N),X!=null&&M.push(el(m,X,H)))),m=m.return}M.length!==0&&s.push({event:l,listeners:M})}var Yw=/\r\n?/g,qw=/\u0000|\uFFFD/g;function Y0(s){return(typeof s=="string"?s:""+s).replace(Yw,`
`).replace(qw,"")}function Ec(s,l,m){if(l=Y0(l),Y0(s)!==l&&m)throw Error(r(425))}function Cc(){}var ud=null,dd=null;function hd(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var fd=typeof setTimeout=="function"?setTimeout:void 0,Kw=typeof clearTimeout=="function"?clearTimeout:void 0,q0=typeof Promise=="function"?Promise:void 0,Zw=typeof queueMicrotask=="function"?queueMicrotask:typeof q0<"u"?function(s){return q0.resolve(null).then(s).catch(Qw)}:fd;function Qw(s){setTimeout(function(){throw s})}function md(s,l){var m=l,b=0;do{var _=m.nextSibling;if(s.removeChild(m),_&&_.nodeType===8)if(m=_.data,m==="/$"){if(b===0){s.removeChild(_),ds(l);return}b--}else m!=="$"&&m!=="$?"&&m!=="$!"||b++;m=_}while(m);ds(l)}function Si(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function K0(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var m=s.data;if(m==="$"||m==="$!"||m==="$?"){if(l===0)return s;l--}else m==="/$"&&l++}s=s.previousSibling}return null}var za=Math.random().toString(36).slice(2),Os="__reactFiber$"+za,tl="__reactProps$"+za,Xs="__reactContainer$"+za,gd="__reactEvents$"+za,Jw="__reactListeners$"+za,e2="__reactHandles$"+za;function ia(s){var l=s[Os];if(l)return l;for(var m=s.parentNode;m;){if(l=m[Xs]||m[Os]){if(m=l.alternate,l.child!==null||m!==null&&m.child!==null)for(s=K0(s);s!==null;){if(m=s[Os])return m;s=K0(s)}return l}s=m,m=s.parentNode}return null}function rl(s){return s=s[Os]||s[Xs],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ha(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(r(33))}function Ac(s){return s[tl]||null}var pd=[],Ga=-1;function _i(s){return{current:s}}function Kt(s){0>Ga||(s.current=pd[Ga],pd[Ga]=null,Ga--)}function zt(s,l){Ga++,pd[Ga]=s.current,s.current=l}var Ni={},ln=_i(Ni),Cn=_i(!1),aa=Ni;function $a(s,l){var m=s.type.contextTypes;if(!m)return Ni;var b=s.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===l)return b.__reactInternalMemoizedMaskedChildContext;var _={},N;for(N in m)_[N]=l[N];return b&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=_),_}function An(s){return s=s.childContextTypes,s!=null}function Sc(){Kt(Cn),Kt(ln)}function Z0(s,l,m){if(ln.current!==Ni)throw Error(r(168));zt(ln,l),zt(Cn,m)}function Q0(s,l,m){var b=s.stateNode;if(l=l.childContextTypes,typeof b.getChildContext!="function")return m;b=b.getChildContext();for(var _ in b)if(!(_ in l))throw Error(r(108,yt(s)||"Unknown",_));return Ae({},m,b)}function _c(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ni,aa=ln.current,zt(ln,s),zt(Cn,Cn.current),!0}function J0(s,l,m){var b=s.stateNode;if(!b)throw Error(r(169));m?(s=Q0(s,l,aa),b.__reactInternalMemoizedMergedChildContext=s,Kt(Cn),Kt(ln),zt(ln,s)):Kt(Cn),zt(Cn,m)}var Ys=null,Nc=!1,xd=!1;function e1(s){Ys===null?Ys=[s]:Ys.push(s)}function t2(s){Nc=!0,e1(s)}function Ti(){if(!xd&&Ys!==null){xd=!0;var s=0,l=dt;try{var m=Ys;for(dt=1;s<m.length;s++){var b=m[s];do b=b(!0);while(b!==null)}Ys=null,Nc=!1}catch(_){throw Ys!==null&&(Ys=Ys.slice(s+1)),Pn(me,Ti),_}finally{dt=l,xd=!1}}return null}var Xa=[],Ya=0,Tc=null,Ic=0,Qn=[],Jn=0,oa=null,qs=1,Ks="";function la(s,l){Xa[Ya++]=Ic,Xa[Ya++]=Tc,Tc=s,Ic=l}function t1(s,l,m){Qn[Jn++]=qs,Qn[Jn++]=Ks,Qn[Jn++]=oa,oa=s;var b=qs;s=Ks;var _=32-pn(b)-1;b&=~(1<<_),m+=1;var N=32-pn(l)+_;if(30<N){var M=_-_%5;N=(b&(1<<M)-1).toString(32),b>>=M,_-=M,qs=1<<32-pn(l)+_|m<<_|b,Ks=N+s}else qs=1<<N|m<<_|b,Ks=s}function yd(s){s.return!==null&&(la(s,1),t1(s,1,0))}function wd(s){for(;s===Tc;)Tc=Xa[--Ya],Xa[Ya]=null,Ic=Xa[--Ya],Xa[Ya]=null;for(;s===oa;)oa=Qn[--Jn],Qn[Jn]=null,Ks=Qn[--Jn],Qn[Jn]=null,qs=Qn[--Jn],Qn[Jn]=null}var Fn=null,Un=null,tr=!1,ms=null;function r1(s,l){var m=ns(5,null,null,0);m.elementType="DELETED",m.stateNode=l,m.return=s,l=s.deletions,l===null?(s.deletions=[m],s.flags|=16):l.push(m)}function n1(s,l){switch(s.tag){case 5:var m=s.type;return l=l.nodeType!==1||m.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,Fn=s,Un=Si(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,Fn=s,Un=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(m=oa!==null?{id:qs,overflow:Ks}:null,s.memoizedState={dehydrated:l,treeContext:m,retryLane:1073741824},m=ns(18,null,null,0),m.stateNode=l,m.return=s,s.child=m,Fn=s,Un=null,!0):!1;default:return!1}}function vd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function bd(s){if(tr){var l=Un;if(l){var m=l;if(!n1(s,l)){if(vd(s))throw Error(r(418));l=Si(m.nextSibling);var b=Fn;l&&n1(s,l)?r1(b,m):(s.flags=s.flags&-4097|2,tr=!1,Fn=s)}}else{if(vd(s))throw Error(r(418));s.flags=s.flags&-4097|2,tr=!1,Fn=s}}}function s1(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Fn=s}function Rc(s){if(s!==Fn)return!1;if(!tr)return s1(s),tr=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!hd(s.type,s.memoizedProps)),l&&(l=Un)){if(vd(s))throw i1(),Error(r(418));for(;l;)r1(s,l),l=Si(l.nextSibling)}if(s1(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var m=s.data;if(m==="/$"){if(l===0){Un=Si(s.nextSibling);break e}l--}else m!=="$"&&m!=="$!"&&m!=="$?"||l++}s=s.nextSibling}Un=null}}else Un=Fn?Si(s.stateNode.nextSibling):null;return!0}function i1(){for(var s=Un;s;)s=Si(s.nextSibling)}function qa(){Un=Fn=null,tr=!1}function Ed(s){ms===null?ms=[s]:ms.push(s)}var r2=q.ReactCurrentBatchConfig;function nl(s,l,m){if(s=m.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(r(309));var b=m.stateNode}if(!b)throw Error(r(147,s));var _=b,N=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===N?l.ref:(l=function(M){var H=_.refs;M===null?delete H[N]:H[N]=M},l._stringRef=N,l)}if(typeof s!="string")throw Error(r(284));if(!m._owner)throw Error(r(290,s))}return s}function kc(s,l){throw s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function a1(s){var l=s._init;return l(s._payload)}function o1(s){function l(ne,K){if(s){var ie=ne.deletions;ie===null?(ne.deletions=[K],ne.flags|=16):ie.push(K)}}function m(ne,K){if(!s)return null;for(;K!==null;)l(ne,K),K=K.sibling;return null}function b(ne,K){for(ne=new Map;K!==null;)K.key!==null?ne.set(K.key,K):ne.set(K.index,K),K=K.sibling;return ne}function _(ne,K){return ne=ji(ne,K),ne.index=0,ne.sibling=null,ne}function N(ne,K,ie){return ne.index=ie,s?(ie=ne.alternate,ie!==null?(ie=ie.index,ie<K?(ne.flags|=2,K):ie):(ne.flags|=2,K)):(ne.flags|=1048576,K)}function M(ne){return s&&ne.alternate===null&&(ne.flags|=2),ne}function H(ne,K,ie,Se){return K===null||K.tag!==6?(K=fh(ie,ne.mode,Se),K.return=ne,K):(K=_(K,ie),K.return=ne,K)}function X(ne,K,ie,Se){var We=ie.type;return We===ee?we(ne,K,ie.props.children,Se,ie.key):K!==null&&(K.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===Re&&a1(We)===K.type)?(Se=_(K,ie.props),Se.ref=nl(ne,K,ie),Se.return=ne,Se):(Se=tu(ie.type,ie.key,ie.props,null,ne.mode,Se),Se.ref=nl(ne,K,ie),Se.return=ne,Se)}function ce(ne,K,ie,Se){return K===null||K.tag!==4||K.stateNode.containerInfo!==ie.containerInfo||K.stateNode.implementation!==ie.implementation?(K=mh(ie,ne.mode,Se),K.return=ne,K):(K=_(K,ie.children||[]),K.return=ne,K)}function we(ne,K,ie,Se,We){return K===null||K.tag!==7?(K=pa(ie,ne.mode,Se,We),K.return=ne,K):(K=_(K,ie),K.return=ne,K)}function be(ne,K,ie){if(typeof K=="string"&&K!==""||typeof K=="number")return K=fh(""+K,ne.mode,ie),K.return=ne,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Z:return ie=tu(K.type,K.key,K.props,null,ne.mode,ie),ie.ref=nl(ne,null,K),ie.return=ne,ie;case te:return K=mh(K,ne.mode,ie),K.return=ne,K;case Re:var Se=K._init;return be(ne,Se(K._payload),ie)}if($n(K)||Ne(K))return K=pa(K,ne.mode,ie,null),K.return=ne,K;kc(ne,K)}return null}function xe(ne,K,ie,Se){var We=K!==null?K.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return We!==null?null:H(ne,K,""+ie,Se);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Z:return ie.key===We?X(ne,K,ie,Se):null;case te:return ie.key===We?ce(ne,K,ie,Se):null;case Re:return We=ie._init,xe(ne,K,We(ie._payload),Se)}if($n(ie)||Ne(ie))return We!==null?null:we(ne,K,ie,Se,null);kc(ne,ie)}return null}function De(ne,K,ie,Se,We){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return ne=ne.get(ie)||null,H(K,ne,""+Se,We);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case Z:return ne=ne.get(Se.key===null?ie:Se.key)||null,X(K,ne,Se,We);case te:return ne=ne.get(Se.key===null?ie:Se.key)||null,ce(K,ne,Se,We);case Re:var qe=Se._init;return De(ne,K,ie,qe(Se._payload),We)}if($n(Se)||Ne(Se))return ne=ne.get(ie)||null,we(K,ne,Se,We,null);kc(K,Se)}return null}function Fe(ne,K,ie,Se){for(var We=null,qe=null,Ke=K,rt=K=0,Gr=null;Ke!==null&&rt<ie.length;rt++){Ke.index>rt?(Gr=Ke,Ke=null):Gr=Ke.sibling;var Tt=xe(ne,Ke,ie[rt],Se);if(Tt===null){Ke===null&&(Ke=Gr);break}s&&Ke&&Tt.alternate===null&&l(ne,Ke),K=N(Tt,K,rt),qe===null?We=Tt:qe.sibling=Tt,qe=Tt,Ke=Gr}if(rt===ie.length)return m(ne,Ke),tr&&la(ne,rt),We;if(Ke===null){for(;rt<ie.length;rt++)Ke=be(ne,ie[rt],Se),Ke!==null&&(K=N(Ke,K,rt),qe===null?We=Ke:qe.sibling=Ke,qe=Ke);return tr&&la(ne,rt),We}for(Ke=b(ne,Ke);rt<ie.length;rt++)Gr=De(Ke,ne,rt,ie[rt],Se),Gr!==null&&(s&&Gr.alternate!==null&&Ke.delete(Gr.key===null?rt:Gr.key),K=N(Gr,K,rt),qe===null?We=Gr:qe.sibling=Gr,qe=Gr);return s&&Ke.forEach(function(Bi){return l(ne,Bi)}),tr&&la(ne,rt),We}function Ve(ne,K,ie,Se){var We=Ne(ie);if(typeof We!="function")throw Error(r(150));if(ie=We.call(ie),ie==null)throw Error(r(151));for(var qe=We=null,Ke=K,rt=K=0,Gr=null,Tt=ie.next();Ke!==null&&!Tt.done;rt++,Tt=ie.next()){Ke.index>rt?(Gr=Ke,Ke=null):Gr=Ke.sibling;var Bi=xe(ne,Ke,Tt.value,Se);if(Bi===null){Ke===null&&(Ke=Gr);break}s&&Ke&&Bi.alternate===null&&l(ne,Ke),K=N(Bi,K,rt),qe===null?We=Bi:qe.sibling=Bi,qe=Bi,Ke=Gr}if(Tt.done)return m(ne,Ke),tr&&la(ne,rt),We;if(Ke===null){for(;!Tt.done;rt++,Tt=ie.next())Tt=be(ne,Tt.value,Se),Tt!==null&&(K=N(Tt,K,rt),qe===null?We=Tt:qe.sibling=Tt,qe=Tt);return tr&&la(ne,rt),We}for(Ke=b(ne,Ke);!Tt.done;rt++,Tt=ie.next())Tt=De(Ke,ne,rt,Tt.value,Se),Tt!==null&&(s&&Tt.alternate!==null&&Ke.delete(Tt.key===null?rt:Tt.key),K=N(Tt,K,rt),qe===null?We=Tt:qe.sibling=Tt,qe=Tt);return s&&Ke.forEach(function(M2){return l(ne,M2)}),tr&&la(ne,rt),We}function Sr(ne,K,ie,Se){if(typeof ie=="object"&&ie!==null&&ie.type===ee&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Z:e:{for(var We=ie.key,qe=K;qe!==null;){if(qe.key===We){if(We=ie.type,We===ee){if(qe.tag===7){m(ne,qe.sibling),K=_(qe,ie.props.children),K.return=ne,ne=K;break e}}else if(qe.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===Re&&a1(We)===qe.type){m(ne,qe.sibling),K=_(qe,ie.props),K.ref=nl(ne,qe,ie),K.return=ne,ne=K;break e}m(ne,qe);break}else l(ne,qe);qe=qe.sibling}ie.type===ee?(K=pa(ie.props.children,ne.mode,Se,ie.key),K.return=ne,ne=K):(Se=tu(ie.type,ie.key,ie.props,null,ne.mode,Se),Se.ref=nl(ne,K,ie),Se.return=ne,ne=Se)}return M(ne);case te:e:{for(qe=ie.key;K!==null;){if(K.key===qe)if(K.tag===4&&K.stateNode.containerInfo===ie.containerInfo&&K.stateNode.implementation===ie.implementation){m(ne,K.sibling),K=_(K,ie.children||[]),K.return=ne,ne=K;break e}else{m(ne,K);break}else l(ne,K);K=K.sibling}K=mh(ie,ne.mode,Se),K.return=ne,ne=K}return M(ne);case Re:return qe=ie._init,Sr(ne,K,qe(ie._payload),Se)}if($n(ie))return Fe(ne,K,ie,Se);if(Ne(ie))return Ve(ne,K,ie,Se);kc(ne,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,K!==null&&K.tag===6?(m(ne,K.sibling),K=_(K,ie),K.return=ne,ne=K):(m(ne,K),K=fh(ie,ne.mode,Se),K.return=ne,ne=K),M(ne)):m(ne,K)}return Sr}var Ka=o1(!0),l1=o1(!1),Oc=_i(null),Pc=null,Za=null,Cd=null;function Ad(){Cd=Za=Pc=null}function Sd(s){var l=Oc.current;Kt(Oc),s._currentValue=l}function _d(s,l,m){for(;s!==null;){var b=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,b!==null&&(b.childLanes|=l)):b!==null&&(b.childLanes&l)!==l&&(b.childLanes|=l),s===m)break;s=s.return}}function Qa(s,l){Pc=s,Cd=Za=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(Sn=!0),s.firstContext=null)}function es(s){var l=s._currentValue;if(Cd!==s)if(s={context:s,memoizedValue:l,next:null},Za===null){if(Pc===null)throw Error(r(308));Za=s,Pc.dependencies={lanes:0,firstContext:s}}else Za=Za.next=s;return l}var ca=null;function Nd(s){ca===null?ca=[s]:ca.push(s)}function c1(s,l,m,b){var _=l.interleaved;return _===null?(m.next=m,Nd(l)):(m.next=_.next,_.next=m),l.interleaved=m,Zs(s,b)}function Zs(s,l){s.lanes|=l;var m=s.alternate;for(m!==null&&(m.lanes|=l),m=s,s=s.return;s!==null;)s.childLanes|=l,m=s.alternate,m!==null&&(m.childLanes|=l),m=s,s=s.return;return m.tag===3?m.stateNode:null}var Ii=!1;function Td(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function u1(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Qs(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function Ri(s,l,m){var b=s.updateQueue;if(b===null)return null;if(b=b.shared,(_t&2)!==0){var _=b.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),b.pending=l,Zs(s,m)}return _=b.interleaved,_===null?(l.next=l,Nd(b)):(l.next=_.next,_.next=l),b.interleaved=l,Zs(s,m)}function Dc(s,l,m){if(l=l.updateQueue,l!==null&&(l=l.shared,(m&4194240)!==0)){var b=l.lanes;b&=s.pendingLanes,m|=b,l.lanes=m,mr(s,m)}}function d1(s,l){var m=s.updateQueue,b=s.alternate;if(b!==null&&(b=b.updateQueue,m===b)){var _=null,N=null;if(m=m.firstBaseUpdate,m!==null){do{var M={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};N===null?_=N=M:N=N.next=M,m=m.next}while(m!==null);N===null?_=N=l:N=N.next=l}else _=N=l;m={baseState:b.baseState,firstBaseUpdate:_,lastBaseUpdate:N,shared:b.shared,effects:b.effects},s.updateQueue=m;return}s=m.lastBaseUpdate,s===null?m.firstBaseUpdate=l:s.next=l,m.lastBaseUpdate=l}function Mc(s,l,m,b){var _=s.updateQueue;Ii=!1;var N=_.firstBaseUpdate,M=_.lastBaseUpdate,H=_.shared.pending;if(H!==null){_.shared.pending=null;var X=H,ce=X.next;X.next=null,M===null?N=ce:M.next=ce,M=X;var we=s.alternate;we!==null&&(we=we.updateQueue,H=we.lastBaseUpdate,H!==M&&(H===null?we.firstBaseUpdate=ce:H.next=ce,we.lastBaseUpdate=X))}if(N!==null){var be=_.baseState;M=0,we=ce=X=null,H=N;do{var xe=H.lane,De=H.eventTime;if((b&xe)===xe){we!==null&&(we=we.next={eventTime:De,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var Fe=s,Ve=H;switch(xe=l,De=m,Ve.tag){case 1:if(Fe=Ve.payload,typeof Fe=="function"){be=Fe.call(De,be,xe);break e}be=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Ve.payload,xe=typeof Fe=="function"?Fe.call(De,be,xe):Fe,xe==null)break e;be=Ae({},be,xe);break e;case 2:Ii=!0}}H.callback!==null&&H.lane!==0&&(s.flags|=64,xe=_.effects,xe===null?_.effects=[H]:xe.push(H))}else De={eventTime:De,lane:xe,tag:H.tag,payload:H.payload,callback:H.callback,next:null},we===null?(ce=we=De,X=be):we=we.next=De,M|=xe;if(H=H.next,H===null){if(H=_.shared.pending,H===null)break;xe=H,H=xe.next,xe.next=null,_.lastBaseUpdate=xe,_.shared.pending=null}}while(!0);if(we===null&&(X=be),_.baseState=X,_.firstBaseUpdate=ce,_.lastBaseUpdate=we,l=_.shared.interleaved,l!==null){_=l;do M|=_.lane,_=_.next;while(_!==l)}else N===null&&(_.shared.lanes=0);ha|=M,s.lanes=M,s.memoizedState=be}}function h1(s,l,m){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var b=s[l],_=b.callback;if(_!==null){if(b.callback=null,b=m,typeof _!="function")throw Error(r(191,_));_.call(b)}}}var sl={},Ps=_i(sl),il=_i(sl),al=_i(sl);function ua(s){if(s===sl)throw Error(r(174));return s}function Id(s,l){switch(zt(al,l),zt(il,s),zt(Ps,sl),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:ui(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=ui(l,s)}Kt(Ps),zt(Ps,l)}function Ja(){Kt(Ps),Kt(il),Kt(al)}function f1(s){ua(al.current);var l=ua(Ps.current),m=ui(l,s.type);l!==m&&(zt(il,s),zt(Ps,m))}function Rd(s){il.current===s&&(Kt(Ps),Kt(il))}var or=_i(0);function jc(s){for(var l=s;l!==null;){if(l.tag===13){var m=l.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var kd=[];function Od(){for(var s=0;s<kd.length;s++)kd[s]._workInProgressVersionPrimary=null;kd.length=0}var Bc=q.ReactCurrentDispatcher,Pd=q.ReactCurrentBatchConfig,da=0,lr=null,Mr=null,zr=null,Lc=!1,ol=!1,ll=0,n2=0;function cn(){throw Error(r(321))}function Dd(s,l){if(l===null)return!1;for(var m=0;m<l.length&&m<s.length;m++)if(!J(s[m],l[m]))return!1;return!0}function Md(s,l,m,b,_,N){if(da=N,lr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Bc.current=s===null||s.memoizedState===null?o2:l2,s=m(b,_),ol){N=0;do{if(ol=!1,ll=0,25<=N)throw Error(r(301));N+=1,zr=Mr=null,l.updateQueue=null,Bc.current=c2,s=m(b,_)}while(ol)}if(Bc.current=Vc,l=Mr!==null&&Mr.next!==null,da=0,zr=Mr=lr=null,Lc=!1,l)throw Error(r(300));return s}function jd(){var s=ll!==0;return ll=0,s}function Ds(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?lr.memoizedState=zr=s:zr=zr.next=s,zr}function ts(){if(Mr===null){var s=lr.alternate;s=s!==null?s.memoizedState:null}else s=Mr.next;var l=zr===null?lr.memoizedState:zr.next;if(l!==null)zr=l,Mr=s;else{if(s===null)throw Error(r(310));Mr=s,s={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},zr===null?lr.memoizedState=zr=s:zr=zr.next=s}return zr}function cl(s,l){return typeof l=="function"?l(s):l}function Bd(s){var l=ts(),m=l.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=s;var b=Mr,_=b.baseQueue,N=m.pending;if(N!==null){if(_!==null){var M=_.next;_.next=N.next,N.next=M}b.baseQueue=_=N,m.pending=null}if(_!==null){N=_.next,b=b.baseState;var H=M=null,X=null,ce=N;do{var we=ce.lane;if((da&we)===we)X!==null&&(X=X.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),b=ce.hasEagerState?ce.eagerState:s(b,ce.action);else{var be={lane:we,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};X===null?(H=X=be,M=b):X=X.next=be,lr.lanes|=we,ha|=we}ce=ce.next}while(ce!==null&&ce!==N);X===null?M=b:X.next=H,J(b,l.memoizedState)||(Sn=!0),l.memoizedState=b,l.baseState=M,l.baseQueue=X,m.lastRenderedState=b}if(s=m.interleaved,s!==null){_=s;do N=_.lane,lr.lanes|=N,ha|=N,_=_.next;while(_!==s)}else _===null&&(m.lanes=0);return[l.memoizedState,m.dispatch]}function Ld(s){var l=ts(),m=l.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=s;var b=m.dispatch,_=m.pending,N=l.memoizedState;if(_!==null){m.pending=null;var M=_=_.next;do N=s(N,M.action),M=M.next;while(M!==_);J(N,l.memoizedState)||(Sn=!0),l.memoizedState=N,l.baseQueue===null&&(l.baseState=N),m.lastRenderedState=N}return[N,b]}function m1(){}function g1(s,l){var m=lr,b=ts(),_=l(),N=!J(b.memoizedState,_);if(N&&(b.memoizedState=_,Sn=!0),b=b.queue,Fd(y1.bind(null,m,b,s),[s]),b.getSnapshot!==l||N||zr!==null&&zr.memoizedState.tag&1){if(m.flags|=2048,ul(9,x1.bind(null,m,b,_,l),void 0,null),Hr===null)throw Error(r(349));(da&30)!==0||p1(m,l,_)}return _}function p1(s,l,m){s.flags|=16384,s={getSnapshot:l,value:m},l=lr.updateQueue,l===null?(l={lastEffect:null,stores:null},lr.updateQueue=l,l.stores=[s]):(m=l.stores,m===null?l.stores=[s]:m.push(s))}function x1(s,l,m,b){l.value=m,l.getSnapshot=b,w1(l)&&v1(s)}function y1(s,l,m){return m(function(){w1(l)&&v1(s)})}function w1(s){var l=s.getSnapshot;s=s.value;try{var m=l();return!J(s,m)}catch{return!0}}function v1(s){var l=Zs(s,1);l!==null&&ys(l,s,1,-1)}function b1(s){var l=Ds();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:s},l.queue=s,s=s.dispatch=a2.bind(null,lr,s),[l.memoizedState,s]}function ul(s,l,m,b){return s={tag:s,create:l,destroy:m,deps:b,next:null},l=lr.updateQueue,l===null?(l={lastEffect:null,stores:null},lr.updateQueue=l,l.lastEffect=s.next=s):(m=l.lastEffect,m===null?l.lastEffect=s.next=s:(b=m.next,m.next=s,s.next=b,l.lastEffect=s)),s}function E1(){return ts().memoizedState}function Fc(s,l,m,b){var _=Ds();lr.flags|=s,_.memoizedState=ul(1|l,m,void 0,b===void 0?null:b)}function Uc(s,l,m,b){var _=ts();b=b===void 0?null:b;var N=void 0;if(Mr!==null){var M=Mr.memoizedState;if(N=M.destroy,b!==null&&Dd(b,M.deps)){_.memoizedState=ul(l,m,N,b);return}}lr.flags|=s,_.memoizedState=ul(1|l,m,N,b)}function C1(s,l){return Fc(8390656,8,s,l)}function Fd(s,l){return Uc(2048,8,s,l)}function A1(s,l){return Uc(4,2,s,l)}function S1(s,l){return Uc(4,4,s,l)}function _1(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function N1(s,l,m){return m=m!=null?m.concat([s]):null,Uc(4,4,_1.bind(null,l,s),m)}function Ud(){}function T1(s,l){var m=ts();l=l===void 0?null:l;var b=m.memoizedState;return b!==null&&l!==null&&Dd(l,b[1])?b[0]:(m.memoizedState=[s,l],s)}function I1(s,l){var m=ts();l=l===void 0?null:l;var b=m.memoizedState;return b!==null&&l!==null&&Dd(l,b[1])?b[0]:(s=s(),m.memoizedState=[s,l],s)}function R1(s,l,m){return(da&21)===0?(s.baseState&&(s.baseState=!1,Sn=!0),s.memoizedState=m):(J(m,l)||(m=kr(),lr.lanes|=m,ha|=m,s.baseState=!0),l)}function s2(s,l){var m=dt;dt=m!==0&&4>m?m:4,s(!0);var b=Pd.transition;Pd.transition={};try{s(!1),l()}finally{dt=m,Pd.transition=b}}function k1(){return ts().memoizedState}function i2(s,l,m){var b=Di(s);if(m={lane:b,action:m,hasEagerState:!1,eagerState:null,next:null},O1(s))P1(l,m);else if(m=c1(s,l,m,b),m!==null){var _=yn();ys(m,s,b,_),D1(m,l,b)}}function a2(s,l,m){var b=Di(s),_={lane:b,action:m,hasEagerState:!1,eagerState:null,next:null};if(O1(s))P1(l,_);else{var N=s.alternate;if(s.lanes===0&&(N===null||N.lanes===0)&&(N=l.lastRenderedReducer,N!==null))try{var M=l.lastRenderedState,H=N(M,m);if(_.hasEagerState=!0,_.eagerState=H,J(H,M)){var X=l.interleaved;X===null?(_.next=_,Nd(l)):(_.next=X.next,X.next=_),l.interleaved=_;return}}catch{}finally{}m=c1(s,l,_,b),m!==null&&(_=yn(),ys(m,s,b,_),D1(m,l,b))}}function O1(s){var l=s.alternate;return s===lr||l!==null&&l===lr}function P1(s,l){ol=Lc=!0;var m=s.pending;m===null?l.next=l:(l.next=m.next,m.next=l),s.pending=l}function D1(s,l,m){if((m&4194240)!==0){var b=l.lanes;b&=s.pendingLanes,m|=b,l.lanes=m,mr(s,m)}}var Vc={readContext:es,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},o2={readContext:es,useCallback:function(s,l){return Ds().memoizedState=[s,l===void 0?null:l],s},useContext:es,useEffect:C1,useImperativeHandle:function(s,l,m){return m=m!=null?m.concat([s]):null,Fc(4194308,4,_1.bind(null,l,s),m)},useLayoutEffect:function(s,l){return Fc(4194308,4,s,l)},useInsertionEffect:function(s,l){return Fc(4,2,s,l)},useMemo:function(s,l){var m=Ds();return l=l===void 0?null:l,s=s(),m.memoizedState=[s,l],s},useReducer:function(s,l,m){var b=Ds();return l=m!==void 0?m(l):l,b.memoizedState=b.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},b.queue=s,s=s.dispatch=i2.bind(null,lr,s),[b.memoizedState,s]},useRef:function(s){var l=Ds();return s={current:s},l.memoizedState=s},useState:b1,useDebugValue:Ud,useDeferredValue:function(s){return Ds().memoizedState=s},useTransition:function(){var s=b1(!1),l=s[0];return s=s2.bind(null,s[1]),Ds().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,m){var b=lr,_=Ds();if(tr){if(m===void 0)throw Error(r(407));m=m()}else{if(m=l(),Hr===null)throw Error(r(349));(da&30)!==0||p1(b,l,m)}_.memoizedState=m;var N={value:m,getSnapshot:l};return _.queue=N,C1(y1.bind(null,b,N,s),[s]),b.flags|=2048,ul(9,x1.bind(null,b,N,m,l),void 0,null),m},useId:function(){var s=Ds(),l=Hr.identifierPrefix;if(tr){var m=Ks,b=qs;m=(b&~(1<<32-pn(b)-1)).toString(32)+m,l=":"+l+"R"+m,m=ll++,0<m&&(l+="H"+m.toString(32)),l+=":"}else m=n2++,l=":"+l+"r"+m.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},l2={readContext:es,useCallback:T1,useContext:es,useEffect:Fd,useImperativeHandle:N1,useInsertionEffect:A1,useLayoutEffect:S1,useMemo:I1,useReducer:Bd,useRef:E1,useState:function(){return Bd(cl)},useDebugValue:Ud,useDeferredValue:function(s){var l=ts();return R1(l,Mr.memoizedState,s)},useTransition:function(){var s=Bd(cl)[0],l=ts().memoizedState;return[s,l]},useMutableSource:m1,useSyncExternalStore:g1,useId:k1,unstable_isNewReconciler:!1},c2={readContext:es,useCallback:T1,useContext:es,useEffect:Fd,useImperativeHandle:N1,useInsertionEffect:A1,useLayoutEffect:S1,useMemo:I1,useReducer:Ld,useRef:E1,useState:function(){return Ld(cl)},useDebugValue:Ud,useDeferredValue:function(s){var l=ts();return Mr===null?l.memoizedState=s:R1(l,Mr.memoizedState,s)},useTransition:function(){var s=Ld(cl)[0],l=ts().memoizedState;return[s,l]},useMutableSource:m1,useSyncExternalStore:g1,useId:k1,unstable_isNewReconciler:!1};function gs(s,l){if(s&&s.defaultProps){l=Ae({},l),s=s.defaultProps;for(var m in s)l[m]===void 0&&(l[m]=s[m]);return l}return l}function Vd(s,l,m,b){l=s.memoizedState,m=m(b,l),m=m==null?l:Ae({},l,m),s.memoizedState=m,s.lanes===0&&(s.updateQueue.baseState=m)}var Wc={isMounted:function(s){return(s=s._reactInternals)?En(s)===s:!1},enqueueSetState:function(s,l,m){s=s._reactInternals;var b=yn(),_=Di(s),N=Qs(b,_);N.payload=l,m!=null&&(N.callback=m),l=Ri(s,N,_),l!==null&&(ys(l,s,_,b),Dc(l,s,_))},enqueueReplaceState:function(s,l,m){s=s._reactInternals;var b=yn(),_=Di(s),N=Qs(b,_);N.tag=1,N.payload=l,m!=null&&(N.callback=m),l=Ri(s,N,_),l!==null&&(ys(l,s,_,b),Dc(l,s,_))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var m=yn(),b=Di(s),_=Qs(m,b);_.tag=2,l!=null&&(_.callback=l),l=Ri(s,_,b),l!==null&&(ys(l,s,b,m),Dc(l,s,b))}};function M1(s,l,m,b,_,N,M){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(b,N,M):l.prototype&&l.prototype.isPureReactComponent?!oe(m,b)||!oe(_,N):!0}function j1(s,l,m){var b=!1,_=Ni,N=l.contextType;return typeof N=="object"&&N!==null?N=es(N):(_=An(l)?aa:ln.current,b=l.contextTypes,N=(b=b!=null)?$a(s,_):Ni),l=new l(m,N),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Wc,s.stateNode=l,l._reactInternals=s,b&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=_,s.__reactInternalMemoizedMaskedChildContext=N),l}function B1(s,l,m,b){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(m,b),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(m,b),l.state!==s&&Wc.enqueueReplaceState(l,l.state,null)}function Wd(s,l,m,b){var _=s.stateNode;_.props=m,_.state=s.memoizedState,_.refs={},Td(s);var N=l.contextType;typeof N=="object"&&N!==null?_.context=es(N):(N=An(l)?aa:ln.current,_.context=$a(s,N)),_.state=s.memoizedState,N=l.getDerivedStateFromProps,typeof N=="function"&&(Vd(s,l,N,m),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(l=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),l!==_.state&&Wc.enqueueReplaceState(_,_.state,null),Mc(s,m,_,b),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308)}function eo(s,l){try{var m="",b=l;do m+=ct(b),b=b.return;while(b);var _=m}catch(N){_=`
Error generating stack: `+N.message+`
`+N.stack}return{value:s,source:l,stack:_,digest:null}}function zd(s,l,m){return{value:s,source:null,stack:m??null,digest:l??null}}function Hd(s,l){try{console.error(l.value)}catch(m){setTimeout(function(){throw m})}}var u2=typeof WeakMap=="function"?WeakMap:Map;function L1(s,l,m){m=Qs(-1,m),m.tag=3,m.payload={element:null};var b=l.value;return m.callback=function(){qc||(qc=!0,ih=b),Hd(s,l)},m}function F1(s,l,m){m=Qs(-1,m),m.tag=3;var b=s.type.getDerivedStateFromError;if(typeof b=="function"){var _=l.value;m.payload=function(){return b(_)},m.callback=function(){Hd(s,l)}}var N=s.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(m.callback=function(){Hd(s,l),typeof b!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var M=l.stack;this.componentDidCatch(l.value,{componentStack:M!==null?M:""})}),m}function U1(s,l,m){var b=s.pingCache;if(b===null){b=s.pingCache=new u2;var _=new Set;b.set(l,_)}else _=b.get(l),_===void 0&&(_=new Set,b.set(l,_));_.has(m)||(_.add(m),s=A2.bind(null,s,l,m),l.then(s,s))}function V1(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function W1(s,l,m,b,_){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(l=Qs(-1,1),l.tag=2,Ri(m,l,1))),m.lanes|=1),s):(s.flags|=65536,s.lanes=_,s)}var d2=q.ReactCurrentOwner,Sn=!1;function xn(s,l,m,b){l.child=s===null?l1(l,null,m,b):Ka(l,s.child,m,b)}function z1(s,l,m,b,_){m=m.render;var N=l.ref;return Qa(l,_),b=Md(s,l,m,b,N,_),m=jd(),s!==null&&!Sn?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~_,Js(s,l,_)):(tr&&m&&yd(l),l.flags|=1,xn(s,l,b,_),l.child)}function H1(s,l,m,b,_){if(s===null){var N=m.type;return typeof N=="function"&&!hh(N)&&N.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(l.tag=15,l.type=N,G1(s,l,N,b,_)):(s=tu(m.type,null,b,l,l.mode,_),s.ref=l.ref,s.return=l,l.child=s)}if(N=s.child,(s.lanes&_)===0){var M=N.memoizedProps;if(m=m.compare,m=m!==null?m:oe,m(M,b)&&s.ref===l.ref)return Js(s,l,_)}return l.flags|=1,s=ji(N,b),s.ref=l.ref,s.return=l,l.child=s}function G1(s,l,m,b,_){if(s!==null){var N=s.memoizedProps;if(oe(N,b)&&s.ref===l.ref)if(Sn=!1,l.pendingProps=b=N,(s.lanes&_)!==0)(s.flags&131072)!==0&&(Sn=!0);else return l.lanes=s.lanes,Js(s,l,_)}return Gd(s,l,m,b,_)}function $1(s,l,m){var b=l.pendingProps,_=b.children,N=s!==null?s.memoizedState:null;if(b.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},zt(ro,Vn),Vn|=m;else{if((m&1073741824)===0)return s=N!==null?N.baseLanes|m:m,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,zt(ro,Vn),Vn|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=N!==null?N.baseLanes:m,zt(ro,Vn),Vn|=b}else N!==null?(b=N.baseLanes|m,l.memoizedState=null):b=m,zt(ro,Vn),Vn|=b;return xn(s,l,_,m),l.child}function X1(s,l){var m=l.ref;(s===null&&m!==null||s!==null&&s.ref!==m)&&(l.flags|=512,l.flags|=2097152)}function Gd(s,l,m,b,_){var N=An(m)?aa:ln.current;return N=$a(l,N),Qa(l,_),m=Md(s,l,m,b,N,_),b=jd(),s!==null&&!Sn?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~_,Js(s,l,_)):(tr&&b&&yd(l),l.flags|=1,xn(s,l,m,_),l.child)}function Y1(s,l,m,b,_){if(An(m)){var N=!0;_c(l)}else N=!1;if(Qa(l,_),l.stateNode===null)Hc(s,l),j1(l,m,b),Wd(l,m,b,_),b=!0;else if(s===null){var M=l.stateNode,H=l.memoizedProps;M.props=H;var X=M.context,ce=m.contextType;typeof ce=="object"&&ce!==null?ce=es(ce):(ce=An(m)?aa:ln.current,ce=$a(l,ce));var we=m.getDerivedStateFromProps,be=typeof we=="function"||typeof M.getSnapshotBeforeUpdate=="function";be||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(H!==b||X!==ce)&&B1(l,M,b,ce),Ii=!1;var xe=l.memoizedState;M.state=xe,Mc(l,b,M,_),X=l.memoizedState,H!==b||xe!==X||Cn.current||Ii?(typeof we=="function"&&(Vd(l,m,we,b),X=l.memoizedState),(H=Ii||M1(l,m,H,b,xe,X,ce))?(be||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(l.flags|=4194308)):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=b,l.memoizedState=X),M.props=b,M.state=X,M.context=ce,b=H):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),b=!1)}else{M=l.stateNode,u1(s,l),H=l.memoizedProps,ce=l.type===l.elementType?H:gs(l.type,H),M.props=ce,be=l.pendingProps,xe=M.context,X=m.contextType,typeof X=="object"&&X!==null?X=es(X):(X=An(m)?aa:ln.current,X=$a(l,X));var De=m.getDerivedStateFromProps;(we=typeof De=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(H!==be||xe!==X)&&B1(l,M,b,X),Ii=!1,xe=l.memoizedState,M.state=xe,Mc(l,b,M,_);var Fe=l.memoizedState;H!==be||xe!==Fe||Cn.current||Ii?(typeof De=="function"&&(Vd(l,m,De,b),Fe=l.memoizedState),(ce=Ii||M1(l,m,ce,b,xe,Fe,X)||!1)?(we||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(b,Fe,X),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(b,Fe,X)),typeof M.componentDidUpdate=="function"&&(l.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof M.componentDidUpdate!="function"||H===s.memoizedProps&&xe===s.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||H===s.memoizedProps&&xe===s.memoizedState||(l.flags|=1024),l.memoizedProps=b,l.memoizedState=Fe),M.props=b,M.state=Fe,M.context=X,b=ce):(typeof M.componentDidUpdate!="function"||H===s.memoizedProps&&xe===s.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||H===s.memoizedProps&&xe===s.memoizedState||(l.flags|=1024),b=!1)}return $d(s,l,m,b,N,_)}function $d(s,l,m,b,_,N){X1(s,l);var M=(l.flags&128)!==0;if(!b&&!M)return _&&J0(l,m,!1),Js(s,l,N);b=l.stateNode,d2.current=l;var H=M&&typeof m.getDerivedStateFromError!="function"?null:b.render();return l.flags|=1,s!==null&&M?(l.child=Ka(l,s.child,null,N),l.child=Ka(l,null,H,N)):xn(s,l,H,N),l.memoizedState=b.state,_&&J0(l,m,!0),l.child}function q1(s){var l=s.stateNode;l.pendingContext?Z0(s,l.pendingContext,l.pendingContext!==l.context):l.context&&Z0(s,l.context,!1),Id(s,l.containerInfo)}function K1(s,l,m,b,_){return qa(),Ed(_),l.flags|=256,xn(s,l,m,b),l.child}var Xd={dehydrated:null,treeContext:null,retryLane:0};function Yd(s){return{baseLanes:s,cachePool:null,transitions:null}}function Z1(s,l,m){var b=l.pendingProps,_=or.current,N=!1,M=(l.flags&128)!==0,H;if((H=M)||(H=s!==null&&s.memoizedState===null?!1:(_&2)!==0),H?(N=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(_|=1),zt(or,_&1),s===null)return bd(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(M=b.children,s=b.fallback,N?(b=l.mode,N=l.child,M={mode:"hidden",children:M},(b&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=M):N=ru(M,b,0,null),s=pa(s,b,m,null),N.return=l,s.return=l,N.sibling=s,l.child=N,l.child.memoizedState=Yd(m),l.memoizedState=Xd,s):qd(l,M));if(_=s.memoizedState,_!==null&&(H=_.dehydrated,H!==null))return h2(s,l,M,b,H,_,m);if(N){N=b.fallback,M=l.mode,_=s.child,H=_.sibling;var X={mode:"hidden",children:b.children};return(M&1)===0&&l.child!==_?(b=l.child,b.childLanes=0,b.pendingProps=X,l.deletions=null):(b=ji(_,X),b.subtreeFlags=_.subtreeFlags&14680064),H!==null?N=ji(H,N):(N=pa(N,M,m,null),N.flags|=2),N.return=l,b.return=l,b.sibling=N,l.child=b,b=N,N=l.child,M=s.child.memoizedState,M=M===null?Yd(m):{baseLanes:M.baseLanes|m,cachePool:null,transitions:M.transitions},N.memoizedState=M,N.childLanes=s.childLanes&~m,l.memoizedState=Xd,b}return N=s.child,s=N.sibling,b=ji(N,{mode:"visible",children:b.children}),(l.mode&1)===0&&(b.lanes=m),b.return=l,b.sibling=null,s!==null&&(m=l.deletions,m===null?(l.deletions=[s],l.flags|=16):m.push(s)),l.child=b,l.memoizedState=null,b}function qd(s,l){return l=ru({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function zc(s,l,m,b){return b!==null&&Ed(b),Ka(l,s.child,null,m),s=qd(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function h2(s,l,m,b,_,N,M){if(m)return l.flags&256?(l.flags&=-257,b=zd(Error(r(422))),zc(s,l,M,b)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(N=b.fallback,_=l.mode,b=ru({mode:"visible",children:b.children},_,0,null),N=pa(N,_,M,null),N.flags|=2,b.return=l,N.return=l,b.sibling=N,l.child=b,(l.mode&1)!==0&&Ka(l,s.child,null,M),l.child.memoizedState=Yd(M),l.memoizedState=Xd,N);if((l.mode&1)===0)return zc(s,l,M,null);if(_.data==="$!"){if(b=_.nextSibling&&_.nextSibling.dataset,b)var H=b.dgst;return b=H,N=Error(r(419)),b=zd(N,b,void 0),zc(s,l,M,b)}if(H=(M&s.childLanes)!==0,Sn||H){if(b=Hr,b!==null){switch(M&-M){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(b.suspendedLanes|M))!==0?0:_,_!==0&&_!==N.retryLane&&(N.retryLane=_,Zs(s,_),ys(b,s,_,-1))}return dh(),b=zd(Error(r(421))),zc(s,l,M,b)}return _.data==="$?"?(l.flags|=128,l.child=s.child,l=S2.bind(null,s),_._reactRetry=l,null):(s=N.treeContext,Un=Si(_.nextSibling),Fn=l,tr=!0,ms=null,s!==null&&(Qn[Jn++]=qs,Qn[Jn++]=Ks,Qn[Jn++]=oa,qs=s.id,Ks=s.overflow,oa=l),l=qd(l,b.children),l.flags|=4096,l)}function Q1(s,l,m){s.lanes|=l;var b=s.alternate;b!==null&&(b.lanes|=l),_d(s.return,l,m)}function Kd(s,l,m,b,_){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:b,tail:m,tailMode:_}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=b,N.tail=m,N.tailMode=_)}function J1(s,l,m){var b=l.pendingProps,_=b.revealOrder,N=b.tail;if(xn(s,l,b.children,m),b=or.current,(b&2)!==0)b=b&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Q1(s,m,l);else if(s.tag===19)Q1(s,m,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}b&=1}if(zt(or,b),(l.mode&1)===0)l.memoizedState=null;else switch(_){case"forwards":for(m=l.child,_=null;m!==null;)s=m.alternate,s!==null&&jc(s)===null&&(_=m),m=m.sibling;m=_,m===null?(_=l.child,l.child=null):(_=m.sibling,m.sibling=null),Kd(l,!1,_,m,N);break;case"backwards":for(m=null,_=l.child,l.child=null;_!==null;){if(s=_.alternate,s!==null&&jc(s)===null){l.child=_;break}s=_.sibling,_.sibling=m,m=_,_=s}Kd(l,!0,m,null,N);break;case"together":Kd(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Hc(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function Js(s,l,m){if(s!==null&&(l.dependencies=s.dependencies),ha|=l.lanes,(m&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,m=ji(s,s.pendingProps),l.child=m,m.return=l;s.sibling!==null;)s=s.sibling,m=m.sibling=ji(s,s.pendingProps),m.return=l;m.sibling=null}return l.child}function f2(s,l,m){switch(l.tag){case 3:q1(l),qa();break;case 5:f1(l);break;case 1:An(l.type)&&_c(l);break;case 4:Id(l,l.stateNode.containerInfo);break;case 10:var b=l.type._context,_=l.memoizedProps.value;zt(Oc,b._currentValue),b._currentValue=_;break;case 13:if(b=l.memoizedState,b!==null)return b.dehydrated!==null?(zt(or,or.current&1),l.flags|=128,null):(m&l.child.childLanes)!==0?Z1(s,l,m):(zt(or,or.current&1),s=Js(s,l,m),s!==null?s.sibling:null);zt(or,or.current&1);break;case 19:if(b=(m&l.childLanes)!==0,(s.flags&128)!==0){if(b)return J1(s,l,m);l.flags|=128}if(_=l.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),zt(or,or.current),b)break;return null;case 22:case 23:return l.lanes=0,$1(s,l,m)}return Js(s,l,m)}var em,Zd,tm,rm;em=function(s,l){for(var m=l.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===l)break;for(;m.sibling===null;){if(m.return===null||m.return===l)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Zd=function(){},tm=function(s,l,m,b){var _=s.memoizedProps;if(_!==b){s=l.stateNode,ua(Ps.current);var N=null;switch(m){case"input":_=vn(s,_),b=vn(s,b),N=[];break;case"select":_=Ae({},_,{value:void 0}),b=Ae({},b,{value:void 0}),N=[];break;case"textarea":_=hr(s,_),b=hr(s,b),N=[];break;default:typeof _.onClick!="function"&&typeof b.onClick=="function"&&(s.onclick=Cc)}Et(m,b);var M;m=null;for(ce in _)if(!b.hasOwnProperty(ce)&&_.hasOwnProperty(ce)&&_[ce]!=null)if(ce==="style"){var H=_[ce];for(M in H)H.hasOwnProperty(M)&&(m||(m={}),m[M]="")}else ce!=="dangerouslySetInnerHTML"&&ce!=="children"&&ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&ce!=="autoFocus"&&(u.hasOwnProperty(ce)?N||(N=[]):(N=N||[]).push(ce,null));for(ce in b){var X=b[ce];if(H=_!=null?_[ce]:void 0,b.hasOwnProperty(ce)&&X!==H&&(X!=null||H!=null))if(ce==="style")if(H){for(M in H)!H.hasOwnProperty(M)||X&&X.hasOwnProperty(M)||(m||(m={}),m[M]="");for(M in X)X.hasOwnProperty(M)&&H[M]!==X[M]&&(m||(m={}),m[M]=X[M])}else m||(N||(N=[]),N.push(ce,m)),m=X;else ce==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,H=H?H.__html:void 0,X!=null&&H!==X&&(N=N||[]).push(ce,X)):ce==="children"?typeof X!="string"&&typeof X!="number"||(N=N||[]).push(ce,""+X):ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&(u.hasOwnProperty(ce)?(X!=null&&ce==="onScroll"&&qt("scroll",s),N||H===X||(N=[])):(N=N||[]).push(ce,X))}m&&(N=N||[]).push("style",m);var ce=N;(l.updateQueue=ce)&&(l.flags|=4)}},rm=function(s,l,m,b){m!==b&&(l.flags|=4)};function dl(s,l){if(!tr)switch(s.tailMode){case"hidden":l=s.tail;for(var m=null;l!==null;)l.alternate!==null&&(m=l),l=l.sibling;m===null?s.tail=null:m.sibling=null;break;case"collapsed":m=s.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:b.sibling=null}}function un(s){var l=s.alternate!==null&&s.alternate.child===s.child,m=0,b=0;if(l)for(var _=s.child;_!==null;)m|=_.lanes|_.childLanes,b|=_.subtreeFlags&14680064,b|=_.flags&14680064,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)m|=_.lanes|_.childLanes,b|=_.subtreeFlags,b|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=b,s.childLanes=m,l}function m2(s,l,m){var b=l.pendingProps;switch(wd(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(l),null;case 1:return An(l.type)&&Sc(),un(l),null;case 3:return b=l.stateNode,Ja(),Kt(Cn),Kt(ln),Od(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(s===null||s.child===null)&&(Rc(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ms!==null&&(lh(ms),ms=null))),Zd(s,l),un(l),null;case 5:Rd(l);var _=ua(al.current);if(m=l.type,s!==null&&l.stateNode!=null)tm(s,l,m,b,_),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!b){if(l.stateNode===null)throw Error(r(166));return un(l),null}if(s=ua(Ps.current),Rc(l)){b=l.stateNode,m=l.type;var N=l.memoizedProps;switch(b[Os]=l,b[tl]=N,s=(l.mode&1)!==0,m){case"dialog":qt("cancel",b),qt("close",b);break;case"iframe":case"object":case"embed":qt("load",b);break;case"video":case"audio":for(_=0;_<Qo.length;_++)qt(Qo[_],b);break;case"source":qt("error",b);break;case"img":case"image":case"link":qt("error",b),qt("load",b);break;case"details":qt("toggle",b);break;case"input":fn(b,N),qt("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!N.multiple},qt("invalid",b);break;case"textarea":Xn(b,N),qt("invalid",b)}Et(m,N),_=null;for(var M in N)if(N.hasOwnProperty(M)){var H=N[M];M==="children"?typeof H=="string"?b.textContent!==H&&(N.suppressHydrationWarning!==!0&&Ec(b.textContent,H,s),_=["children",H]):typeof H=="number"&&b.textContent!==""+H&&(N.suppressHydrationWarning!==!0&&Ec(b.textContent,H,s),_=["children",""+H]):u.hasOwnProperty(M)&&H!=null&&M==="onScroll"&&qt("scroll",b)}switch(m){case"input":br(b),Nt(b,N,!0);break;case"textarea":br(b),ci(b);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(b.onclick=Cc)}b=_,l.updateQueue=b,b!==null&&(l.flags|=4)}else{M=_.nodeType===9?_:_.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Rr(m)),s==="http://www.w3.org/1999/xhtml"?m==="script"?(s=M.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof b.is=="string"?s=M.createElement(m,{is:b.is}):(s=M.createElement(m),m==="select"&&(M=s,b.multiple?M.multiple=!0:b.size&&(M.size=b.size))):s=M.createElementNS(s,m),s[Os]=l,s[tl]=b,em(s,l,!1,!1),l.stateNode=s;e:{switch(M=Mt(m,b),m){case"dialog":qt("cancel",s),qt("close",s),_=b;break;case"iframe":case"object":case"embed":qt("load",s),_=b;break;case"video":case"audio":for(_=0;_<Qo.length;_++)qt(Qo[_],s);_=b;break;case"source":qt("error",s),_=b;break;case"img":case"image":case"link":qt("error",s),qt("load",s),_=b;break;case"details":qt("toggle",s),_=b;break;case"input":fn(s,b),_=vn(s,b),qt("invalid",s);break;case"option":_=b;break;case"select":s._wrapperState={wasMultiple:!!b.multiple},_=Ae({},b,{value:void 0}),qt("invalid",s);break;case"textarea":Xn(s,b),_=hr(s,b),qt("invalid",s);break;default:_=b}Et(m,_),H=_;for(N in H)if(H.hasOwnProperty(N)){var X=H[N];N==="style"?_e(s,X):N==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&fr(s,X)):N==="children"?typeof X=="string"?(m!=="textarea"||X!=="")&&mn(s,X):typeof X=="number"&&mn(s,""+X):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(u.hasOwnProperty(N)?X!=null&&N==="onScroll"&&qt("scroll",s):X!=null&&j(s,N,X,M))}switch(m){case"input":br(s),Nt(s,b,!1);break;case"textarea":br(s),ci(s);break;case"option":b.value!=null&&s.setAttribute("value",""+$e(b.value));break;case"select":s.multiple=!!b.multiple,N=b.value,N!=null?Pe(s,!!b.multiple,N,!1):b.defaultValue!=null&&Pe(s,!!b.multiple,b.defaultValue,!0);break;default:typeof _.onClick=="function"&&(s.onclick=Cc)}switch(m){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return un(l),null;case 6:if(s&&l.stateNode!=null)rm(s,l,s.memoizedProps,b);else{if(typeof b!="string"&&l.stateNode===null)throw Error(r(166));if(m=ua(al.current),ua(Ps.current),Rc(l)){if(b=l.stateNode,m=l.memoizedProps,b[Os]=l,(N=b.nodeValue!==m)&&(s=Fn,s!==null))switch(s.tag){case 3:Ec(b.nodeValue,m,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Ec(b.nodeValue,m,(s.mode&1)!==0)}N&&(l.flags|=4)}else b=(m.nodeType===9?m:m.ownerDocument).createTextNode(b),b[Os]=l,l.stateNode=b}return un(l),null;case 13:if(Kt(or),b=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(tr&&Un!==null&&(l.mode&1)!==0&&(l.flags&128)===0)i1(),qa(),l.flags|=98560,N=!1;else if(N=Rc(l),b!==null&&b.dehydrated!==null){if(s===null){if(!N)throw Error(r(318));if(N=l.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[Os]=l}else qa(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;un(l),N=!1}else ms!==null&&(lh(ms),ms=null),N=!0;if(!N)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=m,l):(b=b!==null,b!==(s!==null&&s.memoizedState!==null)&&b&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(or.current&1)!==0?jr===0&&(jr=3):dh())),l.updateQueue!==null&&(l.flags|=4),un(l),null);case 4:return Ja(),Zd(s,l),s===null&&Jo(l.stateNode.containerInfo),un(l),null;case 10:return Sd(l.type._context),un(l),null;case 17:return An(l.type)&&Sc(),un(l),null;case 19:if(Kt(or),N=l.memoizedState,N===null)return un(l),null;if(b=(l.flags&128)!==0,M=N.rendering,M===null)if(b)dl(N,!1);else{if(jr!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(M=jc(s),M!==null){for(l.flags|=128,dl(N,!1),b=M.updateQueue,b!==null&&(l.updateQueue=b,l.flags|=4),l.subtreeFlags=0,b=m,m=l.child;m!==null;)N=m,s=b,N.flags&=14680066,M=N.alternate,M===null?(N.childLanes=0,N.lanes=s,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=M.childLanes,N.lanes=M.lanes,N.child=M.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=M.memoizedProps,N.memoizedState=M.memoizedState,N.updateQueue=M.updateQueue,N.type=M.type,s=M.dependencies,N.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),m=m.sibling;return zt(or,or.current&1|2),l.child}s=s.sibling}N.tail!==null&&Rt()>no&&(l.flags|=128,b=!0,dl(N,!1),l.lanes=4194304)}else{if(!b)if(s=jc(M),s!==null){if(l.flags|=128,b=!0,m=s.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),dl(N,!0),N.tail===null&&N.tailMode==="hidden"&&!M.alternate&&!tr)return un(l),null}else 2*Rt()-N.renderingStartTime>no&&m!==1073741824&&(l.flags|=128,b=!0,dl(N,!1),l.lanes=4194304);N.isBackwards?(M.sibling=l.child,l.child=M):(m=N.last,m!==null?m.sibling=M:l.child=M,N.last=M)}return N.tail!==null?(l=N.tail,N.rendering=l,N.tail=l.sibling,N.renderingStartTime=Rt(),l.sibling=null,m=or.current,zt(or,b?m&1|2:m&1),l):(un(l),null);case 22:case 23:return uh(),b=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==b&&(l.flags|=8192),b&&(l.mode&1)!==0?(Vn&1073741824)!==0&&(un(l),l.subtreeFlags&6&&(l.flags|=8192)):un(l),null;case 24:return null;case 25:return null}throw Error(r(156,l.tag))}function g2(s,l){switch(wd(l),l.tag){case 1:return An(l.type)&&Sc(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ja(),Kt(Cn),Kt(ln),Od(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return Rd(l),null;case 13:if(Kt(or),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));qa()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Kt(or),null;case 4:return Ja(),null;case 10:return Sd(l.type._context),null;case 22:case 23:return uh(),null;case 24:return null;default:return null}}var Gc=!1,dn=!1,p2=typeof WeakSet=="function"?WeakSet:Set,Le=null;function to(s,l){var m=s.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(b){pr(s,l,b)}else m.current=null}function Qd(s,l,m){try{m()}catch(b){pr(s,l,b)}}var nm=!1;function x2(s,l){if(ud=Rs,s=ft(),it(s)){if("selectionStart"in s)var m={start:s.selectionStart,end:s.selectionEnd};else e:{m=(m=s.ownerDocument)&&m.defaultView||window;var b=m.getSelection&&m.getSelection();if(b&&b.rangeCount!==0){m=b.anchorNode;var _=b.anchorOffset,N=b.focusNode;b=b.focusOffset;try{m.nodeType,N.nodeType}catch{m=null;break e}var M=0,H=-1,X=-1,ce=0,we=0,be=s,xe=null;t:for(;;){for(var De;be!==m||_!==0&&be.nodeType!==3||(H=M+_),be!==N||b!==0&&be.nodeType!==3||(X=M+b),be.nodeType===3&&(M+=be.nodeValue.length),(De=be.firstChild)!==null;)xe=be,be=De;for(;;){if(be===s)break t;if(xe===m&&++ce===_&&(H=M),xe===N&&++we===b&&(X=M),(De=be.nextSibling)!==null)break;be=xe,xe=be.parentNode}be=De}m=H===-1||X===-1?null:{start:H,end:X}}else m=null}m=m||{start:0,end:0}}else m=null;for(dd={focusedElem:s,selectionRange:m},Rs=!1,Le=l;Le!==null;)if(l=Le,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Le=s;else for(;Le!==null;){l=Le;try{var Fe=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Fe!==null){var Ve=Fe.memoizedProps,Sr=Fe.memoizedState,ne=l.stateNode,K=ne.getSnapshotBeforeUpdate(l.elementType===l.type?Ve:gs(l.type,Ve),Sr);ne.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var ie=l.stateNode.containerInfo;ie.nodeType===1?ie.textContent="":ie.nodeType===9&&ie.documentElement&&ie.removeChild(ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Se){pr(l,l.return,Se)}if(s=l.sibling,s!==null){s.return=l.return,Le=s;break}Le=l.return}return Fe=nm,nm=!1,Fe}function hl(s,l,m){var b=l.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var _=b=b.next;do{if((_.tag&s)===s){var N=_.destroy;_.destroy=void 0,N!==void 0&&Qd(l,m,N)}_=_.next}while(_!==b)}}function $c(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var m=l=l.next;do{if((m.tag&s)===s){var b=m.create;m.destroy=b()}m=m.next}while(m!==l)}}function Jd(s){var l=s.ref;if(l!==null){var m=s.stateNode;switch(s.tag){case 5:s=m;break;default:s=m}typeof l=="function"?l(s):l.current=s}}function sm(s){var l=s.alternate;l!==null&&(s.alternate=null,sm(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[Os],delete l[tl],delete l[gd],delete l[Jw],delete l[e2])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function im(s){return s.tag===5||s.tag===3||s.tag===4}function am(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||im(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function eh(s,l,m){var b=s.tag;if(b===5||b===6)s=s.stateNode,l?m.nodeType===8?m.parentNode.insertBefore(s,l):m.insertBefore(s,l):(m.nodeType===8?(l=m.parentNode,l.insertBefore(s,m)):(l=m,l.appendChild(s)),m=m._reactRootContainer,m!=null||l.onclick!==null||(l.onclick=Cc));else if(b!==4&&(s=s.child,s!==null))for(eh(s,l,m),s=s.sibling;s!==null;)eh(s,l,m),s=s.sibling}function th(s,l,m){var b=s.tag;if(b===5||b===6)s=s.stateNode,l?m.insertBefore(s,l):m.appendChild(s);else if(b!==4&&(s=s.child,s!==null))for(th(s,l,m),s=s.sibling;s!==null;)th(s,l,m),s=s.sibling}var Zr=null,ps=!1;function ki(s,l,m){for(m=m.child;m!==null;)om(s,l,m),m=m.sibling}function om(s,l,m){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(bt,m)}catch{}switch(m.tag){case 5:dn||to(m,l);case 6:var b=Zr,_=ps;Zr=null,ki(s,l,m),Zr=b,ps=_,Zr!==null&&(ps?(s=Zr,m=m.stateNode,s.nodeType===8?s.parentNode.removeChild(m):s.removeChild(m)):Zr.removeChild(m.stateNode));break;case 18:Zr!==null&&(ps?(s=Zr,m=m.stateNode,s.nodeType===8?md(s.parentNode,m):s.nodeType===1&&md(s,m),ds(s)):md(Zr,m.stateNode));break;case 4:b=Zr,_=ps,Zr=m.stateNode.containerInfo,ps=!0,ki(s,l,m),Zr=b,ps=_;break;case 0:case 11:case 14:case 15:if(!dn&&(b=m.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){_=b=b.next;do{var N=_,M=N.destroy;N=N.tag,M!==void 0&&((N&2)!==0||(N&4)!==0)&&Qd(m,l,M),_=_.next}while(_!==b)}ki(s,l,m);break;case 1:if(!dn&&(to(m,l),b=m.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=m.memoizedProps,b.state=m.memoizedState,b.componentWillUnmount()}catch(H){pr(m,l,H)}ki(s,l,m);break;case 21:ki(s,l,m);break;case 22:m.mode&1?(dn=(b=dn)||m.memoizedState!==null,ki(s,l,m),dn=b):ki(s,l,m);break;default:ki(s,l,m)}}function lm(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var m=s.stateNode;m===null&&(m=s.stateNode=new p2),l.forEach(function(b){var _=_2.bind(null,s,b);m.has(b)||(m.add(b),b.then(_,_))})}}function xs(s,l){var m=l.deletions;if(m!==null)for(var b=0;b<m.length;b++){var _=m[b];try{var N=s,M=l,H=M;e:for(;H!==null;){switch(H.tag){case 5:Zr=H.stateNode,ps=!1;break e;case 3:Zr=H.stateNode.containerInfo,ps=!0;break e;case 4:Zr=H.stateNode.containerInfo,ps=!0;break e}H=H.return}if(Zr===null)throw Error(r(160));om(N,M,_),Zr=null,ps=!1;var X=_.alternate;X!==null&&(X.return=null),_.return=null}catch(ce){pr(_,l,ce)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)cm(l,s),l=l.sibling}function cm(s,l){var m=s.alternate,b=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(xs(l,s),Ms(s),b&4){try{hl(3,s,s.return),$c(3,s)}catch(Ve){pr(s,s.return,Ve)}try{hl(5,s,s.return)}catch(Ve){pr(s,s.return,Ve)}}break;case 1:xs(l,s),Ms(s),b&512&&m!==null&&to(m,m.return);break;case 5:if(xs(l,s),Ms(s),b&512&&m!==null&&to(m,m.return),s.flags&32){var _=s.stateNode;try{mn(_,"")}catch(Ve){pr(s,s.return,Ve)}}if(b&4&&(_=s.stateNode,_!=null)){var N=s.memoizedProps,M=m!==null?m.memoizedProps:N,H=s.type,X=s.updateQueue;if(s.updateQueue=null,X!==null)try{H==="input"&&N.type==="radio"&&N.name!=null&&cs(_,N),Mt(H,M);var ce=Mt(H,N);for(M=0;M<X.length;M+=2){var we=X[M],be=X[M+1];we==="style"?_e(_,be):we==="dangerouslySetInnerHTML"?fr(_,be):we==="children"?mn(_,be):j(_,we,be,ce)}switch(H){case"input":Bt(_,N);break;case"textarea":bn(_,N);break;case"select":var xe=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!N.multiple;var De=N.value;De!=null?Pe(_,!!N.multiple,De,!1):xe!==!!N.multiple&&(N.defaultValue!=null?Pe(_,!!N.multiple,N.defaultValue,!0):Pe(_,!!N.multiple,N.multiple?[]:"",!1))}_[tl]=N}catch(Ve){pr(s,s.return,Ve)}}break;case 6:if(xs(l,s),Ms(s),b&4){if(s.stateNode===null)throw Error(r(162));_=s.stateNode,N=s.memoizedProps;try{_.nodeValue=N}catch(Ve){pr(s,s.return,Ve)}}break;case 3:if(xs(l,s),Ms(s),b&4&&m!==null&&m.memoizedState.isDehydrated)try{ds(l.containerInfo)}catch(Ve){pr(s,s.return,Ve)}break;case 4:xs(l,s),Ms(s);break;case 13:xs(l,s),Ms(s),_=s.child,_.flags&8192&&(N=_.memoizedState!==null,_.stateNode.isHidden=N,!N||_.alternate!==null&&_.alternate.memoizedState!==null||(sh=Rt())),b&4&&lm(s);break;case 22:if(we=m!==null&&m.memoizedState!==null,s.mode&1?(dn=(ce=dn)||we,xs(l,s),dn=ce):xs(l,s),Ms(s),b&8192){if(ce=s.memoizedState!==null,(s.stateNode.isHidden=ce)&&!we&&(s.mode&1)!==0)for(Le=s,we=s.child;we!==null;){for(be=Le=we;Le!==null;){switch(xe=Le,De=xe.child,xe.tag){case 0:case 11:case 14:case 15:hl(4,xe,xe.return);break;case 1:to(xe,xe.return);var Fe=xe.stateNode;if(typeof Fe.componentWillUnmount=="function"){b=xe,m=xe.return;try{l=b,Fe.props=l.memoizedProps,Fe.state=l.memoizedState,Fe.componentWillUnmount()}catch(Ve){pr(b,m,Ve)}}break;case 5:to(xe,xe.return);break;case 22:if(xe.memoizedState!==null){hm(be);continue}}De!==null?(De.return=xe,Le=De):hm(be)}we=we.sibling}e:for(we=null,be=s;;){if(be.tag===5){if(we===null){we=be;try{_=be.stateNode,ce?(N=_.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(H=be.stateNode,X=be.memoizedProps.style,M=X!=null&&X.hasOwnProperty("display")?X.display:null,H.style.display=$t("display",M))}catch(Ve){pr(s,s.return,Ve)}}}else if(be.tag===6){if(we===null)try{be.stateNode.nodeValue=ce?"":be.memoizedProps}catch(Ve){pr(s,s.return,Ve)}}else if((be.tag!==22&&be.tag!==23||be.memoizedState===null||be===s)&&be.child!==null){be.child.return=be,be=be.child;continue}if(be===s)break e;for(;be.sibling===null;){if(be.return===null||be.return===s)break e;we===be&&(we=null),be=be.return}we===be&&(we=null),be.sibling.return=be.return,be=be.sibling}}break;case 19:xs(l,s),Ms(s),b&4&&lm(s);break;case 21:break;default:xs(l,s),Ms(s)}}function Ms(s){var l=s.flags;if(l&2){try{e:{for(var m=s.return;m!==null;){if(im(m)){var b=m;break e}m=m.return}throw Error(r(160))}switch(b.tag){case 5:var _=b.stateNode;b.flags&32&&(mn(_,""),b.flags&=-33);var N=am(s);th(s,N,_);break;case 3:case 4:var M=b.stateNode.containerInfo,H=am(s);eh(s,H,M);break;default:throw Error(r(161))}}catch(X){pr(s,s.return,X)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function y2(s,l,m){Le=s,um(s)}function um(s,l,m){for(var b=(s.mode&1)!==0;Le!==null;){var _=Le,N=_.child;if(_.tag===22&&b){var M=_.memoizedState!==null||Gc;if(!M){var H=_.alternate,X=H!==null&&H.memoizedState!==null||dn;H=Gc;var ce=dn;if(Gc=M,(dn=X)&&!ce)for(Le=_;Le!==null;)M=Le,X=M.child,M.tag===22&&M.memoizedState!==null?fm(_):X!==null?(X.return=M,Le=X):fm(_);for(;N!==null;)Le=N,um(N),N=N.sibling;Le=_,Gc=H,dn=ce}dm(s)}else(_.subtreeFlags&8772)!==0&&N!==null?(N.return=_,Le=N):dm(s)}}function dm(s){for(;Le!==null;){var l=Le;if((l.flags&8772)!==0){var m=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:dn||$c(5,l);break;case 1:var b=l.stateNode;if(l.flags&4&&!dn)if(m===null)b.componentDidMount();else{var _=l.elementType===l.type?m.memoizedProps:gs(l.type,m.memoizedProps);b.componentDidUpdate(_,m.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var N=l.updateQueue;N!==null&&h1(l,N,b);break;case 3:var M=l.updateQueue;if(M!==null){if(m=null,l.child!==null)switch(l.child.tag){case 5:m=l.child.stateNode;break;case 1:m=l.child.stateNode}h1(l,M,m)}break;case 5:var H=l.stateNode;if(m===null&&l.flags&4){m=H;var X=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&m.focus();break;case"img":X.src&&(m.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ce=l.alternate;if(ce!==null){var we=ce.memoizedState;if(we!==null){var be=we.dehydrated;be!==null&&ds(be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}dn||l.flags&512&&Jd(l)}catch(xe){pr(l,l.return,xe)}}if(l===s){Le=null;break}if(m=l.sibling,m!==null){m.return=l.return,Le=m;break}Le=l.return}}function hm(s){for(;Le!==null;){var l=Le;if(l===s){Le=null;break}var m=l.sibling;if(m!==null){m.return=l.return,Le=m;break}Le=l.return}}function fm(s){for(;Le!==null;){var l=Le;try{switch(l.tag){case 0:case 11:case 15:var m=l.return;try{$c(4,l)}catch(X){pr(l,m,X)}break;case 1:var b=l.stateNode;if(typeof b.componentDidMount=="function"){var _=l.return;try{b.componentDidMount()}catch(X){pr(l,_,X)}}var N=l.return;try{Jd(l)}catch(X){pr(l,N,X)}break;case 5:var M=l.return;try{Jd(l)}catch(X){pr(l,M,X)}}}catch(X){pr(l,l.return,X)}if(l===s){Le=null;break}var H=l.sibling;if(H!==null){H.return=l.return,Le=H;break}Le=l.return}}var w2=Math.ceil,Xc=q.ReactCurrentDispatcher,rh=q.ReactCurrentOwner,rs=q.ReactCurrentBatchConfig,_t=0,Hr=null,Nr=null,Qr=0,Vn=0,ro=_i(0),jr=0,fl=null,ha=0,Yc=0,nh=0,ml=null,_n=null,sh=0,no=1/0,ei=null,qc=!1,ih=null,Oi=null,Kc=!1,Pi=null,Zc=0,gl=0,ah=null,Qc=-1,Jc=0;function yn(){return(_t&6)!==0?Rt():Qc!==-1?Qc:Qc=Rt()}function Di(s){return(s.mode&1)===0?1:(_t&2)!==0&&Qr!==0?Qr&-Qr:r2.transition!==null?(Jc===0&&(Jc=kr()),Jc):(s=dt,s!==0||(s=window.event,s=s===void 0?16:Wo(s.type)),s)}function ys(s,l,m,b){if(50<gl)throw gl=0,ah=null,Error(r(185));F(s,m,b),((_t&2)===0||s!==Hr)&&(s===Hr&&((_t&2)===0&&(Yc|=m),jr===4&&Mi(s,Qr)),Nn(s,b),m===1&&_t===0&&(l.mode&1)===0&&(no=Rt()+500,Nc&&Ti()))}function Nn(s,l){var m=s.callbackNode;gi(s,l);var b=Mn(s,s===Hr?Qr:0);if(b===0)m!==null&&Vr(m),s.callbackNode=null,s.callbackPriority=0;else if(l=b&-b,s.callbackPriority!==l){if(m!=null&&Vr(m),l===1)s.tag===0?t2(gm.bind(null,s)):e1(gm.bind(null,s)),Zw(function(){(_t&6)===0&&Ti()}),m=null;else{switch(lc(b)){case 1:m=me;break;case 4:m=ac;break;case 16:m=Lt;break;case 536870912:m=oc;break;default:m=Lt}m=Cm(m,mm.bind(null,s))}s.callbackPriority=l,s.callbackNode=m}}function mm(s,l){if(Qc=-1,Jc=0,(_t&6)!==0)throw Error(r(327));var m=s.callbackNode;if(so()&&s.callbackNode!==m)return null;var b=Mn(s,s===Hr?Qr:0);if(b===0)return null;if((b&30)!==0||(b&s.expiredLanes)!==0||l)l=eu(s,b);else{l=b;var _=_t;_t|=2;var N=xm();(Hr!==s||Qr!==l)&&(ei=null,no=Rt()+500,ma(s,l));do try{E2();break}catch(H){pm(s,H)}while(!0);Ad(),Xc.current=N,_t=_,Nr!==null?l=0:(Hr=null,Qr=0,l=jr)}if(l!==0){if(l===2&&(_=kt(s),_!==0&&(b=_,l=oh(s,_))),l===1)throw m=fl,ma(s,0),Mi(s,b),Nn(s,Rt()),m;if(l===6)Mi(s,b);else{if(_=s.current.alternate,(b&30)===0&&!v2(_)&&(l=eu(s,b),l===2&&(N=kt(s),N!==0&&(b=N,l=oh(s,N))),l===1))throw m=fl,ma(s,0),Mi(s,b),Nn(s,Rt()),m;switch(s.finishedWork=_,s.finishedLanes=b,l){case 0:case 1:throw Error(r(345));case 2:ga(s,_n,ei);break;case 3:if(Mi(s,b),(b&130023424)===b&&(l=sh+500-Rt(),10<l)){if(Mn(s,0)!==0)break;if(_=s.suspendedLanes,(_&b)!==b){yn(),s.pingedLanes|=s.suspendedLanes&_;break}s.timeoutHandle=fd(ga.bind(null,s,_n,ei),l);break}ga(s,_n,ei);break;case 4:if(Mi(s,b),(b&4194240)===b)break;for(l=s.eventTimes,_=-1;0<b;){var M=31-pn(b);N=1<<M,M=l[M],M>_&&(_=M),b&=~N}if(b=_,b=Rt()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*w2(b/1960))-b,10<b){s.timeoutHandle=fd(ga.bind(null,s,_n,ei),b);break}ga(s,_n,ei);break;case 5:ga(s,_n,ei);break;default:throw Error(r(329))}}}return Nn(s,Rt()),s.callbackNode===m?mm.bind(null,s):null}function oh(s,l){var m=ml;return s.current.memoizedState.isDehydrated&&(ma(s,l).flags|=256),s=eu(s,l),s!==2&&(l=_n,_n=m,l!==null&&lh(l)),s}function lh(s){_n===null?_n=s:_n.push.apply(_n,s)}function v2(s){for(var l=s;;){if(l.flags&16384){var m=l.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var b=0;b<m.length;b++){var _=m[b],N=_.getSnapshot;_=_.value;try{if(!J(N(),_))return!1}catch{return!1}}}if(m=l.child,l.subtreeFlags&16384&&m!==null)m.return=l,l=m;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Mi(s,l){for(l&=~nh,l&=~Yc,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var m=31-pn(l),b=1<<m;s[m]=-1,l&=~b}}function gm(s){if((_t&6)!==0)throw Error(r(327));so();var l=Mn(s,0);if((l&1)===0)return Nn(s,Rt()),null;var m=eu(s,l);if(s.tag!==0&&m===2){var b=kt(s);b!==0&&(l=b,m=oh(s,b))}if(m===1)throw m=fl,ma(s,0),Mi(s,l),Nn(s,Rt()),m;if(m===6)throw Error(r(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,ga(s,_n,ei),Nn(s,Rt()),null}function ch(s,l){var m=_t;_t|=1;try{return s(l)}finally{_t=m,_t===0&&(no=Rt()+500,Nc&&Ti())}}function fa(s){Pi!==null&&Pi.tag===0&&(_t&6)===0&&so();var l=_t;_t|=1;var m=rs.transition,b=dt;try{if(rs.transition=null,dt=1,s)return s()}finally{dt=b,rs.transition=m,_t=l,(_t&6)===0&&Ti()}}function uh(){Vn=ro.current,Kt(ro)}function ma(s,l){s.finishedWork=null,s.finishedLanes=0;var m=s.timeoutHandle;if(m!==-1&&(s.timeoutHandle=-1,Kw(m)),Nr!==null)for(m=Nr.return;m!==null;){var b=m;switch(wd(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Sc();break;case 3:Ja(),Kt(Cn),Kt(ln),Od();break;case 5:Rd(b);break;case 4:Ja();break;case 13:Kt(or);break;case 19:Kt(or);break;case 10:Sd(b.type._context);break;case 22:case 23:uh()}m=m.return}if(Hr=s,Nr=s=ji(s.current,null),Qr=Vn=l,jr=0,fl=null,nh=Yc=ha=0,_n=ml=null,ca!==null){for(l=0;l<ca.length;l++)if(m=ca[l],b=m.interleaved,b!==null){m.interleaved=null;var _=b.next,N=m.pending;if(N!==null){var M=N.next;N.next=_,b.next=M}m.pending=b}ca=null}return s}function pm(s,l){do{var m=Nr;try{if(Ad(),Bc.current=Vc,Lc){for(var b=lr.memoizedState;b!==null;){var _=b.queue;_!==null&&(_.pending=null),b=b.next}Lc=!1}if(da=0,zr=Mr=lr=null,ol=!1,ll=0,rh.current=null,m===null||m.return===null){jr=1,fl=l,Nr=null;break}e:{var N=s,M=m.return,H=m,X=l;if(l=Qr,H.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var ce=X,we=H,be=we.tag;if((we.mode&1)===0&&(be===0||be===11||be===15)){var xe=we.alternate;xe?(we.updateQueue=xe.updateQueue,we.memoizedState=xe.memoizedState,we.lanes=xe.lanes):(we.updateQueue=null,we.memoizedState=null)}var De=V1(M);if(De!==null){De.flags&=-257,W1(De,M,H,N,l),De.mode&1&&U1(N,ce,l),l=De,X=ce;var Fe=l.updateQueue;if(Fe===null){var Ve=new Set;Ve.add(X),l.updateQueue=Ve}else Fe.add(X);break e}else{if((l&1)===0){U1(N,ce,l),dh();break e}X=Error(r(426))}}else if(tr&&H.mode&1){var Sr=V1(M);if(Sr!==null){(Sr.flags&65536)===0&&(Sr.flags|=256),W1(Sr,M,H,N,l),Ed(eo(X,H));break e}}N=X=eo(X,H),jr!==4&&(jr=2),ml===null?ml=[N]:ml.push(N),N=M;do{switch(N.tag){case 3:N.flags|=65536,l&=-l,N.lanes|=l;var ne=L1(N,X,l);d1(N,ne);break e;case 1:H=X;var K=N.type,ie=N.stateNode;if((N.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(Oi===null||!Oi.has(ie)))){N.flags|=65536,l&=-l,N.lanes|=l;var Se=F1(N,H,l);d1(N,Se);break e}}N=N.return}while(N!==null)}wm(m)}catch(We){l=We,Nr===m&&m!==null&&(Nr=m=m.return);continue}break}while(!0)}function xm(){var s=Xc.current;return Xc.current=Vc,s===null?Vc:s}function dh(){(jr===0||jr===3||jr===2)&&(jr=4),Hr===null||(ha&268435455)===0&&(Yc&268435455)===0||Mi(Hr,Qr)}function eu(s,l){var m=_t;_t|=2;var b=xm();(Hr!==s||Qr!==l)&&(ei=null,ma(s,l));do try{b2();break}catch(_){pm(s,_)}while(!0);if(Ad(),_t=m,Xc.current=b,Nr!==null)throw Error(r(261));return Hr=null,Qr=0,jr}function b2(){for(;Nr!==null;)ym(Nr)}function E2(){for(;Nr!==null&&!Ut();)ym(Nr)}function ym(s){var l=Em(s.alternate,s,Vn);s.memoizedProps=s.pendingProps,l===null?wm(s):Nr=l,rh.current=null}function wm(s){var l=s;do{var m=l.alternate;if(s=l.return,(l.flags&32768)===0){if(m=m2(m,l,Vn),m!==null){Nr=m;return}}else{if(m=g2(m,l),m!==null){m.flags&=32767,Nr=m;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{jr=6,Nr=null;return}}if(l=l.sibling,l!==null){Nr=l;return}Nr=l=s}while(l!==null);jr===0&&(jr=5)}function ga(s,l,m){var b=dt,_=rs.transition;try{rs.transition=null,dt=1,C2(s,l,m,b)}finally{rs.transition=_,dt=b}return null}function C2(s,l,m,b){do so();while(Pi!==null);if((_t&6)!==0)throw Error(r(327));m=s.finishedWork;var _=s.finishedLanes;if(m===null)return null;if(s.finishedWork=null,s.finishedLanes=0,m===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0;var N=m.lanes|m.childLanes;if(ze(s,N),s===Hr&&(Nr=Hr=null,Qr=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Kc||(Kc=!0,Cm(Lt,function(){return so(),null})),N=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||N){N=rs.transition,rs.transition=null;var M=dt;dt=1;var H=_t;_t|=4,rh.current=null,x2(s,m),cm(m,s),on(dd),Rs=!!ud,dd=ud=null,s.current=m,y2(m),ic(),_t=H,dt=M,rs.transition=N}else s.current=m;if(Kc&&(Kc=!1,Pi=s,Zc=_),N=s.pendingLanes,N===0&&(Oi=null),pt(m.stateNode),Nn(s,Rt()),l!==null)for(b=s.onRecoverableError,m=0;m<l.length;m++)_=l[m],b(_.value,{componentStack:_.stack,digest:_.digest});if(qc)throw qc=!1,s=ih,ih=null,s;return(Zc&1)!==0&&s.tag!==0&&so(),N=s.pendingLanes,(N&1)!==0?s===ah?gl++:(gl=0,ah=s):gl=0,Ti(),null}function so(){if(Pi!==null){var s=lc(Zc),l=rs.transition,m=dt;try{if(rs.transition=null,dt=16>s?16:s,Pi===null)var b=!1;else{if(s=Pi,Pi=null,Zc=0,(_t&6)!==0)throw Error(r(331));var _=_t;for(_t|=4,Le=s.current;Le!==null;){var N=Le,M=N.child;if((Le.flags&16)!==0){var H=N.deletions;if(H!==null){for(var X=0;X<H.length;X++){var ce=H[X];for(Le=ce;Le!==null;){var we=Le;switch(we.tag){case 0:case 11:case 15:hl(8,we,N)}var be=we.child;if(be!==null)be.return=we,Le=be;else for(;Le!==null;){we=Le;var xe=we.sibling,De=we.return;if(sm(we),we===ce){Le=null;break}if(xe!==null){xe.return=De,Le=xe;break}Le=De}}}var Fe=N.alternate;if(Fe!==null){var Ve=Fe.child;if(Ve!==null){Fe.child=null;do{var Sr=Ve.sibling;Ve.sibling=null,Ve=Sr}while(Ve!==null)}}Le=N}}if((N.subtreeFlags&2064)!==0&&M!==null)M.return=N,Le=M;else e:for(;Le!==null;){if(N=Le,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:hl(9,N,N.return)}var ne=N.sibling;if(ne!==null){ne.return=N.return,Le=ne;break e}Le=N.return}}var K=s.current;for(Le=K;Le!==null;){M=Le;var ie=M.child;if((M.subtreeFlags&2064)!==0&&ie!==null)ie.return=M,Le=ie;else e:for(M=K;Le!==null;){if(H=Le,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:$c(9,H)}}catch(We){pr(H,H.return,We)}if(H===M){Le=null;break e}var Se=H.sibling;if(Se!==null){Se.return=H.return,Le=Se;break e}Le=H.return}}if(_t=_,Ti(),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(bt,s)}catch{}b=!0}return b}finally{dt=m,rs.transition=l}}return!1}function vm(s,l,m){l=eo(m,l),l=L1(s,l,1),s=Ri(s,l,1),l=yn(),s!==null&&(F(s,1,l),Nn(s,l))}function pr(s,l,m){if(s.tag===3)vm(s,s,m);else for(;l!==null;){if(l.tag===3){vm(l,s,m);break}else if(l.tag===1){var b=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Oi===null||!Oi.has(b))){s=eo(m,s),s=F1(l,s,1),l=Ri(l,s,1),s=yn(),l!==null&&(F(l,1,s),Nn(l,s));break}}l=l.return}}function A2(s,l,m){var b=s.pingCache;b!==null&&b.delete(l),l=yn(),s.pingedLanes|=s.suspendedLanes&m,Hr===s&&(Qr&m)===m&&(jr===4||jr===3&&(Qr&130023424)===Qr&&500>Rt()-sh?ma(s,0):nh|=m),Nn(s,l)}function bm(s,l){l===0&&((s.mode&1)===0?l=1:(l=Da,Da<<=1,(Da&130023424)===0&&(Da=4194304)));var m=yn();s=Zs(s,l),s!==null&&(F(s,l,m),Nn(s,m))}function S2(s){var l=s.memoizedState,m=0;l!==null&&(m=l.retryLane),bm(s,m)}function _2(s,l){var m=0;switch(s.tag){case 13:var b=s.stateNode,_=s.memoizedState;_!==null&&(m=_.retryLane);break;case 19:b=s.stateNode;break;default:throw Error(r(314))}b!==null&&b.delete(l),bm(s,m)}var Em;Em=function(s,l,m){if(s!==null)if(s.memoizedProps!==l.pendingProps||Cn.current)Sn=!0;else{if((s.lanes&m)===0&&(l.flags&128)===0)return Sn=!1,f2(s,l,m);Sn=(s.flags&131072)!==0}else Sn=!1,tr&&(l.flags&1048576)!==0&&t1(l,Ic,l.index);switch(l.lanes=0,l.tag){case 2:var b=l.type;Hc(s,l),s=l.pendingProps;var _=$a(l,ln.current);Qa(l,m),_=Md(null,l,b,s,_,m);var N=jd();return l.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,An(b)?(N=!0,_c(l)):N=!1,l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Td(l),_.updater=Wc,l.stateNode=_,_._reactInternals=l,Wd(l,b,s,m),l=$d(null,l,b,!0,N,m)):(l.tag=0,tr&&N&&yd(l),xn(null,l,_,m),l=l.child),l;case 16:b=l.elementType;e:{switch(Hc(s,l),s=l.pendingProps,_=b._init,b=_(b._payload),l.type=b,_=l.tag=T2(b),s=gs(b,s),_){case 0:l=Gd(null,l,b,s,m);break e;case 1:l=Y1(null,l,b,s,m);break e;case 11:l=z1(null,l,b,s,m);break e;case 14:l=H1(null,l,b,gs(b.type,s),m);break e}throw Error(r(306,b,""))}return l;case 0:return b=l.type,_=l.pendingProps,_=l.elementType===b?_:gs(b,_),Gd(s,l,b,_,m);case 1:return b=l.type,_=l.pendingProps,_=l.elementType===b?_:gs(b,_),Y1(s,l,b,_,m);case 3:e:{if(q1(l),s===null)throw Error(r(387));b=l.pendingProps,N=l.memoizedState,_=N.element,u1(s,l),Mc(l,b,null,m);var M=l.memoizedState;if(b=M.element,N.isDehydrated)if(N={element:b,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},l.updateQueue.baseState=N,l.memoizedState=N,l.flags&256){_=eo(Error(r(423)),l),l=K1(s,l,b,m,_);break e}else if(b!==_){_=eo(Error(r(424)),l),l=K1(s,l,b,m,_);break e}else for(Un=Si(l.stateNode.containerInfo.firstChild),Fn=l,tr=!0,ms=null,m=l1(l,null,b,m),l.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(qa(),b===_){l=Js(s,l,m);break e}xn(s,l,b,m)}l=l.child}return l;case 5:return f1(l),s===null&&bd(l),b=l.type,_=l.pendingProps,N=s!==null?s.memoizedProps:null,M=_.children,hd(b,_)?M=null:N!==null&&hd(b,N)&&(l.flags|=32),X1(s,l),xn(s,l,M,m),l.child;case 6:return s===null&&bd(l),null;case 13:return Z1(s,l,m);case 4:return Id(l,l.stateNode.containerInfo),b=l.pendingProps,s===null?l.child=Ka(l,null,b,m):xn(s,l,b,m),l.child;case 11:return b=l.type,_=l.pendingProps,_=l.elementType===b?_:gs(b,_),z1(s,l,b,_,m);case 7:return xn(s,l,l.pendingProps,m),l.child;case 8:return xn(s,l,l.pendingProps.children,m),l.child;case 12:return xn(s,l,l.pendingProps.children,m),l.child;case 10:e:{if(b=l.type._context,_=l.pendingProps,N=l.memoizedProps,M=_.value,zt(Oc,b._currentValue),b._currentValue=M,N!==null)if(J(N.value,M)){if(N.children===_.children&&!Cn.current){l=Js(s,l,m);break e}}else for(N=l.child,N!==null&&(N.return=l);N!==null;){var H=N.dependencies;if(H!==null){M=N.child;for(var X=H.firstContext;X!==null;){if(X.context===b){if(N.tag===1){X=Qs(-1,m&-m),X.tag=2;var ce=N.updateQueue;if(ce!==null){ce=ce.shared;var we=ce.pending;we===null?X.next=X:(X.next=we.next,we.next=X),ce.pending=X}}N.lanes|=m,X=N.alternate,X!==null&&(X.lanes|=m),_d(N.return,m,l),H.lanes|=m;break}X=X.next}}else if(N.tag===10)M=N.type===l.type?null:N.child;else if(N.tag===18){if(M=N.return,M===null)throw Error(r(341));M.lanes|=m,H=M.alternate,H!==null&&(H.lanes|=m),_d(M,m,l),M=N.sibling}else M=N.child;if(M!==null)M.return=N;else for(M=N;M!==null;){if(M===l){M=null;break}if(N=M.sibling,N!==null){N.return=M.return,M=N;break}M=M.return}N=M}xn(s,l,_.children,m),l=l.child}return l;case 9:return _=l.type,b=l.pendingProps.children,Qa(l,m),_=es(_),b=b(_),l.flags|=1,xn(s,l,b,m),l.child;case 14:return b=l.type,_=gs(b,l.pendingProps),_=gs(b.type,_),H1(s,l,b,_,m);case 15:return G1(s,l,l.type,l.pendingProps,m);case 17:return b=l.type,_=l.pendingProps,_=l.elementType===b?_:gs(b,_),Hc(s,l),l.tag=1,An(b)?(s=!0,_c(l)):s=!1,Qa(l,m),j1(l,b,_),Wd(l,b,_,m),$d(null,l,b,!0,s,m);case 19:return J1(s,l,m);case 22:return $1(s,l,m)}throw Error(r(156,l.tag))};function Cm(s,l){return Pn(s,l)}function N2(s,l,m,b){this.tag=s,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ns(s,l,m,b){return new N2(s,l,m,b)}function hh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function T2(s){if(typeof s=="function")return hh(s)?1:0;if(s!=null){if(s=s.$$typeof,s===he)return 11;if(s===Q)return 14}return 2}function ji(s,l){var m=s.alternate;return m===null?(m=ns(s.tag,l,s.key,s.mode),m.elementType=s.elementType,m.type=s.type,m.stateNode=s.stateNode,m.alternate=s,s.alternate=m):(m.pendingProps=l,m.type=s.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=s.flags&14680064,m.childLanes=s.childLanes,m.lanes=s.lanes,m.child=s.child,m.memoizedProps=s.memoizedProps,m.memoizedState=s.memoizedState,m.updateQueue=s.updateQueue,l=s.dependencies,m.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},m.sibling=s.sibling,m.index=s.index,m.ref=s.ref,m}function tu(s,l,m,b,_,N){var M=2;if(b=s,typeof s=="function")hh(s)&&(M=1);else if(typeof s=="string")M=5;else e:switch(s){case ee:return pa(m.children,_,N,l);case ue:M=8,_|=8;break;case se:return s=ns(12,m,l,_|2),s.elementType=se,s.lanes=N,s;case Te:return s=ns(13,m,l,_),s.elementType=Te,s.lanes=N,s;case Ie:return s=ns(19,m,l,_),s.elementType=Ie,s.lanes=N,s;case fe:return ru(m,_,N,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Ue:M=10;break e;case ge:M=9;break e;case he:M=11;break e;case Q:M=14;break e;case Re:M=16,b=null;break e}throw Error(r(130,s==null?s:typeof s,""))}return l=ns(M,m,l,_),l.elementType=s,l.type=b,l.lanes=N,l}function pa(s,l,m,b){return s=ns(7,s,b,l),s.lanes=m,s}function ru(s,l,m,b){return s=ns(22,s,b,l),s.elementType=fe,s.lanes=m,s.stateNode={isHidden:!1},s}function fh(s,l,m){return s=ns(6,s,null,l),s.lanes=m,s}function mh(s,l,m){return l=ns(4,s.children!==null?s.children:[],s.key,l),l.lanes=m,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function I2(s,l,m,b,_){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=re(0),this.expirationTimes=re(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=re(0),this.identifierPrefix=b,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function gh(s,l,m,b,_,N,M,H,X){return s=new I2(s,l,m,H,X),l===1?(l=1,N===!0&&(l|=8)):l=0,N=ns(3,null,null,l),s.current=N,N.stateNode=s,N.memoizedState={element:b,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Td(N),s}function R2(s,l,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:b==null?null:""+b,children:s,containerInfo:l,implementation:m}}function Am(s){if(!s)return Ni;s=s._reactInternals;e:{if(En(s)!==s||s.tag!==1)throw Error(r(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(An(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(r(171))}if(s.tag===1){var m=s.type;if(An(m))return Q0(s,m,l)}return l}function Sm(s,l,m,b,_,N,M,H,X){return s=gh(m,b,!0,s,_,N,M,H,X),s.context=Am(null),m=s.current,b=yn(),_=Di(m),N=Qs(b,_),N.callback=l??null,Ri(m,N,_),s.current.lanes=_,F(s,_,b),Nn(s,b),s}function nu(s,l,m,b){var _=l.current,N=yn(),M=Di(_);return m=Am(m),l.context===null?l.context=m:l.pendingContext=m,l=Qs(N,M),l.payload={element:s},b=b===void 0?null:b,b!==null&&(l.callback=b),s=Ri(_,l,M),s!==null&&(ys(s,_,M,N),Dc(s,_,M)),M}function su(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function _m(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var m=s.retryLane;s.retryLane=m!==0&&m<l?m:l}}function ph(s,l){_m(s,l),(s=s.alternate)&&_m(s,l)}function k2(){return null}var Nm=typeof reportError=="function"?reportError:function(s){console.error(s)};function xh(s){this._internalRoot=s}iu.prototype.render=xh.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));nu(s,l,null,null)},iu.prototype.unmount=xh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;fa(function(){nu(null,s,null,null)}),l[Xs]=null}};function iu(s){this._internalRoot=s}iu.prototype.unstable_scheduleHydration=function(s){if(s){var l=Vt();s={blockedOn:null,target:s,priority:l};for(var m=0;m<Yr.length&&l!==0&&l<Yr[m].priority;m++);Yr.splice(m,0,s),m===0&&uc(s)}};function yh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function au(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Tm(){}function O2(s,l,m,b,_){if(_){if(typeof b=="function"){var N=b;b=function(){var ce=su(M);N.call(ce)}}var M=Sm(l,b,s,0,null,!1,!1,"",Tm);return s._reactRootContainer=M,s[Xs]=M.current,Jo(s.nodeType===8?s.parentNode:s),fa(),M}for(;_=s.lastChild;)s.removeChild(_);if(typeof b=="function"){var H=b;b=function(){var ce=su(X);H.call(ce)}}var X=gh(s,0,!1,null,null,!1,!1,"",Tm);return s._reactRootContainer=X,s[Xs]=X.current,Jo(s.nodeType===8?s.parentNode:s),fa(function(){nu(l,X,m,b)}),X}function ou(s,l,m,b,_){var N=m._reactRootContainer;if(N){var M=N;if(typeof _=="function"){var H=_;_=function(){var X=su(M);H.call(X)}}nu(l,M,s,_)}else M=O2(m,l,s,_,b);return su(M)}Ma=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var m=Ft(l.pendingLanes);m!==0&&(mr(l,m|1),Nn(l,Rt()),(_t&6)===0&&(no=Rt()+500,Ti()))}break;case 13:fa(function(){var b=Zs(s,1);if(b!==null){var _=yn();ys(b,s,1,_)}}),ph(s,1)}},an=function(s){if(s.tag===13){var l=Zs(s,134217728);if(l!==null){var m=yn();ys(l,s,134217728,m)}ph(s,134217728)}},Ge=function(s){if(s.tag===13){var l=Di(s),m=Zs(s,l);if(m!==null){var b=yn();ys(m,s,l,b)}ph(s,l)}},Vt=function(){return dt},Fo=function(s,l){var m=dt;try{return dt=s,l()}finally{dt=m}},di=function(s,l,m){switch(l){case"input":if(Bt(s,m),l=m.name,m.type==="radio"&&l!=null){for(m=s;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<m.length;l++){var b=m[l];if(b!==s&&b.form===s.form){var _=Ac(b);if(!_)throw Error(r(90));_s(b),Bt(b,_)}}}break;case"textarea":bn(s,m);break;case"select":l=m.value,l!=null&&Pe(s,!!m.multiple,l,!1)}},sr=ch,At=fa;var P2={usingClientEntryPoint:!1,Events:[rl,Ha,Ac,nt,Ct,ch]},pl={findFiberByHostInstance:ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D2={bundleType:pl.bundleType,version:pl.version,rendererPackageName:pl.rendererPackageName,rendererConfig:pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=nc(s),s===null?null:s.stateNode},findFiberByHostInstance:pl.findFiberByHostInstance||k2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{bt=lu.inject(D2),ut=lu}catch{}}return Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P2,Tn.createPortal=function(s,l){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yh(l))throw Error(r(200));return R2(s,l,null,m)},Tn.createRoot=function(s,l){if(!yh(s))throw Error(r(299));var m=!1,b="",_=Nm;return l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(b=l.identifierPrefix),l.onRecoverableError!==void 0&&(_=l.onRecoverableError)),l=gh(s,1,!1,null,null,m,!1,b,_),s[Xs]=l.current,Jo(s.nodeType===8?s.parentNode:s),new xh(l)},Tn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=nc(l),s=s===null?null:s.stateNode,s},Tn.flushSync=function(s){return fa(s)},Tn.hydrate=function(s,l,m){if(!au(l))throw Error(r(200));return ou(null,s,l,!0,m)},Tn.hydrateRoot=function(s,l,m){if(!yh(s))throw Error(r(405));var b=m!=null&&m.hydratedSources||null,_=!1,N="",M=Nm;if(m!=null&&(m.unstable_strictMode===!0&&(_=!0),m.identifierPrefix!==void 0&&(N=m.identifierPrefix),m.onRecoverableError!==void 0&&(M=m.onRecoverableError)),l=Sm(l,null,s,1,m??null,_,!1,N,M),s[Xs]=l.current,Jo(s),b)for(s=0;s<b.length;s++)m=b[s],_=m._getVersion,_=_(m._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[m,_]:l.mutableSourceEagerHydrationData.push(m,_);return new iu(l)},Tn.render=function(s,l,m){if(!au(l))throw Error(r(200));return ou(null,s,l,!1,m)},Tn.unmountComponentAtNode=function(s){if(!au(s))throw Error(r(40));return s._reactRootContainer?(fa(function(){ou(null,null,s,!1,function(){s._reactRootContainer=null,s[Xs]=null})}),!0):!1},Tn.unstable_batchedUpdates=ch,Tn.unstable_renderSubtreeIntoContainer=function(s,l,m,b){if(!au(m))throw Error(r(200));if(s==null||s._reactInternals===void 0)throw Error(r(38));return ou(s,l,m,!1,b)},Tn.version="18.3.1-next-f1338f8080-20240426",Tn}var jm;function ex(){if(jm)return bh.exports;jm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),bh.exports=W2(),bh.exports}var Bm;function z2(){if(Bm)return uu;Bm=1;var t=ex();return uu.createRoot=t.createRoot,uu.hydrateRoot=t.hydrateRoot,uu}var H2=z2(),z=$f();const ve=Gf(z);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Lm="popstate";function G2(t={}){function e(a,u){let{pathname:h,search:g,hash:v}=a.location;return ef("",{pathname:h,search:g,hash:v},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function r(a,u){return typeof u=="string"?u:Pl(u)}return X2(e,r,null,t)}function dr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function os(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $2(){return Math.random().toString(36).substring(2,10)}function Fm(t,e){return{usr:t.state,key:t.key,idx:e}}function ef(t,e,r=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ro(e):e,state:r,key:e&&e.key||a||$2()}}function Pl({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ro(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let a=t.indexOf("?");a>=0&&(e.search=t.substring(a),t=t.substring(0,a)),t&&(e.pathname=t)}return e}function X2(t,e,r,a={}){let{window:u=document.defaultView,v5Compat:h=!1}=a,g=u.history,v="POP",y=null,w=A();w==null&&(w=0,g.replaceState({...g.state,idx:w},""));function A(){return(g.state||{idx:null}).idx}function C(){v="POP";let L=A(),U=L==null?null:L-w;w=L,y&&y({action:v,location:D.location,delta:U})}function T(L,U){v="PUSH";let W=ef(D.location,L,U);w=A()+1;let j=Fm(W,w),q=D.createHref(W);try{g.pushState(j,"",q)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;u.location.assign(q)}h&&y&&y({action:v,location:D.location,delta:1})}function R(L,U){v="REPLACE";let W=ef(D.location,L,U);w=A();let j=Fm(W,w),q=D.createHref(W);g.replaceState(j,"",q),h&&y&&y({action:v,location:D.location,delta:0})}function k(L){return Y2(L)}let D={get action(){return v},get location(){return t(u,g)},listen(L){if(y)throw new Error("A history only accepts one active listener");return u.addEventListener(Lm,C),y=L,()=>{u.removeEventListener(Lm,C),y=null}},createHref(L){return e(u,L)},createURL:k,encodeLocation(L){let U=k(L);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:T,replace:R,go(L){return g.go(L)}};return D}function Y2(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),dr(r,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:Pl(t);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function tx(t,e,r="/"){return q2(t,e,r,!1)}function q2(t,e,r,a){let u=typeof e=="string"?Ro(e):e,h=si(u.pathname||"/",r);if(h==null)return null;let g=rx(t);K2(g);let v=null;for(let y=0;v==null&&y<g.length;++y){let w=ov(h);v=iv(g[y],w,a)}return v}function rx(t,e=[],r=[],a="",u=!1){let h=(g,v,y=u,w)=>{let A={relativePath:w===void 0?g.path||"":w,caseSensitive:g.caseSensitive===!0,childrenIndex:v,route:g};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(a)&&y)return;dr(A.relativePath.startsWith(a),`Absolute route path "${A.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(a.length)}let C=ni([a,A.relativePath]),T=r.concat(A);g.children&&g.children.length>0&&(dr(g.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),rx(g.children,e,T,C,y)),!(g.path==null&&!g.index)&&e.push({path:C,score:nv(C,g.index),routesMeta:T})};return t.forEach((g,v)=>{var y;if(g.path===""||!((y=g.path)!=null&&y.includes("?")))h(g,v);else for(let w of nx(g.path))h(g,v,!0,w)}),e}function nx(t){let e=t.split("/");if(e.length===0)return[];let[r,...a]=e,u=r.endsWith("?"),h=r.replace(/\?$/,"");if(a.length===0)return u?[h,""]:[h];let g=nx(a.join("/")),v=[];return v.push(...g.map(y=>y===""?h:[h,y].join("/"))),u&&v.push(...g),v.map(y=>t.startsWith("/")&&y===""?"/":y)}function K2(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:sv(e.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var Z2=/^:[\w-]+$/,Q2=3,J2=2,ev=1,tv=10,rv=-2,Um=t=>t==="*";function nv(t,e){let r=t.split("/"),a=r.length;return r.some(Um)&&(a+=rv),e&&(a+=J2),r.filter(u=>!Um(u)).reduce((u,h)=>u+(Z2.test(h)?Q2:h===""?ev:tv),a)}function sv(t,e){return t.length===e.length&&t.slice(0,-1).every((a,u)=>a===e[u])?t[t.length-1]-e[e.length-1]:0}function iv(t,e,r=!1){let{routesMeta:a}=t,u={},h="/",g=[];for(let v=0;v<a.length;++v){let y=a[v],w=v===a.length-1,A=h==="/"?e:e.slice(h.length)||"/",C=_u({path:y.relativePath,caseSensitive:y.caseSensitive,end:w},A),T=y.route;if(!C&&w&&r&&!a[a.length-1].route.index&&(C=_u({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},A)),!C)return null;Object.assign(u,C.params),g.push({params:u,pathname:ni([h,C.pathname]),pathnameBase:dv(ni([h,C.pathnameBase])),route:T}),C.pathnameBase!=="/"&&(h=ni([h,C.pathnameBase]))}return g}function _u(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=av(t.path,t.caseSensitive,t.end),u=e.match(r);if(!u)return null;let h=u[0],g=h.replace(/(.)\/+$/,"$1"),v=u.slice(1);return{params:a.reduce((w,{paramName:A,isOptional:C},T)=>{if(A==="*"){let k=v[T]||"";g=h.slice(0,h.length-k.length).replace(/(.)\/+$/,"$1")}const R=v[T];return C&&!R?w[A]=void 0:w[A]=(R||"").replace(/%2F/g,"/"),w},{}),pathname:h,pathnameBase:g,pattern:t}}function av(t,e=!1,r=!0){os(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],u="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,v,y)=>(a.push({paramName:v,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(a.push({paramName:"*"}),u+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?u+="\\/*$":t!==""&&t!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,e?void 0:"i"),a]}function ov(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return os(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function si(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}var sx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lv=t=>sx.test(t);function cv(t,e="/"){let{pathname:r,search:a="",hash:u=""}=typeof t=="string"?Ro(t):t,h;if(r)if(lv(r))h=r;else{if(r.includes("//")){let g=r;r=r.replace(/\/\/+/g,"/"),os(!1,`Pathnames cannot have embedded double slashes - normalizing ${g} -> ${r}`)}r.startsWith("/")?h=Vm(r.substring(1),"/"):h=Vm(r,e)}else h=e;return{pathname:h,search:hv(a),hash:fv(u)}}function Vm(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(u=>{u===".."?r.length>1&&r.pop():u!=="."&&r.push(u)}),r.length>1?r.join("/"):"/"}function Ah(t,e,r,a){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uv(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ix(t){let e=uv(t);return e.map((r,a)=>a===e.length-1?r.pathname:r.pathnameBase)}function ax(t,e,r,a=!1){let u;typeof t=="string"?u=Ro(t):(u={...t},dr(!u.pathname||!u.pathname.includes("?"),Ah("?","pathname","search",u)),dr(!u.pathname||!u.pathname.includes("#"),Ah("#","pathname","hash",u)),dr(!u.search||!u.search.includes("#"),Ah("#","search","hash",u)));let h=t===""||u.pathname==="",g=h?"/":u.pathname,v;if(g==null)v=r;else{let C=e.length-1;if(!a&&g.startsWith("..")){let T=g.split("/");for(;T[0]==="..";)T.shift(),C-=1;u.pathname=T.join("/")}v=C>=0?e[C]:"/"}let y=cv(u,v),w=g&&g!=="/"&&g.endsWith("/"),A=(h||g===".")&&r.endsWith("/");return!y.pathname.endsWith("/")&&(w||A)&&(y.pathname+="/"),y}var ni=t=>t.join("/").replace(/\/\/+/g,"/"),dv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,mv=class{constructor(t,e,r,a=!1){this.status=t,this.statusText=e||"",this.internal=a,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function gv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function pv(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ox=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function lx(t,e){let r=t;if(typeof r!="string"||!sx.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let a=r,u=!1;if(ox)try{let h=new URL(window.location.href),g=r.startsWith("//")?new URL(h.protocol+r):new URL(r),v=si(g.pathname,e);g.origin===h.origin&&v!=null?r=v+g.search+g.hash:u=!0}catch{os(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:u,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cx=["POST","PUT","PATCH","DELETE"];new Set(cx);var xv=["GET",...cx];new Set(xv);var ko=z.createContext(null);ko.displayName="DataRouter";var Hu=z.createContext(null);Hu.displayName="DataRouterState";var yv=z.createContext(!1),ux=z.createContext({isTransitioning:!1});ux.displayName="ViewTransition";var wv=z.createContext(new Map);wv.displayName="Fetchers";var vv=z.createContext(null);vv.displayName="Await";var ls=z.createContext(null);ls.displayName="Navigation";var Xl=z.createContext(null);Xl.displayName="Location";var oi=z.createContext({outlet:null,matches:[],isDataRoute:!1});oi.displayName="Route";var Xf=z.createContext(null);Xf.displayName="RouteError";var dx="REACT_ROUTER_ERROR",bv="REDIRECT",Ev="ROUTE_ERROR_RESPONSE";function Cv(t){if(t.startsWith(`${dx}:${bv}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Av(t){if(t.startsWith(`${dx}:${Ev}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new mv(e.status,e.statusText,e.data)}catch{}}function Sv(t,{relative:e}={}){dr(Yl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=z.useContext(ls),{hash:u,pathname:h,search:g}=ql(t,{relative:e}),v=h;return r!=="/"&&(v=h==="/"?r:ni([r,h])),a.createHref({pathname:v,search:g,hash:u})}function Yl(){return z.useContext(Xl)!=null}function Us(){return dr(Yl(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Xl).location}var hx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fx(t){z.useContext(ls).static||z.useLayoutEffect(t)}function As(){let{isDataRoute:t}=z.useContext(oi);return t?Lv():_v()}function _v(){dr(Yl(),"useNavigate() may be used only in the context of a <Router> component.");let t=z.useContext(ko),{basename:e,navigator:r}=z.useContext(ls),{matches:a}=z.useContext(oi),{pathname:u}=Us(),h=JSON.stringify(ix(a)),g=z.useRef(!1);return fx(()=>{g.current=!0}),z.useCallback((y,w={})=>{if(os(g.current,hx),!g.current)return;if(typeof y=="number"){r.go(y);return}let A=ax(y,JSON.parse(h),u,w.relative==="path");t==null&&e!=="/"&&(A.pathname=A.pathname==="/"?e:ni([e,A.pathname])),(w.replace?r.replace:r.push)(A,w.state,w)},[e,r,h,u,t])}z.createContext(null);function ql(t,{relative:e}={}){let{matches:r}=z.useContext(oi),{pathname:a}=Us(),u=JSON.stringify(ix(r));return z.useMemo(()=>ax(t,JSON.parse(u),a,e==="path"),[t,u,a,e])}function Nv(t,e){return mx(t,e)}function mx(t,e,r,a,u){var W;dr(Yl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=z.useContext(ls),{matches:g}=z.useContext(oi),v=g[g.length-1],y=v?v.params:{},w=v?v.pathname:"/",A=v?v.pathnameBase:"/",C=v&&v.route;{let j=C&&C.path||"";px(w,!C||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let T=Us(),R;if(e){let j=typeof e=="string"?Ro(e):e;dr(A==="/"||((W=j.pathname)==null?void 0:W.startsWith(A)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${j.pathname}" was given in the \`location\` prop.`),R=j}else R=T;let k=R.pathname||"/",D=k;if(A!=="/"){let j=A.replace(/^\//,"").split("/");D="/"+k.replace(/^\//,"").split("/").slice(j.length).join("/")}let L=tx(t,{pathname:D});os(C||L!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),os(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=Ov(L&&L.map(j=>Object.assign({},j,{params:Object.assign({},y,j.params),pathname:ni([A,h.encodeLocation?h.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?A:ni([A,h.encodeLocation?h.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),g,r,a,u);return e&&U?z.createElement(Xl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},U):U}function Tv(){let t=Bv(),e=gv(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:a},h={padding:"2px 4px",backgroundColor:a},g=null;return console.error("Error handled by React Router default ErrorBoundary:",t),g=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:h},"ErrorBoundary")," or"," ",z.createElement("code",{style:h},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),r?z.createElement("pre",{style:u},r):null,g)}var Iv=z.createElement(Tv,null),gx=class extends z.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const r=Av(t.digest);r&&(t=r)}let e=t!==void 0?z.createElement(oi.Provider,{value:this.props.routeContext},z.createElement(Xf.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?z.createElement(Rv,{error:t},e):e}};gx.contextType=yv;var Sh=new WeakMap;function Rv({children:t,error:e}){let{basename:r}=z.useContext(ls);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=Cv(e.digest);if(a){let u=Sh.get(e);if(u)throw u;let h=lx(a.location,r);if(ox&&!Sh.get(e))if(h.isExternal||a.reloadDocument)window.location.href=h.absoluteURL||h.to;else{const g=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(h.to,{replace:a.replace}));throw Sh.set(e,g),g}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${h.absoluteURL||h.to}`})}}return t}function kv({routeContext:t,match:e,children:r}){let a=z.useContext(ko);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(oi.Provider,{value:t},r)}function Ov(t,e=[],r=null,a=null,u=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let h=t,g=r==null?void 0:r.errors;if(g!=null){let A=h.findIndex(C=>C.route.id&&(g==null?void 0:g[C.route.id])!==void 0);dr(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(g).join(",")}`),h=h.slice(0,Math.min(h.length,A+1))}let v=!1,y=-1;if(r)for(let A=0;A<h.length;A++){let C=h[A];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(y=A),C.route.id){let{loaderData:T,errors:R}=r,k=C.route.loader&&!T.hasOwnProperty(C.route.id)&&(!R||R[C.route.id]===void 0);if(C.route.lazy||k){v=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}let w=r&&a?(A,C)=>{var T,R;a(A,{location:r.location,params:((R=(T=r.matches)==null?void 0:T[0])==null?void 0:R.params)??{},unstable_pattern:pv(r.matches),errorInfo:C})}:void 0;return h.reduceRight((A,C,T)=>{let R,k=!1,D=null,L=null;r&&(R=g&&C.route.id?g[C.route.id]:void 0,D=C.route.errorElement||Iv,v&&(y<0&&T===0?(px("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,L=null):y===T&&(k=!0,L=C.route.hydrateFallbackElement||null)));let U=e.concat(h.slice(0,T+1)),W=()=>{let j;return R?j=D:k?j=L:C.route.Component?j=z.createElement(C.route.Component,null):C.route.element?j=C.route.element:j=A,z.createElement(kv,{match:C,routeContext:{outlet:A,matches:U,isDataRoute:r!=null},children:j})};return r&&(C.route.ErrorBoundary||C.route.errorElement||T===0)?z.createElement(gx,{location:r.location,revalidation:r.revalidation,component:D,error:R,children:W(),routeContext:{outlet:null,matches:U,isDataRoute:!0},onError:w}):W()},null)}function Yf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pv(t){let e=z.useContext(ko);return dr(e,Yf(t)),e}function Dv(t){let e=z.useContext(Hu);return dr(e,Yf(t)),e}function Mv(t){let e=z.useContext(oi);return dr(e,Yf(t)),e}function qf(t){let e=Mv(t),r=e.matches[e.matches.length-1];return dr(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function jv(){return qf("useRouteId")}function Bv(){var a;let t=z.useContext(Xf),e=Dv("useRouteError"),r=qf("useRouteError");return t!==void 0?t:(a=e.errors)==null?void 0:a[r]}function Lv(){let{router:t}=Pv("useNavigate"),e=qf("useNavigate"),r=z.useRef(!1);return fx(()=>{r.current=!0}),z.useCallback(async(u,h={})=>{os(r.current,hx),r.current&&(typeof u=="number"?await t.navigate(u):await t.navigate(u,{fromRouteId:e,...h}))},[t,e])}var Wm={};function px(t,e,r){!e&&!Wm[t]&&(Wm[t]=!0,os(!1,r))}z.memo(Fv);function Fv({routes:t,future:e,state:r,onError:a}){return mx(t,void 0,r,a,e)}function Br(t){dr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Uv({basename:t="/",children:e=null,location:r,navigationType:a="POP",navigator:u,static:h=!1,unstable_useTransitions:g}){dr(!Yl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let v=t.replace(/^\/*/,"/"),y=z.useMemo(()=>({basename:v,navigator:u,static:h,unstable_useTransitions:g,future:{}}),[v,u,h,g]);typeof r=="string"&&(r=Ro(r));let{pathname:w="/",search:A="",hash:C="",state:T=null,key:R="default"}=r,k=z.useMemo(()=>{let D=si(w,v);return D==null?null:{location:{pathname:D,search:A,hash:C,state:T,key:R},navigationType:a}},[v,w,A,C,T,R,a]);return os(k!=null,`<Router basename="${v}"> is not able to match the URL "${w}${A}${C}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:z.createElement(ls.Provider,{value:y},z.createElement(Xl.Provider,{children:e,value:k}))}function Vv({children:t,location:e}){return Nv(tf(t),e)}function tf(t,e=[]){let r=[];return z.Children.forEach(t,(a,u)=>{if(!z.isValidElement(a))return;let h=[...e,u];if(a.type===z.Fragment){r.push.apply(r,tf(a.props.children,h));return}dr(a.type===Br,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dr(!a.props.index||!a.props.children,"An index route cannot have child routes.");let g={id:a.props.id||h.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(g.children=tf(a.props.children,h)),r.push(g)}),r}var vu="get",bu="application/x-www-form-urlencoded";function Gu(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function Wv(t){return Gu(t)&&t.tagName.toLowerCase()==="button"}function zv(t){return Gu(t)&&t.tagName.toLowerCase()==="form"}function Hv(t){return Gu(t)&&t.tagName.toLowerCase()==="input"}function Gv(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $v(t,e){return t.button===0&&(!e||e==="_self")&&!Gv(t)}function rf(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let a=t[r];return e.concat(Array.isArray(a)?a.map(u=>[r,u]):[[r,a]])},[]))}function Xv(t,e){let r=rf(t);return e&&e.forEach((a,u)=>{r.has(u)||e.getAll(u).forEach(h=>{r.append(u,h)})}),r}var du=null;function Yv(){if(du===null)try{new FormData(document.createElement("form"),0),du=!1}catch{du=!0}return du}var qv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _h(t){return t!=null&&!qv.has(t)?(os(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bu}"`),null):t}function Kv(t,e){let r,a,u,h,g;if(zv(t)){let v=t.getAttribute("action");a=v?si(v,e):null,r=t.getAttribute("method")||vu,u=_h(t.getAttribute("enctype"))||bu,h=new FormData(t)}else if(Wv(t)||Hv(t)&&(t.type==="submit"||t.type==="image")){let v=t.form;if(v==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=t.getAttribute("formaction")||v.getAttribute("action");if(a=y?si(y,e):null,r=t.getAttribute("formmethod")||v.getAttribute("method")||vu,u=_h(t.getAttribute("formenctype"))||_h(v.getAttribute("enctype"))||bu,h=new FormData(v,t),!Yv()){let{name:w,type:A,value:C}=t;if(A==="image"){let T=w?`${w}.`:"";h.append(`${T}x`,"0"),h.append(`${T}y`,"0")}else w&&h.append(w,C)}}else{if(Gu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=vu,a=null,u=bu,g=t}return h&&u==="text/plain"&&(g=h,h=void 0),{action:a,method:r.toLowerCase(),encType:u,formData:h,body:g}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Kf(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zv(t,e,r,a){let u=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${a}`:u.pathname=`${u.pathname}.${a}`:u.pathname==="/"?u.pathname=`_root.${a}`:e&&si(u.pathname,e)==="/"?u.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${a}`,u}async function Qv(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jv(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function eb(t,e,r){let a=await Promise.all(t.map(async u=>{let h=e.routes[u.route.id];if(h){let g=await Qv(h,r);return g.links?g.links():[]}return[]}));return sb(a.flat(1).filter(Jv).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function zm(t,e,r,a,u,h){let g=(y,w)=>r[w]?y.route.id!==r[w].route.id:!0,v=(y,w)=>{var A;return r[w].pathname!==y.pathname||((A=r[w].route.path)==null?void 0:A.endsWith("*"))&&r[w].params["*"]!==y.params["*"]};return h==="assets"?e.filter((y,w)=>g(y,w)||v(y,w)):h==="data"?e.filter((y,w)=>{var C;let A=a.routes[y.route.id];if(!A||!A.hasLoader)return!1;if(g(y,w)||v(y,w))return!0;if(y.route.shouldRevalidate){let T=y.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:((C=r[0])==null?void 0:C.params)||{},nextUrl:new URL(t,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function tb(t,e,{includeHydrateFallback:r}={}){return rb(t.map(a=>{let u=e.routes[a.route.id];if(!u)return[];let h=[u.module];return u.clientActionModule&&(h=h.concat(u.clientActionModule)),u.clientLoaderModule&&(h=h.concat(u.clientLoaderModule)),r&&u.hydrateFallbackModule&&(h=h.concat(u.hydrateFallbackModule)),u.imports&&(h=h.concat(u.imports)),h}).flat(1))}function rb(t){return[...new Set(t)]}function nb(t){let e={},r=Object.keys(t).sort();for(let a of r)e[a]=t[a];return e}function sb(t,e){let r=new Set;return new Set(e),t.reduce((a,u)=>{let h=JSON.stringify(nb(u));return r.has(h)||(r.add(h),a.push({key:h,link:u})),a},[])}function xx(){let t=z.useContext(ko);return Kf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ib(){let t=z.useContext(Hu);return Kf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Zf=z.createContext(void 0);Zf.displayName="FrameworkContext";function yx(){let t=z.useContext(Zf);return Kf(t,"You must render this element inside a <HydratedRouter> element"),t}function ab(t,e){let r=z.useContext(Zf),[a,u]=z.useState(!1),[h,g]=z.useState(!1),{onFocus:v,onBlur:y,onMouseEnter:w,onMouseLeave:A,onTouchStart:C}=e,T=z.useRef(null);z.useEffect(()=>{if(t==="render"&&g(!0),t==="viewport"){let D=U=>{U.forEach(W=>{g(W.isIntersecting)})},L=new IntersectionObserver(D,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[t]),z.useEffect(()=>{if(a){let D=setTimeout(()=>{g(!0)},100);return()=>{clearTimeout(D)}}},[a]);let R=()=>{u(!0)},k=()=>{u(!1),g(!1)};return r?t!=="intent"?[h,T,{}]:[h,T,{onFocus:yl(v,R),onBlur:yl(y,k),onMouseEnter:yl(w,R),onMouseLeave:yl(A,k),onTouchStart:yl(C,R)}]:[!1,T,{}]}function yl(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function ob({page:t,...e}){let{router:r}=xx(),a=z.useMemo(()=>tx(r.routes,t,r.basename),[r.routes,t,r.basename]);return a?z.createElement(cb,{page:t,matches:a,...e}):null}function lb(t){let{manifest:e,routeModules:r}=yx(),[a,u]=z.useState([]);return z.useEffect(()=>{let h=!1;return eb(t,e,r).then(g=>{h||u(g)}),()=>{h=!0}},[t,e,r]),a}function cb({page:t,matches:e,...r}){let a=Us(),{future:u,manifest:h,routeModules:g}=yx(),{basename:v}=xx(),{loaderData:y,matches:w}=ib(),A=z.useMemo(()=>zm(t,e,w,h,a,"data"),[t,e,w,h,a]),C=z.useMemo(()=>zm(t,e,w,h,a,"assets"),[t,e,w,h,a]),T=z.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let D=new Set,L=!1;if(e.forEach(W=>{var q;let j=h.routes[W.route.id];!j||!j.hasLoader||(!A.some(Z=>Z.route.id===W.route.id)&&W.route.id in y&&((q=g[W.route.id])!=null&&q.shouldRevalidate)||j.hasClientLoader?L=!0:D.add(W.route.id))}),D.size===0)return[];let U=Zv(t,v,u.unstable_trailingSlashAwareDataRequests,"data");return L&&D.size>0&&U.searchParams.set("_routes",e.filter(W=>D.has(W.route.id)).map(W=>W.route.id).join(",")),[U.pathname+U.search]},[v,u.unstable_trailingSlashAwareDataRequests,y,a,h,A,e,t,g]),R=z.useMemo(()=>tb(C,h),[C,h]),k=lb(C);return z.createElement(z.Fragment,null,T.map(D=>z.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...r})),R.map(D=>z.createElement("link",{key:D,rel:"modulepreload",href:D,...r})),k.map(({key:D,link:L})=>z.createElement("link",{key:D,nonce:r.nonce,...L})))}function ub(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var db=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{db&&(window.__reactRouterVersion="7.12.0")}catch{}function hb({basename:t,children:e,unstable_useTransitions:r,window:a}){let u=z.useRef();u.current==null&&(u.current=G2({window:a,v5Compat:!0}));let h=u.current,[g,v]=z.useState({action:h.action,location:h.location}),y=z.useCallback(w=>{r===!1?v(w):z.startTransition(()=>v(w))},[r]);return z.useLayoutEffect(()=>h.listen(y),[h,y]),z.createElement(Uv,{basename:t,children:e,location:g.location,navigationType:g.action,navigator:h,unstable_useTransitions:r})}var wx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,at=z.forwardRef(function({onClick:e,discover:r="render",prefetch:a="none",relative:u,reloadDocument:h,replace:g,state:v,target:y,to:w,preventScrollReset:A,viewTransition:C,unstable_defaultShouldRevalidate:T,...R},k){let{basename:D,unstable_useTransitions:L}=z.useContext(ls),U=typeof w=="string"&&wx.test(w),W=lx(w,D);w=W.to;let j=Sv(w,{relative:u}),[q,Z,te]=ab(a,R),ee=pb(w,{replace:g,state:v,target:y,preventScrollReset:A,relative:u,viewTransition:C,unstable_defaultShouldRevalidate:T,unstable_useTransitions:L});function ue(Ue){e&&e(Ue),Ue.defaultPrevented||ee(Ue)}let se=z.createElement("a",{...R,...te,href:W.absoluteURL||j,onClick:W.isExternal||h?e:ue,ref:ub(k,Z),target:y,"data-discover":!U&&r==="render"?"true":void 0});return q&&!U?z.createElement(z.Fragment,null,se,z.createElement(ob,{page:j})):se});at.displayName="Link";var fb=z.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:a="",end:u=!1,style:h,to:g,viewTransition:v,children:y,...w},A){let C=ql(g,{relative:w.relative}),T=Us(),R=z.useContext(Hu),{navigator:k,basename:D}=z.useContext(ls),L=R!=null&&Eb(C)&&v===!0,U=k.encodeLocation?k.encodeLocation(C).pathname:C.pathname,W=T.pathname,j=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;r||(W=W.toLowerCase(),j=j?j.toLowerCase():null,U=U.toLowerCase()),j&&D&&(j=si(j,D)||j);const q=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let Z=W===U||!u&&W.startsWith(U)&&W.charAt(q)==="/",te=j!=null&&(j===U||!u&&j.startsWith(U)&&j.charAt(U.length)==="/"),ee={isActive:Z,isPending:te,isTransitioning:L},ue=Z?e:void 0,se;typeof a=="function"?se=a(ee):se=[a,Z?"active":null,te?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let Ue=typeof h=="function"?h(ee):h;return z.createElement(at,{...w,"aria-current":ue,className:se,ref:A,style:Ue,to:g,viewTransition:v},typeof y=="function"?y(ee):y)});fb.displayName="NavLink";var mb=z.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:a,replace:u,state:h,method:g=vu,action:v,onSubmit:y,relative:w,preventScrollReset:A,viewTransition:C,unstable_defaultShouldRevalidate:T,...R},k)=>{let{unstable_useTransitions:D}=z.useContext(ls),L=vb(),U=bb(v,{relative:w}),W=g.toLowerCase()==="get"?"get":"post",j=typeof v=="string"&&wx.test(v),q=Z=>{if(y&&y(Z),Z.defaultPrevented)return;Z.preventDefault();let te=Z.nativeEvent.submitter,ee=(te==null?void 0:te.getAttribute("formmethod"))||g,ue=()=>L(te||Z.currentTarget,{fetcherKey:e,method:ee,navigate:r,replace:u,state:h,relative:w,preventScrollReset:A,viewTransition:C,unstable_defaultShouldRevalidate:T});D&&r!==!1?z.startTransition(()=>ue()):ue()};return z.createElement("form",{ref:k,method:W,action:U,onSubmit:a?y:q,...R,"data-discover":!j&&t==="render"?"true":void 0})});mb.displayName="Form";function gb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vx(t){let e=z.useContext(ko);return dr(e,gb(t)),e}function pb(t,{target:e,replace:r,state:a,preventScrollReset:u,relative:h,viewTransition:g,unstable_defaultShouldRevalidate:v,unstable_useTransitions:y}={}){let w=As(),A=Us(),C=ql(t,{relative:h});return z.useCallback(T=>{if($v(T,e)){T.preventDefault();let R=r!==void 0?r:Pl(A)===Pl(C),k=()=>w(t,{replace:R,state:a,preventScrollReset:u,relative:h,viewTransition:g,unstable_defaultShouldRevalidate:v});y?z.startTransition(()=>k()):k()}},[A,w,C,r,a,e,t,u,h,g,v,y])}function xb(t){os(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=z.useRef(rf(t)),r=z.useRef(!1),a=Us(),u=z.useMemo(()=>Xv(a.search,r.current?null:e.current),[a.search]),h=As(),g=z.useCallback((v,y)=>{const w=rf(typeof v=="function"?v(new URLSearchParams(u)):v);r.current=!0,h("?"+w,y)},[h,u]);return[u,g]}var yb=0,wb=()=>`__${String(++yb)}__`;function vb(){let{router:t}=vx("useSubmit"),{basename:e}=z.useContext(ls),r=jv(),a=t.fetch,u=t.navigate;return z.useCallback(async(h,g={})=>{let{action:v,method:y,encType:w,formData:A,body:C}=Kv(h,e);if(g.navigate===!1){let T=g.fetcherKey||wb();await a(T,r,g.action||v,{unstable_defaultShouldRevalidate:g.unstable_defaultShouldRevalidate,preventScrollReset:g.preventScrollReset,formData:A,body:C,formMethod:g.method||y,formEncType:g.encType||w,flushSync:g.flushSync})}else await u(g.action||v,{unstable_defaultShouldRevalidate:g.unstable_defaultShouldRevalidate,preventScrollReset:g.preventScrollReset,formData:A,body:C,formMethod:g.method||y,formEncType:g.encType||w,replace:g.replace,state:g.state,fromRouteId:r,flushSync:g.flushSync,viewTransition:g.viewTransition})},[a,u,e,r])}function bb(t,{relative:e}={}){let{basename:r}=z.useContext(ls),a=z.useContext(oi);dr(a,"useFormAction must be used inside a RouteContext");let[u]=a.matches.slice(-1),h={...ql(t||".",{relative:e})},g=Us();if(t==null){h.search=g.search;let v=new URLSearchParams(h.search),y=v.getAll("index");if(y.some(A=>A==="")){v.delete("index"),y.filter(C=>C).forEach(C=>v.append("index",C));let A=v.toString();h.search=A?`?${A}`:""}}return(!t||t===".")&&u.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(h.pathname=h.pathname==="/"?r:ni([r,h.pathname])),Pl(h)}function Eb(t,{relative:e}={}){let r=z.useContext(ux);dr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=vx("useViewTransitionState"),u=ql(t,{relative:e});if(!r.isTransitioning)return!1;let h=si(r.currentLocation.pathname,a)||r.currentLocation.pathname,g=si(r.nextLocation.pathname,a)||r.nextLocation.pathname;return _u(u.pathname,g)!=null||_u(u.pathname,h)!=null}var Cb=ex();const Ab=Gf(Cb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_b=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,a)=>a?a.toUpperCase():r.toLowerCase()),Hm=t=>{const e=_b(t);return e.charAt(0).toUpperCase()+e.slice(1)},bx=(...t)=>t.filter((e,r,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=z.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:u="",children:h,iconNode:g,...v},y)=>z.createElement("svg",{ref:y,...Nb,width:e,height:e,stroke:t,strokeWidth:a?Number(r)*24/Number(e):r,className:bx("lucide",u),...v},[...g.map(([w,A])=>z.createElement(w,A)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=(t,e)=>{const r=z.forwardRef(({className:a,...u},h)=>z.createElement(Tb,{ref:h,iconNode:e,className:bx(`lucide-${Sb(Hm(t))}`,`lucide-${t}`,a),...u}));return r.displayName=Hm(t),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],No=et("arrow-left",Ib);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],kb=et("arrow-right",Rb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Gm=et("award",Ob);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]],Db=et("baby",Pb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ex=et("calendar",Mb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],nf=et("camera",jb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Lb=et("chevron-left",Bb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ub=et("chevron-right",Fb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Kl=et("circle-alert",Vb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ia=et("circle-check-big",Wb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],$m=et("circle-x",zb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Gb=et("clock",Hb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Ra=et("coffee",$b);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Xm=et("credit-card",Xb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],wl=et("crown",Yb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=[["path",{d:"M12 22c6.23-.05 7.87-5.57 7.5-10-.36-4.34-3.95-9.96-7.5-10-3.55.04-7.14 5.66-7.5 10-.37 4.43 1.27 9.95 7.5 10z",key:"1c39pg"}]],Ym=et("egg",qb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],sf=et("eye-off",Kb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],af=et("eye",Zb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Jb=et("funnel",Qb);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Co=et("gift",eE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],rE=et("info",tE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],sE=et("instagram",nE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Dl=et("loader-circle",iE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Nu=et("lock",aE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],lE=et("log-out",oE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Qf=et("mail",cE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Cx=et("map-pin",uE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],hE=et("medal",dE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],qm=et("menu",fE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["path",{d:"M5 12h14",key:"1ays0h"}]],gE=et("minus",mE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Jf=et("package",pE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]],Nh=et("paw-print",xE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],wE=et("phone",yE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Tu=et("play",vE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ax=et("plus",bE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],CE=et("qr-code",EE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],SE=et("search",AE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],NE=et("settings",_E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Hi=et("shopping-cart",TE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Sx=et("store",IE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],kE=et("trash-2",RE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],PE=et("trending-up",OE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_x=et("triangle-alert",DE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],jE=et("trophy",ME);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],LE=et("user-check",BE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Iu=et("user",FE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],Km=et("utensils",UE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],WE=et("x",VE);function $u(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(t);u<a.length;u++)e.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(t,a[u])&&(r[a[u]]=t[a[u]]);return r}function zE(t,e,r,a){function u(h){return h instanceof r?h:new r(function(g){g(h)})}return new(r||(r=Promise))(function(h,g){function v(A){try{w(a.next(A))}catch(C){g(C)}}function y(A){try{w(a.throw(A))}catch(C){g(C)}}function w(A){A.done?h(A.value):u(A.value).then(v,y)}w((a=a.apply(t,e||[])).next())})}const HE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class e0 extends Error{constructor(e,r="FunctionsError",a){super(e),this.name=r,this.context=a}}class GE extends e0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Zm extends e0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Qm extends e0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var of;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(of||(of={}));class $E{constructor(e,{headers:r={},customFetch:a,region:u=of.Any}={}){this.url=e,this.headers=r,this.region=u,this.fetch=HE(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return zE(this,arguments,void 0,function*(r,a={}){var u;let h,g;try{const{headers:v,method:y,body:w,signal:A,timeout:C}=a;let T={},{region:R}=a;R||(R=this.region);const k=new URL(`${this.url}/${r}`);R&&R!=="any"&&(T["x-region"]=R,k.searchParams.set("forceFunctionRegion",R));let D;w&&(v&&!Object.prototype.hasOwnProperty.call(v,"Content-Type")||!v)?typeof Blob<"u"&&w instanceof Blob||w instanceof ArrayBuffer?(T["Content-Type"]="application/octet-stream",D=w):typeof w=="string"?(T["Content-Type"]="text/plain",D=w):typeof FormData<"u"&&w instanceof FormData?D=w:(T["Content-Type"]="application/json",D=JSON.stringify(w)):w&&typeof w!="string"&&!(typeof Blob<"u"&&w instanceof Blob)&&!(w instanceof ArrayBuffer)&&!(typeof FormData<"u"&&w instanceof FormData)?D=JSON.stringify(w):D=w;let L=A;C&&(g=new AbortController,h=setTimeout(()=>g.abort(),C),A?(L=g.signal,A.addEventListener("abort",()=>g.abort())):L=g.signal);const U=yield this.fetch(k.toString(),{method:y||"POST",headers:Object.assign(Object.assign(Object.assign({},T),this.headers),v),body:D,signal:L}).catch(Z=>{throw new GE(Z)}),W=U.headers.get("x-relay-error");if(W&&W==="true")throw new Zm(U);if(!U.ok)throw new Qm(U);let j=((u=U.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),q;return j==="application/json"?q=yield U.json():j==="application/octet-stream"||j==="application/pdf"?q=yield U.blob():j==="text/event-stream"?q=U:j==="multipart/form-data"?q=yield U.formData():q=yield U.text(),{data:q,error:null,response:U}}catch(v){return{data:null,error:v,response:v instanceof Qm||v instanceof Zm?v.context:void 0}}finally{h&&clearTimeout(h)}})}}var XE=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},YE=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let u=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{let g=null,v=null,y=null,w=h.status,A=h.statusText;if(h.ok){var C,T;if(r.method!=="HEAD"){var R;const U=await h.text();U===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((R=r.headers.get("Accept"))===null||R===void 0)&&R.includes("application/vnd.pgrst.plan+text"))?v=U:v=JSON.parse(U))}const D=(C=r.headers.get("Prefer"))===null||C===void 0?void 0:C.match(/count=(exact|planned|estimated)/),L=(T=h.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");D&&L&&L.length>1&&(y=parseInt(L[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(v)&&(v.length>1?(g={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,y=null,w=406,A="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{var k;const D=await h.text();try{g=JSON.parse(D),Array.isArray(g)&&h.status===404&&(v=[],g=null,w=200,A="OK")}catch{h.status===404&&D===""?(w=204,A="No Content"):g={message:D}}if(g&&r.isMaybeSingle&&(!(g==null||(k=g.details)===null||k===void 0)&&k.includes("0 rows"))&&(g=null,w=200,A="OK"),g&&r.shouldThrowOnError)throw new XE(g)}return{error:g,data:v,count:y,status:w,statusText:A}});return this.shouldThrowOnError||(u=u.catch(h=>{var g;let v="";const y=h==null?void 0:h.cause;if(y){var w,A,C,T;const k=(w=y==null?void 0:y.message)!==null&&w!==void 0?w:"",D=(A=y==null?void 0:y.code)!==null&&A!==void 0?A:"";v=`${(C=h==null?void 0:h.name)!==null&&C!==void 0?C:"FetchError"}: ${h==null?void 0:h.message}`,v+=`

Caused by: ${(T=y==null?void 0:y.name)!==null&&T!==void 0?T:"Error"}: ${k}`,D&&(v+=` (${D})`),y!=null&&y.stack&&(v+=`
${y.stack}`)}else{var R;v=(R=h==null?void 0:h.stack)!==null&&R!==void 0?R:""}return{error:{message:`${(g=h==null?void 0:h.name)!==null&&g!==void 0?g:"FetchError"}: ${h==null?void 0:h.message}`,details:v,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),u.then(t,e)}returns(){return this}overrideTypes(){return this}},qE=class extends YE{select(t){let e=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!e?"":(a==='"'&&(e=!e),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:a,referencedTable:u=a}={}){const h=u?`${u}.order`:"order",g=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${g?`${g},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:a=r}={}){const u=typeof a>"u"?"offset":`${a}.offset`,h=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(u,`${t}`),this.url.searchParams.set(h,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:a=!1,wal:u=!1,format:h="text"}={}){var g;const v=[t?"analyze":null,e?"verbose":null,r?"settings":null,a?"buffers":null,u?"wal":null].filter(Boolean).join("|"),y=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${y}"; options=${v};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Jm=new RegExp("[,()]");var fo=class extends qE{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(a=>typeof a=="string"&&Jm.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(a=>typeof a=="string"&&Jm.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:a}={}){let u="";a==="plain"?u="pl":a==="phrase"?u="ph":a==="websearch"&&(u="w");const h=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${u}fts${h}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},KE=class{constructor(t,{headers:e={},schema:r,fetch:a}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=a}select(t,e){const{head:r=!1,count:a}=e??{},u=r?"HEAD":"GET";let h=!1;const g=(t??"*").split("").map(v=>/\s/.test(v)&&!h?"":(v==='"'&&(h=!h),v)).join("");return this.url.searchParams.set("select",g),a&&this.headers.append("Prefer",`count=${a}`),new fo({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var a;const u="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(h.length>0){const g=[...new Set(h)].map(v=>`"${v}"`);this.url.searchParams.set("columns",g.join(","))}}return new fo({method:u,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:a,defaultToNull:u=!0}={}){var h;const g="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),a&&this.headers.append("Prefer",`count=${a}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const v=t.reduce((y,w)=>y.concat(Object.keys(w)),[]);if(v.length>0){const y=[...new Set(v)].map(w=>`"${w}"`);this.url.searchParams.set("columns",y.join(","))}}return new fo({method:g,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(t,{count:e}={}){var r;const a="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new fo({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new fo({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},ZE=class Nx{constructor(e,{headers:r={},schema:a,fetch:u}={}){this.url=e,this.headers=new Headers(r),this.schemaName=a,this.fetch=u}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new KE(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Nx(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:a=!1,get:u=!1,count:h}={}){var g;let v;const y=new URL(`${this.url}/rpc/${e}`);let w;const A=R=>R!==null&&typeof R=="object"&&(!Array.isArray(R)||R.some(A)),C=a&&Object.values(r).some(A);C?(v="POST",w=r):a||u?(v=a?"HEAD":"GET",Object.entries(r).filter(([R,k])=>k!==void 0).map(([R,k])=>[R,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([R,k])=>{y.searchParams.append(R,k)})):(v="POST",w=r);const T=new Headers(this.headers);return C?T.set("Prefer",h?`count=${h},return=minimal`:"return=minimal"):h&&T.set("Prefer",`count=${h}`),new fo({method:v,url:y,headers:T,schema:this.schemaName,body:w,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}};class QE{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const a=r.versions;if(a&&a.node){const u=a.node,h=parseInt(u.replace(/^v/,"").split(".")[0]);return h>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${h} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${h} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const a=this.getWebSocketConstructor();return new a(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const JE="2.90.0",e3=`realtime-js/${JE}`,Tx="1.0.0",t3="2.0.0",eg=Tx,lf=1e4,r3=1e3,n3=100;var Vi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Vi||(Vi={}));var Lr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Lr||(Lr={}));var Cs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Cs||(Cs={}));var cf;(function(t){t.websocket="websocket"})(cf||(cf={}));var Ca;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ca||(Ca={}));class s3{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let a=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,a;const u=(a=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(e){var r,a;const u=(a=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:{},g=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,g)}_encodeUserBroadcastPush(e,r,a){var u,h;const g=e.topic,v=(u=e.ref)!==null&&u!==void 0?u:"",y=(h=e.join_ref)!==null&&h!==void 0?h:"",w=e.payload.event,A=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},C=Object.keys(A).length===0?"":JSON.stringify(A);if(y.length>255)throw new Error(`joinRef length ${y.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`ref length ${v.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`topic length ${g.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`userEvent length ${w.length} exceeds maximum of 255`);if(C.length>255)throw new Error(`metadata length ${C.length} exceeds maximum of 255`);const T=this.USER_BROADCAST_PUSH_META_LENGTH+y.length+v.length+g.length+w.length+C.length,R=new ArrayBuffer(this.HEADER_LENGTH+T);let k=new DataView(R),D=0;k.setUint8(D++,this.KINDS.userBroadcastPush),k.setUint8(D++,y.length),k.setUint8(D++,v.length),k.setUint8(D++,g.length),k.setUint8(D++,w.length),k.setUint8(D++,C.length),k.setUint8(D++,r),Array.from(y,U=>k.setUint8(D++,U.charCodeAt(0))),Array.from(v,U=>k.setUint8(D++,U.charCodeAt(0))),Array.from(g,U=>k.setUint8(D++,U.charCodeAt(0))),Array.from(w,U=>k.setUint8(D++,U.charCodeAt(0))),Array.from(C,U=>k.setUint8(D++,U.charCodeAt(0)));var L=new Uint8Array(R.byteLength+a.byteLength);return L.set(new Uint8Array(R),0),L.set(new Uint8Array(a),R.byteLength),L.buffer}decode(e,r){if(this._isArrayBuffer(e)){let a=this._binaryDecode(e);return r(a)}if(typeof e=="string"){const a=JSON.parse(e),[u,h,g,v,y]=a;return r({join_ref:u,ref:h,topic:g,event:v,payload:y})}return r({})}_binaryDecode(e){const r=new DataView(e),a=r.getUint8(0),u=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,u)}}_decodeUserBroadcast(e,r,a){const u=r.getUint8(1),h=r.getUint8(2),g=r.getUint8(3),v=r.getUint8(4);let y=this.HEADER_LENGTH+4;const w=a.decode(e.slice(y,y+u));y=y+u;const A=a.decode(e.slice(y,y+h));y=y+h;const C=a.decode(e.slice(y,y+g));y=y+g;const T=e.slice(y,e.byteLength),R=v===this.JSON_ENCODING?JSON.parse(a.decode(T)):T,k={type:this.BROADCAST_EVENT,event:A,payload:R};return g>0&&(k.meta=JSON.parse(C)),{join_ref:null,ref:null,topic:w,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([a])=>r.includes(a)))}}class Ix{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ht;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ht||(Ht={}));const tg=(t,e,r={})=>{var a;const u=(a=r.skipTypes)!==null&&a!==void 0?a:[];return e?Object.keys(e).reduce((h,g)=>(h[g]=i3(g,t,e,u),h),{}):{}},i3=(t,e,r,a)=>{const u=e.find(v=>v.name===t),h=u==null?void 0:u.type,g=r[t];return h&&!a.includes(h)?Rx(h,g):uf(g)},Rx=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return c3(e,r)}switch(t){case Ht.bool:return a3(e);case Ht.float4:case Ht.float8:case Ht.int2:case Ht.int4:case Ht.int8:case Ht.numeric:case Ht.oid:return o3(e);case Ht.json:case Ht.jsonb:return l3(e);case Ht.timestamp:return u3(e);case Ht.abstime:case Ht.date:case Ht.daterange:case Ht.int4range:case Ht.int8range:case Ht.money:case Ht.reltime:case Ht.text:case Ht.time:case Ht.timestamptz:case Ht.timetz:case Ht.tsrange:case Ht.tstzrange:return uf(e);default:return uf(e)}},uf=t=>t,a3=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},o3=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},l3=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},c3=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,a=t[r];if(t[0]==="{"&&a==="}"){let h;const g=t.slice(1,r);try{h=JSON.parse("["+g+"]")}catch{h=g?g.split(","):[]}return h.map(v=>Rx(e,v))}return t},u3=t=>typeof t=="string"?t.replace(" ","T"):t,kx=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Th{constructor(e,r,a={},u=lf){this.channel=e,this.event=r,this.payload=a,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var a;return this._hasReceived(e)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(a=>a.status===e).forEach(a=>a.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var rg;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(rg||(rg={}));class Nl{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},u=>{const{onJoin:h,onLeave:g,onSync:v}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nl.syncState(this.state,u,h,g),this.pendingDiffs.forEach(y=>{this.state=Nl.syncDiff(this.state,y,h,g)}),this.pendingDiffs=[],v()}),this.channel._on(a.diff,{},u=>{const{onJoin:h,onLeave:g,onSync:v}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Nl.syncDiff(this.state,u,h,g),v())}),this.onJoin((u,h,g)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:h,newPresences:g})}),this.onLeave((u,h,g)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:h,leftPresences:g})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,a,u){const h=this.cloneDeep(e),g=this.transformState(r),v={},y={};return this.map(h,(w,A)=>{g[w]||(y[w]=A)}),this.map(g,(w,A)=>{const C=h[w];if(C){const T=A.map(L=>L.presence_ref),R=C.map(L=>L.presence_ref),k=A.filter(L=>R.indexOf(L.presence_ref)<0),D=C.filter(L=>T.indexOf(L.presence_ref)<0);k.length>0&&(v[w]=k),D.length>0&&(y[w]=D)}else v[w]=A}),this.syncDiff(h,{joins:v,leaves:y},a,u)}static syncDiff(e,r,a,u){const{joins:h,leaves:g}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),u||(u=()=>{}),this.map(h,(v,y)=>{var w;const A=(w=e[v])!==null&&w!==void 0?w:[];if(e[v]=this.cloneDeep(y),A.length>0){const C=e[v].map(R=>R.presence_ref),T=A.filter(R=>C.indexOf(R.presence_ref)<0);e[v].unshift(...T)}a(v,A,y)}),this.map(g,(v,y)=>{let w=e[v];if(!w)return;const A=y.map(C=>C.presence_ref);w=w.filter(C=>A.indexOf(C.presence_ref)<0),e[v]=w,u(v,w,y),w.length===0&&delete e[v]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(a=>r(a,e[a]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,a)=>{const u=e[a];return"metas"in u?r[a]=u.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):r[a]=u,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ng;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ng||(ng={}));var Tl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Tl||(Tl={}));var ri;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ri||(ri={}));class po{constructor(e,r={config:{}},a){var u,h;if(this.topic=e,this.params=r,this.socket=a,this.bindings={},this.state=Lr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Th(this,Cs.join,this.params,this.timeout),this.rejoinTimer=new Ix(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Lr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(g=>g.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Lr.closed,this.socket._remove(this)}),this._onError(g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=Lr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Lr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=Lr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Cs.reply,{},(g,v)=>{this._trigger(this._replyEventName(v),g)}),this.presence=new Nl(this),this.broadcastEndpointURL=kx(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var a,u,h;if(this.socket.isConnected()||this.socket.connect(),this.state==Lr.closed){const{config:{broadcast:g,presence:v,private:y}}=this.params,w=(u=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(R=>R.filter))!==null&&u!==void 0?u:[],A=!!this.bindings[Tl.PRESENCE]&&this.bindings[Tl.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,C={},T={broadcast:g,presence:Object.assign(Object.assign({},v),{enabled:A}),postgres_changes:w,private:y};this.socket.accessTokenValue&&(C.access_token=this.socket.accessTokenValue),this._onError(R=>e==null?void 0:e(ri.CHANNEL_ERROR,R)),this._onClose(()=>e==null?void 0:e(ri.CLOSED)),this.updateJoinPayload(Object.assign({config:T},C)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:R})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),R===void 0){e==null||e(ri.SUBSCRIBED);return}else{const D=this.bindings.postgres_changes,L=(k=D==null?void 0:D.length)!==null&&k!==void 0?k:0,U=[];for(let W=0;W<L;W++){const j=D[W],{filter:{event:q,schema:Z,table:te,filter:ee}}=j,ue=R&&R[W];if(ue&&ue.event===q&&po.isFilterValueEqual(ue.schema,Z)&&po.isFilterValueEqual(ue.table,te)&&po.isFilterValueEqual(ue.filter,ee))U.push(Object.assign(Object.assign({},j),{id:ue.id}));else{this.unsubscribe(),this.state=Lr.errored,e==null||e(ri.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,e&&e(ri.SUBSCRIBED);return}}).receive("error",R=>{this.state=Lr.errored,e==null||e(ri.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(R).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ri.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,a){return this.state===Lr.joined&&e===Tl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,a)}async httpSend(e,r,a={}){var u;if(r==null)return Promise.reject("Payload is required for httpSend()");const h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},v=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(u=a.timeout)!==null&&u!==void 0?u:this.timeout);if(v.status===202)return{success:!0};let y=v.statusText;try{const w=await v.json();y=w.error||w.message||y}catch{}return Promise.reject(new Error(y))}async send(e,r={}){var a,u;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:g}=e,v={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(v.Authorization=`Bearer ${this.socket.accessTokenValue}`);const y={method:"POST",headers:v,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:g,private:this.private}]})};try{const w=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((u=w.body)===null||u===void 0?void 0:u.cancel()),w.ok?"ok":"error"}catch(w){return w.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var g,v,y;const w=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((y=(v=(g=this.params)===null||g===void 0?void 0:g.config)===null||v===void 0?void 0:v.broadcast)===null||y===void 0)&&y.ack)&&h("ok"),w.receive("ok",()=>h("ok")),w.receive("error",()=>h("error")),w.receive("timeout",()=>h("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Lr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Cs.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(u=>{a=new Th(this,Cs.leave,{},e),a.receive("ok",()=>{r(),u("ok")}).receive("timeout",()=>{r(),u("timed out")}).receive("error",()=>{u("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Lr.closed,this.bindings={}}async _fetchWithTimeout(e,r,a){const u=new AbortController,h=setTimeout(()=>u.abort(),a),g=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:u.signal}));return clearTimeout(h),g}_push(e,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Th(this,e,r,a);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>n3){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,a){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,a){var u,h;const g=e.toLocaleLowerCase(),{close:v,error:y,leave:w,join:A}=Cs;if(a&&[v,y,w,A].indexOf(g)>=0&&a!==this._joinRef())return;let T=this._onMessage(g,r,a);if(r&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(g)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(R=>{var k,D,L;return((k=R.filter)===null||k===void 0?void 0:k.event)==="*"||((L=(D=R.filter)===null||D===void 0?void 0:D.event)===null||L===void 0?void 0:L.toLocaleLowerCase())===g}).map(R=>R.callback(T,a)):(h=this.bindings[g])===null||h===void 0||h.filter(R=>{var k,D,L,U,W,j;if(["broadcast","presence","postgres_changes"].includes(g))if("id"in R){const q=R.id,Z=(k=R.filter)===null||k===void 0?void 0:k.event;return q&&((D=r.ids)===null||D===void 0?void 0:D.includes(q))&&(Z==="*"||(Z==null?void 0:Z.toLocaleLowerCase())===((L=r.data)===null||L===void 0?void 0:L.type.toLocaleLowerCase()))}else{const q=(W=(U=R==null?void 0:R.filter)===null||U===void 0?void 0:U.event)===null||W===void 0?void 0:W.toLocaleLowerCase();return q==="*"||q===((j=r==null?void 0:r.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return R.type.toLocaleLowerCase()===g}).map(R=>{if(typeof T=="object"&&"ids"in T){const k=T.data,{schema:D,table:L,commit_timestamp:U,type:W,errors:j}=k;T=Object.assign(Object.assign({},{schema:D,table:L,commit_timestamp:U,eventType:W,new:{},old:{},errors:j}),this._getPayloadRecords(k))}R.callback(T,a)})}_isClosed(){return this.state===Lr.closed}_isJoined(){return this.state===Lr.joined}_isJoining(){return this.state===Lr.joining}_isLeaving(){return this.state===Lr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,a){const u=e.toLocaleLowerCase(),h={type:u,filter:r,callback:a};return this.bindings[u]?this.bindings[u].push(h):this.bindings[u]=[h],this}_off(e,r){const a=e.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(u=>{var h;return!(((h=u.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===a&&po.isEqual(u.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const a in e)if(e[a]!==r[a])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Cs.close,{},e)}_onError(e){this._on(Cs.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Lr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=tg(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=tg(e.columns,e.old_record)),r}}const Ih=()=>{},hu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},d3=[1e3,2e3,5e3,1e4],h3=1e4,f3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class m3{constructor(e,r){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=lf,this.transport=null,this.heartbeatIntervalMs=hu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ih,this.ref=0,this.reconnectTimer=null,this.vsn=eg,this.logger=Ih,this.conn=null,this.sendBuffer=[],this.serializer=new s3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...h)=>u(...h):(...h)=>fetch(...h),!(!((a=r==null?void 0:r.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${cf.websocket}`,this.httpEndpoint=kx(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=QE.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,a){this.logger(e,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Vi.connecting:return Ca.Connecting;case Vi.open:return Ca.Open;case Vi.closing:return Ca.Closing;default:return Ca.Closed}}isConnected(){return this.connectionState()===Ca.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const a=`realtime:${e}`,u=this.getChannels().find(h=>h.topic===a);if(u)return u;{const h=new po(`realtime:${e}`,r,this);return this.channels.push(h),h}}push(e){const{topic:r,event:a,payload:u,ref:h}=e,g=()=>{this.encode(e,v=>{var y;(y=this.conn)===null||y===void 0||y.send(v)})};this.log("push",`${r} ${a} (${h})`,u),this.isConnected()?g():this.sendBuffer.push(g)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(r3,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},hu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(a=>a.topic===e&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const w=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",w)}catch(A){this.log("error","error in heartbeat callback",A)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:u,payload:h,ref:g}=r,v=g?`(${g})`:"",y=h.status||"";this.log("receive",`${y} ${a} ${u} ${v}`.trim(),h),this.channels.filter(w=>w._isMember(a)).forEach(w=>w._trigger(u,h,g)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Vi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Vi.open||this.conn.readyState===Vi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Cs.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const a=e.match(/\?/)?"&":"?",u=new URLSearchParams(r);return`${e}${a}${u}`}_workerObjectUrl(e){let r;if(e)r=e;else{const a=new Blob([f3],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,a=!1;if(e)r=e,a=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),r=this.accessTokenValue}else r=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(u=>{const h={access_token:r,version:e3};r&&u.updateJoinPayload(h),u.joinedOnce&&u._isJoined()&&u._push(Cs.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(a=>{try{a(r)}catch(u){this.log("error",`error in ${e} callback`,u)}})}catch(a){this.log("error",`error triggering ${e} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Ix(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,a,u,h,g,v,y,w,A,C,T,R;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(a=e==null?void 0:e.timeout)!==null&&a!==void 0?a:lf,this.heartbeatIntervalMs=(u=e==null?void 0:e.heartbeatIntervalMs)!==null&&u!==void 0?u:hu.HEARTBEAT_INTERVAL,this.worker=(h=e==null?void 0:e.worker)!==null&&h!==void 0?h:!1,this.accessToken=(g=e==null?void 0:e.accessToken)!==null&&g!==void 0?g:null,this.heartbeatCallback=(v=e==null?void 0:e.heartbeatCallback)!==null&&v!==void 0?v:Ih,this.vsn=(y=e==null?void 0:e.vsn)!==null&&y!==void 0?y:eg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(w=e==null?void 0:e.reconnectAfterMs)!==null&&w!==void 0?w:(k=>d3[k-1]||h3),this.vsn){case Tx:this.encode=(A=e==null?void 0:e.encode)!==null&&A!==void 0?A:((k,D)=>D(JSON.stringify(k))),this.decode=(C=e==null?void 0:e.decode)!==null&&C!==void 0?C:((k,D)=>D(JSON.parse(k)));break;case t3:this.encode=(T=e==null?void 0:e.encode)!==null&&T!==void 0?T:this.serializer.encode.bind(this.serializer),this.decode=(R=e==null?void 0:e.decode)!==null&&R!==void 0?R:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Ml=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function g3(t,e,r){const a=new URL(e,t);if(r)for(const[u,h]of Object.entries(r))h!==void 0&&a.searchParams.set(u,h);return a.toString()}async function p3(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function x3(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:a,query:u,body:h,headers:g}){const v=g3(t.baseUrl,a,u),y=await p3(t.auth),w=await e(v,{method:r,headers:{...h?{"Content-Type":"application/json"}:{},...y,...g},body:h?JSON.stringify(h):void 0}),A=await w.text(),C=(w.headers.get("content-type")||"").includes("application/json"),T=C&&A?JSON.parse(A):A;if(!w.ok){const R=C?T:void 0,k=R==null?void 0:R.error;throw new Ml((k==null?void 0:k.message)??`Request failed with status ${w.status}`,{status:w.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:R})}return{status:w.status,headers:w.headers,data:T}}}}function fu(t){return t.join("")}var y3=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:fu(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fu(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fu(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fu(t.namespace)}`}),!0}catch(e){if(e instanceof Ml&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Ml&&r.status===409)return;throw r}}};function io(t){return t.join("")}var w3=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${io(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${io(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${io(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${io(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${io(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${io(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Ml&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Ml&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},v3=class{constructor(t){var a;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=x3({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(a=t.accessDelegation)==null?void 0:a.join(","),this.namespaceOps=new y3(this.client,e),this.tableOps=new w3(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Xu=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function cr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var b3=class extends Xu{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},df=class extends Xu{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const t0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),E3=()=>Response,hf=t=>{if(Array.isArray(t))return t.map(r=>hf(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,a])=>{const u=r.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));e[u]=hf(a)}),e},C3=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},A3=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function jl(t){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jl(t)}function S3(t,e){if(jl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(jl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _3(t){var e=S3(t,"string");return jl(e)=="symbol"?e:e+""}function N3(t,e,r){return(e=_3(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,a)}return r}function Je(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sg(Object(r),!0).forEach(function(a){N3(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sg(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}const Rh=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},T3=async(t,e,r)=>{t instanceof await E3()&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{const u=t.status||500,h=(a==null?void 0:a.statusCode)||u+"";e(new b3(Rh(a),u,h))}).catch(a=>{e(new df(Rh(a),a))}):e(new df(Rh(t),t))},I3=(t,e,r,a)=>{const u={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!a?u:(C3(a)?(u.headers=Je({"Content-Type":"application/json"},e==null?void 0:e.headers),u.body=JSON.stringify(a)):u.body=a,e!=null&&e.duplex&&(u.duplex=e.duplex),Je(Je({},u),r))};async function Zl(t,e,r,a,u,h){return new Promise((g,v)=>{t(r,I3(e,a,u,h)).then(y=>{if(!y.ok)throw y;return a!=null&&a.noResolveJson?y:y.json()}).then(y=>g(y)).catch(y=>T3(y,v,a))})}async function Bl(t,e,r,a){return Zl(t,"GET",e,r,a)}async function Es(t,e,r,a,u){return Zl(t,"POST",e,a,u,r)}async function ff(t,e,r,a,u){return Zl(t,"PUT",e,a,u,r)}async function R3(t,e,r,a){return Zl(t,"HEAD",e,Je(Je({},r),{},{noResolveJson:!0}),a)}async function r0(t,e,r,a,u){return Zl(t,"DELETE",e,a,u,r)}var k3=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(cr(e))return{data:null,error:e};throw e}}};let Ox;Ox=Symbol.toStringTag;var O3=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Ox]="BlobDownloadBuilder",this.promise=null}asStream(){return new k3(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(cr(e))return{data:null,error:e};throw e}}};const P3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ig={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var D3=class{constructor(t,e={},r,a){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=t0(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,a){var u=this;try{let h;const g=Je(Je({},ig),a);let v=Je(Je({},u.headers),t==="POST"&&{"x-upsert":String(g.upsert)});const y=g.metadata;typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",g.cacheControl),y&&h.append("metadata",u.encodeMetadata(y)),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.has("cacheControl")||h.append("cacheControl",g.cacheControl),y&&!h.has("metadata")&&h.append("metadata",u.encodeMetadata(y))):(h=r,v["cache-control"]=`max-age=${g.cacheControl}`,v["content-type"]=g.contentType,y&&(v["x-metadata"]=u.toBase64(u.encodeMetadata(y))),(typeof ReadableStream<"u"&&h instanceof ReadableStream||h&&typeof h=="object"&&"pipe"in h&&typeof h.pipe=="function")&&!g.duplex&&(g.duplex="half")),a!=null&&a.headers&&(v=Je(Je({},v),a.headers));const w=u._removeEmptyFolders(e),A=u._getFinalPath(w),C=await(t=="PUT"?ff:Es)(u.fetch,`${u.url}/object/${A}`,h,Je({headers:v},g!=null&&g.duplex?{duplex:g.duplex}:{}));return{data:{path:w,id:C.Id,fullPath:C.Key},error:null}}catch(h){if(u.shouldThrowOnError)throw h;if(cr(h))return{data:null,error:h};throw h}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,a){var u=this;const h=u._removeEmptyFolders(t),g=u._getFinalPath(h),v=new URL(u.url+`/object/upload/sign/${g}`);v.searchParams.set("token",e);try{let y;const w=Je({upsert:ig.upsert},a),A=Je(Je({},u.headers),{"x-upsert":String(w.upsert)});return typeof Blob<"u"&&r instanceof Blob?(y=new FormData,y.append("cacheControl",w.cacheControl),y.append("",r)):typeof FormData<"u"&&r instanceof FormData?(y=r,y.append("cacheControl",w.cacheControl)):(y=r,A["cache-control"]=`max-age=${w.cacheControl}`,A["content-type"]=w.contentType),{data:{path:h,fullPath:(await ff(u.fetch,v.toString(),y,{headers:A})).Key},error:null}}catch(y){if(u.shouldThrowOnError)throw y;if(cr(y))return{data:null,error:y};throw y}}async createSignedUploadUrl(t,e){var r=this;try{let a=r._getFinalPath(t);const u=Je({},r.headers);e!=null&&e.upsert&&(u["x-upsert"]="true");const h=await Es(r.fetch,`${r.url}/object/upload/sign/${a}`,{},{headers:u}),g=new URL(r.url+h.url),v=g.searchParams.get("token");if(!v)throw new Xu("No token returned by API");return{data:{signedUrl:g.toString(),path:t,token:v},error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(cr(a))return{data:null,error:a};throw a}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var a=this;try{return{data:await Es(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:a.headers}),error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(cr(u))return{data:null,error:u};throw u}}async copy(t,e,r){var a=this;try{return{data:{path:(await Es(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:a.headers})).Key},error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(cr(u))return{data:null,error:u};throw u}}async createSignedUrl(t,e,r){var a=this;try{let u=a._getFinalPath(t),h=await Es(a.fetch,`${a.url}/object/sign/${u}`,Je({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:a.headers});const g=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return h={signedUrl:encodeURI(`${a.url}${h.signedURL}${g}`)},{data:h,error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(cr(u))return{data:null,error:u};throw u}}async createSignedUrls(t,e,r){var a=this;try{const u=await Es(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:e,paths:t},{headers:a.headers}),h=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:u.map(g=>Je(Je({},g),{},{signedUrl:g.signedURL?encodeURI(`${a.url}${g.signedURL}${h}`):null})),error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(cr(u))return{data:null,error:u};throw u}}download(t,e){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),u=a?`?${a}`:"",h=this._getFinalPath(t),g=()=>Bl(this.fetch,`${this.url}/${r}/${h}${u}`,{headers:this.headers,noResolveJson:!0});return new O3(g,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:hf(await Bl(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(a){if(e.shouldThrowOnError)throw a;if(cr(a))return{data:null,error:a};throw a}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await R3(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(a){if(e.shouldThrowOnError)throw a;if(cr(a)&&a instanceof df){const u=a.originalError;if([400,404].includes(u==null?void 0:u.status))return{data:!1,error:a}}throw a}}getPublicUrl(t,e){const r=this._getFinalPath(t),a=[],u=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";u!==""&&a.push(u);const h=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});g!==""&&a.push(g);let v=a.join("&");return v!==""&&(v=`?${v}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${v}`)}}}async remove(t){var e=this;try{return{data:await r0(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}async list(t,e,r){var a=this;try{const u=Je(Je(Je({},P3),e),{},{prefix:t||""});return{data:await Es(a.fetch,`${a.url}/object/list/${a.bucketId}`,u,{headers:a.headers},r),error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(cr(u))return{data:null,error:u};throw u}}async listV2(t,e){var r=this;try{const a=Je({},t);return{data:await Es(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,a,{headers:r.headers},e),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(cr(a))return{data:null,error:a};throw a}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Px="2.90.0",Dx={"X-Client-Info":`storage-js/${Px}`};var M3=class{constructor(t,e={},r,a){this.shouldThrowOnError=!1;const u=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Je(Je({},Dx),e),this.fetch=t0(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await Bl(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await Bl(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await Es(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(cr(a))return{data:null,error:a};throw a}}async updateBucket(t,e){var r=this;try{return{data:await ff(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(cr(a))return{data:null,error:a};throw a}}async emptyBucket(t){var e=this;try{return{data:await Es(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await r0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},j3=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Je(Je({},Dx),e),this.fetch=t0(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Es(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const a=r.toString(),u=a?`${e.url}/bucket?${a}`:`${e.url}/bucket`;return{data:await Bl(e.fetch,u,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await r0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!A3(t))throw new Xu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new v3({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(r,{get(u,h){const g=u[h];return typeof g!="function"?g:async(...v)=>{try{return{data:await g.apply(u,v),error:null}}catch(y){if(a)throw y;return{data:null,error:y}}}}})}};const n0={"X-Client-Info":`storage-js/${Px}`,"Content-Type":"application/json"};var Mx=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Hn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var kh=class extends Mx{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},B3=class extends Mx{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const s0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),L3=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ag=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),F3=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const a=t.status||500,u=t;if(typeof u.json=="function")u.json().then(h=>{const g=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||a+"";e(new kh(ag(h),a,g))}).catch(()=>{const h=a+"";e(new kh(u.statusText||`HTTP ${a} error`,a,h))});else{const h=a+"";e(new kh(u.statusText||`HTTP ${a} error`,a,h))}}else e(new B3(ag(t),t))},U3=(t,e,r,a)=>{const u={method:t,headers:(e==null?void 0:e.headers)||{}};return a?(L3(a)?(u.headers=Je({"Content-Type":"application/json"},e==null?void 0:e.headers),u.body=JSON.stringify(a)):u.body=a,Je(Je({},u),r)):u};async function V3(t,e,r,a,u,h){return new Promise((g,v)=>{t(r,U3(e,a,u,h)).then(y=>{if(!y.ok)throw y;if(a!=null&&a.noResolveJson)return y;const w=y.headers.get("content-type");return!w||!w.includes("application/json")?{}:y.json()}).then(y=>g(y)).catch(y=>F3(y,v,a))})}async function Gn(t,e,r,a,u){return V3(t,"POST",e,a,u,r)}var W3=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Je(Je({},n0),e),this.fetch=s0(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Gn(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Hn(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await Gn(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Hn(a))return{data:null,error:a};throw a}}async listIndexes(t){var e=this;try{return{data:await Gn(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Hn(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await Gn(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Hn(a))return{data:null,error:a};throw a}}},z3=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Je(Je({},n0),e),this.fetch=s0(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Gn(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Hn(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await Gn(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Hn(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Gn(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Hn(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await Gn(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Hn(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Gn(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Hn(r))return{data:null,error:r};throw r}}},H3=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Je(Je({},n0),e),this.fetch=s0(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Gn(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Hn(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await Gn(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Hn(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await Gn(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Hn(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Gn(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Hn(r))return{data:null,error:r};throw r}}},G3=class extends H3{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new $3(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},$3=class extends W3{constructor(t,e,r,a){super(t,e,a),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,Je(Je({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,Je(Je({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new X3(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},X3=class extends z3{constructor(t,e,r,a,u){super(t,e,u),this.vectorBucketName=r,this.indexName=a}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,Je(Je({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,Je(Je({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,Je(Je({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,Je(Je({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,Je(Je({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Y3=class extends M3{constructor(t,e={},r,a){super(t,e,r,a)}from(t){return new D3(this.url,this.headers,t,this.fetch)}get vectors(){return new G3(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new j3(this.url+"/iceberg",this.headers,this.fetch)}};const jx="2.90.0",mo=30*1e3,mf=3,Oh=mf*mo,q3="http://localhost:9999",K3="supabase.auth.token",Z3={"X-Client-Info":`gotrue-js/${jx}`},gf="X-Supabase-Api-Version",Bx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Q3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,J3=600*1e3;class Ll extends Error{constructor(e,r,a){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function He(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class eC extends Ll{constructor(e,r,a){super(e,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function tC(t){return He(t)&&t.name==="AuthApiError"}class Aa extends Ll{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class li extends Ll{constructor(e,r,a,u){super(e,a,u),this.name=r,this.status=a}}class Wn extends li{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rC(t){return He(t)&&t.name==="AuthSessionMissingError"}class ao extends li{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mu extends li{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class gu extends li{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function nC(t){return He(t)&&t.name==="AuthImplicitGrantRedirectError"}class og extends li{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sC extends li{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class pf extends li{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Ph(t){return He(t)&&t.name==="AuthRetryableFetchError"}class lg extends li{constructor(e,r,a){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class xf extends li{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ru="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cg=` 	
\r=`.split(""),iC=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<cg.length;e+=1)t[cg[e].charCodeAt(0)]=-2;for(let e=0;e<Ru.length;e+=1)t[Ru[e].charCodeAt(0)]=e;return t})();function ug(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;r(Ru[a]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;r(Ru[a]),e.queuedBits-=6}}function Lx(t,e,r){const a=iC[t];if(a>-1)for(e.queue=e.queue<<6|a,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function dg(t){const e=[],r=g=>{e.push(String.fromCodePoint(g))},a={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},h=g=>{lC(g,a,r)};for(let g=0;g<t.length;g+=1)Lx(t.charCodeAt(g),u,h);return e.join("")}function aC(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function oC(t,e){for(let r=0;r<t.length;r+=1){let a=t.charCodeAt(r);if(a>55295&&a<=56319){const u=(a-55296)*1024&65535;a=(t.charCodeAt(r+1)-56320&65535|u)+65536,r+=1}aC(a,e)}}function lC(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let a=1;a<6;a+=1)if((t>>7-a&1)===0){e.utf8seq=a;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Ao(t){const e=[],r={queue:0,queuedBits:0},a=u=>{e.push(u)};for(let u=0;u<t.length;u+=1)Lx(t.charCodeAt(u),r,a);return new Uint8Array(e)}function cC(t){const e=[];return oC(t,r=>e.push(r)),new Uint8Array(e)}function Sa(t){const e=[],r={queue:0,queuedBits:0},a=u=>{e.push(u)};return t.forEach(u=>ug(u,r,a)),ug(null,r,a),e.join("")}function uC(t){return Math.round(Date.now()/1e3)+t}function dC(){return Symbol("auth-callback")}const en=()=>typeof window<"u"&&typeof document<"u",xa={tested:!1,writable:!1},Fx=()=>{if(!en())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xa.tested)return xa.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),xa.tested=!0,xa.writable=!0}catch{xa.tested=!0,xa.writable=!1}return xa.writable};function hC(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((u,h)=>{e[h]=u})}catch{}return r.searchParams.forEach((a,u)=>{e[u]=a}),e}const Ux=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),fC=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",go=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},ya=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Jr=async(t,e)=>{await t.removeItem(e)};class Yu{constructor(){this.promise=new Yu.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Yu.promiseConstructor=Promise;function Dh(t){const e=t.split(".");if(e.length!==3)throw new xf("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!Q3.test(e[a]))throw new xf("JWT not in base64url format");return{header:JSON.parse(dg(e[0])),payload:JSON.parse(dg(e[1])),signature:Ao(e[2]),raw:{header:e[0],payload:e[1]}}}async function mC(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function gC(t,e){return new Promise((a,u)=>{(async()=>{for(let h=0;h<1/0;h++)try{const g=await t(h);if(!e(h,null,g)){a(g);return}}catch(g){if(!e(h,g)){u(g);return}}})()})}function pC(t){return("0"+t.toString(16)).substr(-2)}function xC(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let u="";for(let h=0;h<56;h++)u+=r.charAt(Math.floor(Math.random()*a));return u}return crypto.getRandomValues(e),Array.from(e,pC).join("")}async function yC(t){const r=new TextEncoder().encode(t),a=await crypto.subtle.digest("SHA-256",r),u=new Uint8Array(a);return Array.from(u).map(h=>String.fromCharCode(h)).join("")}async function wC(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await yC(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function oo(t,e,r=!1){const a=xC();let u=a;r&&(u+="/PASSWORD_RECOVERY"),await go(t,`${e}-code-verifier`,u);const h=await wC(a);return[h,a===h?"plain":"s256"]}const vC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function bC(t){const e=t.headers.get(gf);if(!e||!e.match(vC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function EC(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function CC(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const AC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lo(t){if(!AC.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Mh(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function SC(t,e){return new Proxy(t,{get:(r,a,u)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const h=a.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,a,u)}return!e.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,a,u)}})}function hg(t){return JSON.parse(JSON.stringify(t))}const va=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_C=[502,503,504];async function fg(t){var e;if(!fC(t))throw new pf(va(t),0);if(_C.includes(t.status))throw new pf(va(t),t.status);let r;try{r=await t.json()}catch(h){throw new Aa(va(h),h)}let a;const u=bC(t);if(u&&u.getTime()>=Bx["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new lg(va(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(a==="session_not_found")throw new Wn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((h,g)=>h&&typeof g=="string",!0))throw new lg(va(r),t.status,r.weak_password.reasons);throw new eC(va(r),t.status||500,a)}const NC=(t,e,r,a)=>{const u={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),u.body=JSON.stringify(a),Object.assign(Object.assign({},u),r))};async function Qe(t,e,r,a){var u;const h=Object.assign({},a==null?void 0:a.headers);h[gf]||(h[gf]=Bx["2024-01-01"].name),a!=null&&a.jwt&&(h.Authorization=`Bearer ${a.jwt}`);const g=(u=a==null?void 0:a.query)!==null&&u!==void 0?u:{};a!=null&&a.redirectTo&&(g.redirect_to=a.redirectTo);const v=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",y=await TC(t,e,r+v,{headers:h,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(y):{data:Object.assign({},y),error:null}}async function TC(t,e,r,a,u,h){const g=NC(e,a,u,h);let v;try{v=await t(r,Object.assign({},g))}catch(y){throw console.error(y),new pf(va(y),0)}if(v.ok||await fg(v),a!=null&&a.noResolveJson)return v;try{return await v.json()}catch(y){await fg(y)}}function vs(t){var e;let r=null;kC(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=uC(t.expires_in)));const a=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:a},error:null}}function mg(t){const e=vs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Wi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function IC(t){return{data:t,error:null}}function RC(t){const{action_link:e,email_otp:r,hashed_token:a,redirect_to:u,verification_type:h}=t,g=$u(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),v={action_link:e,email_otp:r,hashed_token:a,redirect_to:u,verification_type:h},y=Object.assign({},g);return{data:{properties:v,user:y},error:null}}function gg(t){return t}function kC(t){return t.access_token&&t.refresh_token&&t.expires_in}const jh=["global","local","others"];class OC{constructor({url:e="",headers:r={},fetch:a}){this.url=e,this.headers=r,this.fetch=Ux(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=jh[0]){if(jh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jh.join(", ")}`);try{return await Qe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if(He(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,r={}){try{return await Qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Wi})}catch(a){if(He(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:r}=e,a=$u(e,["options"]),u=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(u.new_email=a==null?void 0:a.newEmail,delete u.newEmail),await Qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:RC,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(He(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Qe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wi})}catch(r){if(He(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,a,u,h,g,v,y;try{const w={nextPage:null,lastPage:0,total:0},A=await Qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(h=(u=e==null?void 0:e.perPage)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""},xform:gg});if(A.error)throw A.error;const C=await A.json(),T=(g=A.headers.get("x-total-count"))!==null&&g!==void 0?g:0,R=(y=(v=A.headers.get("link"))===null||v===void 0?void 0:v.split(","))!==null&&y!==void 0?y:[];return R.length>0&&(R.forEach(k=>{const D=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(k.split(";")[1].split("=")[1]);w[`${L}Page`]=D}),w.total=parseInt(T)),{data:Object.assign(Object.assign({},C),w),error:null}}catch(w){if(He(w))return{data:{users:[]},error:w};throw w}}async getUserById(e){lo(e);try{return await Qe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wi})}catch(r){if(He(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){lo(e);try{return await Qe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Wi})}catch(a){if(He(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,r=!1){lo(e);try{return await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Wi})}catch(a){if(He(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){lo(e.userId);try{const{data:r,error:a}=await Qe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:r,error:a}}catch(r){if(He(r))return{data:null,error:r};throw r}}async _deleteFactor(e){lo(e.userId),lo(e.id);try{return{data:await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,a,u,h,g,v,y;try{const w={nextPage:null,lastPage:0,total:0},A=await Qe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(h=(u=e==null?void 0:e.perPage)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""},xform:gg});if(A.error)throw A.error;const C=await A.json(),T=(g=A.headers.get("x-total-count"))!==null&&g!==void 0?g:0,R=(y=(v=A.headers.get("link"))===null||v===void 0?void 0:v.split(","))!==null&&y!==void 0?y:[];return R.length>0&&(R.forEach(k=>{const D=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(k.split(";")[1].split("=")[1]);w[`${L}Page`]=D}),w.total=parseInt(T)),{data:Object.assign(Object.assign({},C),w),error:null}}catch(w){if(He(w))return{data:{clients:[]},error:w};throw w}}async _createOAuthClient(e){try{return await Qe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(He(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Qe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(He(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Qe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(He(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(e){try{return await Qe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Qe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(He(r))return{data:null,error:r};throw r}}}function pg(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const co={debug:!!(globalThis&&Fx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class PC extends Vx{}async function DC(t,e,r){co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const a=new globalThis.AbortController;return e>0&&setTimeout(()=>{a.abort(),co.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async u=>{if(u){co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,u.name);try{return await r()}finally{co.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,u.name)}}else{if(e===0)throw co.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new PC(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(co.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function MC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Wx(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function jC(t){return parseInt(t,16)}function BC(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,a=>a.toString(16).padStart(2,"0")).join("")}function LC(t){var e;const{chainId:r,domain:a,expirationTime:u,issuedAt:h=new Date,nonce:g,notBefore:v,requestId:y,resources:w,scheme:A,uri:C,version:T}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(g&&g.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${g}`);if(!C)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const R=Wx(t.address),k=A?`${A}://${a}`:a,D=t.statement?`${t.statement}
`:"",L=`${k} wants you to sign in with your Ethereum account:
${R}

${D}`;let U=`URI: ${C}
Version: ${T}
Chain ID: ${r}${g?`
Nonce: ${g}`:""}
Issued At: ${h.toISOString()}`;if(u&&(U+=`
Expiration Time: ${u.toISOString()}`),v&&(U+=`
Not Before: ${v.toISOString()}`),y&&(U+=`
Request ID: ${y}`),w){let W=`
Resources:`;for(const j of w){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);W+=`
- ${j}`}U+=W}return`${L}
${U}`}class Tr extends Error{constructor({message:e,code:r,cause:a,name:u}){var h;super(e,{cause:a}),this.__isWebAuthnError=!0,this.name=(h=u??(a instanceof Error?a.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=r}}class ku extends Tr{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function FC({error:t,options:e}){var r,a,u;const{publicKey:h}=e;if(!h)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=h.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Tr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((a=h.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Tr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((u=h.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Tr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Tr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Tr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return h.pubKeyCredParams.filter(v=>v.type==="public-key").length===0?new Tr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Tr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const g=window.location.hostname;if(zx(g)){if(h.rp.id!==g)return new Tr({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Tr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new Tr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Tr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Tr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function UC({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Tr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(zx(a)){if(r.rpId!==a)return new Tr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Tr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Tr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Tr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class VC{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const WC=new VC;function zC(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:a}=t,u=$u(t,["challenge","user","excludeCredentials"]),h=Ao(e).buffer,g=Object.assign(Object.assign({},r),{id:Ao(r.id).buffer}),v=Object.assign(Object.assign({},u),{challenge:h,user:g});if(a&&a.length>0){v.excludeCredentials=new Array(a.length);for(let y=0;y<a.length;y++){const w=a[y];v.excludeCredentials[y]=Object.assign(Object.assign({},w),{id:Ao(w.id).buffer,type:w.type||"public-key",transports:w.transports})}}return v}function HC(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,a=$u(t,["challenge","allowCredentials"]),u=Ao(e).buffer,h=Object.assign(Object.assign({},a),{challenge:u});if(r&&r.length>0){h.allowCredentials=new Array(r.length);for(let g=0;g<r.length;g++){const v=r[g];h.allowCredentials[g]=Object.assign(Object.assign({},v),{id:Ao(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return h}function GC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Sa(new Uint8Array(t.response.attestationObject)),clientDataJSON:Sa(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function $C(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,a=t.getClientExtensionResults(),u=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Sa(new Uint8Array(u.authenticatorData)),clientDataJSON:Sa(new Uint8Array(u.clientDataJSON)),signature:Sa(new Uint8Array(u.signature)),userHandle:u.userHandle?Sa(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function zx(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function xg(){var t,e;return!!(en()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function XC(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ku("Browser returned unexpected credential type",e)}:{data:null,error:new ku("Empty credential response",e)}}catch(e){return{data:null,error:FC({error:e,options:t})}}}async function YC(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ku("Browser returned unexpected credential type",e)}:{data:null,error:new ku("Empty credential response",e)}}catch(e){return{data:null,error:UC({error:e,options:t})}}}const qC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},KC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ou(...t){const e=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),r=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),a={};for(const u of t)if(u)for(const h in u){const g=u[h];if(g!==void 0)if(Array.isArray(g))a[h]=g;else if(r(g))a[h]=g;else if(e(g)){const v=a[h];e(v)?a[h]=Ou(v,g):a[h]=Ou(g)}else a[h]=g}return a}function ZC(t,e){return Ou(qC,t,e||{})}function QC(t,e){return Ou(KC,t,e||{})}class JC{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:a,signal:u},h){try{const{data:g,error:v}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!g)return{data:null,error:v};const y=u??WC.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:w}=g.webauthn.credential_options.publicKey;w.name||(w.name=`${w.id}:${a}`),w.displayName||(w.displayName=w.name)}switch(g.webauthn.type){case"create":{const w=ZC(g.webauthn.credential_options.publicKey,h==null?void 0:h.create),{data:A,error:C}=await XC({publicKey:w,signal:y});return A?{data:{factorId:e,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:A}},error:null}:{data:null,error:C}}case"request":{const w=QC(g.webauthn.credential_options.publicKey,h==null?void 0:h.request),{data:A,error:C}=await YC(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:w,signal:y}));return A?{data:{factorId:e,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:A}},error:null}:{data:null,error:C}}}}catch(g){return He(g)?{data:null,error:g}:{data:null,error:new Aa("Unexpected error in challenge",g)}}}async _verify({challengeId:e,factorId:r,webauthn:a}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:a})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},h){if(!r)return{data:null,error:new Ll("rpId is required for WebAuthn authentication")};try{if(!xg())return{data:null,error:new Aa("Browser does not support WebAuthn",null)};const{data:g,error:v}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:a},signal:u},{request:h});if(!g)return{data:null,error:v};const{webauthn:y}=g;return this._verify({factorId:e,challengeId:g.challengeId,webauthn:{type:y.type,rpId:r,rpOrigins:a,credential_response:y.credential_response}})}catch(g){return He(g)?{data:null,error:g}:{data:null,error:new Aa("Unexpected error in authenticate",g)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},h){if(!r)return{data:null,error:new Ll("rpId is required for WebAuthn registration")};try{if(!xg())return{data:null,error:new Aa("Browser does not support WebAuthn",null)};const{data:g,error:v}=await this._enroll({friendlyName:e});if(!g)return await this.client.mfa.listFactors().then(A=>{var C;return(C=A.data)===null||C===void 0?void 0:C.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===e&&T.status!=="unverified")}).then(A=>A?this.client.mfa.unenroll({factorId:A==null?void 0:A.id}):void 0),{data:null,error:v};const{data:y,error:w}=await this._challenge({factorId:g.id,friendlyName:g.friendly_name,webauthn:{rpId:r,rpOrigins:a},signal:u},{create:h});return y?this._verify({factorId:g.id,challengeId:y.challengeId,webauthn:{rpId:r,rpOrigins:a,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:w}}catch(g){return He(g)?{data:null,error:g}:{data:null,error:new Aa("Unexpected error in register",g)}}}}MC();const e8={url:q3,storageKey:K3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Z3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function yg(t,e,r){return await r()}const uo={};class Fl{get jwks(){var e,r;return(r=(e=uo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){uo[this.storageKey]=Object.assign(Object.assign({},uo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=uo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){uo[this.storageKey]=Object.assign(Object.assign({},uo[this.storageKey]),{cachedAt:e})}constructor(e){var r,a,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const h=Object.assign(Object.assign({},e8),e);if(this.storageKey=h.storageKey,this.instanceID=(r=Fl.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Fl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.instanceID>0&&en()){const g=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(g),this.logDebugMessages&&console.trace(g)}if(this.persistSession=h.persistSession,this.autoRefreshToken=h.autoRefreshToken,this.admin=new OC({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=Ux(h.fetch),this.lock=h.lock||yg,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,this.throwOnError=h.throwOnError,this.lockAcquireTimeout=h.lockAcquireTimeout,h.lock?this.lock=h.lock:this.persistSession&&en()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=DC:this.lock=yg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new JC(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:Fx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=pg(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=pg(this.memoryStorage)),en()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(g){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",g)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async g=>{this._debug("received broadcast notification from other tab or client",g),await this._notifyAllSubscribers(g.data.event,g.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${jx}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},a="none";if(en()&&(r=hC(window.location.href),this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce")),en()&&this.detectSessionInUrl&&a!=="none"){const{data:u,error:h}=await this._getSessionFromURL(r,a);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),nC(h)){const y=(e=h.details)===null||e===void 0?void 0:e.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:h}}return{error:h}}const{session:g,redirectType:v}=u;return this._debug("#_initialize()","detected session in URL",g,"redirect type",v),await this._saveSession(g),setTimeout(async()=>{v==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",g):await this._notifyAllSubscribers("SIGNED_IN",g)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return He(r)?this._returnResult({error:r}):this._returnResult({error:new Aa("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,a,u;try{const h=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(u=e==null?void 0:e.options)===null||u===void 0?void 0:u.captchaToken}},xform:vs}),{data:g,error:v}=h;if(v||!g)return this._returnResult({data:{user:null,session:null},error:v});const y=g.session,w=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",y)),this._returnResult({data:{user:w,session:y},error:null})}catch(h){if(He(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signUp(e){var r,a,u;try{let h;if("email"in e){const{email:A,password:C,options:T}=e;let R=null,k=null;this.flowType==="pkce"&&([R,k]=await oo(this.storage,this.storageKey)),h=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T==null?void 0:T.emailRedirectTo,body:{email:A,password:C,data:(r=T==null?void 0:T.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken},code_challenge:R,code_challenge_method:k},xform:vs})}else if("phone"in e){const{phone:A,password:C,options:T}=e;h=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:A,password:C,data:(a=T==null?void 0:T.data)!==null&&a!==void 0?a:{},channel:(u=T==null?void 0:T.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken}},xform:vs})}else throw new mu("You must provide either an email or phone number and a password");const{data:g,error:v}=h;if(v||!g)return await Jr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:v});const y=g.session,w=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",y)),this._returnResult({data:{user:w,session:y},error:null})}catch(h){if(await Jr(this.storage,`${this.storageKey}-code-verifier`),He(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithPassword(e){try{let r;if("email"in e){const{email:h,password:g,options:v}=e;r=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:g,gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:mg})}else if("phone"in e){const{phone:h,password:g,options:v}=e;r=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:g,gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:mg})}else throw new mu("You must provide either an email or phone number and a password");const{data:a,error:u}=r;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!a||!a.session||!a.user){const h=new ao;return this._returnResult({data:{user:null,session:null},error:h})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:u})}catch(r){if(He(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,a,u,h;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(h=e.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,a,u,h,g,v,y,w,A,C,T;let R,k;if("message"in e)R=e.message,k=e.signature;else{const{chain:D,wallet:L,statement:U,options:W}=e;let j;if(en())if(typeof L=="object")j=L;else{const se=window;if("ethereum"in se&&typeof se.ethereum=="object"&&"request"in se.ethereum&&typeof se.ethereum.request=="function")j=se.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!(W!=null&&W.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=L}const q=new URL((r=W==null?void 0:W.url)!==null&&r!==void 0?r:window.location.href),Z=await j.request({method:"eth_requestAccounts"}).then(se=>se).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Z||Z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const te=Wx(Z[0]);let ee=(a=W==null?void 0:W.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!ee){const se=await j.request({method:"eth_chainId"});ee=jC(se)}const ue={domain:q.host,address:te,statement:U,uri:q.href,version:"1",chainId:ee,nonce:(u=W==null?void 0:W.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(g=(h=W==null?void 0:W.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&g!==void 0?g:new Date,expirationTime:(v=W==null?void 0:W.signInWithEthereum)===null||v===void 0?void 0:v.expirationTime,notBefore:(y=W==null?void 0:W.signInWithEthereum)===null||y===void 0?void 0:y.notBefore,requestId:(w=W==null?void 0:W.signInWithEthereum)===null||w===void 0?void 0:w.requestId,resources:(A=W==null?void 0:W.signInWithEthereum)===null||A===void 0?void 0:A.resources};R=LC(ue),k=await j.request({method:"personal_sign",params:[BC(R),te]})}try{const{data:D,error:L}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:R,signature:k},!((C=e.options)===null||C===void 0)&&C.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:vs});if(L)throw L;if(!D||!D.session||!D.user){const U=new ao;return this._returnResult({data:{user:null,session:null},error:U})}return D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),this._returnResult({data:Object.assign({},D),error:L})}catch(D){if(He(D))return this._returnResult({data:{user:null,session:null},error:D});throw D}}async signInWithSolana(e){var r,a,u,h,g,v,y,w,A,C,T,R;let k,D;if("message"in e)k=e.message,D=e.signature;else{const{chain:L,wallet:U,statement:W,options:j}=e;let q;if(en())if(typeof U=="object")q=U;else{const te=window;if("solana"in te&&typeof te.solana=="object"&&("signIn"in te.solana&&typeof te.solana.signIn=="function"||"signMessage"in te.solana&&typeof te.solana.signMessage=="function"))q=te.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=U}const Z=new URL((r=j==null?void 0:j.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in q&&q.signIn){const te=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:Z.host,uri:Z.href}),W?{statement:W}:null));let ee;if(Array.isArray(te)&&te[0]&&typeof te[0]=="object")ee=te[0];else if(te&&typeof te=="object"&&"signedMessage"in te&&"signature"in te)ee=te;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ee&&"signature"in ee&&(typeof ee.signedMessage=="string"||ee.signedMessage instanceof Uint8Array)&&ee.signature instanceof Uint8Array)k=typeof ee.signedMessage=="string"?ee.signedMessage:new TextDecoder().decode(ee.signedMessage),D=ee.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${Z.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...W?["",W,""]:[""],"Version: 1",`URI: ${Z.href}`,`Issued At: ${(u=(a=j==null?void 0:j.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((h=j==null?void 0:j.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((g=j==null?void 0:j.signInWithSolana)===null||g===void 0)&&g.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((v=j==null?void 0:j.signInWithSolana)===null||v===void 0)&&v.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((y=j==null?void 0:j.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((w=j==null?void 0:j.signInWithSolana)===null||w===void 0)&&w.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((C=(A=j==null?void 0:j.signInWithSolana)===null||A===void 0?void 0:A.resources)===null||C===void 0)&&C.length?["Resources",...j.signInWithSolana.resources.map(ee=>`- ${ee}`)]:[]].join(`
`);const te=await q.signMessage(new TextEncoder().encode(k),"utf8");if(!te||!(te instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");D=te}}try{const{data:L,error:U}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Sa(D)},!((T=e.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(R=e.options)===null||R===void 0?void 0:R.captchaToken}}:null),xform:vs});if(U)throw U;if(!L||!L.session||!L.user){const W=new ao;return this._returnResult({data:{user:null,session:null},error:W})}return L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),this._returnResult({data:Object.assign({},L),error:U})}catch(L){if(He(L))return this._returnResult({data:{user:null,session:null},error:L});throw L}}async _exchangeCodeForSession(e){const r=await ya(this.storage,`${this.storageKey}-code-verifier`),[a,u]=(r??"").split("/");try{if(!a&&this.flowType==="pkce")throw new sC;const{data:h,error:g}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:vs});if(await Jr(this.storage,`${this.storageKey}-code-verifier`),g)throw g;if(!h||!h.session||!h.user){const v=new ao;return this._returnResult({data:{user:null,session:null,redirectType:null},error:v})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign(Object.assign({},h),{redirectType:u??null}),error:g})}catch(h){if(await Jr(this.storage,`${this.storageKey}-code-verifier`),He(h))return this._returnResult({data:{user:null,session:null,redirectType:null},error:h});throw h}}async signInWithIdToken(e){try{const{options:r,provider:a,token:u,access_token:h,nonce:g}=e,v=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:u,access_token:h,nonce:g,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:vs}),{data:y,error:w}=v;if(w)return this._returnResult({data:{user:null,session:null},error:w});if(!y||!y.session||!y.user){const A=new ao;return this._returnResult({data:{user:null,session:null},error:A})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:y,error:w})}catch(r){if(He(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,a,u,h,g;try{if("email"in e){const{email:v,options:y}=e;let w=null,A=null;this.flowType==="pkce"&&([w,A]=await oo(this.storage,this.storageKey));const{error:C}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:v,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},create_user:(a=y==null?void 0:y.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:w,code_challenge_method:A},redirectTo:y==null?void 0:y.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:C})}if("phone"in e){const{phone:v,options:y}=e,{data:w,error:A}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:v,data:(u=y==null?void 0:y.data)!==null&&u!==void 0?u:{},create_user:(h=y==null?void 0:y.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},channel:(g=y==null?void 0:y.channel)!==null&&g!==void 0?g:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:w==null?void 0:w.message_id},error:A})}throw new mu("You must provide either an email or phone number.")}catch(v){if(await Jr(this.storage,`${this.storageKey}-code-verifier`),He(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async verifyOtp(e){var r,a;try{let u,h;"options"in e&&(u=(r=e.options)===null||r===void 0?void 0:r.redirectTo,h=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:g,error:v}=await Qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:h}}),redirectTo:u,xform:vs});if(v)throw v;if(!g)throw new Error("An error occurred on token verification.");const y=g.session,w=g.user;return y!=null&&y.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),this._returnResult({data:{user:w,session:y},error:null})}catch(u){if(He(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(e){var r,a,u,h,g;try{let v=null,y=null;this.flowType==="pkce"&&([v,y]=await oo(this.storage,this.storageKey));const w=await Qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((u=e==null?void 0:e.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:v,code_challenge_method:y}),headers:this.headers,xform:IC});return!((h=w.data)===null||h===void 0)&&h.url&&en()&&!(!((g=e.options)===null||g===void 0)&&g.skipBrowserRedirect)&&window.location.assign(w.data.url),this._returnResult(w)}catch(v){if(await Jr(this.storage,`${this.storageKey}-code-verifier`),He(v))return this._returnResult({data:null,error:v});throw v}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:a}=e;if(a)throw a;if(!r)throw new Wn;const{error:u}=await Qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(e){if(He(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:a,type:u,options:h}=e,{error:g}=await Qe(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}else if("phone"in e){const{phone:a,type:u,options:h}=e,{data:g,error:v}=await Qe(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:v})}throw new mu("You must provide either an email or phone number and a type")}catch(r){if(He(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await ya(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<Oh:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.userStorage){const g=await ya(this.userStorage,this.storageKey+"-user");g!=null&&g.user?e.user=g.user:e.user=Mh()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const g={value:this.suppressGetSessionWarning};e.user=SC(e.user,g),g.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:u,error:h}=await this._callRefreshToken(e.refresh_token);return h?this._returnResult({data:{session:null},error:h}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wi}):await this._useSession(async r=>{var a,u,h;const{data:g,error:v}=r;if(v)throw v;return!(!((a=g.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wn}:await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(u=g.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0,xform:Wi})})}catch(r){if(He(r))return rC(r)&&(await this._removeSession(),await Jr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async a=>{const{data:u,error:h}=a;if(h)throw h;if(!u.session)throw new Wn;const g=u.session;let v=null,y=null;this.flowType==="pkce"&&e.email!=null&&([v,y]=await oo(this.storage,this.storageKey));const{data:w,error:A}=await Qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:v,code_challenge_method:y}),jwt:g.access_token,xform:Wi});if(A)throw A;return g.user=w.user,await this._saveSession(g),await this._notifyAllSubscribers("USER_UPDATED",g),this._returnResult({data:{user:g.user},error:null})})}catch(a){if(await Jr(this.storage,`${this.storageKey}-code-verifier`),He(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Wn;const r=Date.now()/1e3;let a=r,u=!0,h=null;const{payload:g}=Dh(e.access_token);if(g.exp&&(a=g.exp,u=a<=r),u){const{data:v,error:y}=await this._callRefreshToken(e.refresh_token);if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!v)return{data:{user:null,session:null},error:null};h=v}else{const{data:v,error:y}=await this._getUser(e.access_token);if(y)throw y;h={access_token:e.access_token,refresh_token:e.refresh_token,user:v.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return this._returnResult({data:{user:h.user,session:h},error:null})}catch(r){if(He(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var a;if(!e){const{data:g,error:v}=r;if(v)throw v;e=(a=g.session)!==null&&a!==void 0?a:void 0}if(!(e!=null&&e.refresh_token))throw new Wn;const{data:u,error:h}=await this._callRefreshToken(e.refresh_token);return h?this._returnResult({data:{user:null,session:null},error:h}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(He(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!en())throw new gu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new gu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new og("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new og("No code detected.");const{data:W,error:j}=await this._exchangeCodeForSession(e.code);if(j)throw j;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:W.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:u,access_token:h,refresh_token:g,expires_in:v,expires_at:y,token_type:w}=e;if(!h||!v||!g||!w)throw new gu("No session defined in URL");const A=Math.round(Date.now()/1e3),C=parseInt(v);let T=A+C;y&&(T=parseInt(y));const R=T-A;R*1e3<=mo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${R}s, should have been closer to ${C}s`);const k=T-C;A-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,T,A):A-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,T,A);const{data:D,error:L}=await this._getUser(h);if(L)throw L;const U={provider_token:a,provider_refresh_token:u,access_token:h,expires_in:C,expires_at:T,refresh_token:g,token_type:w,user:D.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:U,redirectType:e.type},error:null})}catch(a){if(He(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await ya(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:u,error:h}=r;if(h)return this._returnResult({error:h});const g=(a=u.session)===null||a===void 0?void 0:a.access_token;if(g){const{error:v}=await this.admin.signOut(g,e);if(v&&!(tC(v)&&(v.status===404||v.status===401||v.status===403)))return this._returnResult({error:v})}return e!=="others"&&(await this._removeSession(),await Jr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=dC(),a={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(e){return await this._useSession(async r=>{var a,u;try{const{data:{session:h},error:g}=r;if(g)throw g;await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",e,"session",h)}catch(h){await((u=this.stateChangeEmitters.get(e))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",h),console.error(h)}})}async resetPasswordForEmail(e,r={}){let a=null,u=null;this.flowType==="pkce"&&([a,u]=await oo(this.storage,this.storageKey,!0));try{return await Qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:u,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(h){if(await Jr(this.storage,`${this.storageKey}-code-verifier`),He(h))return this._returnResult({data:null,error:h});throw h}}async getUserIdentities(){var e;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(He(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:a,error:u}=await this._useSession(async h=>{var g,v,y,w,A;const{data:C,error:T}=h;if(T)throw T;const R=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(g=e.options)===null||g===void 0?void 0:g.redirectTo,scopes:(v=e.options)===null||v===void 0?void 0:v.scopes,queryParams:(y=e.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await Qe(this.fetch,"GET",R,{headers:this.headers,jwt:(A=(w=C.session)===null||w===void 0?void 0:w.access_token)!==null&&A!==void 0?A:void 0})});if(u)throw u;return en()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),this._returnResult({data:{provider:e.provider,url:a==null?void 0:a.url},error:null})}catch(a){if(He(a))return this._returnResult({data:{provider:e.provider,url:null},error:a});throw a}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var a;try{const{error:u,data:{session:h}}=r;if(u)throw u;const{options:g,provider:v,token:y,access_token:w,nonce:A}=e,C=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=h==null?void 0:h.access_token)!==null&&a!==void 0?a:void 0,body:{provider:v,id_token:y,access_token:w,nonce:A,link_identity:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:vs}),{data:T,error:R}=C;return R?this._returnResult({data:{user:null,session:null},error:R}):!T||!T.session||!T.user?this._returnResult({data:{user:null,session:null},error:new ao}):(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),this._returnResult({data:T,error:R}))}catch(u){if(await Jr(this.storage,`${this.storageKey}-code-verifier`),He(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var a,u;const{data:h,error:g}=r;if(g)throw g;return await Qe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(u=(a=h.session)===null||a===void 0?void 0:a.access_token)!==null&&u!==void 0?u:void 0})})}catch(r){if(He(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await gC(async u=>(u>0&&await mC(200*Math.pow(2,u-1)),this._debug(r,"refreshing attempt",u),await Qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vs})),(u,h)=>{const g=200*Math.pow(2,u);return h&&Ph(h)&&Date.now()+g-a<mo})}catch(a){if(this._debug(r,"error",a),He(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",a),en()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}}async _recoverAndRefresh(){var e,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const u=await ya(this.storage,this.storageKey);if(u&&this.userStorage){let g=await ya(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!g&&(g={user:u.user},await go(this.userStorage,this.storageKey+"-user",g)),u.user=(e=g==null?void 0:g.user)!==null&&e!==void 0?e:Mh()}else if(u&&!u.user&&!u.user){const g=await ya(this.storage,this.storageKey+"-user");g&&(g!=null&&g.user)?(u.user=g.user,await Jr(this.storage,this.storageKey+"-user"),await go(this.storage,this.storageKey,u)):u.user=Mh()}if(this._debug(a,"session from storage",u),!this._isValidSession(u)){this._debug(a,"session is not valid"),u!==null&&await this._removeSession();return}const h=((r=u.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Oh;if(this._debug(a,`session has${h?"":" not"} expired with margin of ${Oh}s`),h){if(this.autoRefreshToken&&u.refresh_token){const{error:g}=await this._callRefreshToken(u.refresh_token);g&&(console.error(g),Ph(g)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",g),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:g,error:v}=await this._getUser(u.access_token);!v&&(g!=null&&g.user)?(u.user=g.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(g){console.error("Error getting user data:",g),this._debug(a,"error getting user data, skipping SIGNED_IN notification",g)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(a,"error",u),console.error(u);return}finally{this._debug(a,"end")}}async _callRefreshToken(e){var r,a;if(!e)throw new Wn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Yu;const{data:h,error:g}=await this._refreshAccessToken(e);if(g)throw g;if(!h.session)throw new Wn;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const v={data:h.session,error:null};return this.refreshingDeferred.resolve(v),v}catch(h){if(this._debug(u,"error",h),He(h)){const g={data:null,error:h};return Ph(h)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(g),g}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(h),h}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(e,r,a=!0){const u=`#_notifyAllSubscribers(${e})`;this._debug(u,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:r});const h=[],g=Array.from(this.stateChangeEmitters.values()).map(async v=>{try{await v.callback(e,r)}catch(y){h.push(y)}});if(await Promise.all(g),h.length>0){for(let v=0;v<h.length;v+=1)console.error(h[v]);throw h[0]}}finally{this._debug(u,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Jr(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await go(this.userStorage,this.storageKey+"-user",{user:r.user});const u=Object.assign({},r);delete u.user;const h=hg(u);await go(this.storage,this.storageKey,h)}else{const u=hg(r);await go(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Jr(this.storage,this.storageKey),await Jr(this.storage,this.storageKey+"-code-verifier"),await Jr(this.storage,this.storageKey+"-user"),this.userStorage&&await Jr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&en()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),mo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((a.expires_at*1e3-e)/mo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${mo}ms, refresh threshold is ${mf} ticks`),u<=mf&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Vx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!en()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,a){const u=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&u.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&u.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[h,g]=await oo(this.storage,this.storageKey),v=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(g)}`});u.push(v.toString())}if(a!=null&&a.queryParams){const h=new URLSearchParams(a.queryParams);u.push(h.toString())}return a!=null&&a.skipBrowserRedirect&&u.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${u.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var a;const{data:u,error:h}=r;return h?this._returnResult({data:null,error:h}):await Qe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=u==null?void 0:u.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(He(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var a,u;const{data:h,error:g}=r;if(g)return this._returnResult({data:null,error:g});const v=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:y,error:w}=await Qe(this.fetch,"POST",`${this.url}/factors`,{body:v,headers:this.headers,jwt:(a=h==null?void 0:h.session)===null||a===void 0?void 0:a.access_token});return w?this._returnResult({data:null,error:w}):(e.factorType==="totp"&&y.type==="totp"&&(!((u=y==null?void 0:y.totp)===null||u===void 0)&&u.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),this._returnResult({data:y,error:null}))})}catch(r){if(He(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var a;const{data:u,error:h}=r;if(h)return this._returnResult({data:null,error:h});const g=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?GC(e.webauthn.credential_response):$C(e.webauthn.credential_response)})}:{code:e.code}),{data:v,error:y}=await Qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:g,headers:this.headers,jwt:(a=u==null?void 0:u.session)===null||a===void 0?void 0:a.access_token});return y?this._returnResult({data:null,error:y}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+v.expires_in},v)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",v),this._returnResult({data:v,error:y}))})}catch(r){if(He(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var a;const{data:u,error:h}=r;if(h)return this._returnResult({data:null,error:h});const g=await Qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(a=u==null?void 0:u.session)===null||a===void 0?void 0:a.access_token});if(g.error)return g;const{data:v}=g;if(v.type!=="webauthn")return{data:v,error:null};switch(v.webauthn.type){case"create":return{data:Object.assign(Object.assign({},v),{webauthn:Object.assign(Object.assign({},v.webauthn),{credential_options:Object.assign(Object.assign({},v.webauthn.credential_options),{publicKey:zC(v.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},v),{webauthn:Object.assign(Object.assign({},v.webauthn),{credential_options:Object.assign(Object.assign({},v.webauthn.credential_options),{publicKey:HC(v.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(He(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:a}=await this._challenge({factorId:e.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:a}=await this.getUser();if(a)return{data:null,error:a};const u={all:[],phone:[],totp:[],webauthn:[]};for(const h of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])u.all.push(h),h.status==="verified"&&u[h.factor_type].push(h);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:a},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Dh(a.access_token);let g=null;h.aal&&(g=h.aal);let v=g;((r=(e=a.user.factors)===null||e===void 0?void 0:e.filter(A=>A.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(v="aal2");const w=h.amr||[];return{data:{currentLevel:g,nextLevel:v,currentAuthenticationMethods:w},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:a},error:u}=r;return u?this._returnResult({data:null,error:u}):a?await Qe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:a.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new Wn})})}catch(r){if(He(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async a=>{const{data:{session:u},error:h}=a;if(h)return this._returnResult({data:null,error:h});if(!u)return this._returnResult({data:null,error:new Wn});const g=await Qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:v=>({data:v,error:null})});return g.data&&g.data.redirect_url&&en()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(g.data.redirect_url),g})}catch(a){if(He(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(e,r){try{return await this._useSession(async a=>{const{data:{session:u},error:h}=a;if(h)return this._returnResult({data:null,error:h});if(!u)return this._returnResult({data:null,error:new Wn});const g=await Qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:v=>({data:v,error:null})});return g.data&&g.data.redirect_url&&en()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(g.data.redirect_url),g})}catch(a){if(He(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:a}=e;return a?this._returnResult({data:null,error:a}):r?await Qe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Wn})})}catch(e){if(He(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:a},error:u}=r;return u?this._returnResult({data:null,error:u}):a?(await Qe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Wn})})}catch(r){if(He(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let a=r.keys.find(v=>v.kid===e);if(a)return a;const u=Date.now();if(a=this.jwks.keys.find(v=>v.kid===e),a&&this.jwks_cached_at+J3>u)return a;const{data:h,error:g}=await Qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(g)throw g;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=u,a=h.keys.find(v=>v.kid===e),!a)?null:a}async getClaims(e,r={}){try{let a=e;if(!a){const{data:R,error:k}=await this.getSession();if(k||!R.session)return this._returnResult({data:null,error:k});a=R.session.access_token}const{header:u,payload:h,signature:g,raw:{header:v,payload:y}}=Dh(a);r!=null&&r.allowExpired||EC(h.exp);const w=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!w){const{error:R}=await this.getUser(a);if(R)throw R;return{data:{claims:h,header:u,signature:g},error:null}}const A=CC(u.alg),C=await crypto.subtle.importKey("jwk",w,A,!0,["verify"]);if(!await crypto.subtle.verify(A,C,g,cC(`${v}.${y}`)))throw new xf("Invalid JWT signature");return{data:{claims:h,header:u,signature:g},error:null}}catch(a){if(He(a))return this._returnResult({data:null,error:a});throw a}}}Fl.nextInstanceID={};const t8=Fl,r8="2.90.0";let Cl="";typeof Deno<"u"?Cl="deno":typeof document<"u"?Cl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Cl="react-native":Cl="node";const n8={"X-Client-Info":`supabase-js-${Cl}/${r8}`},s8={headers:n8},i8={schema:"public"},a8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},o8={};function Ul(t){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ul(t)}function l8(t,e){if(Ul(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(Ul(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c8(t){var e=l8(t,"string");return Ul(e)=="symbol"?e:e+""}function u8(t,e,r){return(e=c8(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,a)}return r}function wr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wg(Object(r),!0).forEach(function(a){u8(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wg(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}const d8=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),h8=()=>Headers,f8=(t,e,r)=>{const a=d8(r),u=h8();return async(h,g)=>{var v;const y=(v=await e())!==null&&v!==void 0?v:t;let w=new u(g==null?void 0:g.headers);return w.has("apikey")||w.set("apikey",t),w.has("Authorization")||w.set("Authorization",`Bearer ${y}`),a(h,wr(wr({},g),{},{headers:w}))}};function m8(t){return t.endsWith("/")?t:t+"/"}function g8(t,e){var r,a;const{db:u,auth:h,realtime:g,global:v}=t,{db:y,auth:w,realtime:A,global:C}=e,T={db:wr(wr({},y),u),auth:wr(wr({},w),h),realtime:wr(wr({},A),g),storage:{},global:wr(wr(wr({},C),v),{},{headers:wr(wr({},(r=C==null?void 0:C.headers)!==null&&r!==void 0?r:{}),(a=v==null?void 0:v.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return t.accessToken?T.accessToken=t.accessToken:delete T.accessToken,T}function p8(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(m8(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var x8=class extends t8{constructor(t){super(t)}},y8=class{constructor(t,e,r){var a,u;this.supabaseUrl=t,this.supabaseKey=e;const h=p8(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const g=`sb-${h.hostname.split(".")[0]}-auth-token`,v={db:i8,realtime:o8,auth:wr(wr({},a8),{},{storageKey:g}),global:s8},y=g8(r??{},v);if(this.storageKey=(a=y.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(u=y.global.headers)!==null&&u!==void 0?u:{},y.accessToken)this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(A,C)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(C)} is not possible`)}});else{var w;this.auth=this._initSupabaseAuthClient((w=y.auth)!==null&&w!==void 0?w:{},this.headers,y.global.fetch)}this.fetch=f8(e,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(wr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&this.accessToken().then(A=>this.realtime.setAuth(A)).catch(A=>console.warn("Failed to set initial Realtime auth token:",A)),this.rest=new ZE(new URL("rest/v1",h).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new Y3(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new $E(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:a}=await t.auth.getSession();return(e=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:a,userStorage:u,storageKey:h,flowType:g,lock:v,debug:y,throwOnError:w},A,C){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new x8({url:this.authUrl.href,headers:wr(wr({},T),A),storageKey:h,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:a,userStorage:u,flowType:g,lock:v,debug:y,throwOnError:w,fetch:C,hasCustomAuthorizationHeader:Object.keys(this.headers).some(R=>R.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new m3(this.realtimeUrl.href,wr(wr({},t),{},{params:wr(wr({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const w8=(t,e,r)=>new y8(t,e,r);function v8(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}v8()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const b8="https://jsldrmudlqtwffwtrcwh.supabase.co",E8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpzbGRybXVkbHF0d2Zmd3RyY3doIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4MDEwNDIsImV4cCI6MjA4MzM3NzA0Mn0.T5YIhRCO563hTHtn17xXxPz88TEoLyZI01yfYgQ3Pa0",Xe=w8(b8,E8),Hx=z.createContext(void 0);function C8({children:t}){const[e,r]=z.useState([]),[a,u]=z.useState(""),[h,g]=z.useState(!1),[v,y]=z.useState(!1),[w,A]=z.useState(0),[C,T]=z.useState(!1),[R,k]=z.useState(!1);z.useEffect(()=>{const ge=localStorage.getItem("cart_notes");ge&&u(ge)},[]),z.useEffect(()=>{localStorage.setItem("cart_notes",a)},[a]);const D=(ge,he,Te)=>{r(Ie=>{const Q=Ie.find(fe=>fe.name===ge&&fe.price===he);if(Q)return Ie.map(fe=>fe.id===Q.id?{...fe,quantity:fe.quantity+1}:fe);const Re={id:`${ge}-${he}-${Date.now()}`,name:ge,price:he,quantity:1,category:Te};return[...Ie,Re]})},L=ge=>{r(he=>he.filter(Te=>Te.id!==ge))},U=(ge,he)=>{if(he<=0){L(ge);return}r(Te=>Te.map(Ie=>Ie.id===ge?{...Ie,quantity:he}:Ie))},W=()=>{r([]),u(""),localStorage.removeItem("cart_notes")},j=e.reduce((ge,he)=>ge+he.quantity,0),q=ge=>{const he=ge.match(/([\d.]+)/);return he?parseFloat(he[1]):0},Z=e.reduce((ge,he)=>ge+q(he.price)*he.quantity,0),te=async()=>{var ge;try{const{data:{user:he}}=await Xe.auth.getUser();if(!he)return!1;const Te=(ge=he.user_metadata)==null?void 0:ge.shop_name;if(!Te)return!1;const{data:Ie,error:Q}=await Xe.from("vip_shops").select("shop_name").ilike("shop_name",Te).single();return!Q&&!!Ie}catch{return!1}},ee=async()=>{try{const{data:{user:ge}}=await Xe.auth.getUser();if(!ge)return;let{data:he,error:Te}=await Xe.from("user_rewards").select("stamps, pending_reward").eq("user_id",ge.id).single();if(Te&&Te.code==="PGRST116"){const{data:Ie}=await Xe.from("user_rewards").insert({user_id:ge.id,stamps:0,pending_reward:!1}).select().single();he=Ie}he&&(A(he.stamps),T(he.pending_reward))}catch(ge){console.error("Error fetching rewards:",ge)}};z.useEffect(()=>{y(!1),ee()},[]),z.useEffect(()=>{if(C&&!R&&e.length>0){const ge=["Coffee","Tea","Hot Drink","Iced"];e.some(Te=>Te.category&&ge.includes(Te.category))&&ue()}},[C,R,e]);const ue=()=>{if(!C||e.length===0)return;const ge=["Coffee","Tea","Hot Drink","Iced"];r(he=>{const Te=[...he],Ie=Te.findIndex(Q=>Q.category&&ge.includes(Q.category));return Ie!==-1&&(Te[Ie]={...Te[Ie],price:"0.00",rewardApplied:!0}),Te}),k(!0)},se=async(ge="online")=>{if(e.length===0)return{success:!1,error:"Cart is empty"};if(a.length>500)return{success:!1,error:"Notes exceed 500 characters"};g(!0);try{const{data:{user:he}}=await Xe.auth.getUser();if(!he)return{success:!1,error:"You must be logged in to place an order"};const Te=ge==="in-store"?"pending":"awaiting_payment",{data:Ie,error:Q}=await Xe.from("orders").insert({user_id:he.id,status:Te,total:Z,notes:a||null,payment_method:ge,payment_status:ge==="in-store"?"in_store":"pending"}).select().single();if(Q)throw Q;if(!Ie)throw new Error("Failed to create order");const Re=e.map(de=>({order_id:Ie.id,product_name:de.name,quantity:de.quantity,price:q(de.price)})),{error:fe}=await Xe.from("order_items").insert(Re);if(fe)throw fe;if(ge==="online"){const{data:{session:de}}=await Xe.auth.getSession();if(!(de!=null&&de.access_token))throw new Error("No active session - please log in again");console.log(" Calling create-payment with direct fetch");const $=await fetch("https://jsldrmudlqtwffwtrcwh.supabase.co/functions/v1/create-payment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${de.access_token}`,apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpzbGRybXVkbHF0d2Zmd3RyY3doIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4MDEwNDIsImV4cCI6MjA4MzM3NzA0Mn0.T5YIhRCO563hTHtn17xXxPz88TEoLyZI01yfYgQ3Pa0"},body:JSON.stringify({orderId:Ie.id,amount:Math.round(Z*100),currency:"GBP",frontendUrl:window.location.origin})});let ae;try{ae=await $.json(),console.log(" Payment response:",ae)}catch(ke){throw console.error("Error parsing response:",ke),new Error(`Payment failed: ${$.status} ${$.statusText}`)}if(!$.ok)throw await Xe.from("order_items").delete().eq("order_id",Ie.id),await Xe.from("orders").delete().eq("id",Ie.id),new Error((ae==null?void 0:ae.error)||`Payment creation failed: ${$.status}`);if(!ae.success||!ae.paymentUrl)throw await Xe.from("order_items").delete().eq("order_id",Ie.id),await Xe.from("orders").delete().eq("id",Ie.id),new Error((ae==null?void 0:ae.error)||"Failed to create payment session");return g(!1),{success:!0,paymentUrl:ae.paymentUrl}}return await Ue(he.id,Ie.id),W(),k(!1),await ee(),{success:!0}}catch(he){return console.error("Order submission error:",he),{success:!1,error:he.message||"Failed to place order"}}finally{g(!1)}},Ue=async(ge,he)=>{if(R&&C)await Xe.from("user_rewards").update({stamps:0,pending_reward:!1,updated_at:new Date().toISOString()}).eq("user_id",ge),await Xe.from("reward_transactions").insert({user_id:ge,type:"reward_redeemed",amount:1,order_id:he});else if(!C){const Te=["Coffee","Tea","Hot Drink","Iced"],Ie=e.filter(Q=>Q.category&&Te.includes(Q.category)).reduce((Q,Re)=>Q+Re.quantity,0);if(Ie>0){const{data:Q}=await Xe.from("user_rewards").select("stamps").eq("user_id",ge).single(),fe=((Q==null?void 0:Q.stamps)||0)+Ie,de=fe>=10;await Xe.from("user_rewards").update({stamps:de?0:fe,pending_reward:de,updated_at:new Date().toISOString()}).eq("user_id",ge),await Xe.from("reward_transactions").insert({user_id:ge,type:"stamp_earned",amount:Ie,order_id:he}),de&&await Xe.from("reward_transactions").insert({user_id:ge,type:"reward_earned",amount:1})}}};return x.jsx(Hx.Provider,{value:{cartItems:e,addToCart:D,removeFromCart:L,updateQuantity:U,clearCart:W,cartCount:j,cartTotal:Z,orderNotes:a,setOrderNotes:u,submitOrder:se,isSubmitting:h,isVIP:v,checkVIPStatus:te,userStamps:w,pendingReward:C,applyReward:ue,rewardApplied:R,fetchUserRewards:ee},children:t})}function Pa(){const t=z.useContext(Hx);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t}const Gx=z.createContext(void 0);function A8({children:t}){var R;const[e,r]=z.useState(null),[a,u]=z.useState(null),[h,g]=z.useState(!0),[v,y]=z.useState(!1);z.useEffect(()=>{Xe.auth.getSession().then(({data:{session:D}})=>{u(D),r((D==null?void 0:D.user)??null),g(!1)});const{data:{subscription:k}}=Xe.auth.onAuthStateChange((D,L)=>{u(L),r((L==null?void 0:L.user)??null),g(!1)});return()=>k.unsubscribe()},[]);const w=async(k,D)=>{const{data:L,error:U}=await Xe.auth.signInWithPassword({email:k,password:D});return U?{error:U.message}:L.user&&!L.user.email_confirmed_at?(await Xe.auth.signOut(),{error:"Please verify your email before logging in. Check your inbox for the verification link."}):{error:null}},A=async(k,D,L)=>{const{error:U}=await Xe.auth.signUp({email:k,password:D,options:{emailRedirectTo:`${window.location.origin}/verified`,data:{first_name:L==null?void 0:L.firstName,last_name:L==null?void 0:L.lastName,shop_name:L==null?void 0:L.shop_name,role:"user"}}});return U?{error:U.message}:{error:null}},C=async()=>{await Xe.auth.signOut(),y(!1)},T=((R=e==null?void 0:e.user_metadata)==null?void 0:R.role)==="admin";return x.jsx(Gx.Provider,{value:{user:e,session:a,isAuthenticated:e!==null,isLoading:h,isAdmin:T,login:w,register:A,logout:C,pendingCheckout:v,setPendingCheckout:y},children:t})}function Vs(){const t=z.useContext(Gx);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function S8(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}const _8=t=>{switch(t){case"success":return I8;case"info":return k8;case"warning":return R8;case"error":return O8;default:return null}},N8=Array(12).fill(0),T8=({visible:t,className:e})=>ve.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},ve.createElement("div",{className:"sonner-spinner"},N8.map((r,a)=>ve.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),I8=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),R8=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),k8=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),O8=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),P8=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ve.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ve.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),D8=()=>{const[t,e]=ve.useState(document.hidden);return ve.useEffect(()=>{const r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t};let yf=1;class M8{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;const{message:a,...u}=e,h=typeof(e==null?void 0:e.id)=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:yf++,g=this.toasts.find(y=>y.id===h),v=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(h)&&this.dismissedToasts.delete(h),g?this.toasts=this.toasts.map(y=>y.id===h?(this.publish({...y,...e,id:h,title:a}),{...y,...e,id:h,dismissible:v,title:a}):y):this.addToast({title:a,...u,dismissible:v,id:h}),h},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:e,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(a=>a({id:r.id,dismiss:!0}))}),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let a;r.loading!==void 0&&(a=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const u=Promise.resolve(e instanceof Function?e():e);let h=a!==void 0,g;const v=u.then(async w=>{if(g=["resolve",w],ve.isValidElement(w))h=!1,this.create({id:a,type:"default",message:w});else if(B8(w)&&!w.ok){h=!1;const C=typeof r.error=="function"?await r.error(`HTTP error! status: ${w.status}`):r.error,T=typeof r.description=="function"?await r.description(`HTTP error! status: ${w.status}`):r.description,k=typeof C=="object"&&!ve.isValidElement(C)?C:{message:C};this.create({id:a,type:"error",description:T,...k})}else if(w instanceof Error){h=!1;const C=typeof r.error=="function"?await r.error(w):r.error,T=typeof r.description=="function"?await r.description(w):r.description,k=typeof C=="object"&&!ve.isValidElement(C)?C:{message:C};this.create({id:a,type:"error",description:T,...k})}else if(r.success!==void 0){h=!1;const C=typeof r.success=="function"?await r.success(w):r.success,T=typeof r.description=="function"?await r.description(w):r.description,k=typeof C=="object"&&!ve.isValidElement(C)?C:{message:C};this.create({id:a,type:"success",description:T,...k})}}).catch(async w=>{if(g=["reject",w],r.error!==void 0){h=!1;const A=typeof r.error=="function"?await r.error(w):r.error,C=typeof r.description=="function"?await r.description(w):r.description,R=typeof A=="object"&&!ve.isValidElement(A)?A:{message:A};this.create({id:a,type:"error",description:C,...R})}}).finally(()=>{h&&(this.dismiss(a),a=void 0),r.finally==null||r.finally.call(r)}),y=()=>new Promise((w,A)=>v.then(()=>g[0]==="reject"?A(g[1]):w(g[1])).catch(A));return typeof a!="string"&&typeof a!="number"?{unwrap:y}:Object.assign(a,{unwrap:y})},this.custom=(e,r)=>{const a=(r==null?void 0:r.id)||yf++;return this.create({jsx:e(a),id:a,...r}),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const In=new M8,j8=(t,e)=>{const r=(e==null?void 0:e.id)||yf++;return In.addToast({title:t,...e,id:r}),r},B8=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",L8=j8,F8=()=>In.toasts,U8=()=>In.getActiveToasts(),Qt=Object.assign(L8,{success:In.success,info:In.info,warning:In.warning,error:In.error,custom:In.custom,message:In.message,promise:In.promise,dismiss:In.dismiss,loading:In.loading},{getHistory:F8,getToasts:U8});S8("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function pu(t){return t.label!==void 0}const V8=3,W8="24px",z8="16px",vg=4e3,H8=356,G8=14,$8=45,X8=200;function js(...t){return t.filter(Boolean).join(" ")}function Y8(t){const[e,r]=t.split("-"),a=[];return e&&a.push(e),r&&a.push(r),a}const q8=t=>{var e,r,a,u,h,g,v,y,w;const{invert:A,toast:C,unstyled:T,interacting:R,setHeights:k,visibleToasts:D,heights:L,index:U,toasts:W,expanded:j,removeToast:q,defaultRichColors:Z,closeButton:te,style:ee,cancelButtonStyle:ue,actionButtonStyle:se,className:Ue="",descriptionClassName:ge="",duration:he,position:Te,gap:Ie,expandByDefault:Q,classNames:Re,icons:fe,closeButtonAriaLabel:de="Close toast"}=t,[Ne,Ae]=ve.useState(null),[$,ae]=ve.useState(null),[ke,Me]=ve.useState(!1),[ct,pe]=ve.useState(!1),[yt,$e]=ve.useState(!1),[wt,Gt]=ve.useState(!1),[br,_s]=ve.useState(!1),[mt,vn]=ve.useState(0),[fn,cs]=ve.useState(0),Bt=ve.useRef(C.duration||he||vg),Nt=ve.useRef(null),tt=ve.useRef(null),$n=U===0,Pe=U+1<=D,hr=C.type,Xn=C.dismissible!==!1,bn=C.className||"",ci=C.descriptionClassName||"",Rr=ve.useMemo(()=>L.findIndex(nt=>nt.toastId===C.id)||0,[L,C.id]),ui=ve.useMemo(()=>{var nt;return(nt=C.closeButton)!=null?nt:te},[C.closeButton,te]),rn=ve.useMemo(()=>C.duration||he||vg,[C.duration,he]),fr=ve.useRef(0),mn=ve.useRef(0),kn=ve.useRef(0),Ns=ve.useRef(null),[$t,_e]=Te.split("-"),Jt=ve.useMemo(()=>L.reduce((nt,Ct,sr)=>sr>=Rr?nt:nt+Ct.height,0),[L,Rr]),Et=D8(),Mt=C.invert||A,On=hr==="loading";mn.current=ve.useMemo(()=>Rr*Ie+Jt,[Rr,Jt]),ve.useEffect(()=>{Bt.current=rn},[rn]),ve.useEffect(()=>{Me(!0)},[]),ve.useEffect(()=>{const nt=tt.current;if(nt){const Ct=nt.getBoundingClientRect().height;return cs(Ct),k(sr=>[{toastId:C.id,height:Ct,position:C.position},...sr]),()=>k(sr=>sr.filter(At=>At.toastId!==C.id))}},[k,C.id]),ve.useLayoutEffect(()=>{if(!ke)return;const nt=tt.current,Ct=nt.style.height;nt.style.height="auto";const sr=nt.getBoundingClientRect().height;nt.style.height=Ct,cs(sr),k(At=>At.find(Xt=>Xt.toastId===C.id)?At.map(Xt=>Xt.toastId===C.id?{...Xt,height:sr}:Xt):[{toastId:C.id,height:sr,position:C.position},...At])},[ke,C.title,C.description,k,C.id]);const nn=ve.useCallback(()=>{pe(!0),vn(mn.current),k(nt=>nt.filter(Ct=>Ct.toastId!==C.id)),setTimeout(()=>{q(C)},X8)},[C,q,k,mn]);ve.useEffect(()=>{if(C.promise&&hr==="loading"||C.duration===1/0||C.type==="loading")return;let nt;return j||R||Et?(()=>{if(kn.current<fr.current){const At=new Date().getTime()-fr.current;Bt.current=Bt.current-At}kn.current=new Date().getTime()})():(()=>{Bt.current!==1/0&&(fr.current=new Date().getTime(),nt=setTimeout(()=>{C.onAutoClose==null||C.onAutoClose.call(C,C),nn()},Bt.current))})(),()=>clearTimeout(nt)},[j,R,C,hr,Et,nn]),ve.useEffect(()=>{C.delete&&nn()},[nn,C.delete]);function di(){var nt;if(fe!=null&&fe.loading){var Ct;return ve.createElement("div",{className:js(Re==null?void 0:Re.loader,C==null||(Ct=C.classNames)==null?void 0:Ct.loader,"sonner-loader"),"data-visible":hr==="loading"},fe.loading)}return ve.createElement(T8,{className:js(Re==null?void 0:Re.loader,C==null||(nt=C.classNames)==null?void 0:nt.loader),visible:hr==="loading"})}const ht=C.icon||(fe==null?void 0:fe[hr])||_8(hr);var $r,hi;return ve.createElement("li",{tabIndex:0,ref:tt,className:js(Ue,bn,Re==null?void 0:Re.toast,C==null||(e=C.classNames)==null?void 0:e.toast,Re==null?void 0:Re.default,Re==null?void 0:Re[hr],C==null||(r=C.classNames)==null?void 0:r[hr]),"data-sonner-toast":"","data-rich-colors":($r=C.richColors)!=null?$r:Z,"data-styled":!(C.jsx||C.unstyled||T),"data-mounted":ke,"data-promise":!!C.promise,"data-swiped":br,"data-removed":ct,"data-visible":Pe,"data-y-position":$t,"data-x-position":_e,"data-index":U,"data-front":$n,"data-swiping":yt,"data-dismissible":Xn,"data-type":hr,"data-invert":Mt,"data-swipe-out":wt,"data-swipe-direction":$,"data-expanded":!!(j||Q&&ke),style:{"--index":U,"--toasts-before":U,"--z-index":W.length-U,"--offset":`${ct?mt:mn.current}px`,"--initial-height":Q?"auto":`${fn}px`,...ee,...C.style},onDragEnd:()=>{$e(!1),Ae(null),Ns.current=null},onPointerDown:nt=>{On||!Xn||(Nt.current=new Date,vn(mn.current),nt.target.setPointerCapture(nt.pointerId),nt.target.tagName!=="BUTTON"&&($e(!0),Ns.current={x:nt.clientX,y:nt.clientY}))},onPointerUp:()=>{var nt,Ct,sr;if(wt||!Xn)return;Ns.current=null;const At=Number(((nt=tt.current)==null?void 0:nt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),gn=Number(((Ct=tt.current)==null?void 0:Ct.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Xt=new Date().getTime()-((sr=Nt.current)==null?void 0:sr.getTime()),Ot=Ne==="x"?At:gn,Ts=Math.abs(Ot)/Xt;if(Math.abs(Ot)>=$8||Ts>.11){vn(mn.current),C.onDismiss==null||C.onDismiss.call(C,C),ae(Ne==="x"?At>0?"right":"left":gn>0?"down":"up"),nn(),Gt(!0);return}else{var Yt,Xr;(Yt=tt.current)==null||Yt.style.setProperty("--swipe-amount-x","0px"),(Xr=tt.current)==null||Xr.style.setProperty("--swipe-amount-y","0px")}_s(!1),$e(!1),Ae(null)},onPointerMove:nt=>{var Ct,sr,At;if(!Ns.current||!Xn||((Ct=window.getSelection())==null?void 0:Ct.toString().length)>0)return;const Xt=nt.clientY-Ns.current.y,Ot=nt.clientX-Ns.current.x;var Ts;const Yt=(Ts=t.swipeDirections)!=null?Ts:Y8(Te);!Ne&&(Math.abs(Ot)>1||Math.abs(Xt)>1)&&Ae(Math.abs(Ot)>Math.abs(Xt)?"x":"y");let Xr={x:0,y:0};const ir=_r=>1/(1.5+Math.abs(_r)/20);if(Ne==="y"){if(Yt.includes("top")||Yt.includes("bottom"))if(Yt.includes("top")&&Xt<0||Yt.includes("bottom")&&Xt>0)Xr.y=Xt;else{const _r=Xt*ir(Xt);Xr.y=Math.abs(_r)<Math.abs(Xt)?_r:Xt}}else if(Ne==="x"&&(Yt.includes("left")||Yt.includes("right")))if(Yt.includes("left")&&Ot<0||Yt.includes("right")&&Ot>0)Xr.x=Ot;else{const _r=Ot*ir(Ot);Xr.x=Math.abs(_r)<Math.abs(Ot)?_r:Ot}(Math.abs(Xr.x)>0||Math.abs(Xr.y)>0)&&_s(!0),(sr=tt.current)==null||sr.style.setProperty("--swipe-amount-x",`${Xr.x}px`),(At=tt.current)==null||At.style.setProperty("--swipe-amount-y",`${Xr.y}px`)}},ui&&!C.jsx&&hr!=="loading"?ve.createElement("button",{"aria-label":de,"data-disabled":On,"data-close-button":!0,onClick:On||!Xn?()=>{}:()=>{nn(),C.onDismiss==null||C.onDismiss.call(C,C)},className:js(Re==null?void 0:Re.closeButton,C==null||(a=C.classNames)==null?void 0:a.closeButton)},(hi=fe==null?void 0:fe.close)!=null?hi:P8):null,(hr||C.icon||C.promise)&&C.icon!==null&&((fe==null?void 0:fe[hr])!==null||C.icon)?ve.createElement("div",{"data-icon":"",className:js(Re==null?void 0:Re.icon,C==null||(u=C.classNames)==null?void 0:u.icon)},C.promise||C.type==="loading"&&!C.icon?C.icon||di():null,C.type!=="loading"?ht:null):null,ve.createElement("div",{"data-content":"",className:js(Re==null?void 0:Re.content,C==null||(h=C.classNames)==null?void 0:h.content)},ve.createElement("div",{"data-title":"",className:js(Re==null?void 0:Re.title,C==null||(g=C.classNames)==null?void 0:g.title)},C.jsx?C.jsx:typeof C.title=="function"?C.title():C.title),C.description?ve.createElement("div",{"data-description":"",className:js(ge,ci,Re==null?void 0:Re.description,C==null||(v=C.classNames)==null?void 0:v.description)},typeof C.description=="function"?C.description():C.description):null),ve.isValidElement(C.cancel)?C.cancel:C.cancel&&pu(C.cancel)?ve.createElement("button",{"data-button":!0,"data-cancel":!0,style:C.cancelButtonStyle||ue,onClick:nt=>{pu(C.cancel)&&Xn&&(C.cancel.onClick==null||C.cancel.onClick.call(C.cancel,nt),nn())},className:js(Re==null?void 0:Re.cancelButton,C==null||(y=C.classNames)==null?void 0:y.cancelButton)},C.cancel.label):null,ve.isValidElement(C.action)?C.action:C.action&&pu(C.action)?ve.createElement("button",{"data-button":!0,"data-action":!0,style:C.actionButtonStyle||se,onClick:nt=>{pu(C.action)&&(C.action.onClick==null||C.action.onClick.call(C.action,nt),!nt.defaultPrevented&&nn())},className:js(Re==null?void 0:Re.actionButton,C==null||(w=C.classNames)==null?void 0:w.actionButton)},C.action.label):null)};function bg(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function K8(t,e){const r={};return[t,e].forEach((a,u)=>{const h=u===1,g=h?"--mobile-offset":"--offset",v=h?z8:W8;function y(w){["top","right","bottom","left"].forEach(A=>{r[`${g}-${A}`]=typeof w=="number"?`${w}px`:w})}typeof a=="number"||typeof a=="string"?y(a):typeof a=="object"?["top","right","bottom","left"].forEach(w=>{a[w]===void 0?r[`${g}-${w}`]=v:r[`${g}-${w}`]=typeof a[w]=="number"?`${a[w]}px`:a[w]}):y(v)}),r}const Z8=ve.forwardRef(function(e,r){const{invert:a,position:u="bottom-right",hotkey:h=["altKey","KeyT"],expand:g,closeButton:v,className:y,offset:w,mobileOffset:A,theme:C="light",richColors:T,duration:R,style:k,visibleToasts:D=V8,toastOptions:L,dir:U=bg(),gap:W=G8,icons:j,containerAriaLabel:q="Notifications"}=e,[Z,te]=ve.useState([]),ee=ve.useMemo(()=>Array.from(new Set([u].concat(Z.filter($=>$.position).map($=>$.position)))),[Z,u]),[ue,se]=ve.useState([]),[Ue,ge]=ve.useState(!1),[he,Te]=ve.useState(!1),[Ie,Q]=ve.useState(C!=="system"?C:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Re=ve.useRef(null),fe=h.join("+").replace(/Key/g,"").replace(/Digit/g,""),de=ve.useRef(null),Ne=ve.useRef(!1),Ae=ve.useCallback($=>{te(ae=>{var ke;return(ke=ae.find(Me=>Me.id===$.id))!=null&&ke.delete||In.dismiss($.id),ae.filter(({id:Me})=>Me!==$.id)})},[]);return ve.useEffect(()=>In.subscribe($=>{if($.dismiss){requestAnimationFrame(()=>{te(ae=>ae.map(ke=>ke.id===$.id?{...ke,delete:!0}:ke))});return}setTimeout(()=>{Ab.flushSync(()=>{te(ae=>{const ke=ae.findIndex(Me=>Me.id===$.id);return ke!==-1?[...ae.slice(0,ke),{...ae[ke],...$},...ae.slice(ke+1)]:[$,...ae]})})})}),[Z]),ve.useEffect(()=>{if(C!=="system"){Q(C);return}if(C==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Q("dark"):Q("light")),typeof window>"u")return;const $=window.matchMedia("(prefers-color-scheme: dark)");try{$.addEventListener("change",({matches:ae})=>{Q(ae?"dark":"light")})}catch{$.addListener(({matches:ke})=>{try{Q(ke?"dark":"light")}catch(Me){console.error(Me)}})}},[C]),ve.useEffect(()=>{Z.length<=1&&ge(!1)},[Z]),ve.useEffect(()=>{const $=ae=>{var ke;if(h.every(pe=>ae[pe]||ae.code===pe)){var ct;ge(!0),(ct=Re.current)==null||ct.focus()}ae.code==="Escape"&&(document.activeElement===Re.current||(ke=Re.current)!=null&&ke.contains(document.activeElement))&&ge(!1)};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[h]),ve.useEffect(()=>{if(Re.current)return()=>{de.current&&(de.current.focus({preventScroll:!0}),de.current=null,Ne.current=!1)}},[Re.current]),ve.createElement("section",{ref:r,"aria-label":`${q} ${fe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ee.map(($,ae)=>{var ke;const[Me,ct]=$.split("-");return Z.length?ve.createElement("ol",{key:$,dir:U==="auto"?bg():U,tabIndex:-1,ref:Re,className:y,"data-sonner-toaster":!0,"data-sonner-theme":Ie,"data-y-position":Me,"data-lifted":Ue&&Z.length>1&&!g,"data-x-position":ct,style:{"--front-toast-height":`${((ke=ue[0])==null?void 0:ke.height)||0}px`,"--width":`${H8}px`,"--gap":`${W}px`,...k,...K8(w,A)},onBlur:pe=>{Ne.current&&!pe.currentTarget.contains(pe.relatedTarget)&&(Ne.current=!1,de.current&&(de.current.focus({preventScroll:!0}),de.current=null))},onFocus:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||Ne.current||(Ne.current=!0,de.current=pe.relatedTarget)},onMouseEnter:()=>ge(!0),onMouseMove:()=>ge(!0),onMouseLeave:()=>{he||ge(!1)},onDragEnd:()=>ge(!1),onPointerDown:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||Te(!0)},onPointerUp:()=>Te(!1)},Z.filter(pe=>!pe.position&&ae===0||pe.position===$).map((pe,yt)=>{var $e,wt;return ve.createElement(q8,{key:pe.id,icons:j,index:yt,toast:pe,defaultRichColors:T,duration:($e=L==null?void 0:L.duration)!=null?$e:R,className:L==null?void 0:L.className,descriptionClassName:L==null?void 0:L.descriptionClassName,invert:a,visibleToasts:D,closeButton:(wt=L==null?void 0:L.closeButton)!=null?wt:v,interacting:he,position:$,style:L==null?void 0:L.style,unstyled:L==null?void 0:L.unstyled,classNames:L==null?void 0:L.classNames,cancelButtonStyle:L==null?void 0:L.cancelButtonStyle,actionButtonStyle:L==null?void 0:L.actionButtonStyle,closeButtonAriaLabel:L==null?void 0:L.closeButtonAriaLabel,removeToast:Ae,toasts:Z.filter(Gt=>Gt.position==pe.position),heights:ue.filter(Gt=>Gt.position==pe.position),setHeights:se,expandByDefault:g,gap:W,expanded:Ue,swipeDirections:e.swipeDirections})})):null}))}),$x=z.createContext(void 0);function Q8({children:t}){const{user:e,isAdmin:r}=Vs(),[a,u]=z.useState(0),[h,g]=z.useState(new Set),[v,y]=z.useState("default");z.useEffect(()=>{r&&"Notification"in window&&(Notification.permission==="default"?Notification.requestPermission().then(k=>{y(k)}):y(Notification.permission))},[r]);const w=()=>{try{const k=new Audio("/notification.mp3");k.volume=.5,k.play().catch(D=>{console.log("Audio play failed:",D)})}catch(k){console.log("Audio not available:",k)}},A=k=>{if(v==="granted"){const D=new Notification(" ",{body:`Order #${k.id.slice(0,8)} - ${Number(k.total).toFixed(2)}${k.notes?`
 `+k.notes:""}`,icon:"/logo.png",badge:"/logo.png",tag:k.id,requireInteraction:!0});D.onclick=()=>{window.focus(),window.location.href="/admin/orders",D.close()}}},C=k=>{console.log("New order received:",k),g(D=>new Set([...D,k.id])),u(D=>D+1),w(),A(k),Qt.success(" ",{description:` #${k.id.slice(0,8)} - ${Number(k.total).toFixed(2)}`,duration:1e4,action:{label:"",onClick:()=>{window.location.href="/admin/orders"}}})};z.useEffect(()=>{if(!r)return;console.log("Setting up realtime subscription for orders...");const k=Xe.channel("orders-realtime").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},D=>{console.log("Realtime order insert:",D),C(D.new)}).subscribe(D=>{console.log("Subscription status:",D)});return()=>{console.log("Cleaning up realtime subscription"),Xe.removeChannel(k)}},[r,v]),z.useEffect(()=>{if(!r)return;(async()=>{const D=new Date;D.setHours(D.getHours()-24);const{data:L,error:U}=await Xe.from("orders").select("id").eq("status","pending").gte("created_at",D.toISOString());if(!U&&L){const W=new Set(L.map(j=>j.id));g(W),u(W.size)}})()},[r]);const T=k=>{g(D=>{const L=new Set(D);return L.delete(k),L}),u(D=>Math.max(0,D-1))},R=()=>{g(new Set),u(0)};return r?x.jsx($x.Provider,{value:{unreadCount:a,markAsRead:T,clearAll:R},children:t}):x.jsx(x.Fragment,{children:t})}function J8(){const t=z.useContext($x);return t===void 0?{unreadCount:0,markAsRead:()=>{},clearAll:()=>{}}:t}async function So(t){const{data:e,error:r}=await Xe.from("user_rewards").select("*").eq("user_id",t).single();if(r&&r.code==="PGRST116"){const{data:a,error:u}=await Xe.from("user_rewards").insert({user_id:t,stamps:0,pending_reward:!1}).select().single();return u?(console.error("Error creating user rewards:",u),null):a}return r?(console.error("Error fetching user rewards:",r),null):e}async function eA(t){const e=await So(t);if(!e)return{success:!1,message:"User not found"};if(e.pending_reward)return{success:!1,message:"User has pending reward - must redeem before earning more stamps"};if(e.stamps>=10)return{success:!1,message:"User already has 10 stamps"};const r=e.stamps+1,a=r>=10,{error:u}=await Xe.from("user_rewards").update({stamps:r,pending_reward:a,updated_at:new Date().toISOString()}).eq("user_id",t);return u?(console.error("Error adding stamp:",u),{success:!1,message:"Failed to add stamp"}):{success:!0,message:a?"Stamp added! Reward unlocked!":`Stamp added! (${r}/10)`,stamps:r}}async function tA(t){const e=await So(t);if(!e)return{success:!1,message:"User not found"};if(!e.pending_reward)return{success:!1,message:"No pending reward to redeem"};const{error:r}=await Xe.from("user_rewards").update({stamps:0,pending_reward:!1,updated_at:new Date().toISOString()}).eq("user_id",t);return r?(console.error("Error redeeming reward:",r),{success:!1,message:"Failed to redeem reward"}):{success:!0,message:"Reward redeemed successfully!"}}async function rA(){const{data:t,error:e}=await Xe.rpc("get_top_5_this_week");return e?(console.error("Error fetching top 5:",e),[]):t||[]}async function nA(t){const{data:e,error:r}=await Xe.rpc("get_user_rank",{p_user_id:t});return r?(console.error("Error fetching user rank:",r),{rank:null,points:0}):e&&e.length>0?{rank:e[0].rank,points:e[0].points}:{rank:null,points:0}}const Eg="/assets/6b0beed8e6be51f5a6110633cc5a166d3fbb7d3a-BVKFnRTW.png";function sA(){var ue;const t=Us(),{cartCount:e,userStamps:r,pendingReward:a}=Pa(),{user:u,logout:h,isAdmin:g}=Vs(),{unreadCount:v}=J8(),[y,w]=z.useState(!1),[A,C]=z.useState(!1),[T,R]=z.useState([]),[k,D]=z.useState({rank:null,points:0}),L=z.useRef(null),U=z.useRef(null),W=z.useRef(null),j=z.useRef(null),q=As(),Z=t.pathname.startsWith("/admin");z.useEffect(()=>{function se(Ue){const ge=Ue.target;L.current&&!L.current.contains(ge)&&U.current&&!U.current.contains(ge)&&w(!1),W.current&&!W.current.contains(ge)&&j.current&&!j.current.contains(ge)&&C(!1)}return document.addEventListener("mousedown",se),()=>document.removeEventListener("mousedown",se)},[]),z.useEffect(()=>{async function se(){try{const[ge,he]=await Promise.all([rA(),u?nA(u.id):Promise.resolve({rank:null,points:0})]);R(ge),u&&D(he)}catch(ge){console.error("Error fetching leaderboard:",ge)}}se();const Ue=setInterval(se,3e4);return()=>clearInterval(Ue)},[u]);const te=async()=>{await h(),w(!1),q("/")},ee=se=>{switch(se){case 1:return x.jsx(wl,{className:"w-4 h-4 text-yellow-500"});case 2:return x.jsx(jE,{className:"w-4 h-4 text-gray-400"});case 3:return x.jsx(hE,{className:"w-4 h-4 text-amber-600"});default:return x.jsxs("span",{className:"w-4 h-4 flex items-center justify-center text-xs font-bold text-gray-500",children:["#",se]})}};return x.jsxs(x.Fragment,{children:[x.jsx("nav",{className:"bg-white shadow-sm sticky top-0 z-50",children:x.jsxs("div",{className:"max-w-[1440px] mx-auto px-4 md:px-6 lg:px-12",children:[x.jsxs("div",{className:"md:hidden flex items-center justify-between h-16 relative",children:[x.jsx("div",{className:"flex items-center gap-2 flex-1",children:!Z&&x.jsxs(x.Fragment,{children:[x.jsx(at,{to:"/menu",className:`text-xs font-bold tracking-wider transition-colors uppercase ${t.pathname==="/menu"?"text-[#B88A68]":"hover:text-[#B88A68]"}`,children:"Menu"}),x.jsx(at,{to:"/gallery",className:`text-xs font-bold tracking-wider transition-colors uppercase ${t.pathname==="/gallery"?"text-[#B88A68]":"hover:text-[#B88A68]"}`,children:"Gallery"})]})}),x.jsx(at,{to:"/",className:"flex-shrink-0 absolute left-1/2 transform -translate-x-1/2",children:x.jsx("img",{src:Eg,alt:"Cloud Cafe",className:"w-12 h-12 object-contain"})}),x.jsxs("div",{className:"flex items-center gap-0.5 flex-1 justify-end",children:[g&&v>0&&x.jsx(at,{to:"/admin/orders",className:"relative p-1.5 hover:text-[#B88A68] transition-colors",title:`${v} unread order${v>1?"s":""}`,children:x.jsxs("div",{className:"relative",children:[x.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),x.jsx("span",{className:"absolute -top-0.5 -right-0.5 bg-red-500 text-white text-xs font-bold rounded-full w-4 h-4 flex items-center justify-center text-[10px]",children:v>99?"99+":v})]})}),g&&x.jsx(at,{to:"/admin/scan",className:"p-1.5 hover:text-[#B88A68] transition-colors",title:"Scan Customer QR",children:x.jsx(nf,{className:"w-5 h-5"})}),!Z&&x.jsxs(at,{to:u?"/rewards":"/register",className:"relative p-1.5 hover:text-[#B88A68] transition-colors",title:u?a?"You have a free drink!":`${r} stamp${r>1?"s":""}`:"Join to collect stamps!",children:[x.jsx(Gm,{className:"w-5 h-5"}),u&&a?x.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-amber-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:"1"}):u&&r>0?x.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-blue-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:r}):!u&&x.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-gray-400 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:"0"})]}),!Z&&x.jsx("div",{className:"relative",ref:W,children:x.jsxs("button",{onClick:()=>C(!A),className:"relative p-1.5 hover:text-[#B88A68] transition-colors",title:u&&k.rank?`Your rank: #${k.rank}`:"King of Coffee Leaderboard",children:[x.jsx(wl,{className:"w-5 h-5"}),u&&k.rank&&x.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-yellow-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:k.rank>9?"9+":k.rank}),!u&&x.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-gray-400 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:"?"})]})}),!Z&&x.jsxs(at,{to:"/cart",className:"relative p-1.5 hover:text-[#B88A68] transition-colors",children:[x.jsx(Hi,{className:"w-5 h-5"}),e>0&&x.jsx("span",{className:"absolute -top-0.5 -right-0.5 bg-red-500 text-white text-[10px] font-bold rounded-full w-4 h-4 flex items-center justify-center",children:e>9?"9+":e})]}),u?x.jsx("div",{className:"relative",ref:L,children:x.jsx("button",{onClick:()=>w(!y),className:"p-1.5 hover:bg-gray-100 rounded-full transition-colors",children:x.jsx(qm,{className:"w-5 h-5 text-gray-700"})})}):x.jsx(at,{to:"/signin",className:"px-2.5 py-1 text-xs font-semibold border border-black rounded-full hover:bg-gray-50 transition-colors ml-1",children:"Sign in"})]})]}),x.jsxs("div",{className:"hidden md:flex items-center justify-between h-20 relative",children:[x.jsx("div",{className:"flex items-center gap-6 flex-1",children:!Z&&x.jsxs(x.Fragment,{children:[x.jsx(at,{to:"/menu",className:`text-sm font-bold tracking-wider transition-colors uppercase ${t.pathname==="/menu"?"text-[#B88A68]":"hover:text-[#B88A68]"}`,children:"Menu"}),x.jsx(at,{to:"/gallery",className:`text-sm font-bold tracking-wider transition-colors uppercase ${t.pathname==="/gallery"?"text-[#B88A68]":"hover:text-[#B88A68]"}`,children:"Gallery"})]})}),x.jsx(at,{to:"/",className:"flex-shrink-0 absolute left-1/2 transform -translate-x-1/2",children:x.jsx("img",{src:Eg,alt:"Cloud Cafe",className:"w-14 h-14 object-contain"})}),x.jsxs("div",{className:"flex items-center gap-4 flex-1 justify-end",children:[x.jsxs("a",{href:"https://maps.app.goo.gl/aq1tUzUN4q4EaTH69",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:text-[#B88A68] transition-colors",children:[x.jsx(Cx,{className:"w-5 h-5"}),x.jsx("span",{className:"text-sm font-semibold",children:"Find Us"})]}),g&&v>0&&x.jsx(at,{to:"/admin/orders",className:"relative p-2 hover:text-[#B88A68] transition-colors animate-pulse",title:`${v} unread order${v>1?"s":""}`,children:x.jsxs("div",{className:"relative",children:[x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),x.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-bounce",children:v>99?"99+":v})]})}),g&&x.jsx(at,{to:"/admin/scan",className:"p-2 hover:text-[#B88A68] transition-colors bg-gray-100 rounded-full hover:bg-gray-200",title:"Scan Customer QR",children:x.jsx(nf,{className:"w-6 h-6"})}),!Z&&x.jsxs(at,{to:u?"/rewards":"/register",className:"relative p-2 hover:text-[#B88A68] transition-colors",title:u?a?"You have a free drink!":`${r} stamp${r>1?"s":""}`:"Join to collect stamps!",children:[x.jsx(Gm,{className:"w-6 h-6"}),u&&a?x.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-amber-500 text-white text-xs font-bold rounded-full flex items-center justify-center animate-pulse",children:"1"}):u&&r>0?x.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:r}):!u&&x.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gray-400 text-white text-xs font-bold rounded-full flex items-center justify-center",children:"0"})]}),!Z&&x.jsx("div",{className:"relative",ref:W,children:x.jsxs("button",{onClick:()=>C(!A),className:"relative p-2 hover:text-[#B88A68] transition-colors",title:u&&k.rank?`Your rank: #${k.rank}`:"King of Coffee Leaderboard",children:[x.jsx(wl,{className:"w-6 h-6"}),u&&k.rank&&x.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:k.rank>99?"99+":k.rank}),!u&&x.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gray-400 text-white text-xs font-bold rounded-full flex items-center justify-center",children:"?"})]})}),!Z&&x.jsxs(at,{to:"/cart",className:"relative p-2 hover:text-[#B88A68] transition-colors",children:[x.jsx(Hi,{className:"w-6 h-6"}),e>0&&x.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:e>99?"99+":e})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[u?x.jsx("div",{className:"relative",ref:L,children:x.jsx("button",{onClick:()=>w(!y),className:"flex items-center gap-2 px-3 py-2 rounded-full hover:bg-gray-100 transition-colors",children:x.jsx(qm,{className:"w-6 h-6 text-gray-700"})})}):x.jsx(at,{to:"/signin",className:"px-3 sm:px-4 py-1.5 text-xs sm:text-sm font-semibold border border-black rounded-full hover:bg-gray-50 transition-colors",children:"Sign in"}),!u&&x.jsx(at,{to:"/register",className:"hidden sm:block px-4 py-1.5 text-sm font-semibold bg-black text-white rounded-full hover:bg-gray-800 transition-colors",children:"Join now"})]})]})]})]})}),A&&!Z&&x.jsx("div",{ref:j,className:"fixed z-[100]",style:{top:W.current?`${W.current.getBoundingClientRect().bottom+8}px`:"0px",right:"16px"},children:x.jsxs("div",{className:"w-80 bg-white rounded-xl shadow-2xl border border-gray-100 py-3 animate-in fade-in slide-in-from-top-2",children:[x.jsxs("div",{className:"px-4 pb-3 border-b border-gray-100",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx(wl,{className:"w-5 h-5 text-yellow-500"}),x.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"King of Coffee"})]}),x.jsx("p",{className:"text-xs text-gray-500",children:"Weekly Leaderboard"})]}),u&&k.rank&&x.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-[#B88A68]/10 to-transparent border-b border-gray-100",children:x.jsx("div",{className:"flex items-center justify-between",children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-8 h-8 bg-[#B88A68] rounded-full flex items-center justify-center",children:x.jsxs("span",{className:"text-white text-sm font-bold",children:["#",k.rank]})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Your Rank"}),x.jsxs("p",{className:"text-xs text-gray-500",children:[k.points," points"]})]})]})})}),x.jsx("div",{className:"py-2",children:T.length===0?x.jsxs("div",{className:"px-4 py-6 text-center",children:[x.jsx(wl,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),x.jsx("p",{className:"text-sm text-gray-500",children:"No rankings yet"}),x.jsx("p",{className:"text-xs text-gray-400",children:"Be the first!"})]}):T.map(se=>{const Ue=(u==null?void 0:u.id)===se.user_id;return x.jsx("div",{className:`px-4 py-2.5 hover:bg-gray-50 transition-colors ${Ue?"bg-[#B88A68]/5":""}`,children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-8 h-8 flex items-center justify-center flex-shrink-0",children:ee(se.rank)}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex items-center gap-1.5",children:[x.jsxs("p",{className:"text-sm font-semibold text-gray-900 truncate",children:[se.first_name," ",se.last_name]}),Ue&&x.jsx("span",{className:"px-1.5 py-0.5 bg-[#B88A68] text-white text-xs font-semibold rounded",children:"You"})]}),x.jsxs("p",{className:"text-xs text-gray-500",children:[se.points," points"]})]})]})},se.user_id)})}),x.jsxs("div",{className:"px-4 pt-2 border-t border-gray-100",children:[x.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Earn points by collecting stamps and redeeming rewards"}),u?x.jsx(at,{to:"/rewards",className:"block w-full px-3 py-2 bg-[#B88A68] text-white text-sm text-center rounded-lg font-semibold hover:bg-[#A67958] transition-colors",onClick:()=>C(!1),children:"View My Rewards"}):x.jsx(at,{to:"/signin",className:"block w-full px-3 py-2 bg-[#B88A68] text-white text-sm text-center rounded-lg font-semibold hover:bg-[#A67958] transition-colors",onClick:()=>C(!1),children:"Join Competition"})]})]})}),y&&u&&x.jsx("div",{ref:U,className:"fixed z-[100]",style:{top:L.current?`${L.current.getBoundingClientRect().bottom+8}px`:"0px",right:"16px"},children:x.jsxs("div",{className:"w-56 bg-white rounded-xl shadow-2xl border border-gray-100 py-2 animate-in fade-in slide-in-from-top-2",children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[x.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:(ue=u.user_metadata)!=null&&ue.first_name?`${u.user_metadata.first_name} ${u.user_metadata.last_name||""}`:"User"}),x.jsx("p",{className:"text-xs text-gray-500 truncate",children:u.email})]}),x.jsxs("div",{className:"py-1",children:[x.jsxs(at,{to:"/account",className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>w(!1),children:[x.jsx(NE,{className:"w-4 h-4"}),"Account Settings"]}),x.jsxs(at,{to:"/orders",className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>w(!1),children:[x.jsx(Jf,{className:"w-4 h-4"}),"My Orders"]}),g&&x.jsxs(at,{to:"/admin/orders",className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>w(!1),children:[x.jsx(Iu,{className:"w-4 h-4"}),"Admin Dashboard"]})]}),x.jsx("div",{className:"border-t border-gray-100 mt-1 pt-1",children:x.jsxs("button",{onClick:te,className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors text-left",children:[x.jsx(lE,{className:"w-4 h-4"}),"Sign Out"]})})]})})]})}function iA(){return x.jsxs("div",{className:"relative w-full h-screen overflow-hidden",children:[x.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover",poster:"/gallery/IMG_8494.JPG",children:x.jsx("source",{src:"/gallery/Placing 3.MP4",type:"video/mp4"})}),x.jsx("div",{className:"absolute inset-0 bg-black/40"}),x.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center px-6 z-10",children:[x.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold text-white mb-4 md:mb-6 drop-shadow-lg",children:"It's a great day for coffee"}),x.jsx("p",{className:"text-lg md:text-xl lg:text-2xl text-white/90 mb-8 md:mb-10 max-w-md md:max-w-2xl drop-shadow-md",children:"Start your day with Cloud Cafe"}),x.jsx(at,{to:"/menu",className:"px-8 py-3 md:px-10 md:py-4 text-base md:text-lg font-semibold bg-white text-[#B88A68] rounded-full hover:bg-white/90 transition-all shadow-lg inline-block",children:"Start an order"})]})]})}const aA="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function oA(t){const[e,r]=z.useState(!1),a=()=>{r(!0)},{src:u,alt:h,style:g,className:v,...y}=t;return e?x.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${v??""}`,style:g,children:x.jsx("div",{className:"flex items-center justify-center w-full h-full",children:x.jsx("img",{src:aA,alt:"Error loading image",...y,"data-original-url":u})})}):x.jsx("img",{src:u,alt:h,className:v,style:g,...y,onError:a})}function Cg({imageUrl:t,imagePosition:e,backgroundColor:r,title:a,titleColor:u="text-white",description:h,buttonText:g,buttonVariant:v="solid"}){const y=e==="left",w=r.includes("#B88A68")||r.includes("B88A68");return x.jsx("div",{className:"max-w-[1440px] mx-auto px-6 lg:px-12 py-8 lg:py-12",children:x.jsxs("div",{className:`grid md:grid-cols-2 gap-0 overflow-hidden ${y?"":"md:grid-flow-dense"}`,children:[x.jsx("div",{className:`relative h-[300px] md:h-[400px] lg:h-[500px] ${y?"":"md:col-start-2"}`,children:x.jsx(oA,{src:t,alt:a,className:"w-full h-full object-cover"})}),x.jsx("div",{className:`${r} flex items-center justify-center p-8 md:p-12 lg:p-16 ${y?"":"md:col-start-1 md:row-start-1"}`,children:x.jsxs("div",{className:"max-w-md text-center",children:[x.jsx("h2",{className:`text-3xl md:text-4xl lg:text-5xl font-semibold mb-6 ${u}`,children:a}),x.jsx("p",{className:`text-base md:text-lg mb-8 leading-relaxed ${w?"text-white":"text-gray-700"}`,children:h}),x.jsx("button",{className:`px-6 py-2.5 text-sm font-semibold rounded-full transition-colors ${v==="outline"?"border-2 border-[#B88A68] text-[#B88A68] hover:bg-[#B88A68] hover:text-white":"border-2 border-white text-white hover:bg-white hover:text-[#B88A68]"}`,children:g})]})})]})})}function lA(){const[t,e]=z.useState(null);return x.jsxs(x.Fragment,{children:[x.jsx(iA,{}),x.jsx(Cg,{imageUrl:"/gallery/Ice-latte-1.JPEG",imagePosition:"left",backgroundColor:"bg-[#B88A68]",title:"Our Signature Latte",description:"Start your day with our creamy latte. Made with premium espresso and velvety steamed milk, crafted to perfection for a smooth, rich taste.",buttonText:"Order now"}),x.jsx(Cg,{imageUrl:"/gallery/IMG_7599.jpeg",imagePosition:"right",backgroundColor:"bg-gray-100",title:"A cozy escape",titleColor:"text-[#B88A68]",description:"Step into Cloud Cafe and experience the perfect blend of comfort and quality. Our warm atmosphere invites you to relax, work, or catch up with friends.",buttonText:"Find us",buttonVariant:"outline"}),x.jsx("section",{className:"py-16 bg-white",children:x.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[x.jsxs("div",{className:"text-center mb-12",children:[x.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Fresh from Our Kitchen"}),x.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Watch our chefs prepare delicious meals with passion and care"})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[x.jsxs("div",{className:"relative aspect-video rounded-2xl overflow-hidden shadow-lg group",children:[x.jsx("video",{src:"/gallery/Burgers.MP4",className:"w-full h-full object-cover",muted:!0,playsInline:!0,loop:!0,autoPlay:t==="burgers",onClick:()=>e(t==="burgers"?null:"burgers")}),t!=="burgers"&&x.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center cursor-pointer group-hover:bg-black/40 transition-colors",onClick:()=>e("burgers"),children:x.jsx("div",{className:"w-16 h-16 rounded-full bg-white/90 flex items-center justify-center transform group-hover:scale-110 transition-transform",children:x.jsx(Tu,{className:"w-8 h-8 text-[#B88A68] ml-1",fill:"currentColor"})})}),x.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6",children:[x.jsx("h3",{className:"text-white text-xl font-bold",children:"Gourmet Burgers"}),x.jsx("p",{className:"text-white/80 text-sm",children:"Handcrafted with premium ingredients"})]})]}),x.jsxs("div",{className:"relative aspect-video rounded-2xl overflow-hidden shadow-lg group",children:[x.jsx("video",{src:"/gallery/Chip porky.MP4",className:"w-full h-full object-cover",muted:!0,playsInline:!0,loop:!0,autoPlay:t==="porky",onClick:()=>e(t==="porky"?null:"porky")}),t!=="porky"&&x.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center cursor-pointer group-hover:bg-black/40 transition-colors",onClick:()=>e("porky"),children:x.jsx("div",{className:"w-16 h-16 rounded-full bg-white/90 flex items-center justify-center transform group-hover:scale-110 transition-transform",children:x.jsx(Tu,{className:"w-8 h-8 text-[#B88A68] ml-1",fill:"currentColor"})})}),x.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6",children:[x.jsx("h3",{className:"text-white text-xl font-bold",children:"Crispy Delights"}),x.jsx("p",{className:"text-white/80 text-sm",children:"Golden perfection every time"})]})]})]})]})}),x.jsx("section",{className:"py-16 bg-[#f8f5f2]",children:x.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[x.jsxs("div",{className:"text-center mb-12",children:[x.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Life at Cloud Cafe"}),x.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Every cup tells a story, every moment matters"})]}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[x.jsx("div",{className:"aspect-square rounded-xl overflow-hidden shadow-md",children:x.jsx("img",{src:"/gallery/IMG_8494.JPG",alt:"Cloud Cafe",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})}),x.jsx("div",{className:"aspect-square rounded-xl overflow-hidden shadow-md",children:x.jsx("img",{src:"/gallery/IMG_8496.JPG",alt:"Cloud Cafe",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})}),x.jsx("div",{className:"aspect-square rounded-xl overflow-hidden shadow-md",children:x.jsx("img",{src:"/gallery/Ice-latte-1.JPEG",alt:"Iced Latte",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})}),x.jsx("div",{className:"aspect-square rounded-xl overflow-hidden shadow-md",children:x.jsx("img",{src:"/gallery/IMG_7599.jpeg",alt:"Cloud Cafe Interior",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})})]}),x.jsx("div",{className:"text-center mt-10",children:x.jsxs(at,{to:"/gallery",className:"inline-flex items-center gap-2 px-8 py-3 bg-[#B88A68] text-white font-semibold rounded-full hover:bg-[#A67958] transition-colors",children:["View Gallery",x.jsx(kb,{className:"w-5 h-5"})]})})]})})]})}function lt({name:t,price:e,description:r,category:a}){const[u,h]=z.useState(!1),{addToCart:g}=Pa(),v=()=>{g(t,e,a),h(!0),setTimeout(()=>h(!1),2e3)};return x.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow border border-gray-100",children:[a&&x.jsx("span",{className:"inline-block px-3 py-1 bg-[#B88A68]/10 text-[#B88A68] text-xs font-semibold rounded-full mb-3",children:a}),x.jsxs("div",{className:"mb-3",children:[x.jsx("h4",{className:"font-semibold text-lg text-gray-900 mb-1",children:t}),x.jsx("p",{className:"text-2xl font-bold text-[#B88A68]",children:e})]}),r&&x.jsx("p",{className:"text-sm text-gray-600 leading-relaxed mb-4",children:r}),x.jsxs("button",{onClick:v,className:`w-full py-2.5 px-4 rounded-full font-semibold text-sm transition-all flex items-center justify-center gap-2 ${u?"bg-green-500 text-white":"bg-[#B88A68] text-white hover:bg-[#A67958]"}`,children:[x.jsx(Hi,{className:"w-4 h-4"}),u?"Added!":"Add to Cart"]})]})}function Bs({name:t,basePrice:e,description:r,category:a,variants:u,addOns:h,requiresVariant:g}){const[v,y]=z.useState(!1),[w,A]=z.useState(null),[C,T]=z.useState([]),[R,k]=z.useState(!1),{addToCart:D}=Pa(),L=()=>{let j=e||0;if(w&&u){const Z=u.find(te=>te.id===w);j=(Z==null?void 0:Z.price)||0}const q=C.reduce((Z,te)=>{const ee=h==null?void 0:h.find(ue=>ue.id===te);return Z+((ee==null?void 0:ee.price)||0)},0);return j+q},U=()=>{if(g&&!w&&u&&u.length>0)return;let j=t,q=[];if(w&&u){const te=u.find(ee=>ee.id===w);te&&q.push(te.name)}if(C.length>0&&h){const te=C.map(ee=>{const ue=h.find(se=>se.id===ee);return ue==null?void 0:ue.name}).filter(Boolean);te.length>0&&q.push(`+ ${te.join(", ")}`)}q.length>0&&(j=`${t} (${q.join(" | ")})`);const Z=L();D(j,`${Z.toFixed(2)}`,a),k(!0),y(!1),A(null),T([]),setTimeout(()=>k(!1),2e3)},W=j=>{T(q=>q.includes(j)?q.filter(Z=>Z!==j):[...q,j])};return!u&&!h?x.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow border border-gray-100",children:[a&&x.jsx("span",{className:"inline-block px-3 py-1 bg-[#B88A68]/10 text-[#B88A68] text-xs font-semibold rounded-full mb-3",children:a}),x.jsxs("div",{className:"mb-3",children:[x.jsx("h4",{className:"font-semibold text-lg text-gray-900 mb-1",children:t}),e&&x.jsxs("p",{className:"text-2xl font-bold text-[#B88A68]",children:["",e.toFixed(2)]})]}),r&&x.jsx("p",{className:"text-sm text-gray-600 leading-relaxed mb-4",children:r}),x.jsxs("button",{onClick:()=>D(t,`${e==null?void 0:e.toFixed(2)}`,a),className:"w-full py-2.5 px-4 rounded-full font-semibold text-sm transition-all flex items-center justify-center gap-2 bg-[#B88A68] text-white hover:bg-[#A67958]",children:[x.jsx(Hi,{className:"w-4 h-4"}),"Add to Cart"]})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow border border-gray-100",children:[a&&x.jsx("span",{className:"inline-block px-3 py-1 bg-[#B88A68]/10 text-[#B88A68] text-xs font-semibold rounded-full mb-3",children:a}),x.jsxs("div",{className:"mb-3",children:[x.jsx("h4",{className:"font-semibold text-lg text-gray-900 mb-1",children:t}),e!==void 0&&x.jsxs("p",{className:"text-2xl font-bold text-[#B88A68]",children:["",e.toFixed(2)]}),u&&u.length>0&&!e&&x.jsxs("p",{className:"text-sm text-gray-600",children:["From ",Math.min(...u.map(j=>j.price)).toFixed(2)]})]}),r&&x.jsx("p",{className:"text-sm text-gray-600 leading-relaxed mb-4",children:r}),x.jsxs("button",{onClick:()=>y(!0),className:`w-full py-2.5 px-4 rounded-full font-semibold text-sm transition-all flex items-center justify-center gap-2 ${R?"bg-green-500 text-white":"bg-[#B88A68] text-white hover:bg-[#A67958]"}`,children:[x.jsx(Hi,{className:"w-4 h-4"}),R?"Added!":"Add to Cart"]})]}),v&&x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:x.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:x.jsxs("div",{className:"p-6",children:[x.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:t}),x.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Customize your order"}),u&&u.length>0&&x.jsxs("div",{className:"mb-6",children:[x.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:g?"Choose Option *":"Choose Option (Optional)"}),x.jsx("div",{className:"space-y-2",children:u.map(j=>x.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-[#B88A68] cursor-pointer transition-colors",children:[x.jsx("input",{type:"radio",name:"variant",checked:w===j.id,onChange:()=>A(j.id),className:"w-5 h-5 text-[#B88A68] border-gray-300 focus:ring-[#B88A68]"}),x.jsxs("div",{className:"flex-1 flex justify-between items-center",children:[x.jsx("span",{className:"font-semibold text-gray-900",children:j.name}),x.jsxs("span",{className:"text-[#B88A68] font-bold",children:["",j.price.toFixed(2)]})]})]},j.id))})]}),h&&h.length>0&&x.jsxs("div",{className:"mb-6",children:[x.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Add-ons (Optional)"}),x.jsx("div",{className:"space-y-2",children:h.map(j=>x.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-[#B88A68] cursor-pointer transition-colors",children:[x.jsx("input",{type:"checkbox",checked:C.includes(j.id),onChange:()=>W(j.id),className:"w-5 h-5 text-[#B88A68] border-gray-300 rounded focus:ring-[#B88A68]"}),x.jsxs("div",{className:"flex-1 flex justify-between items-center",children:[x.jsx("span",{className:"font-semibold text-gray-900",children:j.name}),x.jsxs("span",{className:"text-[#B88A68] font-bold",children:["+",j.price.toFixed(2)]})]})]},j.id))})]}),x.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("span",{className:"font-semibold text-gray-700",children:"Total"}),x.jsxs("span",{className:"text-2xl font-bold text-[#B88A68]",children:["",L().toFixed(2)]})]})}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:()=>{y(!1),A(null),T([])},className:"flex-1 py-3 px-4 border-2 border-gray-300 text-gray-700 font-semibold rounded-full hover:bg-gray-50 transition-colors",children:"Cancel"}),x.jsx("button",{onClick:U,disabled:g&&!w,className:"flex-1 py-3 px-4 bg-[#B88A68] text-white font-semibold rounded-full hover:bg-[#A67958] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Add to Cart"})]})]})})})]})}const Bh=[{id:"coffee-shot",name:"Shot of Coffee",price:.7},{id:"alt-milk",name:"Alternative Milk",price:.7,description:"Oat, coconut, soya, almond"},{id:"protein",name:"Protein Powder",price:3},{id:"cream",name:"Cream & Marshmallows",price:.7},{id:"syrup",name:"Coffee Syrup",price:.7,description:"Leave a note of your choice of flavour!"}];function rr({name:t,price:e,description:r,category:a}){const[u,h]=z.useState(!1),[g,v]=z.useState([]),[y,w]=z.useState(!1),{addToCart:A}=Pa(),C=D=>{const L=D.match(/([\d.]+)/);return L?parseFloat(L[1]):0},T=()=>{const D=C(e),L=g.reduce((U,W)=>{const j=Bh.find(q=>q.id===W);return U+((j==null?void 0:j.price)||0)},0);return D+L},R=()=>{let D=t;if(g.length>0){const U=g.map(W=>{const j=Bh.find(q=>q.id===W);return j==null?void 0:j.name}).filter(Boolean);D=`${t} (+ ${U.join(", ")})`}const L=T();A(D,`${L.toFixed(2)}`,a),w(!0),h(!1),v([]),setTimeout(()=>w(!1),2e3)},k=D=>{v(L=>L.includes(D)?L.filter(U=>U!==D):[...L,D])};return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow border border-gray-100",children:[a&&x.jsx("span",{className:"inline-block px-3 py-1 bg-[#B88A68]/10 text-[#B88A68] text-xs font-semibold rounded-full mb-3",children:a}),x.jsxs("div",{className:"mb-3",children:[x.jsx("h4",{className:"font-semibold text-lg text-gray-900 mb-1",children:t}),x.jsx("p",{className:"text-2xl font-bold text-[#B88A68]",children:e})]}),r&&x.jsx("p",{className:"text-sm text-gray-600 leading-relaxed mb-4",children:r}),x.jsxs("button",{onClick:()=>h(!0),className:`w-full py-2.5 px-4 rounded-full font-semibold text-sm transition-all flex items-center justify-center gap-2 ${y?"bg-green-500 text-white":"bg-[#B88A68] text-white hover:bg-[#A67958]"}`,children:[x.jsx(Hi,{className:"w-4 h-4"}),y?"Added!":"Add to Cart"]})]}),u&&x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:x.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:x.jsxs("div",{className:"p-6",children:[x.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:t}),x.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Customize your drink"}),x.jsx("div",{className:"space-y-3 mb-6",children:Bh.map(D=>x.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-[#B88A68] cursor-pointer transition-colors",children:[x.jsx("input",{type:"checkbox",checked:g.includes(D.id),onChange:()=>k(D.id),className:"mt-1 w-5 h-5 text-[#B88A68] border-gray-300 rounded focus:ring-[#B88A68]"}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex justify-between items-start",children:[x.jsx("span",{className:"font-semibold text-gray-900",children:D.name}),x.jsxs("span",{className:"text-[#B88A68] font-bold",children:["+",D.price.toFixed(2)]})]}),D.description&&x.jsx("p",{className:"text-xs text-gray-500 mt-1",children:D.description})]})]},D.id))}),x.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("span",{className:"font-semibold text-gray-700",children:"Total"}),x.jsxs("span",{className:"text-2xl font-bold text-[#B88A68]",children:["",T().toFixed(2)]})]})}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:()=>{h(!1),v([])},className:"flex-1 py-3 px-4 border-2 border-gray-300 text-gray-700 font-semibold rounded-full hover:bg-gray-50 transition-colors",children:"Cancel"}),x.jsx("button",{onClick:R,className:"flex-1 py-3 px-4 bg-[#B88A68] text-white font-semibold rounded-full hover:bg-[#A67958] transition-colors",children:"Add to Cart"})]})]})})})]})}function cA(){const[t,e]=z.useState("drinks"),r=[{id:"drinks",label:"Drinks",icon:Ra},{id:"lunch",label:"Lunch",icon:Km},{id:"breakfast-brunch",label:"Breakfast & Brunch",icon:Ym},{id:"kids",label:"Kids Menu",icon:Db},{id:"doggo",label:"Doggo Menu",icon:Nh}],a=u=>{const h=document.getElementById(u);if(h){const y=h.getBoundingClientRect().top+window.pageYOffset-80-20;window.scrollTo({top:y,behavior:"smooth"}),e(u)}};return z.useEffect(()=>{const u=()=>{const h=r.map(v=>v.id),g=window.scrollY+150;for(let v=h.length-1;v>=0;v--){const y=document.getElementById(h[v]);if(y&&y.offsetTop<=g){e(h[v]);break}}};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]),x.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[x.jsxs("div",{className:"relative bg-[#B88A68] text-white py-20",children:[x.jsx("div",{className:"absolute inset-0 bg-black/10"}),x.jsxs("div",{className:"relative max-w-6xl mx-auto px-6 text-center",children:[x.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Our Menu"}),x.jsx("p",{className:"text-xl text-white/90",children:"Discover delicious offerings at Cloud Cafe"})]})]}),x.jsx("div",{className:"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:x.jsx("div",{className:"max-w-7xl mx-auto px-6",children:x.jsx("nav",{className:"flex overflow-x-auto scrollbar-hide",children:r.map(u=>{const h=u.icon;return x.jsxs("button",{onClick:()=>a(u.id),className:`flex items-center gap-2 px-6 py-4 font-semibold text-sm whitespace-nowrap border-b-2 transition-all ${t===u.id?"border-[#B88A68] text-[#B88A68]":"border-transparent text-gray-600 hover:text-[#B88A68]"}`,children:[h&&x.jsx(h,{className:"w-5 h-5"}),u.label]},u.id)})})})}),x.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-16",children:[x.jsxs("section",{id:"drinks",className:"mb-20 scroll-mt-24",children:[x.jsxs("div",{className:"text-center mb-12",children:[x.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[x.jsx(Ra,{className:"w-10 h-10 text-[#B88A68]"}),x.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900",children:"Drinks"})]}),x.jsx("div",{className:"w-24 h-1 bg-[#B88A68] mx-auto mb-6"}),x.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Premium coffee, refreshing teas, and specialty drinks"})]}),x.jsxs("div",{className:"max-w-6xl mx-auto",children:[x.jsx("h3",{className:"text-2xl font-bold text-[#B88A68] mb-6",children:"Coffee Classics"}),x.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[x.jsx(rr,{name:"Espresso",price:"2.8 / 3.3",category:"Coffee"}),x.jsx(rr,{name:"Americano",price:"3.3 / 4",category:"Coffee"}),x.jsx(rr,{name:"Macchiato",price:"3.5 / 4.2",category:"Coffee"}),x.jsx(rr,{name:"Cortado",price:"3.5 / 4.2",category:"Coffee"}),x.jsx(rr,{name:"Cappuccino",price:"3.5 / 4.2",category:"Coffee"}),x.jsx(rr,{name:"Flat White",price:"3.5 / 4.2",category:"Coffee"}),x.jsx(rr,{name:"Latte",price:"3.5 / 4.2",category:"Coffee"}),x.jsx(rr,{name:"Mocha",price:"3.8 / 4.5",category:"Coffee"})]}),x.jsx("h3",{className:"text-2xl font-bold text-[#B88A68] mb-6",children:"Tea & Non-Coffee"}),x.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[x.jsx(rr,{name:"Breakfast Tea",price:"3.2",category:"Tea"}),x.jsx(rr,{name:"Chai Tea",price:"3.8",category:"Tea"}),x.jsx(rr,{name:"Matcha Latte",price:"4.6",category:"Tea"}),x.jsx(rr,{name:"Hot Chocolate",price:"3.6",category:"Hot Drink"}),x.jsx(rr,{name:"Herbal Tea",price:"3.5",category:"Tea"})]}),x.jsx("h3",{className:"text-2xl font-bold text-[#B88A68] mb-6",children:"Iced Drinks"}),x.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[x.jsx(rr,{name:"Iced Matcha",price:"5.5",category:"Iced"}),x.jsx(rr,{name:"Iced Latte",price:"4.5",category:"Iced"}),x.jsx(rr,{name:"Iced Chai",price:"5.5",category:"Iced"})]}),x.jsx("h3",{className:"text-2xl font-bold text-[#B88A68] mb-6",children:"iSmothies"}),x.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[x.jsx(rr,{name:"Berry & Coconut",price:"6",category:"Smoothie"}),x.jsx(rr,{name:"Mango & Coconut",price:"6",category:"Smoothie"}),x.jsx(rr,{name:"Strawberry & Banana",price:"6",category:"Smoothie"}),x.jsx(rr,{name:"Mango, Spinach & Apple",price:"6",category:"Smoothie"}),x.jsx(rr,{name:"Iced Banana & Date",price:"6",category:"Smoothie"})]}),x.jsx("h3",{className:"text-2xl font-bold text-[#B88A68] mb-6",children:"Milkshakes"}),x.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[x.jsx(rr,{name:"Vanilla",price:"6",category:"Milkshake"}),x.jsx(rr,{name:"Strawberry",price:"6",category:"Milkshake"}),x.jsx(rr,{name:"Chocolate",price:"6",category:"Milkshake"})]}),x.jsx("h3",{className:"text-2xl font-bold text-[#B88A68] mb-6",children:"Soft Drinks"}),x.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[x.jsx(lt,{name:"Orange or Apple Juice",price:"3",category:"Soft Drink"}),x.jsx(lt,{name:"VITHIT",price:"3.5",category:"Soft Drink"}),x.jsx(lt,{name:"Trip",price:"3",category:"Soft Drink"}),x.jsx(Bs,{name:"Canned Drinks",category:"Soft Drink",requiresVariant:!0,variants:[{id:"coca-cola",name:"Coca-Cola",price:2.5},{id:"diet-coke",name:"Diet Coke",price:2.5},{id:"coke-zero",name:"Coke Zero",price:2.5},{id:"fanta",name:"Fanta",price:2.5},{id:"sprite",name:"Sprite",price:2.5}]}),x.jsx(lt,{name:"Monster",price:"3",category:"Soft Drink"}),x.jsx(lt,{name:"Still/Sparkling Water",price:"2",category:"Soft Drink"}),x.jsx(lt,{name:"Capri Sun",price:"2",category:"Soft Drink"}),x.jsx(lt,{name:"Corona Zero",price:"4.4",category:"Soft Drink"}),x.jsx(lt,{name:"Lipton Tea",price:"3",category:"Soft Drink"})]})]})]}),x.jsxs("section",{id:"lunch",className:"mb-20 scroll-mt-24",children:[x.jsxs("div",{className:"text-center mb-12",children:[x.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[x.jsx(Km,{className:"w-10 h-10 text-[#B88A68]"}),x.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900",children:"Lunch"})]}),x.jsx("div",{className:"w-24 h-1 bg-[#B88A68] mx-auto mb-6"}),x.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Served from 12 PM - Delicious lunch options for every appetite"})]}),x.jsxs("div",{className:"max-w-6xl mx-auto",children:[x.jsx("h3",{className:"text-3xl font-bold text-[#B88A68] mb-8 text-center",children:"I'M PICKY"}),x.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16",children:[x.jsx(lt,{name:"Soup",price:"4.85",description:"With tiger leaf",category:"Light"}),x.jsx(lt,{name:"Chicken Tenders",price:"8.15",description:"With hot sauce",category:"Light"}),x.jsx(lt,{name:"Chicken Gyoza",price:"6.50",description:"With soy sauce, garlic & chilli",category:"Light"}),x.jsx(lt,{name:"Lamb Koftas",price:"7.95",description:"With yoghurt dip & olives",category:"Light"}),x.jsx(lt,{name:"Crispy Gnocchi",price:"6.95",description:"With caper cream & walnuts",category:"Light"}),x.jsx(lt,{name:"House Salad",price:"3.50",category:"Light"}),x.jsx(lt,{name:"Hummus & Flatbread",price:"4.50",category:"Light"}),x.jsx(lt,{name:"Olives",price:"4.00",category:"Light"}),x.jsx(lt,{name:"Sourdough Garlic Bread",price:"4.50",category:"Light"}),x.jsx(lt,{name:"Fries",price:"4.75",category:"Side"}),x.jsx(lt,{name:"Sweet Potato",price:"6.25",category:"Side"}),x.jsx(lt,{name:"Halloumi",price:"7.70",category:"Side"})]}),x.jsx("h3",{className:"text-3xl font-bold text-[#B88A68] mb-8 text-center",children:"I'M STARVING"}),x.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-12",children:[x.jsx(lt,{name:"Malaysian Chicken",price:"11.85",description:"Grilled chicken marinated in a mix of spices and coconut milk, coriander and chilli served with rice and greens",category:"Main"}),x.jsx(lt,{name:"Peruvian Pork",price:"11.95",description:"Crispy pork belly bites, sweet potato fries, Peruvian salsa and spicy aji verde sauce",category:"Main"}),x.jsx(lt,{name:"Falafel Bowl",price:"9.50",description:"Homemade falafel, tomato, cucumber, red onion, olives, pine nuts salad and hummus",category:"Main"}),x.jsx(lt,{name:"Chicken Sushi Bowl",price:"11.95",description:"Japanese style fried chicken, sushi rice, Asian slaw, avocado, sriracha mayo and crispy onion",category:"Main"}),x.jsx(Bs,{name:"Burrito Bowl",basePrice:8.85,description:"Basmati rice, sweetcorn, red onion, tomato, black beans, avocado, chilli oil",category:"Main",addOns:[{id:"poached-eggs",name:"Poached eggs",price:2.5},{id:"falafel",name:"Falafel",price:2.5},{id:"crispy-pork",name:"Crispy pork belly",price:2.5},{id:"grilled-chicken",name:"Grilled Chicken",price:2.5},{id:"korean-chicken",name:"Korean Chicken",price:2.5},{id:"hot-chicken",name:"Hot Chicken",price:2.5},{id:"bbq-chicken",name:"BBQ Chicken",price:2.5},{id:"halloumi",name:"Grilled Halloumi",price:3}]}),x.jsx(Bs,{name:"Shawarma",description:"Lebanese flatbread, pickles, red cabbage slaw, yogurt sauce, lettuce and house seasoning fries",category:"Main",requiresVariant:!0,variants:[{id:"chicken",name:"Chicken",price:10.85},{id:"lamb",name:"Lamb",price:12.5},{id:"beef",name:"Beef",price:12.5},{id:"veggie",name:"Veggie",price:9.85}]}),x.jsx(Bs,{name:"Rigatoni",category:"Main",requiresVariant:!0,variants:[{id:"chicken-chorizo",name:"Chicken & Chorizo",price:11.95},{id:"beef-ragu",name:"Slow Cooked Beef Ragu",price:12.5}]}),x.jsx(Bs,{name:"Gnocchi",category:"Main",requiresVariant:!0,variants:[{id:"italian-sausage",name:"Italian Sausage",price:12.5},{id:"mushroom-truffle",name:"Wild Mushroom & Truffle",price:10.95}]}),x.jsx(Bs,{name:"Burgers",description:"All served with Cajun fries",category:"Main",requiresVariant:!0,variants:[{id:"beef",name:"Double Patty Smashed Beef",price:12.5},{id:"chicken",name:"Honey & Chilli Fried Chicken",price:12.75},{id:"veggie",name:"Beetroot & Bean",price:11.5}],addOns:[{id:"bacon",name:"Bacon",price:1},{id:"black-pudding",name:"Black pudding",price:1},{id:"fried-egg",name:"Fried egg",price:1},{id:"cheddar",name:"Cheddar",price:1},{id:"mozzarella",name:"Mozzarella",price:1},{id:"avocado",name:"Avocado",price:1},{id:"feta",name:"Feta",price:3},{id:"halloumi",name:"Halloumi",price:3},{id:"jalapenos",name:"Jalapeos",price:.5},{id:"crispy-onion",name:"Crispy onion",price:.5}]})]})]})]}),x.jsxs("section",{id:"breakfast-brunch",className:"mb-20 scroll-mt-24",children:[x.jsxs("div",{className:"text-center mb-12",children:[x.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[x.jsx(Ym,{className:"w-10 h-10 text-[#B88A68]"}),x.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900",children:"Breakfast & Brunch"})]}),x.jsx("div",{className:"w-24 h-1 bg-[#B88A68] mx-auto mb-6"}),x.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Start your day right with our delicious breakfast options"})]}),x.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[x.jsx(lt,{name:"Full Breakfast",price:"9.75",description:"Sausage, bacon, eggs, beans, mushrooms, tomato & toast",category:"Breakfast"}),x.jsx(lt,{name:"Veggie Breakfast",price:"9.75",description:"Vegetarian sausage, eggs, beans, mushrooms, tomato & toast",category:"Breakfast"}),x.jsx(lt,{name:"Breakfast Bap",price:"5.75",description:"Your choice of filling in a soft bap",category:"Breakfast"}),x.jsx(lt,{name:"Morning Hot Rolls",price:"3.00",description:"Freshly baked hot rolls with butter",category:"Breakfast"}),x.jsx(lt,{name:"Granola",price:"3.25+",description:"Homemade granola with milk or yogurt",category:"Breakfast"}),x.jsx(lt,{name:"Protein Pancakes",price:"8.50",description:"High-protein pancakes with toppings",category:"Brunch"}),x.jsx(lt,{name:"Smashed Avocado",price:"7.50",description:"On sourdough toast with poached eggs",category:"Brunch"}),x.jsx(lt,{name:"Spinach & Mushroom Toast",price:"6.50",description:"Sauted spinach and mushrooms on toast",category:"Brunch"}),x.jsx(lt,{name:"Scrambled Eggs",price:"5.50",description:"Fluffy scrambled eggs on toast",category:"Brunch"})]})]}),x.jsxs("section",{id:"kids",className:"mb-20 scroll-mt-24",children:[x.jsxs("div",{className:"text-center mb-12",children:[x.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Kids Menu"}),x.jsx("div",{className:"w-24 h-1 bg-[#B88A68] mx-auto mb-6"}),x.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Special treats for our little guests"})]}),x.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[x.jsxs("div",{className:"md:col-span-3",children:[x.jsx("h3",{className:"text-2xl font-bold text-[#B88A68] mb-6",children:"BREAKFAST"}),x.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[x.jsx(Bs,{name:"Mini Breakfast",basePrice:4.5,description:"Fruit + Scrambled eggs on toast",category:"Breakfast",addOns:[{id:"nutella",name:"Nutella",price:0},{id:"jam",name:"Jam",price:0}]}),x.jsx(lt,{name:"Eggs & Sausage",price:"4.00",description:"Choice of bacon or sausage with eggs",category:"Breakfast"}),x.jsx(lt,{name:"Root Veg Special",price:"4.00",description:"Healthy veggie option with choice of toppings",category:"Breakfast"})]})]}),x.jsxs("div",{className:"md:col-span-3 mt-8",children:[x.jsx("h3",{className:"text-2xl font-bold text-[#B88A68] mb-6",children:"LUNCH"}),x.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[x.jsx(lt,{name:"Beef Finger & Chips",price:"3.00",description:"Tender beef fingers with crispy chips",category:"Lunch"}),x.jsx(lt,{name:"Chicken Tenders",price:"3.00",description:"With chips or rice & peas",category:"Lunch"}),x.jsx(lt,{name:"Cheese Toastie",price:"3.00",description:"Classic grilled cheese sandwich",category:"Lunch"})]})]}),x.jsxs("div",{className:"md:col-span-3 mt-8",children:[x.jsx("h3",{className:"text-2xl font-bold text-[#B88A68] mb-6",children:"DRINKS"}),x.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[x.jsx(lt,{name:"Mini Milkshake",price:"3.50",description:"Various flavors available",category:"Drink"}),x.jsx(lt,{name:"Cardi Can Milk",price:"3.50",description:"Fresh and nutritious",category:"Drink"}),x.jsx(lt,{name:"Mini Milk",price:"3.50",description:"Perfect size for kids",category:"Drink"})]})]})]})]}),x.jsxs("section",{id:"doggo",className:"mb-20 scroll-mt-24",children:[x.jsxs("div",{className:"text-center mb-12",children:[x.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[x.jsx(Nh,{className:"w-10 h-10 text-[#B88A68]"}),x.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900",children:"Doggo Menu"}),x.jsx(Nh,{className:"w-10 h-10 text-[#B88A68]"})]}),x.jsx("div",{className:"w-24 h-1 bg-[#B88A68] mx-auto mb-6"}),x.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Special treats for your furry friends! "})]}),x.jsxs("div",{className:"max-w-5xl mx-auto",children:[x.jsx("h3",{className:"text-2xl font-bold text-[#B88A68] mb-6",children:"MAIN"}),x.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[x.jsx(Bs,{name:"Scrambled Egg",category:"Main",requiresVariant:!0,description:"Protein-rich scrambled eggs for your pup",variants:[{id:"one-egg",name:"1 Egg",price:1},{id:"two-eggs",name:"2 Eggs",price:2}]}),x.jsx(Bs,{name:"Cooked Pork Sausage",category:"Main",requiresVariant:!0,description:"Dog-safe pork sausage",variants:[{id:"one-sausage",name:"1 Sausage",price:1},{id:"two-sausages",name:"2 Sausages",price:2}]}),x.jsx(Bs,{name:"Grilled Chicken",category:"Main",requiresVariant:!0,description:"Grilled chicken, rice and peas",variants:[{id:"small",name:"Small",price:3.5},{id:"large",name:"Large",price:5.5}]}),x.jsx(lt,{name:"Arnia Dogs Food",price:"5.00",description:"Premium dog food (Large portion)",category:"Main"})]}),x.jsx("h3",{className:"text-2xl font-bold text-[#B88A68] mb-6",children:"DESSERTS"}),x.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[x.jsx(lt,{name:"Sweet Potato & Peanut Butter Bowl",price:"3.00",description:"Healthy and delicious treat",category:"Dessert"}),x.jsx(lt,{name:"Doggy Chocolate",price:"2.50",description:"Dog-safe chocolate alternative",category:"Dessert"}),x.jsx(lt,{name:"Dogo-Doggo",price:"2.50",description:"Holistic yogurt treat",category:"Dessert"})]})]})]}),x.jsx("div",{className:"text-center mt-16 py-8 border-t border-gray-200",children:x.jsxs("p",{className:"text-gray-600 italic max-w-2xl mx-auto",children:["Please let us know about any allergies. We're happy to accommodate dietary requirements.",x.jsx("br",{}),x.jsx("span",{className:"text-sm",children:"All prices subject to change. Please ask staff for today's specials."})]})})]})]})}var uA=Object.defineProperty,Pu=Object.getOwnPropertySymbols,Xx=Object.prototype.hasOwnProperty,Yx=Object.prototype.propertyIsEnumerable,Ag=(t,e,r)=>e in t?uA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wf=(t,e)=>{for(var r in e||(e={}))Xx.call(e,r)&&Ag(t,r,e[r]);if(Pu)for(var r of Pu(e))Yx.call(e,r)&&Ag(t,r,e[r]);return t},vf=(t,e)=>{var r={};for(var a in t)Xx.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&Pu)for(var a of Pu(t))e.indexOf(a)<0&&Yx.call(t,a)&&(r[a]=t[a]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ka;(t=>{const e=class xt{constructor(y,w,A,C){if(this.version=y,this.errorCorrectionLevel=w,this.modules=[],this.isFunction=[],y<xt.MIN_VERSION||y>xt.MAX_VERSION)throw new RangeError("Version value out of range");if(C<-1||C>7)throw new RangeError("Mask value out of range");this.size=y*4+17;let T=[];for(let k=0;k<this.size;k++)T.push(!1);for(let k=0;k<this.size;k++)this.modules.push(T.slice()),this.isFunction.push(T.slice());this.drawFunctionPatterns();const R=this.addEccAndInterleave(A);if(this.drawCodewords(R),C==-1){let k=1e9;for(let D=0;D<8;D++){this.applyMask(D),this.drawFormatBits(D);const L=this.getPenaltyScore();L<k&&(C=D,k=L),this.applyMask(D)}}u(0<=C&&C<=7),this.mask=C,this.applyMask(C),this.drawFormatBits(C),this.isFunction=[]}static encodeText(y,w){const A=t.QrSegment.makeSegments(y);return xt.encodeSegments(A,w)}static encodeBinary(y,w){const A=t.QrSegment.makeBytes(y);return xt.encodeSegments([A],w)}static encodeSegments(y,w,A=1,C=40,T=-1,R=!0){if(!(xt.MIN_VERSION<=A&&A<=C&&C<=xt.MAX_VERSION)||T<-1||T>7)throw new RangeError("Invalid value");let k,D;for(k=A;;k++){const j=xt.getNumDataCodewords(k,w)*8,q=g.getTotalBits(y,k);if(q<=j){D=q;break}if(k>=C)throw new RangeError("Data too long")}for(const j of[xt.Ecc.MEDIUM,xt.Ecc.QUARTILE,xt.Ecc.HIGH])R&&D<=xt.getNumDataCodewords(k,j)*8&&(w=j);let L=[];for(const j of y){r(j.mode.modeBits,4,L),r(j.numChars,j.mode.numCharCountBits(k),L);for(const q of j.getData())L.push(q)}u(L.length==D);const U=xt.getNumDataCodewords(k,w)*8;u(L.length<=U),r(0,Math.min(4,U-L.length),L),r(0,(8-L.length%8)%8,L),u(L.length%8==0);for(let j=236;L.length<U;j^=253)r(j,8,L);let W=[];for(;W.length*8<L.length;)W.push(0);return L.forEach((j,q)=>W[q>>>3]|=j<<7-(q&7)),new xt(k,w,W,T)}getModule(y,w){return 0<=y&&y<this.size&&0<=w&&w<this.size&&this.modules[w][y]}getModules(){return this.modules}drawFunctionPatterns(){for(let A=0;A<this.size;A++)this.setFunctionModule(6,A,A%2==0),this.setFunctionModule(A,6,A%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const y=this.getAlignmentPatternPositions(),w=y.length;for(let A=0;A<w;A++)for(let C=0;C<w;C++)A==0&&C==0||A==0&&C==w-1||A==w-1&&C==0||this.drawAlignmentPattern(y[A],y[C]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(y){const w=this.errorCorrectionLevel.formatBits<<3|y;let A=w;for(let T=0;T<10;T++)A=A<<1^(A>>>9)*1335;const C=(w<<10|A)^21522;u(C>>>15==0);for(let T=0;T<=5;T++)this.setFunctionModule(8,T,a(C,T));this.setFunctionModule(8,7,a(C,6)),this.setFunctionModule(8,8,a(C,7)),this.setFunctionModule(7,8,a(C,8));for(let T=9;T<15;T++)this.setFunctionModule(14-T,8,a(C,T));for(let T=0;T<8;T++)this.setFunctionModule(this.size-1-T,8,a(C,T));for(let T=8;T<15;T++)this.setFunctionModule(8,this.size-15+T,a(C,T));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let y=this.version;for(let A=0;A<12;A++)y=y<<1^(y>>>11)*7973;const w=this.version<<12|y;u(w>>>18==0);for(let A=0;A<18;A++){const C=a(w,A),T=this.size-11+A%3,R=Math.floor(A/3);this.setFunctionModule(T,R,C),this.setFunctionModule(R,T,C)}}drawFinderPattern(y,w){for(let A=-4;A<=4;A++)for(let C=-4;C<=4;C++){const T=Math.max(Math.abs(C),Math.abs(A)),R=y+C,k=w+A;0<=R&&R<this.size&&0<=k&&k<this.size&&this.setFunctionModule(R,k,T!=2&&T!=4)}}drawAlignmentPattern(y,w){for(let A=-2;A<=2;A++)for(let C=-2;C<=2;C++)this.setFunctionModule(y+C,w+A,Math.max(Math.abs(C),Math.abs(A))!=1)}setFunctionModule(y,w,A){this.modules[w][y]=A,this.isFunction[w][y]=!0}addEccAndInterleave(y){const w=this.version,A=this.errorCorrectionLevel;if(y.length!=xt.getNumDataCodewords(w,A))throw new RangeError("Invalid argument");const C=xt.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][w],T=xt.ECC_CODEWORDS_PER_BLOCK[A.ordinal][w],R=Math.floor(xt.getNumRawDataModules(w)/8),k=C-R%C,D=Math.floor(R/C);let L=[];const U=xt.reedSolomonComputeDivisor(T);for(let j=0,q=0;j<C;j++){let Z=y.slice(q,q+D-T+(j<k?0:1));q+=Z.length;const te=xt.reedSolomonComputeRemainder(Z,U);j<k&&Z.push(0),L.push(Z.concat(te))}let W=[];for(let j=0;j<L[0].length;j++)L.forEach((q,Z)=>{(j!=D-T||Z>=k)&&W.push(q[j])});return u(W.length==R),W}drawCodewords(y){if(y.length!=Math.floor(xt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let w=0;for(let A=this.size-1;A>=1;A-=2){A==6&&(A=5);for(let C=0;C<this.size;C++)for(let T=0;T<2;T++){const R=A-T,D=(A+1&2)==0?this.size-1-C:C;!this.isFunction[D][R]&&w<y.length*8&&(this.modules[D][R]=a(y[w>>>3],7-(w&7)),w++)}}u(w==y.length*8)}applyMask(y){if(y<0||y>7)throw new RangeError("Mask value out of range");for(let w=0;w<this.size;w++)for(let A=0;A<this.size;A++){let C;switch(y){case 0:C=(A+w)%2==0;break;case 1:C=w%2==0;break;case 2:C=A%3==0;break;case 3:C=(A+w)%3==0;break;case 4:C=(Math.floor(A/3)+Math.floor(w/2))%2==0;break;case 5:C=A*w%2+A*w%3==0;break;case 6:C=(A*w%2+A*w%3)%2==0;break;case 7:C=((A+w)%2+A*w%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[w][A]&&C&&(this.modules[w][A]=!this.modules[w][A])}}getPenaltyScore(){let y=0;for(let T=0;T<this.size;T++){let R=!1,k=0,D=[0,0,0,0,0,0,0];for(let L=0;L<this.size;L++)this.modules[T][L]==R?(k++,k==5?y+=xt.PENALTY_N1:k>5&&y++):(this.finderPenaltyAddHistory(k,D),R||(y+=this.finderPenaltyCountPatterns(D)*xt.PENALTY_N3),R=this.modules[T][L],k=1);y+=this.finderPenaltyTerminateAndCount(R,k,D)*xt.PENALTY_N3}for(let T=0;T<this.size;T++){let R=!1,k=0,D=[0,0,0,0,0,0,0];for(let L=0;L<this.size;L++)this.modules[L][T]==R?(k++,k==5?y+=xt.PENALTY_N1:k>5&&y++):(this.finderPenaltyAddHistory(k,D),R||(y+=this.finderPenaltyCountPatterns(D)*xt.PENALTY_N3),R=this.modules[L][T],k=1);y+=this.finderPenaltyTerminateAndCount(R,k,D)*xt.PENALTY_N3}for(let T=0;T<this.size-1;T++)for(let R=0;R<this.size-1;R++){const k=this.modules[T][R];k==this.modules[T][R+1]&&k==this.modules[T+1][R]&&k==this.modules[T+1][R+1]&&(y+=xt.PENALTY_N2)}let w=0;for(const T of this.modules)w=T.reduce((R,k)=>R+(k?1:0),w);const A=this.size*this.size,C=Math.ceil(Math.abs(w*20-A*10)/A)-1;return u(0<=C&&C<=9),y+=C*xt.PENALTY_N4,u(0<=y&&y<=2568888),y}getAlignmentPatternPositions(){if(this.version==1)return[];{const y=Math.floor(this.version/7)+2,w=this.version==32?26:Math.ceil((this.version*4+4)/(y*2-2))*2;let A=[6];for(let C=this.size-7;A.length<y;C-=w)A.splice(1,0,C);return A}}static getNumRawDataModules(y){if(y<xt.MIN_VERSION||y>xt.MAX_VERSION)throw new RangeError("Version number out of range");let w=(16*y+128)*y+64;if(y>=2){const A=Math.floor(y/7)+2;w-=(25*A-10)*A-55,y>=7&&(w-=36)}return u(208<=w&&w<=29648),w}static getNumDataCodewords(y,w){return Math.floor(xt.getNumRawDataModules(y)/8)-xt.ECC_CODEWORDS_PER_BLOCK[w.ordinal][y]*xt.NUM_ERROR_CORRECTION_BLOCKS[w.ordinal][y]}static reedSolomonComputeDivisor(y){if(y<1||y>255)throw new RangeError("Degree out of range");let w=[];for(let C=0;C<y-1;C++)w.push(0);w.push(1);let A=1;for(let C=0;C<y;C++){for(let T=0;T<w.length;T++)w[T]=xt.reedSolomonMultiply(w[T],A),T+1<w.length&&(w[T]^=w[T+1]);A=xt.reedSolomonMultiply(A,2)}return w}static reedSolomonComputeRemainder(y,w){let A=w.map(C=>0);for(const C of y){const T=C^A.shift();A.push(0),w.forEach((R,k)=>A[k]^=xt.reedSolomonMultiply(R,T))}return A}static reedSolomonMultiply(y,w){if(y>>>8||w>>>8)throw new RangeError("Byte out of range");let A=0;for(let C=7;C>=0;C--)A=A<<1^(A>>>7)*285,A^=(w>>>C&1)*y;return u(A>>>8==0),A}finderPenaltyCountPatterns(y){const w=y[1];u(w<=this.size*3);const A=w>0&&y[2]==w&&y[3]==w*3&&y[4]==w&&y[5]==w;return(A&&y[0]>=w*4&&y[6]>=w?1:0)+(A&&y[6]>=w*4&&y[0]>=w?1:0)}finderPenaltyTerminateAndCount(y,w,A){return y&&(this.finderPenaltyAddHistory(w,A),w=0),w+=this.size,this.finderPenaltyAddHistory(w,A),this.finderPenaltyCountPatterns(A)}finderPenaltyAddHistory(y,w){w[0]==0&&(y+=this.size),w.pop(),w.unshift(y)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function r(v,y,w){if(y<0||y>31||v>>>y)throw new RangeError("Value out of range");for(let A=y-1;A>=0;A--)w.push(v>>>A&1)}function a(v,y){return(v>>>y&1)!=0}function u(v){if(!v)throw new Error("Assertion error")}const h=class xr{constructor(y,w,A){if(this.mode=y,this.numChars=w,this.bitData=A,w<0)throw new RangeError("Invalid argument");this.bitData=A.slice()}static makeBytes(y){let w=[];for(const A of y)r(A,8,w);return new xr(xr.Mode.BYTE,y.length,w)}static makeNumeric(y){if(!xr.isNumeric(y))throw new RangeError("String contains non-numeric characters");let w=[];for(let A=0;A<y.length;){const C=Math.min(y.length-A,3);r(parseInt(y.substring(A,A+C),10),C*3+1,w),A+=C}return new xr(xr.Mode.NUMERIC,y.length,w)}static makeAlphanumeric(y){if(!xr.isAlphanumeric(y))throw new RangeError("String contains unencodable characters in alphanumeric mode");let w=[],A;for(A=0;A+2<=y.length;A+=2){let C=xr.ALPHANUMERIC_CHARSET.indexOf(y.charAt(A))*45;C+=xr.ALPHANUMERIC_CHARSET.indexOf(y.charAt(A+1)),r(C,11,w)}return A<y.length&&r(xr.ALPHANUMERIC_CHARSET.indexOf(y.charAt(A)),6,w),new xr(xr.Mode.ALPHANUMERIC,y.length,w)}static makeSegments(y){return y==""?[]:xr.isNumeric(y)?[xr.makeNumeric(y)]:xr.isAlphanumeric(y)?[xr.makeAlphanumeric(y)]:[xr.makeBytes(xr.toUtf8ByteArray(y))]}static makeEci(y){let w=[];if(y<0)throw new RangeError("ECI assignment value out of range");if(y<128)r(y,8,w);else if(y<16384)r(2,2,w),r(y,14,w);else if(y<1e6)r(6,3,w),r(y,21,w);else throw new RangeError("ECI assignment value out of range");return new xr(xr.Mode.ECI,0,w)}static isNumeric(y){return xr.NUMERIC_REGEX.test(y)}static isAlphanumeric(y){return xr.ALPHANUMERIC_REGEX.test(y)}getData(){return this.bitData.slice()}static getTotalBits(y,w){let A=0;for(const C of y){const T=C.mode.numCharCountBits(w);if(C.numChars>=1<<T)return 1/0;A+=4+T+C.bitData.length}return A}static toUtf8ByteArray(y){y=encodeURI(y);let w=[];for(let A=0;A<y.length;A++)y.charAt(A)!="%"?w.push(y.charCodeAt(A)):(w.push(parseInt(y.substring(A+1,A+3),16)),A+=2);return w}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let g=h;t.QrSegment=h})(ka||(ka={}));(t=>{(e=>{const r=class{constructor(u,h){this.ordinal=u,this.formatBits=h}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(ka||(ka={}));(t=>{(e=>{const r=class{constructor(u,h){this.modeBits=u,this.numBitsCharCount=h}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(ka||(ka={}));var xo=ka;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var dA={L:xo.QrCode.Ecc.LOW,M:xo.QrCode.Ecc.MEDIUM,Q:xo.QrCode.Ecc.QUARTILE,H:xo.QrCode.Ecc.HIGH},qx=128,Kx="L",Zx="#FFFFFF",Qx="#000000",Jx=!1,ey=1,hA=4,fA=0,mA=.1;function ty(t,e=0){const r=[];return t.forEach(function(a,u){let h=null;a.forEach(function(g,v){if(!g&&h!==null){r.push(`M${h+e} ${u+e}h${v-h}v1H${h+e}z`),h=null;return}if(v===a.length-1){if(!g)return;h===null?r.push(`M${v+e},${u+e} h1v1H${v+e}z`):r.push(`M${h+e},${u+e} h${v+1-h}v1H${h+e}z`);return}g&&h===null&&(h=v)})}),r.join("")}function ry(t,e){return t.slice().map((r,a)=>a<e.y||a>=e.y+e.h?r:r.map((u,h)=>h<e.x||h>=e.x+e.w?u:!1))}function gA(t,e,r,a){if(a==null)return null;const u=t.length+r*2,h=Math.floor(e*mA),g=u/e,v=(a.width||h)*g,y=(a.height||h)*g,w=a.x==null?t.length/2-v/2:a.x*g,A=a.y==null?t.length/2-y/2:a.y*g,C=a.opacity==null?1:a.opacity;let T=null;if(a.excavate){let k=Math.floor(w),D=Math.floor(A),L=Math.ceil(v+w-k),U=Math.ceil(y+A-D);T={x:k,y:D,w:L,h:U}}const R=a.crossOrigin;return{x:w,y:A,h:y,w:v,excavation:T,opacity:C,crossOrigin:R}}function pA(t,e){return e!=null?Math.max(Math.floor(e),0):t?hA:fA}function ny({value:t,level:e,minVersion:r,includeMargin:a,marginSize:u,imageSettings:h,size:g,boostLevel:v}){let y=ve.useMemo(()=>{const k=(Array.isArray(t)?t:[t]).reduce((D,L)=>(D.push(...xo.QrSegment.makeSegments(L)),D),[]);return xo.QrCode.encodeSegments(k,dA[e],r,void 0,void 0,v)},[t,e,r,v]);const{cells:w,margin:A,numCells:C,calculatedImageSettings:T}=ve.useMemo(()=>{let R=y.getModules();const k=pA(a,u),D=R.length+k*2,L=gA(R,g,k,h);return{cells:R,margin:k,numCells:D,calculatedImageSettings:L}},[y,g,h,a,u]);return{qrcode:y,margin:A,cells:w,numCells:C,calculatedImageSettings:T}}var xA=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),yA=ve.forwardRef(function(e,r){const a=e,{value:u,size:h=qx,level:g=Kx,bgColor:v=Zx,fgColor:y=Qx,includeMargin:w=Jx,minVersion:A=ey,boostLevel:C,marginSize:T,imageSettings:R}=a,D=vf(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:L}=D,U=vf(D,["style"]),W=R==null?void 0:R.src,j=ve.useRef(null),q=ve.useRef(null),Z=ve.useCallback(Ie=>{j.current=Ie,typeof r=="function"?r(Ie):r&&(r.current=Ie)},[r]),[te,ee]=ve.useState(!1),{margin:ue,cells:se,numCells:Ue,calculatedImageSettings:ge}=ny({value:u,level:g,minVersion:A,boostLevel:C,includeMargin:w,marginSize:T,imageSettings:R,size:h});ve.useEffect(()=>{if(j.current!=null){const Ie=j.current,Q=Ie.getContext("2d");if(!Q)return;let Re=se;const fe=q.current,de=ge!=null&&fe!==null&&fe.complete&&fe.naturalHeight!==0&&fe.naturalWidth!==0;de&&ge.excavation!=null&&(Re=ry(se,ge.excavation));const Ne=window.devicePixelRatio||1;Ie.height=Ie.width=h*Ne;const Ae=h/Ue*Ne;Q.scale(Ae,Ae),Q.fillStyle=v,Q.fillRect(0,0,Ue,Ue),Q.fillStyle=y,xA?Q.fill(new Path2D(ty(Re,ue))):se.forEach(function($,ae){$.forEach(function(ke,Me){ke&&Q.fillRect(Me+ue,ae+ue,1,1)})}),ge&&(Q.globalAlpha=ge.opacity),de&&Q.drawImage(fe,ge.x+ue,ge.y+ue,ge.w,ge.h)}}),ve.useEffect(()=>{ee(!1)},[W]);const he=wf({height:h,width:h},L);let Te=null;return W!=null&&(Te=ve.createElement("img",{src:W,key:W,style:{display:"none"},onLoad:()=>{ee(!0)},ref:q,crossOrigin:ge==null?void 0:ge.crossOrigin})),ve.createElement(ve.Fragment,null,ve.createElement("canvas",wf({style:he,height:h,width:h,ref:Z,role:"img"},U)),Te)});yA.displayName="QRCodeCanvas";var sy=ve.forwardRef(function(e,r){const a=e,{value:u,size:h=qx,level:g=Kx,bgColor:v=Zx,fgColor:y=Qx,includeMargin:w=Jx,minVersion:A=ey,boostLevel:C,title:T,marginSize:R,imageSettings:k}=a,D=vf(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:L,cells:U,numCells:W,calculatedImageSettings:j}=ny({value:u,level:g,minVersion:A,boostLevel:C,includeMargin:w,marginSize:R,imageSettings:k,size:h});let q=U,Z=null;k!=null&&j!=null&&(j.excavation!=null&&(q=ry(U,j.excavation)),Z=ve.createElement("image",{href:k.src,height:j.h,width:j.w,x:j.x+L,y:j.y+L,preserveAspectRatio:"none",opacity:j.opacity,crossOrigin:j.crossOrigin}));const te=ty(q,L);return ve.createElement("svg",wf({height:h,width:h,viewBox:`0 0 ${W} ${W}`,ref:r,role:"img"},D),!!T&&ve.createElement("title",null,T),ve.createElement("path",{fill:v,d:`M0,0 h${W}v${W}H0z`,shapeRendering:"crispEdges"}),ve.createElement("path",{fill:y,d:te,shapeRendering:"crispEdges"}),Z)});sy.displayName="QRCodeSVG";const iy=z.createContext({});function wA(t){const e=z.useRef(null);return e.current===null&&(e.current=t()),e.current}const i0=typeof window<"u",vA=i0?z.useLayoutEffect:z.useEffect,a0=z.createContext(null);function o0(t,e){t.indexOf(e)===-1&&t.push(e)}function l0(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const ii=(t,e,r)=>r>e?e:r<t?t:r;let c0=()=>{};const ai={},ay=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function oy(t){return typeof t=="object"&&t!==null}const ly=t=>/^0[^.\s]+$/u.test(t);function u0(t){let e;return()=>(e===void 0&&(e=t()),e)}const as=t=>t,bA=(t,e)=>r=>e(t(r)),Ql=(...t)=>t.reduce(bA),Vl=(t,e,r)=>{const a=e-t;return a===0?1:(r-t)/a};class d0{constructor(){this.subscriptions=[]}add(e){return o0(this.subscriptions,e),()=>l0(this.subscriptions,e)}notify(e,r,a){const u=this.subscriptions.length;if(u)if(u===1)this.subscriptions[0](e,r,a);else for(let h=0;h<u;h++){const g=this.subscriptions[h];g&&g(e,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ls=t=>t*1e3,is=t=>t/1e3;function cy(t,e){return e?t*(1e3/e):0}const uy=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,EA=1e-7,CA=12;function AA(t,e,r,a,u){let h,g,v=0;do g=e+(r-e)/2,h=uy(g,a,u)-t,h>0?r=g:e=g;while(Math.abs(h)>EA&&++v<CA);return g}function Jl(t,e,r,a){if(t===e&&r===a)return as;const u=h=>AA(h,0,1,t,r);return h=>h===0||h===1?h:uy(u(h),e,a)}const dy=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hy=t=>e=>1-t(1-e),fy=Jl(.33,1.53,.69,.99),h0=hy(fy),my=dy(h0),gy=t=>(t*=2)<1?.5*h0(t):.5*(2-Math.pow(2,-10*(t-1))),f0=t=>1-Math.sin(Math.acos(t)),py=hy(f0),xy=dy(f0),SA=Jl(.42,0,1,1),_A=Jl(0,0,.58,1),yy=Jl(.42,0,.58,1),NA=t=>Array.isArray(t)&&typeof t[0]!="number",wy=t=>Array.isArray(t)&&typeof t[0]=="number",TA={linear:as,easeIn:SA,easeInOut:yy,easeOut:_A,circIn:f0,circInOut:xy,circOut:py,backIn:h0,backInOut:my,backOut:fy,anticipate:gy},IA=t=>typeof t=="string",Sg=t=>{if(wy(t)){c0(t.length===4);const[e,r,a,u]=t;return Jl(e,r,a,u)}else if(IA(t))return TA[t];return t},xu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function RA(t,e){let r=new Set,a=new Set,u=!1,h=!1;const g=new WeakSet;let v={delta:0,timestamp:0,isProcessing:!1};function y(A){g.has(A)&&(w.schedule(A),t()),A(v)}const w={schedule:(A,C=!1,T=!1)=>{const k=T&&u?r:a;return C&&g.add(A),k.has(A)||k.add(A),A},cancel:A=>{a.delete(A),g.delete(A)},process:A=>{if(v=A,u){h=!0;return}u=!0,[r,a]=[a,r],r.forEach(y),r.clear(),u=!1,h&&(h=!1,w.process(A))}};return w}const kA=40;function vy(t,e){let r=!1,a=!0;const u={delta:0,timestamp:0,isProcessing:!1},h=()=>r=!0,g=xu.reduce((j,q)=>(j[q]=RA(h),j),{}),{setup:v,read:y,resolveKeyframes:w,preUpdate:A,update:C,preRender:T,render:R,postRender:k}=g,D=()=>{const j=ai.useManualTiming?u.timestamp:performance.now();r=!1,ai.useManualTiming||(u.delta=a?1e3/60:Math.max(Math.min(j-u.timestamp,kA),1)),u.timestamp=j,u.isProcessing=!0,v.process(u),y.process(u),w.process(u),A.process(u),C.process(u),T.process(u),R.process(u),k.process(u),u.isProcessing=!1,r&&e&&(a=!1,t(D))},L=()=>{r=!0,a=!0,u.isProcessing||t(D)};return{schedule:xu.reduce((j,q)=>{const Z=g[q];return j[q]=(te,ee=!1,ue=!1)=>(r||L(),Z.schedule(te,ee,ue)),j},{}),cancel:j=>{for(let q=0;q<xu.length;q++)g[xu[q]].cancel(j)},state:u,steps:g}}const{schedule:nr,cancel:Gi,state:tn,steps:Lh}=vy(typeof requestAnimationFrame<"u"?requestAnimationFrame:as,!0);let Eu;function OA(){Eu=void 0}const Rn={now:()=>(Eu===void 0&&Rn.set(tn.isProcessing||ai.useManualTiming?tn.timestamp:performance.now()),Eu),set:t=>{Eu=t,queueMicrotask(OA)}},by=t=>e=>typeof e=="string"&&e.startsWith(t),Ey=by("--"),PA=by("var(--"),m0=t=>PA(t)?DA.test(t.split("/*")[0].trim()):!1,DA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function _g(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Oo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Wl={...Oo,transform:t=>ii(0,1,t)},yu={...Oo,default:1},Il=t=>Math.round(t*1e5)/1e5,g0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function MA(t){return t==null}const jA=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,p0=(t,e)=>r=>!!(typeof r=="string"&&jA.test(r)&&r.startsWith(t)||e&&!MA(r)&&Object.prototype.hasOwnProperty.call(r,e)),Cy=(t,e,r)=>a=>{if(typeof a!="string")return a;const[u,h,g,v]=a.match(g0);return{[t]:parseFloat(u),[e]:parseFloat(h),[r]:parseFloat(g),alpha:v!==void 0?parseFloat(v):1}},BA=t=>ii(0,255,t),Fh={...Oo,transform:t=>Math.round(BA(t))},_a={test:p0("rgb","red"),parse:Cy("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:a=1})=>"rgba("+Fh.transform(t)+", "+Fh.transform(e)+", "+Fh.transform(r)+", "+Il(Wl.transform(a))+")"};function LA(t){let e="",r="",a="",u="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),a=t.substring(5,7),u=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),a=t.substring(3,4),u=t.substring(4,5),e+=e,r+=r,a+=a,u+=u),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:u?parseInt(u,16)/255:1}}const bf={test:p0("#"),parse:LA,transform:_a.transform},ec=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ui=ec("deg"),Fs=ec("%"),je=ec("px"),FA=ec("vh"),UA=ec("vw"),Ng={...Fs,parse:t=>Fs.parse(t)/100,transform:t=>Fs.transform(t*100)},yo={test:p0("hsl","hue"),parse:Cy("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:a=1})=>"hsla("+Math.round(t)+", "+Fs.transform(Il(e))+", "+Fs.transform(Il(r))+", "+Il(Wl.transform(a))+")"},Ir={test:t=>_a.test(t)||bf.test(t)||yo.test(t),parse:t=>_a.test(t)?_a.parse(t):yo.test(t)?yo.parse(t):bf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_a.transform(t):yo.transform(t),getAnimatableNone:t=>{const e=Ir.parse(t);return e.alpha=0,Ir.transform(e)}},VA=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function WA(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(g0))==null?void 0:e.length)||0)+(((r=t.match(VA))==null?void 0:r.length)||0)>0}const Ay="number",Sy="color",zA="var",HA="var(",Tg="${}",GA=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zl(t){const e=t.toString(),r=[],a={color:[],number:[],var:[]},u=[];let h=0;const v=e.replace(GA,y=>(Ir.test(y)?(a.color.push(h),u.push(Sy),r.push(Ir.parse(y))):y.startsWith(HA)?(a.var.push(h),u.push(zA),r.push(y)):(a.number.push(h),u.push(Ay),r.push(parseFloat(y))),++h,Tg)).split(Tg);return{values:r,split:v,indexes:a,types:u}}function _y(t){return zl(t).values}function Ny(t){const{split:e,types:r}=zl(t),a=e.length;return u=>{let h="";for(let g=0;g<a;g++)if(h+=e[g],u[g]!==void 0){const v=r[g];v===Ay?h+=Il(u[g]):v===Sy?h+=Ir.transform(u[g]):h+=u[g]}return h}}const $A=t=>typeof t=="number"?0:Ir.test(t)?Ir.getAnimatableNone(t):t;function XA(t){const e=_y(t);return Ny(t)(e.map($A))}const $i={test:WA,parse:_y,createTransformer:Ny,getAnimatableNone:XA};function Uh(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function YA({hue:t,saturation:e,lightness:r,alpha:a}){t/=360,e/=100,r/=100;let u=0,h=0,g=0;if(!e)u=h=g=r;else{const v=r<.5?r*(1+e):r+e-r*e,y=2*r-v;u=Uh(y,v,t+1/3),h=Uh(y,v,t),g=Uh(y,v,t-1/3)}return{red:Math.round(u*255),green:Math.round(h*255),blue:Math.round(g*255),alpha:a}}function Du(t,e){return r=>r>0?e:t}const ur=(t,e,r)=>t+(e-t)*r,Vh=(t,e,r)=>{const a=t*t,u=r*(e*e-a)+a;return u<0?0:Math.sqrt(u)},qA=[bf,_a,yo],KA=t=>qA.find(e=>e.test(t));function Ig(t){const e=KA(t);if(!e)return!1;let r=e.parse(t);return e===yo&&(r=YA(r)),r}const Rg=(t,e)=>{const r=Ig(t),a=Ig(e);if(!r||!a)return Du(t,e);const u={...r};return h=>(u.red=Vh(r.red,a.red,h),u.green=Vh(r.green,a.green,h),u.blue=Vh(r.blue,a.blue,h),u.alpha=ur(r.alpha,a.alpha,h),_a.transform(u))},Ef=new Set(["none","hidden"]);function ZA(t,e){return Ef.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function QA(t,e){return r=>ur(t,e,r)}function x0(t){return typeof t=="number"?QA:typeof t=="string"?m0(t)?Du:Ir.test(t)?Rg:tS:Array.isArray(t)?Ty:typeof t=="object"?Ir.test(t)?Rg:JA:Du}function Ty(t,e){const r=[...t],a=r.length,u=t.map((h,g)=>x0(h)(h,e[g]));return h=>{for(let g=0;g<a;g++)r[g]=u[g](h);return r}}function JA(t,e){const r={...t,...e},a={};for(const u in r)t[u]!==void 0&&e[u]!==void 0&&(a[u]=x0(t[u])(t[u],e[u]));return u=>{for(const h in a)r[h]=a[h](u);return r}}function eS(t,e){const r=[],a={color:0,var:0,number:0};for(let u=0;u<e.values.length;u++){const h=e.types[u],g=t.indexes[h][a[h]],v=t.values[g]??0;r[u]=v,a[h]++}return r}const tS=(t,e)=>{const r=$i.createTransformer(e),a=zl(t),u=zl(e);return a.indexes.var.length===u.indexes.var.length&&a.indexes.color.length===u.indexes.color.length&&a.indexes.number.length>=u.indexes.number.length?Ef.has(t)&&!u.values.length||Ef.has(e)&&!a.values.length?ZA(t,e):Ql(Ty(eS(a,u),u.values),r):Du(t,e)};function Iy(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?ur(t,e,r):x0(t)(t,e)}const rS=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>nr.update(e,r),stop:()=>Gi(e),now:()=>tn.isProcessing?tn.timestamp:Rn.now()}},Ry=(t,e,r=10)=>{let a="";const u=Math.max(Math.round(e/r),2);for(let h=0;h<u;h++)a+=Math.round(t(h/(u-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},Mu=2e4;function y0(t){let e=0;const r=50;let a=t.next(e);for(;!a.done&&e<Mu;)e+=r,a=t.next(e);return e>=Mu?1/0:e}function nS(t,e=100,r){const a=r({...t,keyframes:[0,e]}),u=Math.min(y0(a),Mu);return{type:"keyframes",ease:h=>a.next(u*h).value/e,duration:is(u)}}const sS=5;function ky(t,e,r){const a=Math.max(e-sS,0);return cy(r-t(a),e-a)}const vr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Wh=.001;function iS({duration:t=vr.duration,bounce:e=vr.bounce,velocity:r=vr.velocity,mass:a=vr.mass}){let u,h,g=1-e;g=ii(vr.minDamping,vr.maxDamping,g),t=ii(vr.minDuration,vr.maxDuration,is(t)),g<1?(u=w=>{const A=w*g,C=A*t,T=A-r,R=Cf(w,g),k=Math.exp(-C);return Wh-T/R*k},h=w=>{const C=w*g*t,T=C*r+r,R=Math.pow(g,2)*Math.pow(w,2)*t,k=Math.exp(-C),D=Cf(Math.pow(w,2),g);return(-u(w)+Wh>0?-1:1)*((T-R)*k)/D}):(u=w=>{const A=Math.exp(-w*t),C=(w-r)*t+1;return-Wh+A*C},h=w=>{const A=Math.exp(-w*t),C=(r-w)*(t*t);return A*C});const v=5/t,y=oS(u,h,v);if(t=Ls(t),isNaN(y))return{stiffness:vr.stiffness,damping:vr.damping,duration:t};{const w=Math.pow(y,2)*a;return{stiffness:w,damping:g*2*Math.sqrt(a*w),duration:t}}}const aS=12;function oS(t,e,r){let a=r;for(let u=1;u<aS;u++)a=a-t(a)/e(a);return a}function Cf(t,e){return t*Math.sqrt(1-e*e)}const lS=["duration","bounce"],cS=["stiffness","damping","mass"];function kg(t,e){return e.some(r=>t[r]!==void 0)}function uS(t){let e={velocity:vr.velocity,stiffness:vr.stiffness,damping:vr.damping,mass:vr.mass,isResolvedFromDuration:!1,...t};if(!kg(t,cS)&&kg(t,lS))if(t.visualDuration){const r=t.visualDuration,a=2*Math.PI/(r*1.2),u=a*a,h=2*ii(.05,1,1-(t.bounce||0))*Math.sqrt(u);e={...e,mass:vr.mass,stiffness:u,damping:h}}else{const r=iS(t);e={...e,...r,mass:vr.mass},e.isResolvedFromDuration=!0}return e}function ju(t=vr.visualDuration,e=vr.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:a,restDelta:u}=r;const h=r.keyframes[0],g=r.keyframes[r.keyframes.length-1],v={done:!1,value:h},{stiffness:y,damping:w,mass:A,duration:C,velocity:T,isResolvedFromDuration:R}=uS({...r,velocity:-is(r.velocity||0)}),k=T||0,D=w/(2*Math.sqrt(y*A)),L=g-h,U=is(Math.sqrt(y/A)),W=Math.abs(L)<5;a||(a=W?vr.restSpeed.granular:vr.restSpeed.default),u||(u=W?vr.restDelta.granular:vr.restDelta.default);let j;if(D<1){const Z=Cf(U,D);j=te=>{const ee=Math.exp(-D*U*te);return g-ee*((k+D*U*L)/Z*Math.sin(Z*te)+L*Math.cos(Z*te))}}else if(D===1)j=Z=>g-Math.exp(-U*Z)*(L+(k+U*L)*Z);else{const Z=U*Math.sqrt(D*D-1);j=te=>{const ee=Math.exp(-D*U*te),ue=Math.min(Z*te,300);return g-ee*((k+D*U*L)*Math.sinh(ue)+Z*L*Math.cosh(ue))/Z}}const q={calculatedDuration:R&&C||null,next:Z=>{const te=j(Z);if(R)v.done=Z>=C;else{let ee=Z===0?k:0;D<1&&(ee=Z===0?Ls(k):ky(j,Z,te));const ue=Math.abs(ee)<=a,se=Math.abs(g-te)<=u;v.done=ue&&se}return v.value=v.done?g:te,v},toString:()=>{const Z=Math.min(y0(q),Mu),te=Ry(ee=>q.next(Z*ee).value,Z,30);return Z+"ms "+te},toTransition:()=>{}};return q}ju.applyToOptions=t=>{const e=nS(t,100,ju);return t.ease=e.ease,t.duration=Ls(e.duration),t.type="keyframes",t};function Af({keyframes:t,velocity:e=0,power:r=.8,timeConstant:a=325,bounceDamping:u=10,bounceStiffness:h=500,modifyTarget:g,min:v,max:y,restDelta:w=.5,restSpeed:A}){const C=t[0],T={done:!1,value:C},R=ue=>v!==void 0&&ue<v||y!==void 0&&ue>y,k=ue=>v===void 0?y:y===void 0||Math.abs(v-ue)<Math.abs(y-ue)?v:y;let D=r*e;const L=C+D,U=g===void 0?L:g(L);U!==L&&(D=U-C);const W=ue=>-D*Math.exp(-ue/a),j=ue=>U+W(ue),q=ue=>{const se=W(ue),Ue=j(ue);T.done=Math.abs(se)<=w,T.value=T.done?U:Ue};let Z,te;const ee=ue=>{R(T.value)&&(Z=ue,te=ju({keyframes:[T.value,k(T.value)],velocity:ky(j,ue,T.value),damping:u,stiffness:h,restDelta:w,restSpeed:A}))};return ee(0),{calculatedDuration:null,next:ue=>{let se=!1;return!te&&Z===void 0&&(se=!0,q(ue),ee(ue)),Z!==void 0&&ue>=Z?te.next(ue-Z):(!se&&q(ue),T)}}}function dS(t,e,r){const a=[],u=r||ai.mix||Iy,h=t.length-1;for(let g=0;g<h;g++){let v=u(t[g],t[g+1]);if(e){const y=Array.isArray(e)?e[g]||as:e;v=Ql(y,v)}a.push(v)}return a}function hS(t,e,{clamp:r=!0,ease:a,mixer:u}={}){const h=t.length;if(c0(h===e.length),h===1)return()=>e[0];if(h===2&&e[0]===e[1])return()=>e[1];const g=t[0]===t[1];t[0]>t[h-1]&&(t=[...t].reverse(),e=[...e].reverse());const v=dS(e,a,u),y=v.length,w=A=>{if(g&&A<t[0])return e[0];let C=0;if(y>1)for(;C<t.length-2&&!(A<t[C+1]);C++);const T=Vl(t[C],t[C+1],A);return v[C](T)};return r?A=>w(ii(t[0],t[h-1],A)):w}function fS(t,e){const r=t[t.length-1];for(let a=1;a<=e;a++){const u=Vl(0,e,a);t.push(ur(r,1,u))}}function mS(t){const e=[0];return fS(e,t.length-1),e}function gS(t,e){return t.map(r=>r*e)}function pS(t,e){return t.map(()=>e||yy).splice(0,t.length-1)}function Rl({duration:t=300,keyframes:e,times:r,ease:a="easeInOut"}){const u=NA(a)?a.map(Sg):Sg(a),h={done:!1,value:e[0]},g=gS(r&&r.length===e.length?r:mS(e),t),v=hS(g,e,{ease:Array.isArray(u)?u:pS(e,u)});return{calculatedDuration:t,next:y=>(h.value=v(y),h.done=y>=t,h)}}const xS=t=>t!==null;function w0(t,{repeat:e,repeatType:r="loop"},a,u=1){const h=t.filter(xS),v=u<0||e&&r!=="loop"&&e%2===1?0:h.length-1;return!v||a===void 0?h[v]:a}const yS={decay:Af,inertia:Af,tween:Rl,keyframes:Rl,spring:ju};function Oy(t){typeof t.type=="string"&&(t.type=yS[t.type])}class v0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const wS=t=>t/100;class b0 extends v0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var a,u;const{motionValue:r}=this.options;r&&r.updatedAt!==Rn.now()&&this.tick(Rn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(u=(a=this.options).onStop)==null||u.call(a))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Oy(e);const{type:r=Rl,repeat:a=0,repeatDelay:u=0,repeatType:h,velocity:g=0}=e;let{keyframes:v}=e;const y=r||Rl;y!==Rl&&typeof v[0]!="number"&&(this.mixKeyframes=Ql(wS,Iy(v[0],v[1])),v=[0,100]);const w=y({...e,keyframes:v});h==="mirror"&&(this.mirroredGenerator=y({...e,keyframes:[...v].reverse(),velocity:-g})),w.calculatedDuration===null&&(w.calculatedDuration=y0(w));const{calculatedDuration:A}=w;this.calculatedDuration=A,this.resolvedDuration=A+u,this.totalDuration=this.resolvedDuration*(a+1)-u,this.generator=w}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:a,totalDuration:u,mixKeyframes:h,mirroredGenerator:g,resolvedDuration:v,calculatedDuration:y}=this;if(this.startTime===null)return a.next(0);const{delay:w=0,keyframes:A,repeat:C,repeatType:T,repeatDelay:R,type:k,onUpdate:D,finalKeyframe:L}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const U=this.currentTime-w*(this.playbackSpeed>=0?1:-1),W=this.playbackSpeed>=0?U<0:U>u;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let j=this.currentTime,q=a;if(C){const ue=Math.min(this.currentTime,u)/v;let se=Math.floor(ue),Ue=ue%1;!Ue&&ue>=1&&(Ue=1),Ue===1&&se--,se=Math.min(se,C+1),!!(se%2)&&(T==="reverse"?(Ue=1-Ue,R&&(Ue-=R/v)):T==="mirror"&&(q=g)),j=ii(0,1,Ue)*v}const Z=W?{done:!1,value:A[0]}:q.next(j);h&&(Z.value=h(Z.value));let{done:te}=Z;!W&&y!==null&&(te=this.playbackSpeed>=0?this.currentTime>=u:this.currentTime<=0);const ee=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&te);return ee&&k!==Af&&(Z.value=w0(A,this.options,L,this.speed)),D&&D(Z.value),ee&&this.finish(),Z}then(e,r){return this.finished.then(e,r)}get duration(){return is(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+is(e)}get time(){return is(this.currentTime)}set time(e){var r;e=Ls(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Rn.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=is(this.currentTime))}play(){var u,h;if(this.isStopped)return;const{driver:e=rS,startTime:r}=this.options;this.driver||(this.driver=e(g=>this.tick(g))),(h=(u=this.options).onPlay)==null||h.call(u);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Rn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function vS(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Na=t=>t*180/Math.PI,Sf=t=>{const e=Na(Math.atan2(t[1],t[0]));return _f(e)},bS={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Sf,rotateZ:Sf,skewX:t=>Na(Math.atan(t[1])),skewY:t=>Na(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},_f=t=>(t=t%360,t<0&&(t+=360),t),Og=Sf,Pg=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Dg=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),ES={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Pg,scaleY:Dg,scale:t=>(Pg(t)+Dg(t))/2,rotateX:t=>_f(Na(Math.atan2(t[6],t[5]))),rotateY:t=>_f(Na(Math.atan2(-t[2],t[0]))),rotateZ:Og,rotate:Og,skewX:t=>Na(Math.atan(t[4])),skewY:t=>Na(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Nf(t){return t.includes("scale")?1:0}function Tf(t,e){if(!t||t==="none")return Nf(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,u;if(r)a=ES,u=r;else{const v=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=bS,u=v}if(!u)return Nf(e);const h=a[e],g=u[1].split(",").map(AS);return typeof h=="function"?h(g):g[h]}const CS=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return Tf(r,e)};function AS(t){return parseFloat(t.trim())}const Po=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Do=new Set(Po),Mg=t=>t===Oo||t===je,SS=new Set(["x","y","z"]),_S=Po.filter(t=>!SS.has(t));function NS(t){const e=[];return _S.forEach(r=>{const a=t.getValue(r);a!==void 0&&(e.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),e}const zi={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Tf(e,"x"),y:(t,{transform:e})=>Tf(e,"y")};zi.translateX=zi.x;zi.translateY=zi.y;const Ta=new Set;let If=!1,Rf=!1,kf=!1;function Py(){if(Rf){const t=Array.from(Ta).filter(a=>a.needsMeasurement),e=new Set(t.map(a=>a.element)),r=new Map;e.forEach(a=>{const u=NS(a);u.length&&(r.set(a,u),a.render())}),t.forEach(a=>a.measureInitialState()),e.forEach(a=>{a.render();const u=r.get(a);u&&u.forEach(([h,g])=>{var v;(v=a.getValue(h))==null||v.set(g)})}),t.forEach(a=>a.measureEndState()),t.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}Rf=!1,If=!1,Ta.forEach(t=>t.complete(kf)),Ta.clear()}function Dy(){Ta.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Rf=!0)})}function TS(){kf=!0,Dy(),Py(),kf=!1}class E0{constructor(e,r,a,u,h,g=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=a,this.motionValue=u,this.element=h,this.isAsync=g}scheduleResolve(){this.state="scheduled",this.isAsync?(Ta.add(this),If||(If=!0,nr.read(Dy),nr.resolveKeyframes(Py))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:a,motionValue:u}=this;if(e[0]===null){const h=u==null?void 0:u.get(),g=e[e.length-1];if(h!==void 0)e[0]=h;else if(a&&r){const v=a.readValue(r,g);v!=null&&(e[0]=v)}e[0]===void 0&&(e[0]=g),u&&h===void 0&&u.set(e[0])}vS(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ta.delete(this)}cancel(){this.state==="scheduled"&&(Ta.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const IS=t=>t.startsWith("--");function RS(t,e,r){IS(e)?t.style.setProperty(e,r):t.style[e]=r}const kS=u0(()=>window.ScrollTimeline!==void 0),OS={};function PS(t,e){const r=u0(t);return()=>OS[e]??r()}const My=PS(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Al=([t,e,r,a])=>`cubic-bezier(${t}, ${e}, ${r}, ${a})`,jg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Al([0,.65,.55,1]),circOut:Al([.55,0,1,.45]),backIn:Al([.31,.01,.66,-.59]),backOut:Al([.33,1.53,.69,.99])};function jy(t,e){if(t)return typeof t=="function"?My()?Ry(t,e):"ease-out":wy(t)?Al(t):Array.isArray(t)?t.map(r=>jy(r,e)||jg.easeOut):jg[t]}function DS(t,e,r,{delay:a=0,duration:u=300,repeat:h=0,repeatType:g="loop",ease:v="easeOut",times:y}={},w=void 0){const A={[e]:r};y&&(A.offset=y);const C=jy(v,u);Array.isArray(C)&&(A.easing=C);const T={delay:a,duration:u,easing:Array.isArray(C)?"linear":C,fill:"both",iterations:h+1,direction:g==="reverse"?"alternate":"normal"};return w&&(T.pseudoElement=w),t.animate(A,T)}function By(t){return typeof t=="function"&&"applyToOptions"in t}function MS({type:t,...e}){return By(t)&&My()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class jS extends v0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:a,keyframes:u,pseudoElement:h,allowFlatten:g=!1,finalKeyframe:v,onComplete:y}=e;this.isPseudoElement=!!h,this.allowFlatten=g,this.options=e,c0(typeof e.type!="string");const w=MS(e);this.animation=DS(r,a,u,w,h),w.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!h){const A=w0(u,this.options,v,this.speed);this.updateMotionValue?this.updateMotionValue(A):RS(r,a,A),this.animation.cancel()}y==null||y(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,a;const e=((a=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:a.call(r).duration)||0;return is(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+is(e)}get time(){return is(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ls(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&kS()?(this.animation.timeline=e,as):r(this)}}const Ly={anticipate:gy,backInOut:my,circInOut:xy};function BS(t){return t in Ly}function LS(t){typeof t.ease=="string"&&BS(t.ease)&&(t.ease=Ly[t.ease])}const Bg=10;class FS extends jS{constructor(e){LS(e),Oy(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:a,onComplete:u,element:h,...g}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const v=new b0({...g,autoplay:!1}),y=Ls(this.finishedTime??this.time);r.setWithVelocity(v.sample(y-Bg).value,v.sample(y).value,Bg),v.stop()}}const Lg=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&($i.test(t)||t==="0")&&!t.startsWith("url("));function US(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function VS(t,e,r,a){const u=t[0];if(u===null)return!1;if(e==="display"||e==="visibility")return!0;const h=t[t.length-1],g=Lg(u,e),v=Lg(h,e);return!g||!v?!1:US(t)||(r==="spring"||By(r))&&a}function Of(t){t.duration=0,t.type="keyframes"}const WS=new Set(["opacity","clipPath","filter","transform"]),zS=u0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function HS(t){var A;const{motionValue:e,name:r,repeatDelay:a,repeatType:u,damping:h,type:g}=t;if(!(((A=e==null?void 0:e.owner)==null?void 0:A.current)instanceof HTMLElement))return!1;const{onUpdate:y,transformTemplate:w}=e.owner.getProps();return zS()&&r&&WS.has(r)&&(r!=="transform"||!w)&&!y&&!a&&u!=="mirror"&&h!==0&&g!=="inertia"}const GS=40;class $S extends v0{constructor({autoplay:e=!0,delay:r=0,type:a="keyframes",repeat:u=0,repeatDelay:h=0,repeatType:g="loop",keyframes:v,name:y,motionValue:w,element:A,...C}){var k;super(),this.stop=()=>{var D,L;this._animation&&(this._animation.stop(),(D=this.stopTimeline)==null||D.call(this)),(L=this.keyframeResolver)==null||L.cancel()},this.createdAt=Rn.now();const T={autoplay:e,delay:r,type:a,repeat:u,repeatDelay:h,repeatType:g,name:y,motionValue:w,element:A,...C},R=(A==null?void 0:A.KeyframeResolver)||E0;this.keyframeResolver=new R(v,(D,L,U)=>this.onKeyframesResolved(D,L,T,!U),y,w,A),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(e,r,a,u){this.keyframeResolver=void 0;const{name:h,type:g,velocity:v,delay:y,isHandoff:w,onUpdate:A}=a;this.resolvedAt=Rn.now(),VS(e,h,g,v)||((ai.instantAnimations||!y)&&(A==null||A(w0(e,a,r))),e[0]=e[e.length-1],Of(a),a.repeat=0);const T={startTime:u?this.resolvedAt?this.resolvedAt-this.createdAt>GS?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:e},R=!w&&HS(T)?new FS({...T,element:T.motionValue.owner.current}):new b0(T);R.finished.then(()=>this.notifyFinished()).catch(as),this.pendingTimeline&&(this.stopTimeline=R.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=R}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),TS()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const XS=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function YS(t){const e=XS.exec(t);if(!e)return[,];const[,r,a,u]=e;return[`--${r??a}`,u]}function Fy(t,e,r=1){const[a,u]=YS(t);if(!a)return;const h=window.getComputedStyle(e).getPropertyValue(a);if(h){const g=h.trim();return ay(g)?parseFloat(g):g}return m0(u)?Fy(u,e,r+1):u}function C0(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Uy=new Set(["width","height","top","left","right","bottom",...Po]),qS={test:t=>t==="auto",parse:t=>t},Vy=t=>e=>e.test(t),Wy=[Oo,je,Fs,Ui,UA,FA,qS],Fg=t=>Wy.find(Vy(t));function KS(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||ly(t):!0}const ZS=new Set(["brightness","contrast","saturate","opacity"]);function QS(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[a]=r.match(g0)||[];if(!a)return t;const u=r.replace(a,"");let h=ZS.has(e)?1:0;return a!==r&&(h*=100),e+"("+h+u+")"}const JS=/\b([a-z-]*)\(.*?\)/gu,Pf={...$i,getAnimatableNone:t=>{const e=t.match(JS);return e?e.map(QS).join(" "):t}},Ug={...Oo,transform:Math.round},e_={rotate:Ui,rotateX:Ui,rotateY:Ui,rotateZ:Ui,scale:yu,scaleX:yu,scaleY:yu,scaleZ:yu,skew:Ui,skewX:Ui,skewY:Ui,distance:je,translateX:je,translateY:je,translateZ:je,x:je,y:je,z:je,perspective:je,transformPerspective:je,opacity:Wl,originX:Ng,originY:Ng,originZ:je},A0={borderWidth:je,borderTopWidth:je,borderRightWidth:je,borderBottomWidth:je,borderLeftWidth:je,borderRadius:je,radius:je,borderTopLeftRadius:je,borderTopRightRadius:je,borderBottomRightRadius:je,borderBottomLeftRadius:je,width:je,maxWidth:je,height:je,maxHeight:je,top:je,right:je,bottom:je,left:je,inset:je,insetBlock:je,insetBlockStart:je,insetBlockEnd:je,insetInline:je,insetInlineStart:je,insetInlineEnd:je,padding:je,paddingTop:je,paddingRight:je,paddingBottom:je,paddingLeft:je,paddingBlock:je,paddingBlockStart:je,paddingBlockEnd:je,paddingInline:je,paddingInlineStart:je,paddingInlineEnd:je,margin:je,marginTop:je,marginRight:je,marginBottom:je,marginLeft:je,marginBlock:je,marginBlockStart:je,marginBlockEnd:je,marginInline:je,marginInlineStart:je,marginInlineEnd:je,backgroundPositionX:je,backgroundPositionY:je,...e_,zIndex:Ug,fillOpacity:Wl,strokeOpacity:Wl,numOctaves:Ug},t_={...A0,color:Ir,backgroundColor:Ir,outlineColor:Ir,fill:Ir,stroke:Ir,borderColor:Ir,borderTopColor:Ir,borderRightColor:Ir,borderBottomColor:Ir,borderLeftColor:Ir,filter:Pf,WebkitFilter:Pf},zy=t=>t_[t];function Hy(t,e){let r=zy(t);return r!==Pf&&(r=$i),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const r_=new Set(["auto","none","0"]);function n_(t,e,r){let a=0,u;for(;a<t.length&&!u;){const h=t[a];typeof h=="string"&&!r_.has(h)&&zl(h).values.length&&(u=t[a]),a++}if(u&&r)for(const h of e)t[h]=Hy(r,u)}class s_ extends E0{constructor(e,r,a,u,h){super(e,r,a,u,h,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let A=0;A<e.length;A++){let C=e[A];if(typeof C=="string"&&(C=C.trim(),m0(C))){const T=Fy(C,r.current);T!==void 0&&(e[A]=T),A===e.length-1&&(this.finalKeyframe=C)}}if(this.resolveNoneKeyframes(),!Uy.has(a)||e.length!==2)return;const[u,h]=e,g=Fg(u),v=Fg(h),y=_g(u),w=_g(h);if(y!==w&&zi[a]){this.needsMeasurement=!0;return}if(g!==v)if(Mg(g)&&Mg(v))for(let A=0;A<e.length;A++){const C=e[A];typeof C=="string"&&(e[A]=parseFloat(C))}else zi[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,a=[];for(let u=0;u<e.length;u++)(e[u]===null||KS(e[u]))&&a.push(u);a.length&&n_(e,a,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:a}=this;if(!e||!e.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zi[a](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const u=r[r.length-1];u!==void 0&&e.getValue(a,u).jump(u,!1)}measureEndState(){var v;const{element:e,name:r,unresolvedKeyframes:a}=this;if(!e||!e.current)return;const u=e.getValue(r);u&&u.jump(this.measuredOrigin,!1);const h=a.length-1,g=a[h];a[h]=zi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),g!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=g),(v=this.removedTransforms)!=null&&v.length&&this.removedTransforms.forEach(([y,w])=>{e.getValue(y).set(w)}),this.resolveNoneKeyframes()}}function i_(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let a=document;const u=(r==null?void 0:r[t])??a.querySelectorAll(t);return u?Array.from(u):[]}return Array.from(t)}const Gy=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function a_(t){return oy(t)&&"offsetHeight"in t}const Vg=30,o_=t=>!isNaN(parseFloat(t));class l_{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{var h;const u=Rn.now();if(this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((h=this.events.change)==null||h.notify(this.current),this.dependents))for(const g of this.dependents)g.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Rn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=o_(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new d0);const a=this.events[e].add(r);return e==="change"?()=>{a(),nr.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-a}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Rn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Vg)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Vg);return cy(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function To(t,e){return new l_(t,e)}const{schedule:S0}=vy(queueMicrotask,!1),bs={x:!1,y:!1};function $y(){return bs.x||bs.y}function c_(t){return t==="x"||t==="y"?bs[t]?null:(bs[t]=!0,()=>{bs[t]=!1}):bs.x||bs.y?null:(bs.x=bs.y=!0,()=>{bs.x=bs.y=!1})}function Xy(t,e){const r=i_(t),a=new AbortController,u={passive:!0,...e,signal:a.signal};return[r,u,()=>a.abort()]}function Wg(t){return!(t.pointerType==="touch"||$y())}function u_(t,e,r={}){const[a,u,h]=Xy(t,r),g=v=>{if(!Wg(v))return;const{target:y}=v,w=e(y,v);if(typeof w!="function"||!y)return;const A=C=>{Wg(C)&&(w(C),y.removeEventListener("pointerleave",A))};y.addEventListener("pointerleave",A,u)};return a.forEach(v=>{v.addEventListener("pointerenter",g,u)}),h}const Yy=(t,e)=>e?t===e?!0:Yy(t,e.parentElement):!1,_0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,d_=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qy(t){return d_.has(t.tagName)||t.isContentEditable===!0}const Cu=new WeakSet;function zg(t){return e=>{e.key==="Enter"&&t(e)}}function zh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const h_=(t,e)=>{const r=t.currentTarget;if(!r)return;const a=zg(()=>{if(Cu.has(r))return;zh(r,"down");const u=zg(()=>{zh(r,"up")}),h=()=>zh(r,"cancel");r.addEventListener("keyup",u,e),r.addEventListener("blur",h,e)});r.addEventListener("keydown",a,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),e)};function Hg(t){return _0(t)&&!$y()}function f_(t,e,r={}){const[a,u,h]=Xy(t,r),g=v=>{const y=v.currentTarget;if(!Hg(v))return;Cu.add(y);const w=e(y,v),A=(R,k)=>{window.removeEventListener("pointerup",C),window.removeEventListener("pointercancel",T),Cu.has(y)&&Cu.delete(y),Hg(R)&&typeof w=="function"&&w(R,{success:k})},C=R=>{A(R,y===window||y===document||r.useGlobalTarget||Yy(y,R.target))},T=R=>{A(R,!1)};window.addEventListener("pointerup",C,u),window.addEventListener("pointercancel",T,u)};return a.forEach(v=>{(r.useGlobalTarget?window:v).addEventListener("pointerdown",g,u),a_(v)&&(v.addEventListener("focus",w=>h_(w,u)),!qy(v)&&!v.hasAttribute("tabindex")&&(v.tabIndex=0))}),h}function Ky(t){return oy(t)&&"ownerSVGElement"in t}function m_(t){return Ky(t)&&t.tagName==="svg"}const hn=t=>!!(t&&t.getVelocity),g_=[...Wy,Ir,$i],p_=t=>g_.find(Vy(t)),Zy=z.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function x_(t=!0){const e=z.useContext(a0);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:u}=e,h=z.useId();z.useEffect(()=>{if(t)return u(h)},[t]);const g=z.useCallback(()=>t&&a&&a(h),[h,a,t]);return!r&&a?[!1,g]:[!0]}const Qy=z.createContext({strict:!1}),Gg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Io={};for(const t in Gg)Io[t]={isEnabled:e=>Gg[t].some(r=>!!e[r])};function y_(t){for(const e in t)Io[e]={...Io[e],...t[e]}}const w_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Bu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||w_.has(t)}let Jy=t=>!Bu(t);function v_(t){typeof t=="function"&&(Jy=e=>e.startsWith("on")?!Bu(e):t(e))}try{v_(require("@emotion/is-prop-valid").default)}catch{}function b_(t,e,r){const a={};for(const u in t)u==="values"&&typeof t.values=="object"||(Jy(u)||r===!0&&Bu(u)||!e&&!Bu(u)||t.draggable&&u.startsWith("onDrag"))&&(a[u]=t[u]);return a}const qu=z.createContext({});function Ku(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Hl(t){return typeof t=="string"||Array.isArray(t)}const N0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],T0=["initial",...N0];function Zu(t){return Ku(t.animate)||T0.some(e=>Hl(t[e]))}function ew(t){return!!(Zu(t)||t.variants)}function E_(t,e){if(Zu(t)){const{initial:r,animate:a}=t;return{initial:r===!1||Hl(r)?r:void 0,animate:Hl(a)?a:void 0}}return t.inherit!==!1?e:{}}function C_(t){const{initial:e,animate:r}=E_(t,z.useContext(qu));return z.useMemo(()=>({initial:e,animate:r}),[$g(e),$g(r)])}function $g(t){return Array.isArray(t)?t.join(" "):t}function Xg(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const vl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(je.test(t))t=parseFloat(t);else return t;const r=Xg(t,e.target.x),a=Xg(t,e.target.y);return`${r}% ${a}%`}},A_={correct:(t,{treeScale:e,projectionDelta:r})=>{const a=t,u=$i.parse(t);if(u.length>5)return a;const h=$i.createTransformer(t),g=typeof u[0]!="number"?1:0,v=r.x.scale*e.x,y=r.y.scale*e.y;u[0+g]/=v,u[1+g]/=y;const w=ur(v,y,.5);return typeof u[2+g]=="number"&&(u[2+g]/=w),typeof u[3+g]=="number"&&(u[3+g]/=w),h(u)}},Df={borderRadius:{...vl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vl,borderTopRightRadius:vl,borderBottomLeftRadius:vl,borderBottomRightRadius:vl,boxShadow:A_};function tw(t,{layout:e,layoutId:r}){return Do.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!Df[t]||t==="opacity")}const S_={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},__=Po.length;function N_(t,e,r){let a="",u=!0;for(let h=0;h<__;h++){const g=Po[h],v=t[g];if(v===void 0)continue;let y=!0;if(typeof v=="number"?y=v===(g.startsWith("scale")?1:0):y=parseFloat(v)===0,!y||r){const w=Gy(v,A0[g]);if(!y){u=!1;const A=S_[g]||g;a+=`${A}(${w}) `}r&&(e[g]=w)}}return a=a.trim(),r?a=r(e,u?"":a):u&&(a="none"),a}function I0(t,e,r){const{style:a,vars:u,transformOrigin:h}=t;let g=!1,v=!1;for(const y in e){const w=e[y];if(Do.has(y)){g=!0;continue}else if(Ey(y)){u[y]=w;continue}else{const A=Gy(w,A0[y]);y.startsWith("origin")?(v=!0,h[y]=A):a[y]=A}}if(e.transform||(g||r?a.transform=N_(e,t.transform,r):a.transform&&(a.transform="none")),v){const{originX:y="50%",originY:w="50%",originZ:A=0}=h;a.transformOrigin=`${y} ${w} ${A}`}}const R0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rw(t,e,r){for(const a in e)!hn(e[a])&&!tw(a,r)&&(t[a]=e[a])}function T_({transformTemplate:t},e){return z.useMemo(()=>{const r=R0();return I0(r,e,t),Object.assign({},r.vars,r.style)},[e])}function I_(t,e){const r=t.style||{},a={};return rw(a,r,t),Object.assign(a,T_(t,e)),a}function R_(t,e){const r={},a=I_(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=a,r}const k_={offset:"stroke-dashoffset",array:"stroke-dasharray"},O_={offset:"strokeDashoffset",array:"strokeDasharray"};function P_(t,e,r=1,a=0,u=!0){t.pathLength=1;const h=u?k_:O_;t[h.offset]=je.transform(-a);const g=je.transform(e),v=je.transform(r);t[h.array]=`${g} ${v}`}const D_=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function nw(t,{attrX:e,attrY:r,attrScale:a,pathLength:u,pathSpacing:h=1,pathOffset:g=0,...v},y,w,A){if(I0(t,v,w),y){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:C,style:T}=t;C.transform&&(T.transform=C.transform,delete C.transform),(T.transform||C.transformOrigin)&&(T.transformOrigin=C.transformOrigin??"50% 50%",delete C.transformOrigin),T.transform&&(T.transformBox=(A==null?void 0:A.transformBox)??"fill-box",delete C.transformBox);for(const R of D_)C[R]!==void 0&&(T[R]=C[R],delete C[R]);e!==void 0&&(C.x=e),r!==void 0&&(C.y=r),a!==void 0&&(C.scale=a),u!==void 0&&P_(C,u,h,g,!1)}const sw=()=>({...R0(),attrs:{}}),iw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function M_(t,e,r,a){const u=z.useMemo(()=>{const h=sw();return nw(h,e,iw(a),t.transformTemplate,t.style),{...h.attrs,style:{...h.style}}},[e]);if(t.style){const h={};rw(h,t.style,t),u.style={...h,...u.style}}return u}const j_=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function k0(t){return typeof t!="string"||t.includes("-")?!1:!!(j_.indexOf(t)>-1||/[A-Z]/u.test(t))}function B_(t,e,r,{latestValues:a},u,h=!1,g){const y=(g??k0(t)?M_:R_)(e,a,u,t),w=b_(e,typeof t=="string",h),A=t!==z.Fragment?{...w,...y,ref:r}:{},{children:C}=e,T=z.useMemo(()=>hn(C)?C.get():C,[C]);return z.createElement(t,{...A,children:T})}function Yg(t){const e=[{},{}];return t==null||t.values.forEach((r,a)=>{e[0][a]=r.get(),e[1][a]=r.getVelocity()}),e}function O0(t,e,r,a){if(typeof e=="function"){const[u,h]=Yg(a);e=e(r!==void 0?r:t.custom,u,h)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[u,h]=Yg(a);e=e(r!==void 0?r:t.custom,u,h)}return e}function Au(t){return hn(t)?t.get():t}function L_({scrapeMotionValuesFromProps:t,createRenderState:e},r,a,u){return{latestValues:F_(r,a,u,t),renderState:e()}}function F_(t,e,r,a){const u={},h=a(t,{});for(const T in h)u[T]=Au(h[T]);let{initial:g,animate:v}=t;const y=Zu(t),w=ew(t);e&&w&&!y&&t.inherit!==!1&&(g===void 0&&(g=e.initial),v===void 0&&(v=e.animate));let A=r?r.initial===!1:!1;A=A||g===!1;const C=A?v:g;if(C&&typeof C!="boolean"&&!Ku(C)){const T=Array.isArray(C)?C:[C];for(let R=0;R<T.length;R++){const k=O0(t,T[R]);if(k){const{transitionEnd:D,transition:L,...U}=k;for(const W in U){let j=U[W];if(Array.isArray(j)){const q=A?j.length-1:0;j=j[q]}j!==null&&(u[W]=j)}for(const W in D)u[W]=D[W]}}}return u}const aw=t=>(e,r)=>{const a=z.useContext(qu),u=z.useContext(a0),h=()=>L_(t,e,a,u);return r?h():wA(h)};function P0(t,e,r){var h;const{style:a}=t,u={};for(const g in a)(hn(a[g])||e.style&&hn(e.style[g])||tw(g,t)||((h=r==null?void 0:r.getValue(g))==null?void 0:h.liveStyle)!==void 0)&&(u[g]=a[g]);return u}const U_=aw({scrapeMotionValuesFromProps:P0,createRenderState:R0});function ow(t,e,r){const a=P0(t,e,r);for(const u in t)if(hn(t[u])||hn(e[u])){const h=Po.indexOf(u)!==-1?"attr"+u.charAt(0).toUpperCase()+u.substring(1):u;a[h]=t[u]}return a}const V_=aw({scrapeMotionValuesFromProps:ow,createRenderState:sw}),W_=Symbol.for("motionComponentSymbol");function z_(t,e,r){const a=z.useRef(r);z.useInsertionEffect(()=>{a.current=r});const u=z.useRef(null);return z.useCallback(h=>{var v;h&&((v=t.onMount)==null||v.call(t,h)),e&&(h?e.mount(h):e.unmount());const g=a.current;if(typeof g=="function")if(h){const y=g(h);typeof y=="function"&&(u.current=y)}else u.current?(u.current(),u.current=null):g(h);else g&&(g.current=h)},[e])}const D0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),H_="framerAppearId",lw="data-"+D0(H_),cw=z.createContext({});function Sl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function G_(t,e,r,a,u,h){var L,U;const{visualElement:g}=z.useContext(qu),v=z.useContext(Qy),y=z.useContext(a0),w=z.useContext(Zy).reducedMotion,A=z.useRef(null);a=a||v.renderer,!A.current&&a&&(A.current=a(t,{visualState:e,parent:g,props:r,presenceContext:y,blockInitialAnimation:y?y.initial===!1:!1,reducedMotionConfig:w,isSVG:h}));const C=A.current,T=z.useContext(cw);C&&!C.projection&&u&&(C.type==="html"||C.type==="svg")&&$_(A.current,r,u,T);const R=z.useRef(!1);z.useInsertionEffect(()=>{C&&R.current&&C.update(r,y)});const k=r[lw],D=z.useRef(!!k&&!((L=window.MotionHandoffIsComplete)!=null&&L.call(window,k))&&((U=window.MotionHasOptimisedAnimation)==null?void 0:U.call(window,k)));return vA(()=>{C&&(R.current=!0,window.MotionIsMounted=!0,C.updateFeatures(),C.scheduleRenderMicrotask(),D.current&&C.animationState&&C.animationState.animateChanges())}),z.useEffect(()=>{C&&(!D.current&&C.animationState&&C.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{var W;(W=window.MotionHandoffMarkAsComplete)==null||W.call(window,k)}),D.current=!1),C.enteringChildren=void 0)}),C}function $_(t,e,r,a){const{layoutId:u,layout:h,drag:g,dragConstraints:v,layoutScroll:y,layoutRoot:w,layoutCrossfade:A}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:uw(t.parent)),t.projection.setOptions({layoutId:u,layout:h,alwaysMeasureLayout:!!g||v&&Sl(v),visualElement:t,animationType:typeof h=="string"?h:"both",initialPromotionConfig:a,crossfade:A,layoutScroll:y,layoutRoot:w})}function uw(t){if(t)return t.options.allowProjection!==!1?t.projection:uw(t.parent)}function Hh(t,{forwardMotionProps:e=!1,type:r}={},a,u){a&&y_(a);const h=r?r==="svg":k0(t),g=h?V_:U_;function v(w,A){let C;const T={...z.useContext(Zy),...w,layoutId:X_(w)},{isStatic:R}=T,k=C_(w),D=g(w,R);if(!R&&i0){Y_();const L=q_(T);C=L.MeasureLayout,k.visualElement=G_(t,D,T,u,L.ProjectionNode,h)}return x.jsxs(qu.Provider,{value:k,children:[C&&k.visualElement?x.jsx(C,{visualElement:k.visualElement,...T}):null,B_(t,w,z_(D,k.visualElement,A),D,R,e,h)]})}v.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const y=z.forwardRef(v);return y[W_]=t,y}function X_({layoutId:t}){const e=z.useContext(iy).id;return e&&t!==void 0?e+"-"+t:t}function Y_(t,e){z.useContext(Qy).strict}function q_(t){const{drag:e,layout:r}=Io;if(!e&&!r)return{};const a={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function K_(t,e){if(typeof Proxy>"u")return Hh;const r=new Map,a=(h,g)=>Hh(h,g,t,e),u=(h,g)=>a(h,g);return new Proxy(u,{get:(h,g)=>g==="create"?a:(r.has(g)||r.set(g,Hh(g,void 0,t,e)),r.get(g))})}function dw({top:t,left:e,right:r,bottom:a}){return{x:{min:e,max:r},y:{min:t,max:a}}}function Z_({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Q_(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),a=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}function Gh(t){return t===void 0||t===1}function Mf({scale:t,scaleX:e,scaleY:r}){return!Gh(t)||!Gh(e)||!Gh(r)}function ba(t){return Mf(t)||hw(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function hw(t){return qg(t.x)||qg(t.y)}function qg(t){return t&&t!=="0%"}function Lu(t,e,r){const a=t-r,u=e*a;return r+u}function Kg(t,e,r,a,u){return u!==void 0&&(t=Lu(t,u,a)),Lu(t,r,a)+e}function jf(t,e=0,r=1,a,u){t.min=Kg(t.min,e,r,a,u),t.max=Kg(t.max,e,r,a,u)}function fw(t,{x:e,y:r}){jf(t.x,e.translate,e.scale,e.originPoint),jf(t.y,r.translate,r.scale,r.originPoint)}const Zg=.999999999999,Qg=1.0000000000001;function J_(t,e,r,a=!1){const u=r.length;if(!u)return;e.x=e.y=1;let h,g;for(let v=0;v<u;v++){h=r[v],g=h.projectionDelta;const{visualElement:y}=h.options;y&&y.props.style&&y.props.style.display==="contents"||(a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&vo(t,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),g&&(e.x*=g.x.scale,e.y*=g.y.scale,fw(t,g)),a&&ba(h.latestValues)&&vo(t,h.latestValues))}e.x<Qg&&e.x>Zg&&(e.x=1),e.y<Qg&&e.y>Zg&&(e.y=1)}function wo(t,e){t.min=t.min+e,t.max=t.max+e}function Jg(t,e,r,a,u=.5){const h=ur(t.min,t.max,u);jf(t,e,r,h,a)}function vo(t,e){Jg(t.x,e.x,e.scaleX,e.scale,e.originX),Jg(t.y,e.y,e.scaleY,e.scale,e.originY)}function mw(t,e){return dw(Q_(t.getBoundingClientRect(),e))}function e4(t,e,r){const a=mw(t,r),{scroll:u}=e;return u&&(wo(a.x,u.offset.x),wo(a.y,u.offset.y)),a}const ep=()=>({translate:0,scale:1,origin:0,originPoint:0}),bo=()=>({x:ep(),y:ep()}),tp=()=>({min:0,max:0}),Fr=()=>({x:tp(),y:tp()}),Bf={current:null},gw={current:!1};function t4(){if(gw.current=!0,!!i0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Bf.current=t.matches;t.addEventListener("change",e),e()}else Bf.current=!1}const r4=new WeakMap;function n4(t,e,r){for(const a in e){const u=e[a],h=r[a];if(hn(u))t.addValue(a,u);else if(hn(h))t.addValue(a,To(u,{owner:t}));else if(h!==u)if(t.hasValue(a)){const g=t.getValue(a);g.liveStyle===!0?g.jump(u):g.hasAnimated||g.set(u)}else{const g=t.getStaticValue(a);t.addValue(a,To(g!==void 0?g:u,{owner:t}))}}for(const a in r)e[a]===void 0&&t.removeValue(a);return e}const rp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class s4{scrapeMotionValuesFromProps(e,r,a){return{}}constructor({parent:e,props:r,presenceContext:a,reducedMotionConfig:u,blockInitialAnimation:h,visualState:g},v={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=E0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=Rn.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,nr.render(this.render,!1,!0))};const{latestValues:y,renderState:w}=g;this.latestValues=y,this.baseTarget={...y},this.initialValues=r.initial?{...y}:{},this.renderState=w,this.parent=e,this.props=r,this.presenceContext=a,this.depth=e?e.depth+1:0,this.reducedMotionConfig=u,this.options=v,this.blockInitialAnimation=!!h,this.isControllingVariants=Zu(r),this.isVariantNode=ew(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:A,...C}=this.scrapeMotionValuesFromProps(r,{},this);for(const T in C){const R=C[T];y[T]!==void 0&&hn(R)&&R.set(y[T])}}mount(e){var r;this.current=e,r4.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,u)=>this.bindToMotionValue(u,a)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(gw.current||t4(),this.shouldReduceMotion=Bf.current),(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Gi(this.notifyUpdate),Gi(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const a=this.features[r];a&&(a.unmount(),a.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const a=Do.has(e);a&&this.onBindTransform&&this.onBindTransform();const u=r.on("change",g=>{this.latestValues[e]=g,this.props.onUpdate&&nr.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{u(),h&&h(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Io){const r=Io[e];if(!r)continue;const{isEnabled:a,Feature:u}=r;if(!this.features[e]&&u&&a(this.props)&&(this.features[e]=new u(this)),this.features[e]){const h=this.features[e];h.isMounted?h.update():(h.mount(),h.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Fr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<rp.length;a++){const u=rp[a];this.propEventSubscriptions[u]&&(this.propEventSubscriptions[u](),delete this.propEventSubscriptions[u]);const h="on"+u,g=e[h];g&&(this.propEventSubscriptions[u]=this.on(u,g))}this.prevMotionValues=n4(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const a=this.values.get(e);r!==a&&(a&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let a=this.values.get(e);return a===void 0&&r!==void 0&&(a=To(r===null?void 0:r,{owner:this}),this.addValue(e,a)),a}readValue(e,r){let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(ay(a)||ly(a))?a=parseFloat(a):!p_(a)&&$i.test(r)&&(a=Hy(e,r)),this.setBaseTarget(e,hn(a)?a.get():a)),hn(a)?a.get():a}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var h;const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const g=O0(this.props,r,(h=this.presenceContext)==null?void 0:h.custom);g&&(a=g[e])}if(r&&a!==void 0)return a;const u=this.getBaseTargetFromProps(this.props,e);return u!==void 0&&!hn(u)?u:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new d0),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){S0.render(this.render)}}class pw extends s4{constructor(){super(...arguments),this.KeyframeResolver=s_}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:a}){delete r[e],delete a[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;hn(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function xw(t,{style:e,vars:r},a,u){const h=t.style;let g;for(g in e)h[g]=e[g];u==null||u.applyProjectionStyles(h,a);for(g in r)h.setProperty(g,r[g])}function i4(t){return window.getComputedStyle(t)}class a4 extends pw{constructor(){super(...arguments),this.type="html",this.renderInstance=xw}readValueFromInstance(e,r){var a;if(Do.has(r))return(a=this.projection)!=null&&a.isProjecting?Nf(r):CS(e,r);{const u=i4(e),h=(Ey(r)?u.getPropertyValue(r):u[r])||0;return typeof h=="string"?h.trim():h}}measureInstanceViewportBox(e,{transformPagePoint:r}){return mw(e,r)}build(e,r,a){I0(e,r,a.transformTemplate)}scrapeMotionValuesFromProps(e,r,a){return P0(e,r,a)}}const yw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function o4(t,e,r,a){xw(t,e,void 0,a);for(const u in e.attrs)t.setAttribute(yw.has(u)?u:D0(u),e.attrs[u])}class l4 extends pw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Fr}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Do.has(r)){const a=zy(r);return a&&a.default||0}return r=yw.has(r)?r:D0(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,a){return ow(e,r,a)}build(e,r,a){nw(e,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(e,r,a,u){o4(e,r,a,u)}mount(e){this.isSVGTag=iw(e.tagName),super.mount(e)}}const c4=(t,e)=>e.isSVG??k0(t)?new l4(e):new a4(e,{allowProjection:t!==z.Fragment});function _o(t,e,r){const a=t.getProps();return O0(a,e,r!==void 0?r:a.custom,t)}const Lf=t=>Array.isArray(t);function u4(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,To(r))}function d4(t){return Lf(t)?t[t.length-1]||0:t}function h4(t,e){const r=_o(t,e);let{transitionEnd:a={},transition:u={},...h}=r||{};h={...h,...a};for(const g in h){const v=d4(h[g]);u4(t,g,v)}}function f4(t){return!!(hn(t)&&t.add)}function Ff(t,e){const r=t.getValue("willChange");if(f4(r))return r.add(e);if(!r&&ai.WillChange){const a=new ai.WillChange("auto");t.addValue("willChange",a),a.add(e)}}function ww(t){return t.props[lw]}const m4=t=>t!==null;function g4(t,{repeat:e,repeatType:r="loop"},a){const u=t.filter(m4),h=e&&r!=="loop"&&e%2===1?0:u.length-1;return u[h]}const p4={type:"spring",stiffness:500,damping:25,restSpeed:10},x4=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),y4={type:"keyframes",duration:.8},w4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},v4=(t,{keyframes:e})=>e.length>2?y4:Do.has(t)?t.startsWith("scale")?x4(e[1]):p4:w4;function b4({when:t,delay:e,delayChildren:r,staggerChildren:a,staggerDirection:u,repeat:h,repeatType:g,repeatDelay:v,from:y,elapsed:w,...A}){return!!Object.keys(A).length}const M0=(t,e,r,a={},u,h)=>g=>{const v=C0(a,t)||{},y=v.delay||a.delay||0;let{elapsed:w=0}=a;w=w-Ls(y);const A={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...v,delay:-w,onUpdate:T=>{e.set(T),v.onUpdate&&v.onUpdate(T)},onComplete:()=>{g(),v.onComplete&&v.onComplete()},name:t,motionValue:e,element:h?void 0:u};b4(v)||Object.assign(A,v4(t,A)),A.duration&&(A.duration=Ls(A.duration)),A.repeatDelay&&(A.repeatDelay=Ls(A.repeatDelay)),A.from!==void 0&&(A.keyframes[0]=A.from);let C=!1;if((A.type===!1||A.duration===0&&!A.repeatDelay)&&(Of(A),A.delay===0&&(C=!0)),(ai.instantAnimations||ai.skipAnimations)&&(C=!0,Of(A),A.delay=0),A.allowFlatten=!v.type&&!v.ease,C&&!h&&e.get()!==void 0){const T=g4(A.keyframes,v);if(T!==void 0){nr.update(()=>{A.onUpdate(T),A.onComplete()});return}}return v.isSync?new b0(A):new $S(A)};function E4({protectedKeys:t,needsAnimating:e},r){const a=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,a}function vw(t,e,{delay:r=0,transitionOverride:a,type:u}={}){let{transition:h=t.getDefaultTransition(),transitionEnd:g,...v}=e;a&&(h=a);const y=[],w=u&&t.animationState&&t.animationState.getState()[u];for(const A in v){const C=t.getValue(A,t.latestValues[A]??null),T=v[A];if(T===void 0||w&&E4(w,A))continue;const R={delay:r,...C0(h||{},A)},k=C.get();if(k!==void 0&&!C.isAnimating&&!Array.isArray(T)&&T===k&&!R.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const U=ww(t);if(U){const W=window.MotionHandoffAnimation(U,A,nr);W!==null&&(R.startTime=W,D=!0)}}Ff(t,A),C.start(M0(A,C,T,t.shouldReduceMotion&&Uy.has(A)?{type:!1}:R,t,D));const L=C.animation;L&&y.push(L)}return g&&Promise.all(y).then(()=>{nr.update(()=>{g&&h4(t,g)})}),y}function bw(t,e,r,a=0,u=1){const h=Array.from(t).sort((w,A)=>w.sortNodePosition(A)).indexOf(e),g=t.size,v=(g-1)*a;return typeof r=="function"?r(h,g):u===1?h*a:v-h*a}function Uf(t,e,r={}){var y;const a=_o(t,e,r.type==="exit"?(y=t.presenceContext)==null?void 0:y.custom:void 0);let{transition:u=t.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(u=r.transitionOverride);const h=a?()=>Promise.all(vw(t,a,r)):()=>Promise.resolve(),g=t.variantChildren&&t.variantChildren.size?(w=0)=>{const{delayChildren:A=0,staggerChildren:C,staggerDirection:T}=u;return C4(t,e,w,A,C,T,r)}:()=>Promise.resolve(),{when:v}=u;if(v){const[w,A]=v==="beforeChildren"?[h,g]:[g,h];return w().then(()=>A())}else return Promise.all([h(),g(r.delay)])}function C4(t,e,r=0,a=0,u=0,h=1,g){const v=[];for(const y of t.variantChildren)y.notify("AnimationStart",e),v.push(Uf(y,e,{...g,delay:r+(typeof a=="function"?0:a)+bw(t.variantChildren,y,a,u,h)}).then(()=>y.notify("AnimationComplete",e)));return Promise.all(v)}function A4(t,e,r={}){t.notify("AnimationStart",e);let a;if(Array.isArray(e)){const u=e.map(h=>Uf(t,h,r));a=Promise.all(u)}else if(typeof e=="string")a=Uf(t,e,r);else{const u=typeof e=="function"?_o(t,e,r.custom):e;a=Promise.all(vw(t,u,r))}return a.then(()=>{t.notify("AnimationComplete",e)})}function Ew(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let a=0;a<r;a++)if(e[a]!==t[a])return!1;return!0}const S4=T0.length;function Cw(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?Cw(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<S4;r++){const a=T0[r],u=t.props[a];(Hl(u)||u===!1)&&(e[a]=u)}return e}const _4=[...N0].reverse(),N4=N0.length;function T4(t){return e=>Promise.all(e.map(({animation:r,options:a})=>A4(t,r,a)))}function I4(t){let e=T4(t),r=np(),a=!0;const u=y=>(w,A)=>{var T;const C=_o(t,A,y==="exit"?(T=t.presenceContext)==null?void 0:T.custom:void 0);if(C){const{transition:R,transitionEnd:k,...D}=C;w={...w,...D,...k}}return w};function h(y){e=y(t)}function g(y){const{props:w}=t,A=Cw(t.parent)||{},C=[],T=new Set;let R={},k=1/0;for(let L=0;L<N4;L++){const U=_4[L],W=r[U],j=w[U]!==void 0?w[U]:A[U],q=Hl(j),Z=U===y?W.isActive:null;Z===!1&&(k=L);let te=j===A[U]&&j!==w[U]&&q;if(te&&a&&t.manuallyAnimateOnMount&&(te=!1),W.protectedKeys={...R},!W.isActive&&Z===null||!j&&!W.prevProp||Ku(j)||typeof j=="boolean")continue;const ee=R4(W.prevProp,j);let ue=ee||U===y&&W.isActive&&!te&&q||L>k&&q,se=!1;const Ue=Array.isArray(j)?j:[j];let ge=Ue.reduce(u(U),{});Z===!1&&(ge={});const{prevResolvedValues:he={}}=W,Te={...he,...ge},Ie=fe=>{ue=!0,T.has(fe)&&(se=!0,T.delete(fe)),W.needsAnimating[fe]=!0;const de=t.getValue(fe);de&&(de.liveStyle=!1)};for(const fe in Te){const de=ge[fe],Ne=he[fe];if(R.hasOwnProperty(fe))continue;let Ae=!1;Lf(de)&&Lf(Ne)?Ae=!Ew(de,Ne):Ae=de!==Ne,Ae?de!=null?Ie(fe):T.add(fe):de!==void 0&&T.has(fe)?Ie(fe):W.protectedKeys[fe]=!0}W.prevProp=j,W.prevResolvedValues=ge,W.isActive&&(R={...R,...ge}),a&&t.blockInitialAnimation&&(ue=!1);const Q=te&&ee;ue&&(!Q||se)&&C.push(...Ue.map(fe=>{const de={type:U};if(typeof fe=="string"&&a&&!Q&&t.manuallyAnimateOnMount&&t.parent){const{parent:Ne}=t,Ae=_o(Ne,fe);if(Ne.enteringChildren&&Ae){const{delayChildren:$}=Ae.transition||{};de.delay=bw(Ne.enteringChildren,t,$)}}return{animation:fe,options:de}}))}if(T.size){const L={};if(typeof w.initial!="boolean"){const U=_o(t,Array.isArray(w.initial)?w.initial[0]:w.initial);U&&U.transition&&(L.transition=U.transition)}T.forEach(U=>{const W=t.getBaseTarget(U),j=t.getValue(U);j&&(j.liveStyle=!0),L[U]=W??null}),C.push({animation:L})}let D=!!C.length;return a&&(w.initial===!1||w.initial===w.animate)&&!t.manuallyAnimateOnMount&&(D=!1),a=!1,D?e(C):Promise.resolve()}function v(y,w){var C;if(r[y].isActive===w)return Promise.resolve();(C=t.variantChildren)==null||C.forEach(T=>{var R;return(R=T.animationState)==null?void 0:R.setActive(y,w)}),r[y].isActive=w;const A=g(y);for(const T in r)r[T].protectedKeys={};return A}return{animateChanges:g,setActive:v,setAnimateFunction:h,getState:()=>r,reset:()=>{r=np()}}}function R4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Ew(e,t):!1}function wa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function np(){return{animate:wa(!0),whileInView:wa(),whileHover:wa(),whileTap:wa(),whileDrag:wa(),whileFocus:wa(),exit:wa()}}class Xi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class k4 extends Xi{constructor(e){super(e),e.animationState||(e.animationState=I4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ku(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let O4=0;class P4 extends Xi{constructor(){super(...arguments),this.id=O4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;const u=this.node.animationState.setActive("exit",!e);r&&!e&&u.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const D4={animation:{Feature:k4},exit:{Feature:P4}};function Gl(t,e,r,a={passive:!0}){return t.addEventListener(e,r,a),()=>t.removeEventListener(e,r)}function tc(t){return{point:{x:t.pageX,y:t.pageY}}}const M4=t=>e=>_0(e)&&t(e,tc(e));function kl(t,e,r,a){return Gl(t,e,M4(r),a)}const Aw=1e-4,j4=1-Aw,B4=1+Aw,Sw=.01,L4=0-Sw,F4=0+Sw;function wn(t){return t.max-t.min}function U4(t,e,r){return Math.abs(t-e)<=r}function sp(t,e,r,a=.5){t.origin=a,t.originPoint=ur(e.min,e.max,t.origin),t.scale=wn(r)/wn(e),t.translate=ur(r.min,r.max,t.origin)-t.originPoint,(t.scale>=j4&&t.scale<=B4||isNaN(t.scale))&&(t.scale=1),(t.translate>=L4&&t.translate<=F4||isNaN(t.translate))&&(t.translate=0)}function Ol(t,e,r,a){sp(t.x,e.x,r.x,a?a.originX:void 0),sp(t.y,e.y,r.y,a?a.originY:void 0)}function ip(t,e,r){t.min=r.min+e.min,t.max=t.min+wn(e)}function V4(t,e,r){ip(t.x,e.x,r.x),ip(t.y,e.y,r.y)}function ap(t,e,r){t.min=e.min-r.min,t.max=t.min+wn(e)}function Fu(t,e,r){ap(t.x,e.x,r.x),ap(t.y,e.y,r.y)}function ss(t){return[t("x"),t("y")]}const _w=({current:t})=>t?t.ownerDocument.defaultView:null,op=(t,e)=>Math.abs(t-e);function W4(t,e){const r=op(t.x,e.x),a=op(t.y,e.y);return Math.sqrt(r**2+a**2)}class Nw{constructor(e,r,{transformPagePoint:a,contextWindow:u=window,dragSnapToOrigin:h=!1,distanceThreshold:g=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Xh(this.lastMoveEventInfo,this.history),R=this.startEvent!==null,k=W4(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!R&&!k)return;const{point:D}=T,{timestamp:L}=tn;this.history.push({...D,timestamp:L});const{onStart:U,onMove:W}=this.handlers;R||(U&&U(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,T)},this.handlePointerMove=(T,R)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=$h(R,this.transformPagePoint),nr.update(this.updatePoint,!0)},this.handlePointerUp=(T,R)=>{this.end();const{onEnd:k,onSessionEnd:D,resumeAnimation:L}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const U=Xh(T.type==="pointercancel"?this.lastMoveEventInfo:$h(R,this.transformPagePoint),this.history);this.startEvent&&k&&k(T,U),D&&D(T,U)},!_0(e))return;this.dragSnapToOrigin=h,this.handlers=r,this.transformPagePoint=a,this.distanceThreshold=g,this.contextWindow=u||window;const v=tc(e),y=$h(v,this.transformPagePoint),{point:w}=y,{timestamp:A}=tn;this.history=[{...w,timestamp:A}];const{onSessionStart:C}=r;C&&C(e,Xh(y,this.history)),this.removeListeners=Ql(kl(this.contextWindow,"pointermove",this.handlePointerMove),kl(this.contextWindow,"pointerup",this.handlePointerUp),kl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Gi(this.updatePoint)}}function $h(t,e){return e?{point:e(t.point)}:t}function lp(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Xh({point:t},e){return{point:t,delta:lp(t,Tw(e)),offset:lp(t,z4(e)),velocity:H4(e,.1)}}function z4(t){return t[0]}function Tw(t){return t[t.length-1]}function H4(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,a=null;const u=Tw(t);for(;r>=0&&(a=t[r],!(u.timestamp-a.timestamp>Ls(e)));)r--;if(!a)return{x:0,y:0};const h=is(u.timestamp-a.timestamp);if(h===0)return{x:0,y:0};const g={x:(u.x-a.x)/h,y:(u.y-a.y)/h};return g.x===1/0&&(g.x=0),g.y===1/0&&(g.y=0),g}function G4(t,{min:e,max:r},a){return e!==void 0&&t<e?t=a?ur(e,t,a.min):Math.max(t,e):r!==void 0&&t>r&&(t=a?ur(r,t,a.max):Math.min(t,r)),t}function cp(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function $4(t,{top:e,left:r,bottom:a,right:u}){return{x:cp(t.x,r,u),y:cp(t.y,e,a)}}function up(t,e){let r=e.min-t.min,a=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,a]=[a,r]),{min:r,max:a}}function X4(t,e){return{x:up(t.x,e.x),y:up(t.y,e.y)}}function Y4(t,e){let r=.5;const a=wn(t),u=wn(e);return u>a?r=Vl(e.min,e.max-a,t.min):a>u&&(r=Vl(t.min,t.max-u,e.min)),ii(0,1,r)}function q4(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const Vf=.35;function K4(t=Vf){return t===!1?t=0:t===!0&&(t=Vf),{x:dp(t,"left","right"),y:dp(t,"top","bottom")}}function dp(t,e,r){return{min:hp(t,e),max:hp(t,r)}}function hp(t,e){return typeof t=="number"?t:t[e]||0}const Z4=new WeakMap;class Q4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Fr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:a}={}){const{presenceContext:u}=this.visualElement;if(u&&u.isPresent===!1)return;const h=C=>{r?(this.stopAnimation(),this.snapToCursor(tc(C).point)):this.pauseAnimation()},g=(C,T)=>{this.stopAnimation();const{drag:R,dragPropagation:k,onDragStart:D}=this.getProps();if(R&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=c_(R),!this.openDragLock))return;this.latestPointerEvent=C,this.latestPanInfo=T,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ss(U=>{let W=this.getAxisMotionValue(U).get()||0;if(Fs.test(W)){const{projection:j}=this.visualElement;if(j&&j.layout){const q=j.layout.layoutBox[U];q&&(W=wn(q)*(parseFloat(W)/100))}}this.originPoint[U]=W}),D&&nr.postRender(()=>D(C,T)),Ff(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},v=(C,T)=>{this.latestPointerEvent=C,this.latestPanInfo=T;const{dragPropagation:R,dragDirectionLock:k,onDirectionLock:D,onDrag:L}=this.getProps();if(!R&&!this.openDragLock)return;const{offset:U}=T;if(k&&this.currentDirection===null){this.currentDirection=J4(U),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",T.point,U),this.updateAxis("y",T.point,U),this.visualElement.render(),L&&L(C,T)},y=(C,T)=>{this.latestPointerEvent=C,this.latestPanInfo=T,this.stop(C,T),this.latestPointerEvent=null,this.latestPanInfo=null},w=()=>ss(C=>{var T;return this.getAnimationState(C)==="paused"&&((T=this.getAxisMotionValue(C).animation)==null?void 0:T.play())}),{dragSnapToOrigin:A}=this.getProps();this.panSession=new Nw(e,{onSessionStart:h,onStart:g,onMove:v,onSessionEnd:y,resumeAnimation:w},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:A,distanceThreshold:a,contextWindow:_w(this.visualElement)})}stop(e,r){const a=e||this.latestPointerEvent,u=r||this.latestPanInfo,h=this.isDragging;if(this.cancel(),!h||!u||!a)return;const{velocity:g}=u;this.startAnimation(g);const{onDragEnd:v}=this.getProps();v&&nr.postRender(()=>v(a,u))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,a){const{drag:u}=this.getProps();if(!a||!wu(e,u,this.currentDirection))return;const h=this.getAxisMotionValue(e);let g=this.originPoint[e]+a[e];this.constraints&&this.constraints[e]&&(g=G4(g,this.constraints[e],this.elastic[e])),h.set(g)}resolveConstraints(){var h;const{dragConstraints:e,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(h=this.visualElement.projection)==null?void 0:h.layout,u=this.constraints;e&&Sl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&a?this.constraints=$4(a.layoutBox,e):this.constraints=!1,this.elastic=K4(r),u!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&ss(g=>{this.constraints!==!1&&this.getAxisMotionValue(g)&&(this.constraints[g]=q4(a.layoutBox[g],this.constraints[g]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Sl(e))return!1;const a=e.current,{projection:u}=this.visualElement;if(!u||!u.layout)return!1;const h=e4(a,u.root,this.visualElement.getTransformPagePoint());let g=X4(u.layout.layoutBox,h);if(r){const v=r(Z_(g));this.hasMutatedConstraints=!!v,v&&(g=dw(v))}return g}startAnimation(e){const{drag:r,dragMomentum:a,dragElastic:u,dragTransition:h,dragSnapToOrigin:g,onDragTransitionEnd:v}=this.getProps(),y=this.constraints||{},w=ss(A=>{if(!wu(A,r,this.currentDirection))return;let C=y&&y[A]||{};g&&(C={min:0,max:0});const T=u?200:1e6,R=u?40:1e7,k={type:"inertia",velocity:a?e[A]:0,bounceStiffness:T,bounceDamping:R,timeConstant:750,restDelta:1,restSpeed:10,...h,...C};return this.startAxisValueAnimation(A,k)});return Promise.all(w).then(v)}startAxisValueAnimation(e,r){const a=this.getAxisMotionValue(e);return Ff(this.visualElement,e),a.start(M0(e,a,0,r,this.visualElement,!1))}stopAnimation(){ss(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ss(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,a=this.visualElement.getProps(),u=a[r];return u||this.visualElement.getValue(e,(a.initial?a.initial[e]:void 0)||0)}snapToCursor(e){ss(r=>{const{drag:a}=this.getProps();if(!wu(r,a,this.currentDirection))return;const{projection:u}=this.visualElement,h=this.getAxisMotionValue(r);if(u&&u.layout){const{min:g,max:v}=u.layout.layoutBox[r],y=h.get()||0;h.set(e[r]-ur(g,v,.5)+y)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!Sl(r)||!a||!this.constraints)return;this.stopAnimation();const u={x:0,y:0};ss(g=>{const v=this.getAxisMotionValue(g);if(v&&this.constraints!==!1){const y=v.get();u[g]=Y4({min:y,max:y},this.constraints[g])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),ss(g=>{if(!wu(g,e,null))return;const v=this.getAxisMotionValue(g),{min:y,max:w}=this.constraints[g];v.set(ur(y,w,u[g]))})}addListeners(){if(!this.visualElement.current)return;Z4.set(this.visualElement,this);const e=this.visualElement.current,r=kl(e,"pointerdown",y=>{const{drag:w,dragListener:A=!0}=this.getProps();w&&A&&!qy(y.target)&&this.start(y)}),a=()=>{const{dragConstraints:y}=this.getProps();Sl(y)&&y.current&&(this.constraints=this.resolveRefConstraints())},{projection:u}=this.visualElement,h=u.addEventListener("measure",a);u&&!u.layout&&(u.root&&u.root.updateScroll(),u.updateLayout()),nr.read(a);const g=Gl(window,"resize",()=>this.scalePositionWithinConstraints()),v=u.addEventListener("didUpdate",(({delta:y,hasLayoutChanged:w})=>{this.isDragging&&w&&(ss(A=>{const C=this.getAxisMotionValue(A);C&&(this.originPoint[A]+=y[A].translate,C.set(C.get()+y[A].translate))}),this.visualElement.render())}));return()=>{g(),r(),h(),v&&v()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:u=!1,dragConstraints:h=!1,dragElastic:g=Vf,dragMomentum:v=!0}=e;return{...e,drag:r,dragDirectionLock:a,dragPropagation:u,dragConstraints:h,dragElastic:g,dragMomentum:v}}}function wu(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function J4(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class eN extends Xi{constructor(e){super(e),this.removeGroupControls=as,this.removeListeners=as,this.controls=new Q4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||as}update(){const{dragControls:e}=this.node.getProps(),{dragControls:r}=this.node.prevProps||{};e!==r&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const fp=t=>(e,r)=>{t&&nr.postRender(()=>t(e,r))};class tN extends Xi{constructor(){super(...arguments),this.removePointerDownListener=as}onPointerDown(e){this.session=new Nw(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_w(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:a,onPanEnd:u}=this.node.getProps();return{onSessionStart:fp(e),onStart:fp(r),onMove:a,onEnd:(h,g)=>{delete this.session,u&&nr.postRender(()=>u(h,g))}}}mount(){this.removePointerDownListener=kl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Su={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Yh=!1;class rN extends z.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:a,layoutId:u}=this.props,{projection:h}=e;h&&(r.group&&r.group.add(h),a&&a.register&&u&&a.register(h),Yh&&h.root.didUpdate(),h.addEventListener("animationComplete",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),Su.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:a,drag:u,isPresent:h}=this.props,{projection:g}=a;return g&&(g.isPresent=h,Yh=!0,u||e.layoutDependency!==r||r===void 0||e.isPresent!==h?g.willUpdate():this.safeToRemove(),e.isPresent!==h&&(h?g.promote():g.relegate()||nr.postRender(()=>{const v=g.getStack();(!v||!v.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),S0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:u}=e;Yh=!0,u&&(u.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(u),a&&a.deregister&&a.deregister(u))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Iw(t){const[e,r]=x_(),a=z.useContext(iy);return x.jsx(rN,{...t,layoutGroup:a,switchLayoutGroup:z.useContext(cw),isPresent:e,safeToRemove:r})}function nN(t,e,r){const a=hn(t)?t:To(t);return a.start(M0("",a,e,r)),a.animation}const sN=(t,e)=>t.depth-e.depth;class iN{constructor(){this.children=[],this.isDirty=!1}add(e){o0(this.children,e),this.isDirty=!0}remove(e){l0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sN),this.isDirty=!1,this.children.forEach(e)}}function aN(t,e){const r=Rn.now(),a=({timestamp:u})=>{const h=u-r;h>=e&&(Gi(a),t(h-e))};return nr.setup(a,!0),()=>Gi(a)}const Rw=["TopLeft","TopRight","BottomLeft","BottomRight"],oN=Rw.length,mp=t=>typeof t=="string"?parseFloat(t):t,gp=t=>typeof t=="number"||je.test(t);function lN(t,e,r,a,u,h){u?(t.opacity=ur(0,r.opacity??1,cN(a)),t.opacityExit=ur(e.opacity??1,0,uN(a))):h&&(t.opacity=ur(e.opacity??1,r.opacity??1,a));for(let g=0;g<oN;g++){const v=`border${Rw[g]}Radius`;let y=pp(e,v),w=pp(r,v);if(y===void 0&&w===void 0)continue;y||(y=0),w||(w=0),y===0||w===0||gp(y)===gp(w)?(t[v]=Math.max(ur(mp(y),mp(w),a),0),(Fs.test(w)||Fs.test(y))&&(t[v]+="%")):t[v]=w}(e.rotate||r.rotate)&&(t.rotate=ur(e.rotate||0,r.rotate||0,a))}function pp(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const cN=kw(0,.5,py),uN=kw(.5,.95,as);function kw(t,e,r){return a=>a<t?0:a>e?1:r(Vl(t,e,a))}function xp(t,e){t.min=e.min,t.max=e.max}function ws(t,e){xp(t.x,e.x),xp(t.y,e.y)}function yp(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function wp(t,e,r,a,u){return t-=e,t=Lu(t,1/r,a),u!==void 0&&(t=Lu(t,1/u,a)),t}function dN(t,e=0,r=1,a=.5,u,h=t,g=t){if(Fs.test(e)&&(e=parseFloat(e),e=ur(g.min,g.max,e/100)-g.min),typeof e!="number")return;let v=ur(h.min,h.max,a);t===h&&(v-=e),t.min=wp(t.min,e,r,v,u),t.max=wp(t.max,e,r,v,u)}function vp(t,e,[r,a,u],h,g){dN(t,e[r],e[a],e[u],e.scale,h,g)}const hN=["x","scaleX","originX"],fN=["y","scaleY","originY"];function bp(t,e,r,a){vp(t.x,e,hN,r?r.x:void 0,a?a.x:void 0),vp(t.y,e,fN,r?r.y:void 0,a?a.y:void 0)}function Ep(t){return t.translate===0&&t.scale===1}function Ow(t){return Ep(t.x)&&Ep(t.y)}function Cp(t,e){return t.min===e.min&&t.max===e.max}function mN(t,e){return Cp(t.x,e.x)&&Cp(t.y,e.y)}function Ap(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Pw(t,e){return Ap(t.x,e.x)&&Ap(t.y,e.y)}function Sp(t){return wn(t.x)/wn(t.y)}function _p(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class gN{constructor(){this.members=[]}add(e){o0(this.members,e),e.scheduleRender()}remove(e){if(l0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(u=>e===u);if(r===0)return!1;let a;for(let u=r;u>=0;u--){const h=this.members[u];if(h.isPresent!==!1){a=h;break}}return a?(this.promote(a),!0):!1}promote(e,r){const a=this.lead;if(e!==a&&(this.prevLead=a,this.lead=e,e.show(),a)){a.instance&&a.scheduleRender(),e.scheduleRender(),e.resumeFrom=a,r&&(e.resumeFrom.preserveOpacity=!0),a.snapshot&&(e.snapshot=a.snapshot,e.snapshot.latestValues=a.animationValues||a.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:u}=e.options;u===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:a}=e;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pN(t,e,r){let a="";const u=t.x.translate/e.x,h=t.y.translate/e.y,g=(r==null?void 0:r.z)||0;if((u||h||g)&&(a=`translate3d(${u}px, ${h}px, ${g}px) `),(e.x!==1||e.y!==1)&&(a+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:w,rotate:A,rotateX:C,rotateY:T,skewX:R,skewY:k}=r;w&&(a=`perspective(${w}px) ${a}`),A&&(a+=`rotate(${A}deg) `),C&&(a+=`rotateX(${C}deg) `),T&&(a+=`rotateY(${T}deg) `),R&&(a+=`skewX(${R}deg) `),k&&(a+=`skewY(${k}deg) `)}const v=t.x.scale*e.x,y=t.y.scale*e.y;return(v!==1||y!==1)&&(a+=`scale(${v}, ${y})`),a||"none"}const qh=["","X","Y","Z"],xN=1e3;let yN=0;function Kh(t,e,r,a){const{latestValues:u}=e;u[t]&&(r[t]=u[t],e.setStaticValue(t,0),a&&(a[t]=0))}function Dw(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=ww(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:u,layoutId:h}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",nr,!(u||h))}const{parent:a}=t;a&&!a.hasCheckedOptimisedAppear&&Dw(a)}function Mw({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:a,resetTransform:u}){return class{constructor(g={},v=e==null?void 0:e()){this.id=yN++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bN),this.nodes.forEach(SN),this.nodes.forEach(_N),this.nodes.forEach(EN)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=g,this.root=v?v.root||v:this,this.path=v?[...v.path,v]:[],this.parent=v,this.depth=v?v.depth+1:0;for(let y=0;y<this.path.length;y++)this.path[y].shouldResetTransform=!0;this.root===this&&(this.nodes=new iN)}addEventListener(g,v){return this.eventHandlers.has(g)||this.eventHandlers.set(g,new d0),this.eventHandlers.get(g).add(v)}notifyListeners(g,...v){const y=this.eventHandlers.get(g);y&&y.notify(...v)}hasListeners(g){return this.eventHandlers.has(g)}mount(g){if(this.instance)return;this.isSVG=Ky(g)&&!m_(g),this.instance=g;const{layoutId:v,layout:y,visualElement:w}=this.options;if(w&&!w.current&&w.mount(g),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(y||v)&&(this.isLayoutDirty=!0),t){let A,C=0;const T=()=>this.root.updateBlockedByResize=!1;nr.read(()=>{C=window.innerWidth}),t(g,()=>{const R=window.innerWidth;R!==C&&(C=R,this.root.updateBlockedByResize=!0,A&&A(),A=aN(T,250),Su.hasAnimatedSinceResize&&(Su.hasAnimatedSinceResize=!1,this.nodes.forEach(Ip)))})}v&&this.root.registerSharedNode(v,this),this.options.animate!==!1&&w&&(v||y)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:C,hasRelativeLayoutChanged:T,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||w.getDefaultTransition()||kN,{onLayoutAnimationStart:D,onLayoutAnimationComplete:L}=w.getProps(),U=!this.targetLayout||!Pw(this.targetLayout,R),W=!C&&T;if(this.options.layoutRoot||this.resumeFrom||W||C&&(U||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...C0(k,"layout"),onPlay:D,onComplete:L};(w.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(A,W)}else C||Ip(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const g=this.getStack();g&&g.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Gi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NN),this.animationId++)}getTransformTemplate(){const{visualElement:g}=this.options;return g&&g.getProps().transformTemplate}willUpdate(g=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Dw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let A=0;A<this.path.length;A++){const C=this.path[A];C.shouldResetTransform=!0,C.updateScroll("snapshot"),C.options.layoutRoot&&C.willUpdate(!1)}const{layoutId:v,layout:y}=this.options;if(v===void 0&&!y)return;const w=this.getTransformTemplate();this.prevTransformTemplateValue=w?w(this.latestValues,""):void 0,this.updateSnapshot(),g&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Np);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Tp);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(AN),this.nodes.forEach(wN),this.nodes.forEach(vN)):this.nodes.forEach(Tp),this.clearAllSnapshots();const v=Rn.now();tn.delta=ii(0,1e3/60,v-tn.timestamp),tn.timestamp=v,tn.isProcessing=!0,Lh.update.process(tn),Lh.preRender.process(tn),Lh.render.process(tn),tn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,S0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(CN),this.sharedNodes.forEach(TN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wn(this.snapshot.measuredBox.x)&&!wn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let y=0;y<this.path.length;y++)this.path[y].updateScroll();const g=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Fr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:v}=this.options;v&&v.notify("LayoutMeasure",this.layout.layoutBox,g?g.layoutBox:void 0)}updateScroll(g="measure"){let v=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===g&&(v=!1),v&&this.instance){const y=a(this.instance);this.scroll={animationId:this.root.animationId,phase:g,isRoot:y,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:y}}}resetTransform(){if(!u)return;const g=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,v=this.projectionDelta&&!Ow(this.projectionDelta),y=this.getTransformTemplate(),w=y?y(this.latestValues,""):void 0,A=w!==this.prevTransformTemplateValue;g&&this.instance&&(v||ba(this.latestValues)||A)&&(u(this.instance,w),this.shouldResetTransform=!1,this.scheduleRender())}measure(g=!0){const v=this.measurePageBox();let y=this.removeElementScroll(v);return g&&(y=this.removeTransform(y)),ON(y),{animationId:this.root.animationId,measuredBox:v,layoutBox:y,latestValues:{},source:this.id}}measurePageBox(){var w;const{visualElement:g}=this.options;if(!g)return Fr();const v=g.measureViewportBox();if(!(((w=this.scroll)==null?void 0:w.wasRoot)||this.path.some(PN))){const{scroll:A}=this.root;A&&(wo(v.x,A.offset.x),wo(v.y,A.offset.y))}return v}removeElementScroll(g){var y;const v=Fr();if(ws(v,g),(y=this.scroll)!=null&&y.wasRoot)return v;for(let w=0;w<this.path.length;w++){const A=this.path[w],{scroll:C,options:T}=A;A!==this.root&&C&&T.layoutScroll&&(C.wasRoot&&ws(v,g),wo(v.x,C.offset.x),wo(v.y,C.offset.y))}return v}applyTransform(g,v=!1){const y=Fr();ws(y,g);for(let w=0;w<this.path.length;w++){const A=this.path[w];!v&&A.options.layoutScroll&&A.scroll&&A!==A.root&&vo(y,{x:-A.scroll.offset.x,y:-A.scroll.offset.y}),ba(A.latestValues)&&vo(y,A.latestValues)}return ba(this.latestValues)&&vo(y,this.latestValues),y}removeTransform(g){const v=Fr();ws(v,g);for(let y=0;y<this.path.length;y++){const w=this.path[y];if(!w.instance||!ba(w.latestValues))continue;Mf(w.latestValues)&&w.updateSnapshot();const A=Fr(),C=w.measurePageBox();ws(A,C),bp(v,w.latestValues,w.snapshot?w.snapshot.layoutBox:void 0,A)}return ba(this.latestValues)&&bp(v,this.latestValues),v}setTargetDelta(g){this.targetDelta=g,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(g){this.options={...this.options,...g,crossfade:g.crossfade!==void 0?g.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(g=!1){var R;const v=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=v.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=v.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=v.isSharedProjectionDirty);const y=!!this.resumingFrom||this!==v;if(!(g||y&&this.isSharedProjectionDirty||this.isProjectionDirty||(R=this.parent)!=null&&R.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:C}=this.options;if(!this.layout||!(A||C))return;this.resolvedRelativeTargetAt=tn.timestamp;const T=this.getClosestProjectingParent();T&&this.linkedParentVersion!==T.layoutVersion&&!T.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(T&&T.layout?this.createRelativeTarget(T,this.layout.layoutBox,T.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Fr(),this.targetWithTransforms=Fr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),V4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ws(this.target,this.layout.layoutBox),fw(this.target,this.targetDelta)):ws(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?this.createRelativeTarget(T,this.target,T.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Mf(this.parent.latestValues)||hw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(g,v,y){this.relativeParent=g,this.linkedParentVersion=g.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fr(),this.relativeTargetOrigin=Fr(),Fu(this.relativeTargetOrigin,v,y),ws(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var k;const g=this.getLead(),v=!!this.resumingFrom||this!==g;let y=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(y=!1),v&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(y=!1),this.resolvedRelativeTargetAt===tn.timestamp&&(y=!1),y)return;const{layout:w,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(w||A))return;ws(this.layoutCorrected,this.layout.layoutBox);const C=this.treeScale.x,T=this.treeScale.y;J_(this.layoutCorrected,this.treeScale,this.path,v),g.layout&&!g.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(g.target=g.layout.layoutBox,g.targetWithTransforms=Fr());const{target:R}=g;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(yp(this.prevProjectionDelta.x,this.projectionDelta.x),yp(this.prevProjectionDelta.y,this.projectionDelta.y)),Ol(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==C||this.treeScale.y!==T||!_p(this.projectionDelta.x,this.prevProjectionDelta.x)||!_p(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(g=!0){var v;if((v=this.options.visualElement)==null||v.scheduleRender(),g){const y=this.getStack();y&&y.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=bo(),this.projectionDelta=bo(),this.projectionDeltaWithTransform=bo()}setAnimationOrigin(g,v=!1){const y=this.snapshot,w=y?y.latestValues:{},A={...this.latestValues},C=bo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!v;const T=Fr(),R=y?y.source:void 0,k=this.layout?this.layout.source:void 0,D=R!==k,L=this.getStack(),U=!L||L.members.length<=1,W=!!(D&&!U&&this.options.crossfade===!0&&!this.path.some(RN));this.animationProgress=0;let j;this.mixTargetDelta=q=>{const Z=q/1e3;Rp(C.x,g.x,Z),Rp(C.y,g.y,Z),this.setTargetDelta(C),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fu(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),IN(this.relativeTarget,this.relativeTargetOrigin,T,Z),j&&mN(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Fr()),ws(j,this.relativeTarget)),D&&(this.animationValues=A,lN(A,w,this.latestValues,Z,W,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(g){var v,y,w;this.notifyListeners("animationStart"),(v=this.currentAnimation)==null||v.stop(),(w=(y=this.resumingFrom)==null?void 0:y.currentAnimation)==null||w.stop(),this.pendingAnimation&&(Gi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nr.update(()=>{Su.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=To(0)),this.currentAnimation=nN(this.motionValue,[0,1e3],{...g,velocity:0,isSync:!0,onUpdate:A=>{this.mixTargetDelta(A),g.onUpdate&&g.onUpdate(A)},onStop:()=>{},onComplete:()=>{g.onComplete&&g.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const g=this.getStack();g&&g.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(xN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const g=this.getLead();let{targetWithTransforms:v,target:y,layout:w,latestValues:A}=g;if(!(!v||!y||!w)){if(this!==g&&this.layout&&w&&jw(this.options.animationType,this.layout.layoutBox,w.layoutBox)){y=this.target||Fr();const C=wn(this.layout.layoutBox.x);y.x.min=g.target.x.min,y.x.max=y.x.min+C;const T=wn(this.layout.layoutBox.y);y.y.min=g.target.y.min,y.y.max=y.y.min+T}ws(v,y),vo(v,A),Ol(this.projectionDeltaWithTransform,this.layoutCorrected,v,A)}}registerSharedNode(g,v){this.sharedNodes.has(g)||this.sharedNodes.set(g,new gN),this.sharedNodes.get(g).add(v);const w=v.options.initialPromotionConfig;v.promote({transition:w?w.transition:void 0,preserveFollowOpacity:w&&w.shouldPreserveFollowOpacity?w.shouldPreserveFollowOpacity(v):void 0})}isLead(){const g=this.getStack();return g?g.lead===this:!0}getLead(){var v;const{layoutId:g}=this.options;return g?((v=this.getStack())==null?void 0:v.lead)||this:this}getPrevLead(){var v;const{layoutId:g}=this.options;return g?(v=this.getStack())==null?void 0:v.prevLead:void 0}getStack(){const{layoutId:g}=this.options;if(g)return this.root.sharedNodes.get(g)}promote({needsReset:g,transition:v,preserveFollowOpacity:y}={}){const w=this.getStack();w&&w.promote(this,y),g&&(this.projectionDelta=void 0,this.needsReset=!0),v&&this.setOptions({transition:v})}relegate(){const g=this.getStack();return g?g.relegate(this):!1}resetSkewAndRotation(){const{visualElement:g}=this.options;if(!g)return;let v=!1;const{latestValues:y}=g;if((y.z||y.rotate||y.rotateX||y.rotateY||y.rotateZ||y.skewX||y.skewY)&&(v=!0),!v)return;const w={};y.z&&Kh("z",g,w,this.animationValues);for(let A=0;A<qh.length;A++)Kh(`rotate${qh[A]}`,g,w,this.animationValues),Kh(`skew${qh[A]}`,g,w,this.animationValues);g.render();for(const A in w)g.setStaticValue(A,w[A]),this.animationValues&&(this.animationValues[A]=w[A]);g.scheduleRender()}applyProjectionStyles(g,v){if(!this.instance||this.isSVG)return;if(!this.isVisible){g.visibility="hidden";return}const y=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,g.visibility="",g.opacity="",g.pointerEvents=Au(v==null?void 0:v.pointerEvents)||"",g.transform=y?y(this.latestValues,""):"none";return}const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Au(v==null?void 0:v.pointerEvents)||""),this.hasProjected&&!ba(this.latestValues)&&(g.transform=y?y({},""):"none",this.hasProjected=!1);return}g.visibility="";const A=w.animationValues||w.latestValues;this.applyTransformsToTarget();let C=pN(this.projectionDeltaWithTransform,this.treeScale,A);y&&(C=y(A,C)),g.transform=C;const{x:T,y:R}=this.projectionDelta;g.transformOrigin=`${T.origin*100}% ${R.origin*100}% 0`,w.animationValues?g.opacity=w===this?A.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:g.opacity=w===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const k in Df){if(A[k]===void 0)continue;const{correct:D,applyTo:L,isCSSVariable:U}=Df[k],W=C==="none"?A[k]:D(A[k],w);if(L){const j=L.length;for(let q=0;q<j;q++)g[L[q]]=W}else U?this.options.visualElement.renderState.vars[k]=W:g[k]=W}this.options.layoutId&&(g.pointerEvents=w===this?Au(v==null?void 0:v.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(g=>{var v;return(v=g.currentAnimation)==null?void 0:v.stop()}),this.root.nodes.forEach(Np),this.root.sharedNodes.clear()}}}function wN(t){t.updateLayout()}function vN(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:u}=t.layout,{animationType:h}=t.options,g=e.source!==t.layout.source;h==="size"?ss(C=>{const T=g?e.measuredBox[C]:e.layoutBox[C],R=wn(T);T.min=a[C].min,T.max=T.min+R}):jw(h,e.layoutBox,a)&&ss(C=>{const T=g?e.measuredBox[C]:e.layoutBox[C],R=wn(a[C]);T.max=T.min+R,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[C].max=t.relativeTarget[C].min+R)});const v=bo();Ol(v,a,e.layoutBox);const y=bo();g?Ol(y,t.applyTransform(u,!0),e.measuredBox):Ol(y,a,e.layoutBox);const w=!Ow(v);let A=!1;if(!t.resumeFrom){const C=t.getClosestProjectingParent();if(C&&!C.resumeFrom){const{snapshot:T,layout:R}=C;if(T&&R){const k=Fr();Fu(k,e.layoutBox,T.layoutBox);const D=Fr();Fu(D,a,R.layoutBox),Pw(k,D)||(A=!0),C.options.layoutRoot&&(t.relativeTarget=D,t.relativeTargetOrigin=k,t.relativeParent=C)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:e,delta:y,layoutDelta:v,hasLayoutChanged:w,hasRelativeLayoutChanged:A})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function bN(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function EN(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function CN(t){t.clearSnapshot()}function Np(t){t.clearMeasurements()}function Tp(t){t.isLayoutDirty=!1}function AN(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ip(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function SN(t){t.resolveTargetDelta()}function _N(t){t.calcProjection()}function NN(t){t.resetSkewAndRotation()}function TN(t){t.removeLeadSnapshot()}function Rp(t,e,r){t.translate=ur(e.translate,0,r),t.scale=ur(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function kp(t,e,r,a){t.min=ur(e.min,r.min,a),t.max=ur(e.max,r.max,a)}function IN(t,e,r,a){kp(t.x,e.x,r.x,a),kp(t.y,e.y,r.y,a)}function RN(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const kN={duration:.45,ease:[.4,0,.1,1]},Op=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Pp=Op("applewebkit/")&&!Op("chrome/")?Math.round:as;function Dp(t){t.min=Pp(t.min),t.max=Pp(t.max)}function ON(t){Dp(t.x),Dp(t.y)}function jw(t,e,r){return t==="position"||t==="preserve-aspect"&&!U4(Sp(e),Sp(r),.2)}function PN(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const DN=Mw({attachResizeListener:(t,e)=>Gl(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zh={current:void 0},Bw=Mw({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Zh.current){const t=new DN({});t.mount(window),t.setOptions({layoutScroll:!0}),Zh.current=t}return Zh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),MN={pan:{Feature:tN},drag:{Feature:eN,ProjectionNode:Bw,MeasureLayout:Iw}};function Mp(t,e,r){const{props:a}=t;t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",r==="Start");const u="onHover"+r,h=a[u];h&&nr.postRender(()=>h(e,tc(e)))}class jN extends Xi{mount(){const{current:e}=this.node;e&&(this.unmount=u_(e,(r,a)=>(Mp(this.node,a,"Start"),u=>Mp(this.node,u,"End"))))}unmount(){}}class BN extends Xi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ql(Gl(this.node.current,"focus",()=>this.onFocus()),Gl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jp(t,e,r){const{props:a}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&a.whileTap&&t.animationState.setActive("whileTap",r==="Start");const u="onTap"+(r==="End"?"":r),h=a[u];h&&nr.postRender(()=>h(e,tc(e)))}class LN extends Xi{mount(){const{current:e}=this.node;e&&(this.unmount=f_(e,(r,a)=>(jp(this.node,a,"Start"),(u,{success:h})=>jp(this.node,u,h?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Wf=new WeakMap,Qh=new WeakMap,FN=t=>{const e=Wf.get(t.target);e&&e(t)},UN=t=>{t.forEach(FN)};function VN({root:t,...e}){const r=t||document;Qh.has(r)||Qh.set(r,{});const a=Qh.get(r),u=JSON.stringify(e);return a[u]||(a[u]=new IntersectionObserver(UN,{root:t,...e})),a[u]}function WN(t,e,r){const a=VN(e);return Wf.set(t,r),a.observe(t),()=>{Wf.delete(t),a.unobserve(t)}}const zN={some:0,all:1};class HN extends Xi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:a,amount:u="some",once:h}=e,g={root:r?r.current:void 0,rootMargin:a,threshold:typeof u=="number"?u:zN[u]},v=y=>{const{isIntersecting:w}=y;if(this.isInView===w||(this.isInView=w,h&&!w&&this.hasEnteredView))return;w&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",w);const{onViewportEnter:A,onViewportLeave:C}=this.node.getProps(),T=w?A:C;T&&T(y)};return WN(this.node.current,g,v)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(GN(e,r))&&this.startObserver()}unmount(){}}function GN({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const $N={inView:{Feature:HN},tap:{Feature:LN},focus:{Feature:BN},hover:{Feature:jN}},XN={layout:{ProjectionNode:Bw,MeasureLayout:Iw}},YN={...D4,...$N,...MN,...XN},qN=K_(YN,c4);function KN({currentStamps:t=0,target:e=10,pendingReward:r=!1}){const a=Array.from({length:e}),u=e-t;return x.jsx("div",{className:"w-full max-w-md mx-auto",children:x.jsxs("div",{className:"bg-gradient-to-br from-[#B88A68] to-[#A67958] p-6 rounded-xl shadow-xl relative overflow-hidden text-white",children:[x.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none bg-gradient-to-br from-white to-transparent"}),x.jsxs("div",{className:"relative z-10 flex justify-between items-center mb-6",children:[x.jsx("h2",{className:"text-xl font-bold uppercase tracking-wider",children:"Coffee Rewards"}),x.jsxs("span",{className:"text-sm font-semibold bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full",children:[t," / ",e]})]}),x.jsx("div",{className:"grid grid-cols-5 gap-4 relative z-10",children:a.map((h,g)=>{const v=g<t,y=g===e-1;return x.jsx("div",{className:"flex flex-col items-center justify-center",children:x.jsx("div",{className:`
                    w-12 h-12 rounded-full flex items-center justify-center border-2 transition-all duration-300
                    ${v?"border-white bg-white/30 backdrop-blur-sm":"border-white/40 border-dashed"}
                    ${y?"border-yellow-300 bg-yellow-400/30":""} // Special style for the 10th slot
                  `,children:v?x.jsx(qN.span,{initial:{scale:2,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:300,damping:20},className:"text-2xl",children:""}):y?x.jsx("span",{className:"text-xl opacity-70",children:""}):x.jsx("span",{className:"text-white/60 font-mono text-sm",children:g+1})})},g)})}),x.jsx("div",{className:"relative z-10 mt-6 text-center",children:r?x.jsx("div",{className:"text-yellow-300 font-bold animate-pulse",children:" Free drink unlocked! Redeem now."}):u===0?x.jsx("div",{className:"text-yellow-300 font-bold animate-pulse",children:" Card complete! Reward pending."}):x.jsxs("p",{className:"text-sm font-medium text-white/90",children:["Buy ",x.jsx("span",{className:"font-bold",children:u})," more to get your free drink!"]})})]})})}function ZN(){const{user:t,isAuthenticated:e,isLoading:r}=Vs(),[a,u]=z.useState(null),[h,g]=z.useState(!0),[v,y]=z.useState(null);z.useEffect(()=>{async function A(){if(!t){g(!1);return}try{const C=await So(t.id);u(C)}catch(C){y("Failed to load rewards"),console.error(C)}finally{g(!1)}}r||A()},[t,r]);const w=t?`cloudcafe:${t.id}`:"";return x.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white py-16",children:x.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[x.jsxs("div",{className:"text-center mb-12",children:[x.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-4",children:"Cloud Cafe Rewards"}),x.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Earn a free drink every 10 purchases. Track your progress and enjoy your rewards!"})]}),r||h?x.jsxs("div",{className:"text-center py-12",children:[x.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#B88A68]"}),x.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]}):e?v?x.jsxs("div",{className:"max-w-md mx-auto bg-red-50 border border-red-200 rounded-2xl p-6 text-center mb-16",children:[x.jsx(Kl,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),x.jsx("p",{className:"text-red-700",children:v})]}):x.jsxs(x.Fragment,{children:[(a==null?void 0:a.pending_reward)&&x.jsxs("div",{className:"max-w-md mx-auto bg-yellow-50 border border-yellow-300 rounded-2xl p-6 text-center mb-8",children:[x.jsx("span",{className:"text-4xl mb-2 block",children:""}),x.jsx("h3",{className:"text-xl font-bold text-yellow-800 mb-2",children:"Free Drink Ready!"}),x.jsx("p",{className:"text-yellow-700",children:"Show this to staff to redeem your free drink. You cannot earn more stamps until redeemed."})]}),x.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-lg p-8 text-center mb-8",children:[x.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Your Rewards QR Code"}),x.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"Show this to staff when making a purchase to earn stamps"}),x.jsx("div",{className:"bg-white p-4 rounded-xl inline-block shadow-inner border border-gray-100",children:x.jsx(sy,{value:w,size:180,level:"M",includeMargin:!0,bgColor:"#ffffff",fgColor:"#000000"})}),x.jsx("p",{className:"mt-4 text-xs text-gray-400",children:t==null?void 0:t.email})]}),x.jsx("div",{className:"mb-16",children:x.jsx(KN,{currentStamps:(a==null?void 0:a.stamps)??0,target:10,pendingReward:(a==null?void 0:a.pending_reward)??!1})})]}):x.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-lg p-8 text-center mb-16",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#B88A68] rounded-full mb-4",children:x.jsx(Ra,{className:"w-8 h-8 text-white"})}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Sign In to View Your Rewards"}),x.jsx("p",{className:"text-gray-600 mb-6",children:"Sign in to see your loyalty card, collect stamps, and earn free drinks!"}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[x.jsx(at,{to:"/signin",className:"px-6 py-3 bg-[#B88A68] text-white font-semibold rounded-full hover:bg-[#A67958] transition-colors",children:"Sign In"}),x.jsx(at,{to:"/register",className:"px-6 py-3 border-2 border-[#B88A68] text-[#B88A68] font-semibold rounded-full hover:bg-[#B88A68]/10 transition-colors",children:"Join Now"})]})]}),x.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12",children:[x.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-8",children:"How It Works"}),x.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-20 h-20 bg-[#B88A68] rounded-full flex items-center justify-center mx-auto mb-4",children:x.jsx("span",{className:"text-4xl",children:""})}),x.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900",children:"1. Buy Coffee"}),x.jsx("p",{className:"text-gray-600",children:"Purchase any drink at Cloud Cafe and show your QR code"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-20 h-20 bg-[#B88A68] rounded-full flex items-center justify-center mx-auto mb-4",children:x.jsx("span",{className:"text-4xl",children:""})}),x.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900",children:"2. Collect Stamps"}),x.jsx("p",{className:"text-gray-600",children:"Staff will scan your code to add stamps to your card"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-20 h-20 bg-[#B88A68] rounded-full flex items-center justify-center mx-auto mb-4",children:x.jsx("span",{className:"text-4xl",children:""})}),x.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900",children:"3. Get Rewards"}),x.jsx("p",{className:"text-gray-600",children:"Redeem your free drink after collecting 10 stamps"})]})]})]}),x.jsxs("div",{className:"mt-16 grid md:grid-cols-2 gap-8",children:[x.jsxs("div",{className:"bg-gradient-to-br from-[#B88A68] to-[#A67958] text-white rounded-2xl p-8",children:[x.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Member Exclusive Offers"}),x.jsxs("ul",{className:"space-y-3",children:[x.jsxs("li",{className:"flex items-start gap-3",children:[x.jsx("span",{className:"text-xl",children:""}),x.jsx("span",{children:"Birthday rewards and special surprises"})]}),x.jsxs("li",{className:"flex items-start gap-3",children:[x.jsx("span",{className:"text-xl",children:""}),x.jsx("span",{children:"Early access to new menu items"})]}),x.jsxs("li",{className:"flex items-start gap-3",children:[x.jsx("span",{className:"text-xl",children:""}),x.jsx("span",{children:"Exclusive member-only events"})]})]})]}),!e&&x.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-8 border border-gray-200",children:[x.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Join Today"}),x.jsx("p",{className:"text-gray-600 mb-6",children:"Sign up now to start earning rewards and enjoy exclusive benefits at Cloud Cafe."}),x.jsx(at,{to:"/register",className:"block w-full px-6 py-3 bg-[#B88A68] text-white text-center rounded-full font-semibold hover:bg-[#A67958] transition-colors",children:"Sign Up Now"})]}),e&&x.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-8 border border-gray-200",children:[x.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Your Progress"}),x.jsxs("p",{className:"text-gray-600 mb-4",children:["You have ",x.jsx("span",{className:"font-bold text-[#B88A68]",children:(a==null?void 0:a.stamps)??0})," stamps.",a!=null&&a.pending_reward?" Redeem your free drink!":` ${10-((a==null?void 0:a.stamps)??0)} more to go!`]}),x.jsx(at,{to:"/menu",className:"block w-full px-6 py-3 bg-[#B88A68] text-white text-center rounded-full font-semibold hover:bg-[#A67958] transition-colors",children:"Order Now"})]})]})]})})}function QN(){const t=As(),{login:e,pendingCheckout:r,setPendingCheckout:a}=Vs(),[u,h]=z.useState(!1),[g,v]=z.useState(!1),[y,w]=z.useState(null),[A,C]=z.useState(null),[T,R]=z.useState(!1),[k,D]=z.useState({email:"",password:"",rememberMe:!1}),L=async W=>{var te,ee;if(W.preventDefault(),w(null),C(null),v(!0),T){try{const{error:ue}=await Xe.auth.resetPasswordForEmail(k.email,{redirectTo:`${window.location.origin}/reset-password`});if(ue)throw ue;C("Password reset email sent! Please check your inbox.")}catch(ue){w(ue.message||"Failed to send reset email")}finally{v(!1)}return}const j=await e(k.email,k.password);if(j.error){w(j.error),v(!1);return}const{data:{session:q}}=await Xe.auth.getSession(),Z=((ee=(te=q==null?void 0:q.user)==null?void 0:te.user_metadata)==null?void 0:ee.role)==="admin";r?(a(!1),t("/cart")):t(Z?"/admin/orders":"/")},U=W=>{const{name:j,value:q,type:Z,checked:te}=W.target;D(ee=>({...ee,[j]:Z==="checkbox"?te:q}))};return x.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white flex items-center justify-center px-6 py-12",children:x.jsxs("div",{className:"w-full max-w-md",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#B88A68] rounded-full mb-4",children:x.jsx(Ra,{className:"w-8 h-8 text-white"})}),x.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:T?"Reset Password":"Welcome Back"}),x.jsx("p",{className:"text-gray-600",children:T?"Enter your email to receive a password reset link":"Sign in to your Cloud Cafe account"})]}),x.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:x.jsxs("form",{onSubmit:L,className:"space-y-6",children:[y&&x.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[x.jsx(Kl,{className:"w-5 h-5 flex-shrink-0"}),x.jsx("span",{className:"text-sm",children:y})]}),A&&x.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700",children:[x.jsx(Ia,{className:"w-5 h-5 flex-shrink-0"}),x.jsx("span",{className:"text-sm",children:A})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),x.jsxs("div",{className:"relative",children:[x.jsx(Qf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),x.jsx("input",{type:"email",id:"email",name:"email",value:k.email,onChange:U,className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B88A68] focus:border-transparent outline-none transition-all",placeholder:"your@email.com",required:!0})]})]}),!T&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),x.jsxs("div",{className:"relative",children:[x.jsx(Nu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),x.jsx("input",{type:u?"text":"password",id:"password",name:"password",value:k.password,onChange:U,className:"w-full pl-11 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B88A68] focus:border-transparent outline-none transition-all",placeholder:"",required:!T}),x.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:u?x.jsx(sf,{className:"w-5 h-5"}):x.jsx(af,{className:"w-5 h-5"})})]})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("label",{className:"flex items-center cursor-pointer",children:[x.jsx("input",{type:"checkbox",name:"rememberMe",checked:k.rememberMe,onChange:U,className:"w-4 h-4 text-[#B88A68] border-gray-300 rounded focus:ring-[#B88A68] cursor-pointer"}),x.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Remember me"})]}),x.jsx("button",{type:"button",onClick:()=>{R(!0),w(null),C(null)},className:"text-sm font-semibold text-[#B88A68] hover:text-[#A67958] transition-colors",children:"Forgot password?"})]})]}),x.jsx("button",{type:"submit",disabled:g,className:"w-full bg-[#B88A68] text-white py-3 rounded-lg font-semibold hover:bg-[#A67958] transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:g?T?"Sending...":"Signing in...":T?"Send Reset Link":"Sign In"}),T&&x.jsxs("button",{type:"button",onClick:()=>{R(!1),w(null),C(null)},className:"w-full flex items-center justify-center gap-2 text-gray-600 font-semibold hover:text-gray-900 transition-colors mt-4",children:[x.jsx(No,{className:"w-4 h-4"}),"Back to Sign In"]})]})}),x.jsxs("p",{className:"text-center mt-6 text-gray-600",children:["Don't have an account?"," ",x.jsx(at,{to:"/register",className:"font-semibold text-[#B88A68] hover:text-[#A67958] transition-colors",children:"Join now"})]})]})})}function JN(){const t=As(),{register:e,pendingCheckout:r,setPendingCheckout:a}=Vs(),[u,h]=z.useState(!1),[g,v]=z.useState(!1),[y,w]=z.useState(!1),[A,C]=z.useState(null),[T,R]=z.useState(!1),[k,D]=z.useState({firstName:"",lastName:"",email:"",phone:"",shop:"",password:"",confirmPassword:"",agreeToTerms:!1,subscribeNewsletter:!0}),L=async W=>{if(W.preventDefault(),C(null),k.password!==k.confirmPassword){C("Passwords do not match!");return}w(!0);const j=await e(k.email,k.password,{firstName:k.firstName,lastName:k.lastName,shop_name:k.shop||null});if(j.error){C(j.error),w(!1);return}R(!0),w(!1),setTimeout(()=>{t("/signin")},3e3)},U=W=>{const{name:j,value:q,type:Z,checked:te}=W.target;D(ee=>({...ee,[j]:Z==="checkbox"?te:q}))};return x.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white flex items-center justify-center px-6 py-12",children:x.jsxs("div",{className:"w-full max-w-2xl",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#B88A68] rounded-full mb-4",children:x.jsx(Ra,{className:"w-8 h-8 text-white"})}),x.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Join Cloud Cafe"}),x.jsx("p",{className:"text-gray-600",children:"Create your account and start earning rewards"})]}),x.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:x.jsxs("form",{onSubmit:L,className:"space-y-6",children:[A&&x.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[x.jsx(Kl,{className:"w-5 h-5 flex-shrink-0"}),x.jsx("span",{className:"text-sm",children:A})]}),T&&x.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700",children:[x.jsx(Ia,{className:"w-5 h-5 flex-shrink-0"}),x.jsx("span",{className:"text-sm",children:"Account created! Please check your email to verify your account before signing in."})]}),x.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"firstName",className:"block text-sm font-semibold text-gray-700 mb-2",children:"First Name"}),x.jsxs("div",{className:"relative",children:[x.jsx(Iu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),x.jsx("input",{type:"text",id:"firstName",name:"firstName",value:k.firstName,onChange:U,className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B88A68] focus:border-transparent outline-none transition-all",placeholder:"John",required:!0})]})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"lastName",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Last Name"}),x.jsxs("div",{className:"relative",children:[x.jsx(Iu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),x.jsx("input",{type:"text",id:"lastName",name:"lastName",value:k.lastName,onChange:U,className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B88A68] focus:border-transparent outline-none transition-all",placeholder:"Doe",required:!0})]})]})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),x.jsxs("div",{className:"relative",children:[x.jsx(Qf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),x.jsx("input",{type:"email",id:"email",name:"email",value:k.email,onChange:U,className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B88A68] focus:border-transparent outline-none transition-all",placeholder:"your@email.com",required:!0})]})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone Number"}),x.jsxs("div",{className:"relative",children:[x.jsx(wE,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),x.jsx("input",{type:"tel",id:"phone",name:"phone",value:k.phone,onChange:U,className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B88A68] focus:border-transparent outline-none transition-all",placeholder:"+44 7XXX XXXXXX",required:!0})]})]}),x.jsxs("div",{children:[x.jsxs("label",{htmlFor:"shop",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Shop Name ",x.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional - leave blank if not known)"})]}),x.jsxs("div",{className:"relative",children:[x.jsx(Sx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),x.jsx("input",{type:"text",id:"shop",name:"shop",value:k.shop,onChange:U,className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B88A68] focus:border-transparent outline-none transition-all",placeholder:"e.g., Cloud Cafe Glasgow"})]}),x.jsx("p",{className:"mt-1 text-xs text-gray-500 ml-1",children:"Leave blank if not known"})]}),x.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),x.jsxs("div",{className:"relative",children:[x.jsx(Nu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),x.jsx("input",{type:u?"text":"password",id:"password",name:"password",value:k.password,onChange:U,className:"w-full pl-11 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B88A68] focus:border-transparent outline-none transition-all",placeholder:"",required:!0,minLength:8}),x.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:u?x.jsx(sf,{className:"w-5 h-5"}):x.jsx(af,{className:"w-5 h-5"})})]})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm Password"}),x.jsxs("div",{className:"relative",children:[x.jsx(Nu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),x.jsx("input",{type:g?"text":"password",id:"confirmPassword",name:"confirmPassword",value:k.confirmPassword,onChange:U,className:"w-full pl-11 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B88A68] focus:border-transparent outline-none transition-all",placeholder:"",required:!0,minLength:8}),x.jsx("button",{type:"button",onClick:()=>v(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:g?x.jsx(sf,{className:"w-5 h-5"}):x.jsx(af,{className:"w-5 h-5"})})]})]})]}),x.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[x.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Password must contain:"}),x.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[x.jsx("li",{children:" At least 8 characters"}),x.jsx("li",{children:" A mix of uppercase and lowercase letters"}),x.jsx("li",{children:" At least one number"})]})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("label",{className:"flex items-start cursor-pointer",children:[x.jsx("input",{type:"checkbox",name:"agreeToTerms",checked:k.agreeToTerms,onChange:U,className:"w-4 h-4 mt-0.5 text-[#B88A68] border-gray-300 rounded focus:ring-[#B88A68] cursor-pointer",required:!0}),x.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:["I agree to the"," ",x.jsx(at,{to:"/terms",className:"text-[#B88A68] hover:text-[#A67958] font-semibold",children:"Terms and Conditions"})," ","and"," ",x.jsx(at,{to:"/privacy",className:"text-[#B88A68] hover:text-[#A67958] font-semibold",children:"Privacy Policy"})]})]}),x.jsxs("label",{className:"flex items-start cursor-pointer",children:[x.jsx("input",{type:"checkbox",name:"subscribeNewsletter",checked:k.subscribeNewsletter,onChange:U,className:"w-4 h-4 mt-0.5 text-[#B88A68] border-gray-300 rounded focus:ring-[#B88A68] cursor-pointer"}),x.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Send me exclusive offers, news, and rewards updates"})]})]}),x.jsx("button",{type:"submit",disabled:y||T,className:"w-full bg-[#B88A68] text-white py-3 rounded-lg font-semibold hover:bg-[#A67958] transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:y?"Creating Account...":T?"Success!":"Create Account"})]})}),x.jsxs("p",{className:"text-center mt-6 text-gray-600",children:["Already have an account?"," ",x.jsx(at,{to:"/signin",className:"font-semibold text-[#B88A68] hover:text-[#A67958] transition-colors",children:"Sign in"})]})]})})}function e6(){const t=As(),[e,r]=z.useState("online"),{cartItems:a,removeFromCart:u,updateQuantity:h,clearCart:g,cartTotal:v,orderNotes:y,setOrderNotes:w,submitOrder:A,isSubmitting:C,isVIP:T,pendingReward:R,applyReward:k,rewardApplied:D}=Pa(),{isAuthenticated:L,setPendingCheckout:U}=Vs(),W=async()=>{if(!L){U(!0),t("/signin");return}const q=await A(T?e:"online");q.success?q.paymentUrl?window.location.href=q.paymentUrl:(Qt.success("Order placed successfully!"),t("/orders")):Qt.error(q.error||"Failed to place order")};return a.length===0?x.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[x.jsxs("div",{className:"relative bg-[#B88A68] text-white py-20",children:[x.jsx("div",{className:"absolute inset-0 bg-black/10"}),x.jsxs("div",{className:"relative max-w-6xl mx-auto px-6 text-center",children:[x.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Your Cart"}),x.jsx("p",{className:"text-xl text-white/90",children:"Review your order"})]})]}),x.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-20 text-center",children:[x.jsx(Hi,{className:"w-24 h-24 text-gray-300 mx-auto mb-6"}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your cart is empty"}),x.jsx("p",{className:"text-gray-600 mb-8",children:"Looks like you haven't added any items yet."}),x.jsxs(at,{to:"/menu",className:"inline-flex items-center gap-2 px-6 py-3 bg-[#B88A68] text-white font-semibold rounded-full hover:bg-[#A67958] transition-colors",children:[x.jsx(No,{className:"w-5 h-5"}),"Continue Shopping"]})]})]}):x.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[x.jsxs("div",{className:"relative bg-[#B88A68] text-white py-20",children:[x.jsx("div",{className:"absolute inset-0 bg-black/10"}),x.jsxs("div",{className:"relative max-w-6xl mx-auto px-6 text-center",children:[x.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Your Cart"}),x.jsxs("p",{className:"text-xl text-white/90",children:[a.length," item",a.length!==1?"s":""," in your cart"]})]})]}),x.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[x.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-8",children:x.jsx("div",{className:"divide-y divide-gray-100",children:a.map(j=>x.jsxs("div",{className:"p-6 flex items-center gap-6",children:[x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:j.name}),x.jsx("p",{className:"text-[#B88A68] font-bold",children:j.price})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("button",{onClick:()=>h(j.id,j.quantity-1),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 transition-colors",children:x.jsx(gE,{className:"w-4 h-4"})}),x.jsx("span",{className:"w-8 text-center font-semibold",children:j.quantity}),x.jsx("button",{onClick:()=>h(j.id,j.quantity+1),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 transition-colors",children:x.jsx(Ax,{className:"w-4 h-4"})})]}),x.jsx("button",{onClick:()=>u(j.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:x.jsx(kE,{className:"w-5 h-5"})})]},j.id))})}),x.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-8",children:[x.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-4",children:"Special Instructions"}),x.jsxs("div",{className:"relative",children:[x.jsx("textarea",{value:y||"",onChange:j=>w(j.target.value),maxLength:500,disabled:C,placeholder:"Add special instructions (e.g., no ice, extra hot, allergies)...",className:"w-full min-h-[100px] p-4 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#B88A68] focus:border-transparent resize-y text-gray-700 disabled:bg-gray-50 disabled:text-gray-400"}),x.jsxs("div",{className:"absolute bottom-3 right-3 text-xs text-gray-400 bg-white/80 px-2 py-1 rounded pointer-events-none",children:[(y||"").length,"/500"]})]})]}),R&&!D&&x.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-amber-100 rounded-2xl border-2 border-amber-300 p-6 mb-8",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(Co,{className:"w-8 h-8 text-amber-600"}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold text-amber-900 text-lg",children:" Reward Will Be Applied!"}),x.jsx("p",{className:"text-amber-700 text-sm",children:"Your free drink reward will automatically apply to your first eligible drink at checkout"})]})]})}),D&&x.jsxs("div",{className:"bg-green-50 rounded-2xl border-2 border-green-300 p-4 mb-8 flex items-center gap-3",children:[x.jsx(Co,{className:"w-6 h-6 text-green-600"}),x.jsx("p",{className:"text-green-800 font-medium",children:" Reward applied! First eligible drink is free."})]}),R&&x.jsx("div",{className:"bg-yellow-50 rounded-2xl border border-yellow-200 p-4 mb-8",children:x.jsx("p",{className:"text-yellow-800 text-sm",children:" You won't earn stamps on this order while you have a pending reward."})}),x.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-8",children:x.jsxs("div",{className:"flex justify-between items-center text-xl font-bold",children:[x.jsx("span",{children:"Total"}),x.jsxs("span",{className:"text-[#B88A68]",children:["",v.toFixed(2)]})]})}),T&&x.jsxs("div",{className:"bg-gradient-to-br from-[#B88A68]/10 to-[#B88A68]/5 rounded-2xl border-2 border-[#B88A68]/20 p-6 mb-8",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(Xm,{className:"w-5 h-5 text-[#B88A68]"}),x.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Payment Method"}),x.jsx("span",{className:"ml-auto text-xs font-semibold px-2 py-1 bg-[#B88A68] text-white rounded-full",children:"VIP"})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-xl cursor-pointer hover:border-[#B88A68] transition-colors bg-white",children:[x.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:e==="online",onChange:j=>r(j.target.value),className:"w-5 h-5 text-[#B88A68] border-gray-300 focus:ring-[#B88A68]"}),x.jsx(Xm,{className:"w-6 h-6 text-[#B88A68]"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-semibold text-gray-900",children:"Online Payment"}),x.jsx("p",{className:"text-xs text-gray-500",children:"Pay now with card"})]})]}),x.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-xl cursor-pointer hover:border-[#B88A68] transition-colors bg-white",children:[x.jsx("input",{type:"radio",name:"paymentMethod",value:"in-store",checked:e==="in-store",onChange:j=>r(j.target.value),className:"w-5 h-5 text-[#B88A68] border-gray-300 focus:ring-[#B88A68]"}),x.jsx(Sx,{className:"w-6 h-6 text-[#B88A68]"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-semibold text-gray-900",children:"Pay In-Store"}),x.jsx("p",{className:"text-xs text-gray-500",children:"Pay when you collect"})]})]})]})]}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[x.jsxs(at,{to:"/menu",className:`flex-1 flex items-center justify-center gap-2 px-6 py-3 border-2 border-[#B88A68] text-[#B88A68] font-semibold rounded-full hover:bg-[#B88A68]/10 transition-colors ${C?"opacity-50 pointer-events-none":""}`,children:[x.jsx(No,{className:"w-5 h-5"}),"Continue Shopping"]}),x.jsx("button",{onClick:g,disabled:C,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 font-semibold rounded-full hover:bg-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear Cart"}),x.jsxs("button",{onClick:W,disabled:C,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-[#B88A68] text-white font-semibold rounded-full hover:bg-[#A67958] transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:[C&&x.jsx(Dl,{className:"w-5 h-5 animate-spin"}),C?"Processing...":T&&e==="in-store"?"Place Order":"Pay Now"]})]})]})]})}function t6(){const t=As(),{isAuthenticated:e}=Vs(),[r,a]=z.useState(5);return z.useEffect(()=>{const u=setInterval(()=>{a(h=>h<=1?(clearInterval(u),t(e?"/":"/signin"),0):h-1)},1e3);return()=>clearInterval(u)},[t,e]),x.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white flex items-center justify-center px-6 py-12",children:x.jsxs("div",{className:"w-full max-w-md text-center",children:[x.jsxs("div",{className:"relative inline-block mb-6",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-green-100 rounded-full",children:x.jsx(Ia,{className:"w-12 h-12 text-green-500"})}),x.jsx("div",{className:"absolute -bottom-1 -right-1 inline-flex items-center justify-center w-10 h-10 bg-[#B88A68] rounded-full",children:x.jsx(Ra,{className:"w-5 h-5 text-white"})})]}),x.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Email Verified!"}),x.jsx("p",{className:"text-gray-600 mb-8",children:"Your email has been successfully verified. Welcome to Cloud Cafe!"}),x.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Redirecting in ",x.jsx("span",{className:"font-bold text-[#B88A68]",children:r})," seconds..."]}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[x.jsx(at,{to:"/signin",className:"px-6 py-3 bg-[#B88A68] text-white font-semibold rounded-full hover:bg-[#A67958] transition-colors",children:"Sign In Now"}),x.jsx(at,{to:"/menu",className:"px-6 py-3 border-2 border-[#B88A68] text-[#B88A68] font-semibold rounded-full hover:bg-[#B88A68]/10 transition-colors",children:"Browse Menu"})]})]})})}function r6(){const[t,e]=z.useState(""),[r,a]=z.useState(null),[u,h]=z.useState(!1),[g,v]=z.useState(null),y=R=>R.startsWith("cloudcafe:")?R.replace("cloudcafe:",""):R,w=async()=>{if(!t.trim()){v({type:"error",text:"Please enter a user ID or scan QR code"});return}h(!0),v(null);const R=y(t.trim());try{const k=await So(R);k?(a(k),e(R)):(v({type:"error",text:"User not found"}),a(null))}catch{v({type:"error",text:"Failed to lookup user"}),a(null)}finally{h(!1)}},A=async()=>{if(r){h(!0),v(null);try{const R=await eA(r.user_id);if(v({type:R.success?"success":"error",text:R.message}),R.success){const k=await So(r.user_id);a(k)}}catch{v({type:"error",text:"Failed to add stamp"})}finally{h(!1)}}},C=async()=>{if(r){h(!0),v(null);try{const R=await tA(r.user_id);if(v({type:R.success?"success":"error",text:R.message}),R.success){const k=await So(r.user_id);a(k)}}catch{v({type:"error",text:"Failed to redeem reward"})}finally{h(!1)}}},T=()=>{e(""),a(null),v(null)};return x.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white py-16",children:x.jsxs("div",{className:"max-w-lg mx-auto px-6",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#B88A68] rounded-full mb-4",children:x.jsx(Ra,{className:"w-8 h-8 text-white"})}),x.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Staff Portal"}),x.jsx("p",{className:"text-gray-600",children:"Scan customer QR code to manage stamps"})]}),x.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[x.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Customer ID (from QR Code)"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("div",{className:"relative flex-1",children:[x.jsx(CE,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),x.jsx("input",{type:"text",value:t,onChange:R=>e(R.target.value),placeholder:"Enter or paste customer ID...",className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B88A68] focus:border-transparent outline-none"})]}),x.jsx("button",{onClick:w,disabled:u,className:"px-6 py-3 bg-[#B88A68] text-white font-semibold rounded-lg hover:bg-[#A67958] transition-colors disabled:opacity-50",children:"Lookup"})]})]}),g&&x.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-lg mb-6 ${g.type==="success"?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:[g.type==="success"?x.jsx(Ia,{className:"w-5 h-5 flex-shrink-0"}):x.jsx(Kl,{className:"w-5 h-5 flex-shrink-0"}),x.jsx("span",{children:g.text})]}),r&&x.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Customer Rewards"}),x.jsx("button",{onClick:T,className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear"})]}),x.jsxs("div",{className:"bg-gradient-to-br from-[#B88A68] to-[#A67958] rounded-xl p-6 mb-6",children:[x.jsxs("div",{className:"flex justify-between items-center text-white mb-4",children:[x.jsx("span",{className:"font-semibold",children:"Stamps"}),x.jsxs("span",{className:"text-2xl font-bold",children:[r.stamps," / 10"]})]}),x.jsx("div",{className:"grid grid-cols-10 gap-1",children:Array.from({length:10}).map((R,k)=>x.jsx("div",{className:`aspect-square rounded-full flex items-center justify-center text-sm ${k<r.stamps?"bg-white/30":"bg-white/10 border border-white/20 border-dashed"}`,children:k<r.stamps&&""},k))}),r.pending_reward&&x.jsx("div",{className:"mt-4 text-center text-yellow-300 font-bold animate-pulse",children:" Reward Ready!"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("button",{onClick:A,disabled:u||r.pending_reward,className:"flex items-center justify-center gap-2 px-4 py-3 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx(Ax,{className:"w-5 h-5"}),"Add Stamp"]}),x.jsxs("button",{onClick:C,disabled:u||!r.pending_reward,className:"flex items-center justify-center gap-2 px-4 py-3 bg-yellow-500 text-white font-semibold rounded-lg hover:bg-yellow-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx(Co,{className:"w-5 h-5"}),"Redeem"]})]}),r.pending_reward&&x.jsx("p",{className:"mt-4 text-center text-sm text-amber-600",children:" Customer has pending reward - must redeem before adding stamps"})]}),x.jsxs("div",{className:"mt-8 text-center text-sm text-gray-500",children:[x.jsx("p",{className:"mb-2",children:"How to use:"}),x.jsxs("ol",{className:"text-left max-w-xs mx-auto space-y-1",children:[x.jsx("li",{children:"1. Ask customer to show their QR code"}),x.jsx("li",{children:"2. Scan or enter the ID shown below the QR"}),x.jsx("li",{children:'3. Click "Add Stamp" after purchase'}),x.jsx("li",{children:'4. Click "Redeem" when they claim free drink'})]})]})]})})}function Ss(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Oa(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const Lw=6048e5,n6=864e5;let s6={};function Qu(){return s6}function $l(t,e){var v,y,w,A;const r=Qu(),a=(e==null?void 0:e.weekStartsOn)??((y=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((A=(w=r.locale)==null?void 0:w.options)==null?void 0:A.weekStartsOn)??0,u=Ss(t),h=u.getDay(),g=(h<a?7:0)+h-a;return u.setDate(u.getDate()-g),u.setHours(0,0,0,0),u}function Uu(t){return $l(t,{weekStartsOn:1})}function Fw(t){const e=Ss(t),r=e.getFullYear(),a=Oa(t,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const u=Uu(a),h=Oa(t,0);h.setFullYear(r,0,4),h.setHours(0,0,0,0);const g=Uu(h);return e.getTime()>=u.getTime()?r+1:e.getTime()>=g.getTime()?r:r-1}function Bp(t){const e=Ss(t);return e.setHours(0,0,0,0),e}function Lp(t){const e=Ss(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function i6(t,e){const r=Bp(t),a=Bp(e),u=+r-Lp(r),h=+a-Lp(a);return Math.round((u-h)/n6)}function a6(t){const e=Fw(t),r=Oa(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Uu(r)}function o6(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function l6(t){if(!o6(t)&&typeof t!="number")return!1;const e=Ss(t);return!isNaN(Number(e))}function c6(t){const e=Ss(t),r=Oa(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const u6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},d6=(t,e,r)=>{let a;const u=u6[t];return typeof u=="string"?a=u:e===1?a=u.one:a=u.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function Jh(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const h6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},f6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},m6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},g6={date:Jh({formats:h6,defaultWidth:"full"}),time:Jh({formats:f6,defaultWidth:"full"}),dateTime:Jh({formats:m6,defaultWidth:"full"})},p6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},x6=(t,e,r,a)=>p6[t];function bl(t){return(e,r)=>{const a=r!=null&&r.context?String(r.context):"standalone";let u;if(a==="formatting"&&t.formattingValues){const g=t.defaultFormattingWidth||t.defaultWidth,v=r!=null&&r.width?String(r.width):g;u=t.formattingValues[v]||t.formattingValues[g]}else{const g=t.defaultWidth,v=r!=null&&r.width?String(r.width):t.defaultWidth;u=t.values[v]||t.values[g]}const h=t.argumentCallback?t.argumentCallback(e):e;return u[h]}}const y6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},w6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},v6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},b6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},E6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},C6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},A6=(t,e)=>{const r=Number(t),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},S6={ordinalNumber:A6,era:bl({values:y6,defaultWidth:"wide"}),quarter:bl({values:w6,defaultWidth:"wide",argumentCallback:t=>t-1}),month:bl({values:v6,defaultWidth:"wide"}),day:bl({values:b6,defaultWidth:"wide"}),dayPeriod:bl({values:E6,defaultWidth:"wide",formattingValues:C6,defaultFormattingWidth:"wide"})};function El(t){return(e,r={})=>{const a=r.width,u=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],h=e.match(u);if(!h)return null;const g=h[0],v=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],y=Array.isArray(v)?N6(v,C=>C.test(g)):_6(v,C=>C.test(g));let w;w=t.valueCallback?t.valueCallback(y):y,w=r.valueCallback?r.valueCallback(w):w;const A=e.slice(g.length);return{value:w,rest:A}}}function _6(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function N6(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function T6(t){return(e,r={})=>{const a=e.match(t.matchPattern);if(!a)return null;const u=a[0],h=e.match(t.parsePattern);if(!h)return null;let g=t.valueCallback?t.valueCallback(h[0]):h[0];g=r.valueCallback?r.valueCallback(g):g;const v=e.slice(u.length);return{value:g,rest:v}}}const I6=/^(\d+)(th|st|nd|rd)?/i,R6=/\d+/i,k6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},O6={any:[/^b/i,/^(a|c)/i]},P6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},D6={any:[/1/i,/2/i,/3/i,/4/i]},M6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},j6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},B6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},L6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},F6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},U6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},V6={ordinalNumber:T6({matchPattern:I6,parsePattern:R6,valueCallback:t=>parseInt(t,10)}),era:El({matchPatterns:k6,defaultMatchWidth:"wide",parsePatterns:O6,defaultParseWidth:"any"}),quarter:El({matchPatterns:P6,defaultMatchWidth:"wide",parsePatterns:D6,defaultParseWidth:"any",valueCallback:t=>t+1}),month:El({matchPatterns:M6,defaultMatchWidth:"wide",parsePatterns:j6,defaultParseWidth:"any"}),day:El({matchPatterns:B6,defaultMatchWidth:"wide",parsePatterns:L6,defaultParseWidth:"any"}),dayPeriod:El({matchPatterns:F6,defaultMatchWidth:"any",parsePatterns:U6,defaultParseWidth:"any"})},W6={code:"en-US",formatDistance:d6,formatLong:g6,formatRelative:x6,localize:S6,match:V6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function z6(t){const e=Ss(t);return i6(e,c6(e))+1}function H6(t){const e=Ss(t),r=+Uu(e)-+a6(e);return Math.round(r/Lw)+1}function Uw(t,e){var A,C,T,R;const r=Ss(t),a=r.getFullYear(),u=Qu(),h=(e==null?void 0:e.firstWeekContainsDate)??((C=(A=e==null?void 0:e.locale)==null?void 0:A.options)==null?void 0:C.firstWeekContainsDate)??u.firstWeekContainsDate??((R=(T=u.locale)==null?void 0:T.options)==null?void 0:R.firstWeekContainsDate)??1,g=Oa(t,0);g.setFullYear(a+1,0,h),g.setHours(0,0,0,0);const v=$l(g,e),y=Oa(t,0);y.setFullYear(a,0,h),y.setHours(0,0,0,0);const w=$l(y,e);return r.getTime()>=v.getTime()?a+1:r.getTime()>=w.getTime()?a:a-1}function G6(t,e){var v,y,w,A;const r=Qu(),a=(e==null?void 0:e.firstWeekContainsDate)??((y=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:y.firstWeekContainsDate)??r.firstWeekContainsDate??((A=(w=r.locale)==null?void 0:w.options)==null?void 0:A.firstWeekContainsDate)??1,u=Uw(t,e),h=Oa(t,0);return h.setFullYear(u,0,a),h.setHours(0,0,0,0),$l(h,e)}function $6(t,e){const r=Ss(t),a=+$l(r,e)-+G6(r,e);return Math.round(a/Lw)+1}function Dt(t,e){const r=t<0?"-":"",a=Math.abs(t).toString().padStart(e,"0");return r+a}const Li={y(t,e){const r=t.getFullYear(),a=r>0?r:1-r;return Dt(e==="yy"?a%100:a,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Dt(r+1,2)},d(t,e){return Dt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Dt(t.getHours()%12||12,e.length)},H(t,e){return Dt(t.getHours(),e.length)},m(t,e){return Dt(t.getMinutes(),e.length)},s(t,e){return Dt(t.getSeconds(),e.length)},S(t,e){const r=e.length,a=t.getMilliseconds(),u=Math.trunc(a*Math.pow(10,r-3));return Dt(u,e.length)}},ho={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fp={G:function(t,e,r){const a=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const a=t.getFullYear(),u=a>0?a:1-a;return r.ordinalNumber(u,{unit:"year"})}return Li.y(t,e)},Y:function(t,e,r,a){const u=Uw(t,a),h=u>0?u:1-u;if(e==="YY"){const g=h%100;return Dt(g,2)}return e==="Yo"?r.ordinalNumber(h,{unit:"year"}):Dt(h,e.length)},R:function(t,e){const r=Fw(t);return Dt(r,e.length)},u:function(t,e){const r=t.getFullYear();return Dt(r,e.length)},Q:function(t,e,r){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return Dt(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,e,r){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return Dt(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,e,r){const a=t.getMonth();switch(e){case"M":case"MM":return Li.M(t,e);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(t,e,r){const a=t.getMonth();switch(e){case"L":return String(a+1);case"LL":return Dt(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(t,e,r,a){const u=$6(t,a);return e==="wo"?r.ordinalNumber(u,{unit:"week"}):Dt(u,e.length)},I:function(t,e,r){const a=H6(t);return e==="Io"?r.ordinalNumber(a,{unit:"week"}):Dt(a,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Li.d(t,e)},D:function(t,e,r){const a=z6(t);return e==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):Dt(a,e.length)},E:function(t,e,r){const a=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(t,e,r,a){const u=t.getDay(),h=(u-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(h);case"ee":return Dt(h,2);case"eo":return r.ordinalNumber(h,{unit:"day"});case"eee":return r.day(u,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(u,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(u,{width:"short",context:"formatting"});case"eeee":default:return r.day(u,{width:"wide",context:"formatting"})}},c:function(t,e,r,a){const u=t.getDay(),h=(u-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(h);case"cc":return Dt(h,e.length);case"co":return r.ordinalNumber(h,{unit:"day"});case"ccc":return r.day(u,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(u,{width:"narrow",context:"standalone"});case"cccccc":return r.day(u,{width:"short",context:"standalone"});case"cccc":default:return r.day(u,{width:"wide",context:"standalone"})}},i:function(t,e,r){const a=t.getDay(),u=a===0?7:a;switch(e){case"i":return String(u);case"ii":return Dt(u,e.length);case"io":return r.ordinalNumber(u,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(t,e,r){const u=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(u,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(u,{width:"wide",context:"formatting"})}},b:function(t,e,r){const a=t.getHours();let u;switch(a===12?u=ho.noon:a===0?u=ho.midnight:u=a/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(u,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(u,{width:"wide",context:"formatting"})}},B:function(t,e,r){const a=t.getHours();let u;switch(a>=17?u=ho.evening:a>=12?u=ho.afternoon:a>=4?u=ho.morning:u=ho.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(u,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(u,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let a=t.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return Li.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Li.H(t,e)},K:function(t,e,r){const a=t.getHours()%12;return e==="Ko"?r.ordinalNumber(a,{unit:"hour"}):Dt(a,e.length)},k:function(t,e,r){let a=t.getHours();return a===0&&(a=24),e==="ko"?r.ordinalNumber(a,{unit:"hour"}):Dt(a,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Li.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Li.s(t,e)},S:function(t,e){return Li.S(t,e)},X:function(t,e,r){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return Vp(a);case"XXXX":case"XX":return Ea(a);case"XXXXX":case"XXX":default:return Ea(a,":")}},x:function(t,e,r){const a=t.getTimezoneOffset();switch(e){case"x":return Vp(a);case"xxxx":case"xx":return Ea(a);case"xxxxx":case"xxx":default:return Ea(a,":")}},O:function(t,e,r){const a=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Up(a,":");case"OOOO":default:return"GMT"+Ea(a,":")}},z:function(t,e,r){const a=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Up(a,":");case"zzzz":default:return"GMT"+Ea(a,":")}},t:function(t,e,r){const a=Math.trunc(t.getTime()/1e3);return Dt(a,e.length)},T:function(t,e,r){const a=t.getTime();return Dt(a,e.length)}};function Up(t,e=""){const r=t>0?"-":"+",a=Math.abs(t),u=Math.trunc(a/60),h=a%60;return h===0?r+String(u):r+String(u)+e+Dt(h,2)}function Vp(t,e){return t%60===0?(t>0?"-":"+")+Dt(Math.abs(t)/60,2):Ea(t,e)}function Ea(t,e=""){const r=t>0?"-":"+",a=Math.abs(t),u=Dt(Math.trunc(a/60),2),h=Dt(a%60,2);return r+u+e+h}const Wp=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Vw=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},X6=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],a=r[1],u=r[2];if(!u)return Wp(t,e);let h;switch(a){case"P":h=e.dateTime({width:"short"});break;case"PP":h=e.dateTime({width:"medium"});break;case"PPP":h=e.dateTime({width:"long"});break;case"PPPP":default:h=e.dateTime({width:"full"});break}return h.replace("{{date}}",Wp(a,e)).replace("{{time}}",Vw(u,e))},Y6={p:Vw,P:X6},q6=/^D+$/,K6=/^Y+$/,Z6=["D","DD","YY","YYYY"];function Q6(t){return q6.test(t)}function J6(t){return K6.test(t)}function eT(t,e,r){const a=tT(t,e,r);if(console.warn(a),Z6.includes(t))throw new RangeError(a)}function tT(t,e,r){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const rT=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nT=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,sT=/^'([^]*?)'?$/,iT=/''/g,aT=/[a-zA-Z]/;function zf(t,e,r){var A,C,T,R;const a=Qu(),u=a.locale??W6,h=a.firstWeekContainsDate??((C=(A=a.locale)==null?void 0:A.options)==null?void 0:C.firstWeekContainsDate)??1,g=a.weekStartsOn??((R=(T=a.locale)==null?void 0:T.options)==null?void 0:R.weekStartsOn)??0,v=Ss(t);if(!l6(v))throw new RangeError("Invalid time value");let y=e.match(nT).map(k=>{const D=k[0];if(D==="p"||D==="P"){const L=Y6[D];return L(k,u.formatLong)}return k}).join("").match(rT).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const D=k[0];if(D==="'")return{isToken:!1,value:oT(k)};if(Fp[D])return{isToken:!0,value:k};if(D.match(aT))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return{isToken:!1,value:k}});u.localize.preprocessor&&(y=u.localize.preprocessor(v,y));const w={firstWeekContainsDate:h,weekStartsOn:g,locale:u};return y.map(k=>{if(!k.isToken)return k.value;const D=k.value;(J6(D)||Q6(D))&&eT(D,e,String(t));const L=Fp[D[0]];return L(v,D,u.localize,w)}).join("")}function oT(t){const e=t.match(sT);return e?e[1].replace(iT,"'"):t}function lT(){const[t,e]=z.useState([]),[r,a]=z.useState(!0),[u,h]=z.useState(null);z.useEffect(()=>{g()},[]);const g=async()=>{try{const{data:{user:y}}=await Xe.auth.getUser();if(!y)throw new Error("Not authenticated");const{data:w,error:A}=await Xe.from("orders").select(`
                    *,
                    order_items (
                        id,
                        product_name,
                        quantity,
                        price
                    )
                `).eq("user_id",y.id).order("created_at",{ascending:!1});if(A)throw A;e(w||[])}catch(y){console.error("Error fetching orders:",y),h(y.message)}finally{a(!1)}},v=y=>{switch(y){case"completed":return"bg-green-100 text-green-800 border-green-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}};return r?x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:x.jsx(Dl,{className:"w-8 h-8 animate-spin text-[#B88A68]"})}):u?x.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 p-6",children:[x.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg mb-4",children:["Error loading orders: ",u]}),x.jsx("button",{onClick:()=>window.location.reload(),className:"text-[#B88A68] hover:underline",children:"Try Again"})]}):x.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[x.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:x.jsx("div",{className:"max-w-4xl mx-auto px-6 h-16 flex items-center justify-between",children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx(at,{to:"/",className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:x.jsx(No,{className:"w-5 h-5"})}),x.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"My Orders"})]})})}),x.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:t.length===0?x.jsxs("div",{className:"text-center py-20",children:[x.jsx(Jf,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),x.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No orders yet"}),x.jsx("p",{className:"text-gray-500 mb-6",children:"Start exploring our menu to place your first order."}),x.jsx(at,{to:"/menu",className:"inline-flex items-center gap-2 px-6 py-3 bg-[#B88A68] text-white font-semibold rounded-full hover:bg-[#A67958] transition-colors",children:"View Menu"})]}):x.jsx("div",{className:"space-y-6",children:t.map(y=>x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[x.jsxs("div",{className:"p-6 border-b border-gray-100 bg-gray-50/50 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[x.jsxs("div",{className:"space-y-1",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("span",{className:"font-mono text-sm text-gray-500",children:["#",y.id.slice(0,8)]}),x.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border ${v(y.status)} uppercase tracking-wide`,children:y.status})]}),x.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[x.jsx(Ex,{className:"w-4 h-4"}),zf(new Date(y.created_at),"PPP p")]})]}),x.jsxs("div",{className:"text-right",children:[x.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["",Number(y.total).toFixed(2)]}),x.jsx("div",{className:"text-xs text-gray-500",children:"Total Amount"})]})]}),x.jsxs("div",{className:"p-6",children:[x.jsx("div",{className:"space-y-4 mb-6",children:y.order_items.map(w=>x.jsxs("div",{className:"flex justify-between items-center text-sm",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded font-medium min-w-[2rem] text-center",children:[w.quantity,"x"]}),x.jsx("span",{className:"font-medium text-gray-900",children:w.product_name})]}),x.jsxs("span",{className:"text-gray-600",children:["",Number(w.price).toFixed(2)]})]},w.id))}),x.jsx("div",{className:"bg-yellow-50/50 rounded-lg p-4 border border-yellow-100",children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx(rE,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-yellow-800",children:"Special Instructions"}),x.jsx("p",{className:"text-sm text-gray-700 italic",children:y.notes||"No special instructions"})]})]})})]})]},y.id))})})]})}function cT(){const t=As(),{user:e,isAdmin:r,isLoading:a}=Vs(),[u,h]=z.useState([]),[g,v]=z.useState([]),[y,w]=z.useState(!0),[A,C]=z.useState(""),[T,R]=z.useState("all");z.useEffect(()=>{k()},[]),z.useEffect(()=>{D()},[A,T,u]),z.useEffect(()=>{a||r||t("/")},[r,a,t]);const k=async()=>{try{const{data:U,error:W}=await Xe.from("orders").select(`
                    *,
                    order_items (
                        id,
                        product_name,
                        quantity,
                        price
                    )
                `).order("created_at",{ascending:!1});if(W)throw W;h(U||[])}catch(U){console.error("Error fetching admin orders:",U)}finally{w(!1)}},D=()=>{let U=u;if(T!=="all"&&(U=U.filter(W=>W.status===T)),A){const W=A.toLowerCase();U=U.filter(j=>{var q;return j.id.toLowerCase().includes(W)||((q=j.notes)==null?void 0:q.toLowerCase().includes(W))})}v(U)},L=U=>{switch(U){case"completed":return"bg-green-100 text-green-800 border-green-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}};return y?x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:x.jsx(Dl,{className:"w-8 h-8 animate-spin text-[#B88A68]"})}):x.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[x.jsx("div",{className:"bg-[#1a1a1a] text-white border-b border-gray-800 sticky top-0 z-10",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-16 flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx(at,{to:"/",className:"text-gray-400 hover:text-white transition-colors",children:"Back to Site"}),x.jsx("div",{className:"h-6 w-px bg-gray-700"}),x.jsx("h1",{className:"text-xl font-bold",children:"Kitchen Display System"})]}),x.jsx("div",{className:"flex items-center gap-2",children:x.jsx("span",{className:"bg-[#B88A68] text-white text-xs px-2 py-1 rounded font-bold",children:"ADMIN"})})]})}),x.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[x.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[x.jsxs("div",{className:"flex-1 relative",children:[x.jsx(SE,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),x.jsx("input",{type:"text",placeholder:"Search orders ID or notes...",value:A,onChange:U=>C(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B88A68]"})]}),x.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 md:pb-0",children:[x.jsx(Jb,{className:"w-5 h-5 text-gray-500"}),["all","pending","confirmed","completed","cancelled"].map(U=>x.jsx("button",{onClick:()=>R(U),className:`px-4 py-2 rounded-lg text-sm font-medium capitalize whitespace-nowrap transition-colors ${T===U?"bg-[#B88A68] text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:U},U))]})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(U=>x.jsxs("div",{className:`bg-white rounded-xl shadow-sm border overflow-hidden relative ${U.notes?"border-amber-200 ring-1 ring-amber-100":"border-gray-200"}`,children:[U.notes&&x.jsxs("div",{className:"absolute top-0 right-0 bg-amber-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg flex items-center gap-1",children:[x.jsx(_x,{className:"w-3 h-3"}),"NOTE"]}),x.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50/50",children:[x.jsxs("div",{className:"flex justify-between items-start mb-2",children:[x.jsxs("span",{className:"font-mono text-xs text-gray-500",children:["#",U.id.slice(0,8)]}),x.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ${L(U.status)}`,children:U.status})]}),x.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[x.jsx(Ex,{className:"w-3 h-3"}),zf(new Date(U.created_at),"p"),"  ",zf(new Date(U.created_at),"MMM d")]})]}),x.jsxs("div",{className:"p-4",children:[x.jsx("div",{className:"space-y-2 mb-4",children:U.order_items.map(W=>x.jsx("div",{className:"flex justify-between text-sm",children:x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("span",{className:"font-bold text-gray-900 w-6",children:[W.quantity,"x"]}),x.jsx("span",{className:"text-gray-700",children:W.product_name})]})},W.id))}),U.notes?x.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded p-3 mb-4",children:[x.jsx("h5",{className:"text-[10px] font-bold text-amber-800 uppercase mb-1",children:"Kitchen Note"}),x.jsx("p",{className:"text-sm font-medium text-gray-900",children:U.notes})]}):x.jsx("div",{className:"text-xs text-gray-400 italic mb-4",children:"No notes"}),x.jsxs("div",{className:"border-t border-gray-100 pt-3 flex justify-between items-center",children:[x.jsx("span",{className:"text-sm font-semibold text-gray-500",children:"Total"}),x.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["",Number(U.total).toFixed(2)]})]})]})]},U.id))})]})]})}var Be;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Be||(Be={}));var zp=new Map([[Be.QR_CODE,"QR_CODE"],[Be.AZTEC,"AZTEC"],[Be.CODABAR,"CODABAR"],[Be.CODE_39,"CODE_39"],[Be.CODE_93,"CODE_93"],[Be.CODE_128,"CODE_128"],[Be.DATA_MATRIX,"DATA_MATRIX"],[Be.MAXICODE,"MAXICODE"],[Be.ITF,"ITF"],[Be.EAN_13,"EAN_13"],[Be.EAN_8,"EAN_8"],[Be.PDF_417,"PDF_417"],[Be.RSS_14,"RSS_14"],[Be.RSS_EXPANDED,"RSS_EXPANDED"],[Be.UPC_A,"UPC_A"],[Be.UPC_E,"UPC_E"],[Be.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Hp;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Hp||(Hp={}));function uT(t){return Object.values(Be).includes(t)}var Vu;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Vu||(Vu={}));var dT=(function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Vu.SCAN_TYPE_CAMERA,Vu.SCAN_TYPE_FILE],t})(),Ww=(function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!zp.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,zp.get(e))},t})(),Gp=(function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t})(),Hf;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Hf||(Hf={}));var hT=(function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Hf.UNKWOWN_ERROR}},t})(),fT=(function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t})();function ti(t){return typeof t>"u"||t===null}var Eo=(function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t})(),zw=(function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var a=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(a,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],h=new Set(u),g=Object.keys(e),v=0,y=g;v<y.length;v++){var w=y[v];if(h.has(w))return r.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},t})(),_l={exports:{}},mT=_l.exports,$p;function gT(){return $p||($p=1,(function(t,e){(function(r,a){a(e)})(mT,(function(r){function a(O){return O==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,n){O.__proto__=n}||function(O,n){for(var i in n)n.hasOwnProperty(i)&&(O[i]=n[i])};function h(O,n){u(O,n);function i(){this.constructor=O}O.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}function g(O,n){var i=Object.setPrototypeOf;i?i(O,n):O.__proto__=n}function v(O,n){n===void 0&&(n=O.constructor);var i=Error.captureStackTrace;i&&i(O,n)}var y=(function(O){h(n,O);function n(i){var o=this.constructor,c=O.call(this,i)||this;return Object.defineProperty(c,"name",{value:o.name,enumerable:!1}),g(c,o.prototype),v(c),c}return n})(Error);class w extends y{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}w.kind="Exception";class A extends w{}A.kind="ArgumentException";class C extends w{}C.kind="IllegalArgumentException";class T{constructor(n){if(this.binarizer=n,n===null)throw new C("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,i){return this.binarizer.getBlackRow(n,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,i,o,c){const d=this.binarizer.getLuminanceSource().crop(n,i,o,c);return new T(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class R extends w{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class k{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(n,i,o,c,d){for(;d--;)o[c++]=n[i++]}static currentTimeMillis(){return Date.now()}}class L extends w{}L.kind="IndexOutOfBoundsException";class U extends L{constructor(n=void 0,i=void 0){super(i),this.index=n,this.message=i}}U.kind="ArrayIndexOutOfBoundsException";class W{static fill(n,i){for(let o=0,c=n.length;o<c;o++)n[o]=i}static fillWithin(n,i,o,c){W.rangeCheck(n.length,i,o);for(let d=i;d<o;d++)n[d]=c}static rangeCheck(n,i,o){if(i>o)throw new C("fromIndex("+i+") > toIndex("+o+")");if(i<0)throw new U(i);if(o>n)throw new U(o)}static asList(...n){return n}static create(n,i,o){return Array.from({length:n}).map(d=>Array.from({length:i}).fill(o))}static createInt32Array(n,i,o){return Array.from({length:n}).map(d=>Int32Array.from({length:i}).fill(o))}static equals(n,i){if(!n||!i||!n.length||!i.length||n.length!==i.length)return!1;for(let o=0,c=n.length;o<c;o++)if(n[o]!==i[o])return!1;return!0}static hashCode(n){if(n===null)return 0;let i=1;for(const o of n)i=31*i+o;return i}static fillUint8Array(n,i){for(let o=0;o!==n.length;o++)n[o]=i}static copyOf(n,i){return n.slice(0,i)}static copyOfUint8Array(n,i){if(n.length<=i){const o=new Uint8Array(i);return o.set(n),o}return n.slice(0,i)}static copyOfRange(n,i,o){const c=o-i,d=new Int32Array(c);return D.arraycopy(n,i,d,0,c),d}static binarySearch(n,i,o){o===void 0&&(o=W.numberComparator);let c=0,d=n.length-1;for(;c<=d;){const f=d+c>>1,p=o(i,n[f]);if(p>0)c=f+1;else if(p<0)d=f-1;else return f}return-c-1}static numberComparator(n,i){return n-i}}class j{static numberOfTrailingZeros(n){let i;if(n===0)return 32;let o=31;return i=n<<16,i!==0&&(o-=16,n=i),i=n<<8,i!==0&&(o-=8,n=i),i=n<<4,i!==0&&(o-=4,n=i),i=n<<2,i!==0&&(o-=2,n=i),o-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let i=1;return n>>>16||(i+=16,n<<=16),n>>>24||(i+=8,n<<=8),n>>>28||(i+=4,n<<=4),n>>>30||(i+=2,n<<=2),i-=n>>>31,i}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,i){return Math.trunc(n/i)}static parseInt(n,i=void 0){return parseInt(n,i)}}j.MIN_VALUE_32_BITS=-2147483648,j.MAX_VALUE=Number.MAX_SAFE_INTEGER;class q{constructor(n,i){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,i==null?this.bits=q.makeArray(n):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const i=q.makeArray(n);D.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const i=this.size;if(n>=i)return i;const o=this.bits;let c=Math.floor(n/32),d=o[c];d&=~((1<<(n&31))-1);const f=o.length;for(;d===0;){if(++c===f)return i;d=o[c]}const p=c*32+j.numberOfTrailingZeros(d);return p>i?i:p}getNextUnset(n){const i=this.size;if(n>=i)return i;const o=this.bits;let c=Math.floor(n/32),d=~o[c];d&=~((1<<(n&31))-1);const f=o.length;for(;d===0;){if(++c===f)return i;d=~o[c]}const p=c*32+j.numberOfTrailingZeros(d);return p>i?i:p}setBulk(n,i){this.bits[Math.floor(n/32)]=i}setRange(n,i){if(i<n||n<0||i>this.size)throw new C;if(i===n)return;i--;const o=Math.floor(n/32),c=Math.floor(i/32),d=this.bits;for(let f=o;f<=c;f++){const p=f>o?0:n&31,S=(2<<(f<c?31:i&31))-(1<<p);d[f]|=S}}clear(){const n=this.bits.length,i=this.bits;for(let o=0;o<n;o++)i[o]=0}isRange(n,i,o){if(i<n||n<0||i>this.size)throw new C;if(i===n)return!0;i--;const c=Math.floor(n/32),d=Math.floor(i/32),f=this.bits;for(let p=c;p<=d;p++){const E=p>c?0:n&31,I=(2<<(p<d?31:i&31))-(1<<E)&4294967295;if((f[p]&I)!==(o?I:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,i){if(i<0||i>32)throw new C("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let o=i;o>0;o--)this.appendBit((n>>o-1&1)===1)}appendBitArray(n){const i=n.size;this.ensureCapacity(this.size+i);for(let o=0;o<i;o++)this.appendBit(n.get(o))}xor(n){if(this.size!==n.size)throw new C("Sizes don't match");const i=this.bits;for(let o=0,c=i.length;o<c;o++)i[o]^=n.bits[o]}toBytes(n,i,o,c){for(let d=0;d<c;d++){let f=0;for(let p=0;p<8;p++)this.get(n)&&(f|=1<<7-p),n++;i[o+d]=f}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),o=i+1,c=this.bits;for(let d=0;d<o;d++){let f=c[d];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,n[i-d]=f}if(this.size!==o*32){const d=o*32-this.size;let f=n[0]>>>d;for(let p=1;p<o;p++){const E=n[p];f|=E<<32-d,n[p-1]=f,f=E>>>d}n[o-1]=f}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof q))return!1;const i=n;return this.size===i.size&&W.equals(this.bits,i.bits)}hashCode(){return 31*this.size+W.hashCode(this.bits)}toString(){let n="";for(let i=0,o=this.size;i<o;i++)(i&7)===0&&(n+=" "),n+=this.get(i)?"X":".";return n}clone(){return new q(this.size,this.bits.slice())}}var Z;(function(O){O[O.OTHER=0]="OTHER",O[O.PURE_BARCODE=1]="PURE_BARCODE",O[O.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",O[O.TRY_HARDER=3]="TRY_HARDER",O[O.CHARACTER_SET=4]="CHARACTER_SET",O[O.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",O[O.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",O[O.ASSUME_GS1=7]="ASSUME_GS1",O[O.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",O[O.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",O[O.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Z||(Z={}));var te=Z;class ee extends w{static getFormatInstance(){return new ee}}ee.kind="FormatException";var ue;(function(O){O[O.Cp437=0]="Cp437",O[O.ISO8859_1=1]="ISO8859_1",O[O.ISO8859_2=2]="ISO8859_2",O[O.ISO8859_3=3]="ISO8859_3",O[O.ISO8859_4=4]="ISO8859_4",O[O.ISO8859_5=5]="ISO8859_5",O[O.ISO8859_6=6]="ISO8859_6",O[O.ISO8859_7=7]="ISO8859_7",O[O.ISO8859_8=8]="ISO8859_8",O[O.ISO8859_9=9]="ISO8859_9",O[O.ISO8859_10=10]="ISO8859_10",O[O.ISO8859_11=11]="ISO8859_11",O[O.ISO8859_13=12]="ISO8859_13",O[O.ISO8859_14=13]="ISO8859_14",O[O.ISO8859_15=14]="ISO8859_15",O[O.ISO8859_16=15]="ISO8859_16",O[O.SJIS=16]="SJIS",O[O.Cp1250=17]="Cp1250",O[O.Cp1251=18]="Cp1251",O[O.Cp1252=19]="Cp1252",O[O.Cp1256=20]="Cp1256",O[O.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",O[O.UTF8=22]="UTF8",O[O.ASCII=23]="ASCII",O[O.Big5=24]="Big5",O[O.GB18030=25]="GB18030",O[O.EUC_KR=26]="EUC_KR"})(ue||(ue={}));class se{constructor(n,i,o,...c){this.valueIdentifier=n,this.name=o,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=c,se.VALUE_IDENTIFIER_TO_ECI.set(n,this),se.NAME_TO_ECI.set(o,this);const d=this.values;for(let f=0,p=d.length;f!==p;f++){const E=d[f];se.VALUES_TO_ECI.set(E,this)}for(const f of c)se.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new ee("incorect value");const i=se.VALUES_TO_ECI.get(n);if(i===void 0)throw new ee("incorect value");return i}static getCharacterSetECIByName(n){const i=se.NAME_TO_ECI.get(n);if(i===void 0)throw new ee("incorect value");return i}equals(n){if(!(n instanceof se))return!1;const i=n;return this.getName()===i.getName()}}se.VALUE_IDENTIFIER_TO_ECI=new Map,se.VALUES_TO_ECI=new Map,se.NAME_TO_ECI=new Map,se.Cp437=new se(ue.Cp437,Int32Array.from([0,2]),"Cp437"),se.ISO8859_1=new se(ue.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),se.ISO8859_2=new se(ue.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),se.ISO8859_3=new se(ue.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),se.ISO8859_4=new se(ue.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),se.ISO8859_5=new se(ue.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),se.ISO8859_6=new se(ue.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),se.ISO8859_7=new se(ue.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),se.ISO8859_8=new se(ue.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),se.ISO8859_9=new se(ue.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),se.ISO8859_10=new se(ue.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),se.ISO8859_11=new se(ue.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),se.ISO8859_13=new se(ue.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),se.ISO8859_14=new se(ue.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),se.ISO8859_15=new se(ue.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),se.ISO8859_16=new se(ue.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),se.SJIS=new se(ue.SJIS,20,"SJIS","Shift_JIS"),se.Cp1250=new se(ue.Cp1250,21,"Cp1250","windows-1250"),se.Cp1251=new se(ue.Cp1251,22,"Cp1251","windows-1251"),se.Cp1252=new se(ue.Cp1252,23,"Cp1252","windows-1252"),se.Cp1256=new se(ue.Cp1256,24,"Cp1256","windows-1256"),se.UnicodeBigUnmarked=new se(ue.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),se.UTF8=new se(ue.UTF8,26,"UTF8","UTF-8"),se.ASCII=new se(ue.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),se.Big5=new se(ue.Big5,28,"Big5"),se.GB18030=new se(ue.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),se.EUC_KR=new se(ue.EUC_KR,30,"EUC_KR","EUC-KR");class Ue extends w{}Ue.kind="UnsupportedOperationException";class ge{static decode(n,i){const o=this.encodingName(i);return this.customDecoder?this.customDecoder(n,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(n,o):new TextDecoder(o).decode(n)}static shouldDecodeOnFallback(n){return!ge.isBrowser()&&n==="ISO-8859-1"}static encode(n,i){const o=this.encodingName(i);return this.customEncoder?this.customEncoder(n,o):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof se?n:se.getCharacterSetECIByName(n)}static decodeFallback(n,i){const o=this.encodingCharacterSet(i);if(ge.isDecodeFallbackSupported(o)){let c="";for(let d=0,f=n.length;d<f;d++){let p=n[d].toString(16);p.length<2&&(p="0"+p),c+="%"+p}return decodeURIComponent(c)}if(o.equals(se.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new Ue(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(se.UTF8)||n.equals(se.ISO8859_1)||n.equals(se.ASCII)}static encodeFallback(n){const o=btoa(unescape(encodeURIComponent(n))).split(""),c=[];for(let d=0;d<o.length;d++)c.push(o[d].charCodeAt(0));return new Uint8Array(c)}}class he{static castAsNonUtf8Char(n,i=null){const o=i?i.getName():this.ISO88591;return ge.decode(new Uint8Array([n]),o)}static guessEncoding(n,i){if(i!=null&&i.get(te.CHARACTER_SET)!==void 0)return i.get(te.CHARACTER_SET).toString();const o=n.length;let c=!0,d=!0,f=!0,p=0,E=0,S=0,I=0,P=0,B=0,V=0,G=0,Y=0,J=0,oe=0;const Ee=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let Ce=0;Ce<o&&(c||d||f);Ce++){const ye=n[Ce]&255;f&&(p>0?(ye&128)===0?f=!1:p--:(ye&128)!==0&&((ye&64)===0?f=!1:(p++,(ye&32)===0?E++:(p++,(ye&16)===0?S++:(p++,(ye&8)===0?I++:f=!1))))),c&&(ye>127&&ye<160?c=!1:ye>159&&(ye<192||ye===215||ye===247)&&oe++),d&&(P>0?ye<64||ye===127||ye>252?d=!1:P--:ye===128||ye===160||ye>239?d=!1:ye>160&&ye<224?(B++,G=0,V++,V>Y&&(Y=V)):ye>127?(P++,V=0,G++,G>J&&(J=G)):(V=0,G=0))}return f&&p>0&&(f=!1),d&&P>0&&(d=!1),f&&(Ee||E+S+I>0)?he.UTF8:d&&(he.ASSUME_SHIFT_JIS||Y>=3||J>=3)?he.SHIFT_JIS:c&&d?Y===2&&B===2||oe*10>=o?he.SHIFT_JIS:he.ISO88591:c?he.ISO88591:d?he.SHIFT_JIS:f?he.UTF8:he.PLATFORM_DEFAULT_ENCODING}static format(n,...i){let o=-1;function c(f,p,E,S,I,P){if(f==="%%")return"%";if(i[++o]===void 0)return;f=S?parseInt(S.substr(1)):void 0;let B=I?parseInt(I.substr(1)):void 0,V;switch(P){case"s":V=i[o];break;case"c":V=i[o][0];break;case"f":V=parseFloat(i[o]).toFixed(f);break;case"p":V=parseFloat(i[o]).toPrecision(f);break;case"e":V=parseFloat(i[o]).toExponential(f);break;case"x":V=parseInt(i[o]).toString(B||16);break;case"d":V=parseFloat(parseInt(i[o],B||10).toPrecision(f)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(B);let G=parseInt(E),Y=E&&E[0]+""=="0"?"0":" ";for(;V.length<G;)V=p!==void 0?V+Y:Y+V;return V}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(d,c)}static getBytes(n,i){return ge.encode(n,i)}static getCharCode(n,i=0){return n.charCodeAt(i)}static getCharAt(n){return String.fromCharCode(n)}}he.SHIFT_JIS=se.SJIS.getName(),he.GB2312="GB2312",he.ISO88591=se.ISO8859_1.getName(),he.EUC_JP="EUC_JP",he.UTF8=se.UTF8.getName(),he.PLATFORM_DEFAULT_ENCODING=he.UTF8,he.ASSUME_SHIFT_JIS=!1;class Te{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=he.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,i,o){for(let c=i;i<i+o;c++)this.append(n[c]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+1)}substring(n,i){return this.value.substring(n,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+i.length)}}class Ie{constructor(n,i,o,c){if(this.width=n,this.height=i,this.rowSize=o,this.bits=c,i==null&&(i=n),this.height=i,n<1||i<1)throw new C("Both dimensions must be greater than 0");o==null&&(o=Math.floor((n+31)/32)),this.rowSize=o,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const i=n.length,o=n[0].length,c=new Ie(o,i);for(let d=0;d<i;d++){const f=n[d];for(let p=0;p<o;p++)f[p]&&c.set(p,d)}return c}static parseFromString(n,i,o){if(n===null)throw new C("stringRepresentation cannot be null");const c=new Array(n.length);let d=0,f=0,p=-1,E=0,S=0;for(;S<n.length;)if(n.charAt(S)===`
`||n.charAt(S)==="\r"){if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new C("row lengths do not match");f=d,E++}S++}else if(n.substring(S,S+i.length)===i)S+=i.length,c[d]=!0,d++;else if(n.substring(S,S+o.length)===o)S+=o.length,c[d]=!1,d++;else throw new C("illegal character encountered: "+n.substring(S));if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new C("row lengths do not match");E++}const I=new Ie(p,E);for(let P=0;P<d;P++)c[P]&&I.set(Math.floor(P%p),Math.floor(P/p));return I}get(n,i){const o=i*this.rowSize+Math.floor(n/32);return(this.bits[o]>>>(n&31)&1)!==0}set(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]|=1<<(n&31)&4294967295}unset(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]&=~(1<<(n&31)&4294967295)}flip(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new C("input matrix dimensions do not match");const i=new q(Math.floor(this.width/32)+1),o=this.rowSize,c=this.bits;for(let d=0,f=this.height;d<f;d++){const p=d*o,E=n.getRow(d,i).getBitArray();for(let S=0;S<o;S++)c[p+S]^=E[S]}}clear(){const n=this.bits,i=n.length;for(let o=0;o<i;o++)n[o]=0}setRegion(n,i,o,c){if(i<0||n<0)throw new C("Left and top must be nonnegative");if(c<1||o<1)throw new C("Height and width must be at least 1");const d=n+o,f=i+c;if(f>this.height||d>this.width)throw new C("The region must fit inside the matrix");const p=this.rowSize,E=this.bits;for(let S=i;S<f;S++){const I=S*p;for(let P=n;P<d;P++)E[I+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(n,i){i==null||i.getSize()<this.width?i=new q(this.width):i.clear();const o=this.rowSize,c=this.bits,d=n*o;for(let f=0;f<o;f++)i.setBulk(f*32,c[d+f]);return i}setRow(n,i){D.arraycopy(i.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),i=this.getHeight();let o=new q(n),c=new q(n);for(let d=0,f=Math.floor((i+1)/2);d<f;d++)o=this.getRow(d,o),c=this.getRow(i-1-d,c),o.reverse(),c.reverse(),this.setRow(d,c),this.setRow(i-1-d,o)}getEnclosingRectangle(){const n=this.width,i=this.height,o=this.rowSize,c=this.bits;let d=n,f=i,p=-1,E=-1;for(let S=0;S<i;S++)for(let I=0;I<o;I++){const P=c[S*o+I];if(P!==0){if(S<f&&(f=S),S>E&&(E=S),I*32<d){let B=0;for(;(P<<31-B&4294967295)===0;)B++;I*32+B<d&&(d=I*32+B)}if(I*32+31>p){let B=31;for(;!(P>>>B);)B--;I*32+B>p&&(p=I*32+B)}}}return p<d||E<f?null:Int32Array.from([d,f,p-d+1,E-f+1])}getTopLeftOnBit(){const n=this.rowSize,i=this.bits;let o=0;for(;o<i.length&&i[o]===0;)o++;if(o===i.length)return null;const c=o/n;let d=o%n*32;const f=i[o];let p=0;for(;(f<<31-p&4294967295)===0;)p++;return d+=p,Int32Array.from([d,c])}getBottomRightOnBit(){const n=this.rowSize,i=this.bits;let o=i.length-1;for(;o>=0&&i[o]===0;)o--;if(o<0)return null;const c=Math.floor(o/n);let d=Math.floor(o%n)*32;const f=i[o];let p=31;for(;!(f>>>p);)p--;return d+=p,Int32Array.from([d,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof Ie))return!1;const i=n;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&W.equals(this.bits,i.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+W.hashCode(this.bits),n}toString(n="X ",i="  ",o=`
`){return this.buildToString(n,i,o)}buildToString(n,i,o){let c=new Te;for(let d=0,f=this.height;d<f;d++){for(let p=0,E=this.width;p<E;p++)c.append(this.get(p,d)?n:i);c.append(o)}return c.toString()}clone(){return new Ie(this.width,this.height,this.rowSize,this.bits.slice())}}class Q extends w{static getNotFoundInstance(){return new Q}}Q.kind="NotFoundException";class Re extends k{constructor(n){super(n),this.luminances=Re.EMPTY,this.buckets=new Int32Array(Re.LUMINANCE_BUCKETS)}getBlackRow(n,i){const o=this.getLuminanceSource(),c=o.getWidth();i==null||i.getSize()<c?i=new q(c):i.clear(),this.initArrays(c);const d=o.getRow(n,this.luminances),f=this.buckets;for(let E=0;E<c;E++)f[(d[E]&255)>>Re.LUMINANCE_SHIFT]++;const p=Re.estimateBlackPoint(f);if(c<3)for(let E=0;E<c;E++)(d[E]&255)<p&&i.set(E);else{let E=d[0]&255,S=d[1]&255;for(let I=1;I<c-1;I++){const P=d[I+1]&255;(S*4-E-P)/2<p&&i.set(I),E=S,S=P}}return i}getBlackMatrix(){const n=this.getLuminanceSource(),i=n.getWidth(),o=n.getHeight(),c=new Ie(i,o);this.initArrays(i);const d=this.buckets;for(let E=1;E<5;E++){const S=Math.floor(o*E/5),I=n.getRow(S,this.luminances),P=Math.floor(i*4/5);for(let B=Math.floor(i/5);B<P;B++){const V=I[B]&255;d[V>>Re.LUMINANCE_SHIFT]++}}const f=Re.estimateBlackPoint(d),p=n.getMatrix();for(let E=0;E<o;E++){const S=E*i;for(let I=0;I<i;I++)(p[S+I]&255)<f&&c.set(I,E)}return c}createBinarizer(n){return new Re(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const i=this.buckets;for(let o=0;o<Re.LUMINANCE_BUCKETS;o++)i[o]=0}static estimateBlackPoint(n){const i=n.length;let o=0,c=0,d=0;for(let I=0;I<i;I++)n[I]>d&&(c=I,d=n[I]),n[I]>o&&(o=n[I]);let f=0,p=0;for(let I=0;I<i;I++){const P=I-c,B=n[I]*P*P;B>p&&(f=I,p=B)}if(c>f){const I=c;c=f,f=I}if(f-c<=i/16)throw new Q;let E=f-1,S=-1;for(let I=f-1;I>c;I--){const P=I-c,B=P*P*(f-I)*(o-n[I]);B>S&&(E=I,S=B)}return E<<Re.LUMINANCE_SHIFT}}Re.LUMINANCE_BITS=5,Re.LUMINANCE_SHIFT=8-Re.LUMINANCE_BITS,Re.LUMINANCE_BUCKETS=1<<Re.LUMINANCE_BITS,Re.EMPTY=Uint8ClampedArray.from([0]);class fe extends Re{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),i=n.getWidth(),o=n.getHeight();if(i>=fe.MINIMUM_DIMENSION&&o>=fe.MINIMUM_DIMENSION){const c=n.getMatrix();let d=i>>fe.BLOCK_SIZE_POWER;(i&fe.BLOCK_SIZE_MASK)!==0&&d++;let f=o>>fe.BLOCK_SIZE_POWER;(o&fe.BLOCK_SIZE_MASK)!==0&&f++;const p=fe.calculateBlackPoints(c,d,f,i,o),E=new Ie(i,o);fe.calculateThresholdForBlock(c,d,f,i,o,p,E),this.matrix=E}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new fe(n)}static calculateThresholdForBlock(n,i,o,c,d,f,p){const E=d-fe.BLOCK_SIZE,S=c-fe.BLOCK_SIZE;for(let I=0;I<o;I++){let P=I<<fe.BLOCK_SIZE_POWER;P>E&&(P=E);const B=fe.cap(I,2,o-3);for(let V=0;V<i;V++){let G=V<<fe.BLOCK_SIZE_POWER;G>S&&(G=S);const Y=fe.cap(V,2,i-3);let J=0;for(let Ee=-2;Ee<=2;Ee++){const Ce=f[B+Ee];J+=Ce[Y-2]+Ce[Y-1]+Ce[Y]+Ce[Y+1]+Ce[Y+2]}const oe=J/25;fe.thresholdBlock(n,G,P,oe,c,p)}}}static cap(n,i,o){return n<i?i:n>o?o:n}static thresholdBlock(n,i,o,c,d,f){for(let p=0,E=o*d+i;p<fe.BLOCK_SIZE;p++,E+=d)for(let S=0;S<fe.BLOCK_SIZE;S++)(n[E+S]&255)<=c&&f.set(i+S,o+p)}static calculateBlackPoints(n,i,o,c,d){const f=d-fe.BLOCK_SIZE,p=c-fe.BLOCK_SIZE,E=new Array(o);for(let S=0;S<o;S++){E[S]=new Int32Array(i);let I=S<<fe.BLOCK_SIZE_POWER;I>f&&(I=f);for(let P=0;P<i;P++){let B=P<<fe.BLOCK_SIZE_POWER;B>p&&(B=p);let V=0,G=255,Y=0;for(let oe=0,Ee=I*c+B;oe<fe.BLOCK_SIZE;oe++,Ee+=c){for(let Ce=0;Ce<fe.BLOCK_SIZE;Ce++){const ye=n[Ee+Ce]&255;V+=ye,ye<G&&(G=ye),ye>Y&&(Y=ye)}if(Y-G>fe.MIN_DYNAMIC_RANGE)for(oe++,Ee+=c;oe<fe.BLOCK_SIZE;oe++,Ee+=c)for(let Ce=0;Ce<fe.BLOCK_SIZE;Ce++)V+=n[Ee+Ce]&255}let J=V>>fe.BLOCK_SIZE_POWER*2;if(Y-G<=fe.MIN_DYNAMIC_RANGE&&(J=G/2,S>0&&P>0)){const oe=(E[S-1][P]+2*E[S][P-1]+E[S-1][P-1])/4;G<oe&&(J=oe)}E[S][P]=J}}return E}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class de{constructor(n,i){this.width=n,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,i,o,c){throw new Ue("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ue("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ue("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let i=new Te;for(let o=0;o<this.height;o++){const c=this.getRow(o,n);for(let d=0;d<this.width;d++){const f=c[d]&255;let p;f<64?p="#":f<128?p="+":f<192?p=".":p=" ",i.append(p)}i.append(`
`)}return i.toString()}}class Ne extends de{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,i){const o=this.delegate.getRow(n,i),c=this.getWidth();for(let d=0;d<c;d++)o[d]=255-(o[d]&255);return o}getMatrix(){const n=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(i);for(let c=0;c<i;c++)o[c]=255-(n[c]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(n,i,o,c){return new Ne(this.delegate.crop(n,i,o,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ne(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ne(this.delegate.rotateCounterClockwise45())}}class Ae extends de{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=Ae.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const i=n.getContext("2d").getImageData(0,0,n.width,n.height);return Ae.toGrayscaleBuffer(i.data,n.width,n.height)}static toGrayscaleBuffer(n,i,o){const c=new Uint8ClampedArray(i*o);for(let d=0,f=0,p=n.length;d<p;d+=4,f++){let E;if(n[d+3]===0)E=255;else{const I=n[d],P=n[d+1],B=n[d+2];E=306*I+601*P+117*B+512>>10}c[f]=E}return c}getRow(n,i){if(n<0||n>=this.getHeight())throw new C("Requested row is outside the image: "+n);const o=this.getWidth(),c=n*o;return i===null?i=this.buffer.slice(c,c+o):(i.length<o&&(i=new Uint8ClampedArray(o)),i.set(this.buffer.slice(c,c+o))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,i,o,c){return super.crop(n,i,o,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const i=this.getTempCanvasElement(),o=i.getContext("2d"),c=n*Ae.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(c))*d+Math.abs(Math.sin(c))*f),E=Math.ceil(Math.abs(Math.sin(c))*d+Math.abs(Math.cos(c))*f);return i.width=p,i.height=E,o.translate(p/2,E/2),o.rotate(c),o.drawImage(this.canvas,d/-2,f/-2),this.buffer=Ae.makeBufferFromCanvasImageData(i),this}invert(){return new Ne(this)}}Ae.DEGREE_TO_RADIANS=Math.PI/180;class ${constructor(n,i,o){this.deviceId=n,this.label=i,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ae=(globalThis||cu||self||window||void 0)&&(globalThis||cu||self||window||void 0).__awaiter||function(O,n,i,o){function c(d){return d instanceof i?d:new i(function(f){f(d)})}return new(i||(i=Promise))(function(d,f){function p(I){try{S(o.next(I))}catch(P){f(P)}}function E(I){try{S(o.throw(I))}catch(P){f(P)}}function S(I){I.done?d(I.value):c(I.value).then(p,E)}S((o=o.apply(O,n||[])).next())})};class ke{constructor(n,i=500,o){this.reader=n,this.timeBetweenScansMillis=i,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const o of n){const c=o.kind==="video"?"videoinput":o.kind;if(c!=="videoinput")continue;const d=o.deviceId||o.id,f=o.label||`Video device ${i.length+1}`,p=o.groupId,E={deviceId:d,label:f,kind:c,groupId:p};i.push(E)}return i})}getVideoInputDevices(){return ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new $(i.deviceId,i.label))})}findDeviceById(n){return ae(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(o=>o.deviceId===n):null})}decodeFromInputVideoDevice(n,i){return ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,i)})}decodeOnceFromVideoDevice(n,i){return ae(this,void 0,void 0,function*(){this.reset();let o;n?o={deviceId:{exact:n}}:o={facingMode:"environment"};const c={video:o};return yield this.decodeOnceFromConstraints(c,i)})}decodeOnceFromConstraints(n,i){return ae(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(o,i)})}decodeOnceFromStream(n,i){return ae(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(n,i);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(n,i,o){return ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,i,o)})}decodeFromVideoDevice(n,i,o){return ae(this,void 0,void 0,function*(){let c;n?c={deviceId:{exact:n}}:c={facingMode:"environment"};const d={video:c};return yield this.decodeFromConstraints(d,i,o)})}decodeFromConstraints(n,i,o){return ae(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(c,i,o)})}decodeFromStream(n,i,o){return ae(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(n,i);return yield this.decodeContinuously(c,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,i){return ae(this,void 0,void 0,function*(){const o=this.prepareVideoElement(i);return this.addVideoSource(o,n),this.videoElement=o,this.stream=n,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(n){return new Promise((i,o)=>this.playVideoOnLoad(n,()=>i()))}playVideoOnLoad(n,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",i),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,i){const o=document.getElementById(n);if(!o)throw new A(`element with id '${n}' not found`);if(o.nodeName.toLowerCase()!==i.toLowerCase())throw new A(`element with id '${n}' must be an ${i} element`);return o}decodeFromImage(n,i){if(!n&&!i)throw new A("either imageElement with a src set or an url must be provided");return i&&!n?this.decodeFromImageUrl(i):this.decodeFromImageElement(n)}decodeFromVideo(n,i){if(!n&&!i)throw new A("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,i,o){if(n===void 0&&i===void 0)throw new A("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrlContinuously(i,o):this.decodeFromVideoElementContinuously(n,o)}decodeFromImageElement(n){if(!n)throw new A("An image element must be provided.");this.reset();const i=this.prepareImageElement(n);this.imageElement=i;let o;return this.isImageLoaded(i)?o=this.decodeOnce(i,!1,!0):o=this._decodeOnLoadImage(i),o}decodeFromVideoElement(n){const i=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(n,i){const o=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(o,i)}_decodeFromVideoElementSetup(n){if(!n)throw new A("A video element must be provided.");this.reset();const i=this.prepareVideoElement(n);return this.videoElement=i,i}decodeFromImageUrl(n){if(!n)throw new A("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const o=this._decodeOnLoadImage(i);return i.src=n,o}decodeFromVideoUrl(n){if(!n)throw new A("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElement(i);return i.src=n,o}decodeFromVideoUrlContinuously(n,i){if(!n)throw new A("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(o,i);return o.src=n,c}_decodeOnLoadImage(n){return new Promise((i,o)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(i,o),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,i){return ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,i)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let i;return typeof n>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(i=n),i}prepareVideoElement(n){let i;return!n&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(i=n),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(n,i=!0,o=!0){this._stopAsyncDecode=!1;const c=(d,f)=>{if(this._stopAsyncDecode){f(new Q("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(n);d(p)}catch(p){const E=i&&p instanceof Q,I=(p instanceof R||p instanceof ee)&&o;if(E||I)return setTimeout(c,this._timeBetweenDecodingAttempts,d,f);f(p)}};return new Promise((d,f)=>c(d,f))}decodeContinuously(n,i){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(n);i(c,null),setTimeout(o,this.timeBetweenScansMillis)}catch(c){i(null,c);const d=c instanceof R||c instanceof ee,f=c instanceof Q;(d||f)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(n){const i=this.createBinaryBitmap(n);return this.decodeBitmap(i)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,i,o){i||(i={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(n,i,o=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const i=this.getCaptureCanvas(n),o=new Ae(i),c=new fe(o);return new T(c)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const i=this.createCaptureCanvas(n);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let o,c;return typeof n<"u"&&(n instanceof HTMLVideoElement?(o=n.videoWidth,c=n.videoHeight):n instanceof HTMLImageElement&&(o=n.naturalWidth||n.width,c=n.naturalHeight||n.height)),i.style.width=o+"px",i.style.height=c+"px",i.width=o,i.height=c,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,i){try{n.srcObject=i}catch{n.src=URL.createObjectURL(i)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class Me{constructor(n,i,o=i==null?0:8*i.length,c,d,f=D.currentTimeMillis()){this.text=n,this.rawBytes=i,this.numBits=o,this.resultPoints=c,this.format=d,this.timestamp=f,this.text=n,this.rawBytes=i,o==null?this.numBits=i==null?0:8*i.length:this.numBits=o,this.resultPoints=c,this.format=d,this.resultMetadata=null,f==null?this.timestamp=D.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,i)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const i=this.resultPoints;if(i===null)this.resultPoints=n;else if(n!==null&&n.length>0){const o=new Array(i.length+n.length);D.arraycopy(i,0,o,0,i.length),D.arraycopy(n,0,o,i.length,n.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ct;(function(O){O[O.AZTEC=0]="AZTEC",O[O.CODABAR=1]="CODABAR",O[O.CODE_39=2]="CODE_39",O[O.CODE_93=3]="CODE_93",O[O.CODE_128=4]="CODE_128",O[O.DATA_MATRIX=5]="DATA_MATRIX",O[O.EAN_8=6]="EAN_8",O[O.EAN_13=7]="EAN_13",O[O.ITF=8]="ITF",O[O.MAXICODE=9]="MAXICODE",O[O.PDF_417=10]="PDF_417",O[O.QR_CODE=11]="QR_CODE",O[O.RSS_14=12]="RSS_14",O[O.RSS_EXPANDED=13]="RSS_EXPANDED",O[O.UPC_A=14]="UPC_A",O[O.UPC_E=15]="UPC_E",O[O.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ct||(ct={}));var pe=ct,yt;(function(O){O[O.OTHER=0]="OTHER",O[O.ORIENTATION=1]="ORIENTATION",O[O.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",O[O.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",O[O.ISSUE_NUMBER=4]="ISSUE_NUMBER",O[O.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",O[O.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",O[O.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",O[O.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",O[O.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",O[O.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(yt||(yt={}));var $e=yt;class wt{constructor(n,i,o,c,d=-1,f=-1){this.rawBytes=n,this.text=i,this.byteSegments=o,this.ecLevel=c,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Gt{exp(n){return this.expTable[n]}log(n){if(n===0)throw new C;return this.logTable[n]}static addOrSubtract(n,i){return n^i}}class br{constructor(n,i){if(i.length===0)throw new C;this.field=n;const o=i.length;if(o>1&&i[0]===0){let c=1;for(;c<o&&i[c]===0;)c++;c===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-c),D.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const i=this.coefficients;let o;if(n===1){o=0;for(let f=0,p=i.length;f!==p;f++){const E=i[f];o=Gt.addOrSubtract(o,E)}return o}o=i[0];const c=i.length,d=this.field;for(let f=1;f<c;f++)o=Gt.addOrSubtract(d.multiply(n,o),i[f]);return o}addOrSubtract(n){if(!this.field.equals(n.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,o=n.coefficients;if(i.length>o.length){const f=i;i=o,o=f}let c=new Int32Array(o.length);const d=o.length-i.length;D.arraycopy(o,0,c,0,d);for(let f=d;f<o.length;f++)c[f]=Gt.addOrSubtract(i[f-d],o[f]);return new br(this.field,c)}multiply(n){if(!this.field.equals(n.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const i=this.coefficients,o=i.length,c=n.coefficients,d=c.length,f=new Int32Array(o+d-1),p=this.field;for(let E=0;E<o;E++){const S=i[E];for(let I=0;I<d;I++)f[E+I]=Gt.addOrSubtract(f[E+I],p.multiply(S,c[I]))}return new br(p,f)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const i=this.coefficients.length,o=this.field,c=new Int32Array(i),d=this.coefficients;for(let f=0;f<i;f++)c[f]=o.multiply(d[f],n);return new br(o,c)}multiplyByMonomial(n,i){if(n<0)throw new C;if(i===0)return this.field.getZero();const o=this.coefficients,c=o.length,d=new Int32Array(c+n),f=this.field;for(let p=0;p<c;p++)d[p]=f.multiply(o[p],i);return new br(f,d)}divide(n){if(!this.field.equals(n.field))throw new C("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new C("Divide by 0");const i=this.field;let o=i.getZero(),c=this;const d=n.getCoefficient(n.getDegree()),f=i.inverse(d);for(;c.getDegree()>=n.getDegree()&&!c.isZero();){const p=c.getDegree()-n.getDegree(),E=i.multiply(c.getCoefficient(c.getDegree()),f),S=n.multiplyByMonomial(p,E),I=i.buildMonomial(p,E);o=o.addOrSubtract(I),c=c.addOrSubtract(S)}return[o,c]}toString(){let n="";for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);if(o!==0){if(o<0?(n+=" - ",o=-o):n.length>0&&(n+=" + "),i===0||o!==1){const c=this.field.log(o);c===0?n+="1":c===1?n+="a":(n+="a^",n+=c)}i!==0&&(i===1?n+="x":(n+="x^",n+=i))}}return n}}class _s extends w{}_s.kind="ArithmeticException";class mt extends Gt{constructor(n,i,o){super(),this.primitive=n,this.size=i,this.generatorBase=o;const c=new Int32Array(i);let d=1;for(let p=0;p<i;p++)c[p]=d,d*=2,d>=i&&(d^=n,d&=i-1);this.expTable=c;const f=new Int32Array(i);for(let p=0;p<i-1;p++)f[c[p]]=p;this.logTable=f,this.zero=new br(this,Int32Array.from([0])),this.one=new br(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new C;if(i===0)return this.zero;const o=new Int32Array(n+1);return o[0]=i,new br(this,o)}inverse(n){if(n===0)throw new _s;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+j.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}mt.AZTEC_DATA_12=new mt(4201,4096,1),mt.AZTEC_DATA_10=new mt(1033,1024,1),mt.AZTEC_DATA_6=new mt(67,64,1),mt.AZTEC_PARAM=new mt(19,16,1),mt.QR_CODE_FIELD_256=new mt(285,256,0),mt.DATA_MATRIX_FIELD_256=new mt(301,256,1),mt.AZTEC_DATA_8=mt.DATA_MATRIX_FIELD_256,mt.MAXICODE_FIELD_64=mt.AZTEC_DATA_6;class vn extends w{}vn.kind="ReedSolomonException";class fn extends w{}fn.kind="IllegalStateException";class cs{constructor(n){this.field=n}decode(n,i){const o=this.field,c=new br(o,n),d=new Int32Array(i);let f=!0;for(let V=0;V<i;V++){const G=c.evaluateAt(o.exp(V+o.getGeneratorBase()));d[d.length-1-V]=G,G!==0&&(f=!1)}if(f)return;const p=new br(o,d),E=this.runEuclideanAlgorithm(o.buildMonomial(i,1),p,i),S=E[0],I=E[1],P=this.findErrorLocations(S),B=this.findErrorMagnitudes(I,P);for(let V=0;V<P.length;V++){const G=n.length-1-o.log(P[V]);if(G<0)throw new vn("Bad error location");n[G]=mt.addOrSubtract(n[G],B[V])}}runEuclideanAlgorithm(n,i,o){if(n.getDegree()<i.getDegree()){const V=n;n=i,i=V}const c=this.field;let d=n,f=i,p=c.getZero(),E=c.getOne();for(;f.getDegree()>=(o/2|0);){let V=d,G=p;if(d=f,p=E,d.isZero())throw new vn("r_{i-1} was zero");f=V;let Y=c.getZero();const J=d.getCoefficient(d.getDegree()),oe=c.inverse(J);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){const Ee=f.getDegree()-d.getDegree(),Ce=c.multiply(f.getCoefficient(f.getDegree()),oe);Y=Y.addOrSubtract(c.buildMonomial(Ee,Ce)),f=f.addOrSubtract(d.multiplyByMonomial(Ee,Ce))}if(E=Y.multiply(p).addOrSubtract(G),f.getDegree()>=d.getDegree())throw new fn("Division algorithm failed to reduce polynomial?")}const S=E.getCoefficient(0);if(S===0)throw new vn("sigmaTilde(0) was zero");const I=c.inverse(S),P=E.multiplyScalar(I),B=f.multiplyScalar(I);return[P,B]}findErrorLocations(n){const i=n.getDegree();if(i===1)return Int32Array.from([n.getCoefficient(1)]);const o=new Int32Array(i);let c=0;const d=this.field;for(let f=1;f<d.getSize()&&c<i;f++)n.evaluateAt(f)===0&&(o[c]=d.inverse(f),c++);if(c!==i)throw new vn("Error locator degree does not match number of roots");return o}findErrorMagnitudes(n,i){const o=i.length,c=new Int32Array(o),d=this.field;for(let f=0;f<o;f++){const p=d.inverse(i[f]);let E=1;for(let S=0;S<o;S++)if(f!==S){const I=d.multiply(i[S],p),P=(I&1)===0?I|1:I&-2;E=d.multiply(E,P)}c[f]=d.multiply(n.evaluateAt(p),d.inverse(E)),d.getGeneratorBase()!==0&&(c[f]=d.multiply(c[f],p))}return c}}var Bt;(function(O){O[O.UPPER=0]="UPPER",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.DIGIT=3]="DIGIT",O[O.PUNCT=4]="PUNCT",O[O.BINARY=5]="BINARY"})(Bt||(Bt={}));class Nt{decode(n){this.ddata=n;let i=n.getBits(),o=this.extractBits(i),c=this.correctBits(o),d=Nt.convertBoolArrayToByteArray(c),f=Nt.getEncodedData(c),p=new wt(d,f,null,null);return p.setNumBits(c.length),p}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let i=n.length,o=Bt.UPPER,c=Bt.UPPER,d="",f=0;for(;f<i;)if(c===Bt.BINARY){if(i-f<5)break;let p=Nt.readCode(n,f,5);if(f+=5,p===0){if(i-f<11)break;p=Nt.readCode(n,f,11)+31,f+=11}for(let E=0;E<p;E++){if(i-f<8){f=i;break}const S=Nt.readCode(n,f,8);d+=he.castAsNonUtf8Char(S),f+=8}c=o}else{let p=c===Bt.DIGIT?4:5;if(i-f<p)break;let E=Nt.readCode(n,f,p);f+=p;let S=Nt.getCharacter(c,E);S.startsWith("CTRL_")?(o=c,c=Nt.getTable(S.charAt(5)),S.charAt(6)==="L"&&(o=c)):(d+=S,c=o)}return d}static getTable(n){switch(n){case"L":return Bt.LOWER;case"P":return Bt.PUNCT;case"M":return Bt.MIXED;case"D":return Bt.DIGIT;case"B":return Bt.BINARY;case"U":default:return Bt.UPPER}}static getCharacter(n,i){switch(n){case Bt.UPPER:return Nt.UPPER_TABLE[i];case Bt.LOWER:return Nt.LOWER_TABLE[i];case Bt.MIXED:return Nt.MIXED_TABLE[i];case Bt.PUNCT:return Nt.PUNCT_TABLE[i];case Bt.DIGIT:return Nt.DIGIT_TABLE[i];default:throw new fn("Bad table")}}correctBits(n){let i,o;this.ddata.getNbLayers()<=2?(o=6,i=mt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,i=mt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,i=mt.AZTEC_DATA_10):(o=12,i=mt.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),d=n.length/o;if(d<c)throw new ee;let f=n.length%o,p=new Int32Array(d);for(let B=0;B<d;B++,f+=o)p[B]=Nt.readCode(n,f,o);try{new cs(i).decode(p,d-c)}catch(B){throw new ee(B)}let E=(1<<o)-1,S=0;for(let B=0;B<c;B++){let V=p[B];if(V===0||V===E)throw new ee;(V===1||V===E-1)&&S++}let I=new Array(c*o-S),P=0;for(let B=0;B<c;B++){let V=p[B];if(V===1||V===E-1)I.fill(V>1,P,P+o-1),P+=o-1;else for(let G=o-1;G>=0;--G)I[P++]=(V&1<<G)!==0}return I}extractBits(n){let i=this.ddata.isCompact(),o=this.ddata.getNbLayers(),c=(i?11:14)+o*4,d=new Int32Array(c),f=new Array(this.totalBitsInLayer(o,i));if(i)for(let p=0;p<d.length;p++)d[p]=p;else{let p=c+1+2*j.truncDivision(j.truncDivision(c,2)-1,15),E=c/2,S=j.truncDivision(p,2);for(let I=0;I<E;I++){let P=I+j.truncDivision(I,15);d[E-I-1]=S-P-1,d[E+I]=S+P+1}}for(let p=0,E=0;p<o;p++){let S=(o-p)*4+(i?9:12),I=p*2,P=c-1-I;for(let B=0;B<S;B++){let V=B*2;for(let G=0;G<2;G++)f[E+V+G]=n.get(d[I+G],d[I+B]),f[E+2*S+V+G]=n.get(d[I+B],d[P-G]),f[E+4*S+V+G]=n.get(d[P-G],d[P-B]),f[E+6*S+V+G]=n.get(d[P-B],d[I+G])}E+=S*8}return f}static readCode(n,i,o){let c=0;for(let d=i;d<i+o;d++)c<<=1,n[d]&&(c|=1);return c}static readByte(n,i){let o=n.length-i;return o>=8?Nt.readCode(n,i,8):Nt.readCode(n,i,o)<<8-o}static convertBoolArrayToByteArray(n){let i=new Uint8Array((n.length+7)/8);for(let o=0;o<i.length;o++)i[o]=Nt.readByte(n,8*o);return i}totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}Nt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Nt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Nt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Nt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Nt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class tt{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,i,o,c){const d=n-o,f=i-c;return Math.sqrt(d*d+f*f)}static sum(n){let i=0;for(let o=0,c=n.length;o!==c;o++){const d=n[o];i+=d}return i}}class $n{static floatToIntBits(n){return n}}$n.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Pe{constructor(n,i){this.x=n,this.y=i}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof Pe){const i=n;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*$n.floatToIntBits(this.x)+$n.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const i=this.distance(n[0],n[1]),o=this.distance(n[1],n[2]),c=this.distance(n[0],n[2]);let d,f,p;if(o>=i&&o>=c?(f=n[0],d=n[1],p=n[2]):c>=o&&c>=i?(f=n[1],d=n[0],p=n[2]):(f=n[2],d=n[0],p=n[1]),this.crossProductZ(d,f,p)<0){const E=d;d=p,p=E}n[0]=d,n[1]=f,n[2]=p}static distance(n,i){return tt.distance(n.x,n.y,i.x,i.y)}static crossProductZ(n,i,o){const c=i.x,d=i.y;return(o.x-c)*(n.y-d)-(o.y-d)*(n.x-c)}}class hr{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Xn extends hr{constructor(n,i,o,c,d){super(n,i),this.compact=o,this.nbDatablocks=c,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class bn{constructor(n,i,o,c){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),i==null&&(i=bn.INIT_SIZE),o==null&&(o=n.getWidth()/2|0),c==null&&(c=n.getHeight()/2|0);const d=i/2|0;if(this.leftInit=o-d,this.rightInit=o+d,this.upInit=c-d,this.downInit=c+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Q}detect(){let n=this.leftInit,i=this.rightInit,o=this.upInit,c=this.downInit,d=!1,f=!0,p=!1,E=!1,S=!1,I=!1,P=!1;const B=this.width,V=this.height;for(;f;){f=!1;let G=!0;for(;(G||!E)&&i<B;)G=this.containsBlackPoint(o,c,i,!1),G?(i++,f=!0,E=!0):E||i++;if(i>=B){d=!0;break}let Y=!0;for(;(Y||!S)&&c<V;)Y=this.containsBlackPoint(n,i,c,!0),Y?(c++,f=!0,S=!0):S||c++;if(c>=V){d=!0;break}let J=!0;for(;(J||!I)&&n>=0;)J=this.containsBlackPoint(o,c,n,!1),J?(n--,f=!0,I=!0):I||n--;if(n<0){d=!0;break}let oe=!0;for(;(oe||!P)&&o>=0;)oe=this.containsBlackPoint(n,i,o,!0),oe?(o--,f=!0,P=!0):P||o--;if(o<0){d=!0;break}f&&(p=!0)}if(!d&&p){const G=i-n;let Y=null;for(let Ce=1;Y===null&&Ce<G;Ce++)Y=this.getBlackPointOnSegment(n,c-Ce,n+Ce,c);if(Y==null)throw new Q;let J=null;for(let Ce=1;J===null&&Ce<G;Ce++)J=this.getBlackPointOnSegment(n,o+Ce,n+Ce,o);if(J==null)throw new Q;let oe=null;for(let Ce=1;oe===null&&Ce<G;Ce++)oe=this.getBlackPointOnSegment(i,o+Ce,i-Ce,o);if(oe==null)throw new Q;let Ee=null;for(let Ce=1;Ee===null&&Ce<G;Ce++)Ee=this.getBlackPointOnSegment(i,c-Ce,i-Ce,c);if(Ee==null)throw new Q;return this.centerEdges(Ee,Y,oe,J)}else throw new Q}getBlackPointOnSegment(n,i,o,c){const d=tt.round(tt.distance(n,i,o,c)),f=(o-n)/d,p=(c-i)/d,E=this.image;for(let S=0;S<d;S++){const I=tt.round(n+S*f),P=tt.round(i+S*p);if(E.get(I,P))return new Pe(I,P)}return null}centerEdges(n,i,o,c){const d=n.getX(),f=n.getY(),p=i.getX(),E=i.getY(),S=o.getX(),I=o.getY(),P=c.getX(),B=c.getY(),V=bn.CORR;return d<this.width/2?[new Pe(P-V,B+V),new Pe(p+V,E+V),new Pe(S-V,I-V),new Pe(d+V,f-V)]:[new Pe(P+V,B+V),new Pe(p+V,E-V),new Pe(S-V,I+V),new Pe(d-V,f-V)]}containsBlackPoint(n,i,o,c){const d=this.image;if(c){for(let f=n;f<=i;f++)if(d.get(f,o))return!0}else for(let f=n;f<=i;f++)if(d.get(o,f))return!0;return!1}}bn.INIT_SIZE=10,bn.CORR=1;class ci{static checkAndNudgePoints(n,i){const o=n.getWidth(),c=n.getHeight();let d=!0;for(let f=0;f<i.length&&d;f+=2){const p=Math.floor(i[f]),E=Math.floor(i[f+1]);if(p<-1||p>o||E<-1||E>c)throw new Q;d=!1,p===-1?(i[f]=0,d=!0):p===o&&(i[f]=o-1,d=!0),E===-1?(i[f+1]=0,d=!0):E===c&&(i[f+1]=c-1,d=!0)}d=!0;for(let f=i.length-2;f>=0&&d;f-=2){const p=Math.floor(i[f]),E=Math.floor(i[f+1]);if(p<-1||p>o||E<-1||E>c)throw new Q;d=!1,p===-1?(i[f]=0,d=!0):p===o&&(i[f]=o-1,d=!0),E===-1?(i[f+1]=0,d=!0):E===c&&(i[f+1]=c-1,d=!0)}}}class Rr{constructor(n,i,o,c,d,f,p,E,S){this.a11=n,this.a21=i,this.a31=o,this.a12=c,this.a22=d,this.a32=f,this.a13=p,this.a23=E,this.a33=S}static quadrilateralToQuadrilateral(n,i,o,c,d,f,p,E,S,I,P,B,V,G,Y,J){const oe=Rr.quadrilateralToSquare(n,i,o,c,d,f,p,E);return Rr.squareToQuadrilateral(S,I,P,B,V,G,Y,J).times(oe)}transformPoints(n){const i=n.length,o=this.a11,c=this.a12,d=this.a13,f=this.a21,p=this.a22,E=this.a23,S=this.a31,I=this.a32,P=this.a33;for(let B=0;B<i;B+=2){const V=n[B],G=n[B+1],Y=d*V+E*G+P;n[B]=(o*V+f*G+S)/Y,n[B+1]=(c*V+p*G+I)/Y}}transformPointsWithValues(n,i){const o=this.a11,c=this.a12,d=this.a13,f=this.a21,p=this.a22,E=this.a23,S=this.a31,I=this.a32,P=this.a33,B=n.length;for(let V=0;V<B;V++){const G=n[V],Y=i[V],J=d*G+E*Y+P;n[V]=(o*G+f*Y+S)/J,i[V]=(c*G+p*Y+I)/J}}static squareToQuadrilateral(n,i,o,c,d,f,p,E){const S=n-o+d-p,I=i-c+f-E;if(S===0&&I===0)return new Rr(o-n,d-o,n,c-i,f-c,i,0,0,1);{const P=o-d,B=p-d,V=c-f,G=E-f,Y=P*G-B*V,J=(S*G-B*I)/Y,oe=(P*I-S*V)/Y;return new Rr(o-n+J*o,p-n+oe*p,n,c-i+J*c,E-i+oe*E,i,J,oe,1)}}static quadrilateralToSquare(n,i,o,c,d,f,p,E){return Rr.squareToQuadrilateral(n,i,o,c,d,f,p,E).buildAdjoint()}buildAdjoint(){return new Rr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new Rr(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class ui extends ci{sampleGrid(n,i,o,c,d,f,p,E,S,I,P,B,V,G,Y,J,oe,Ee,Ce){const ye=Rr.quadrilateralToQuadrilateral(c,d,f,p,E,S,I,P,B,V,G,Y,J,oe,Ee,Ce);return this.sampleGridWithTransform(n,i,o,ye)}sampleGridWithTransform(n,i,o,c){if(i<=0||o<=0)throw new Q;const d=new Ie(i,o),f=new Float32Array(2*i);for(let p=0;p<o;p++){const E=f.length,S=p+.5;for(let I=0;I<E;I+=2)f[I]=I/2+.5,f[I+1]=S;c.transformPoints(f),ci.checkAndNudgePoints(n,f);try{for(let I=0;I<E;I+=2)n.get(Math.floor(f[I]),Math.floor(f[I+1]))&&d.set(I/2,p)}catch{throw new Q}}return d}}class rn{static setGridSampler(n){rn.gridSampler=n}static getInstance(){return rn.gridSampler}}rn.gridSampler=new ui;class fr{constructor(n,i){this.x=n,this.y=i}toResultPoint(){return new Pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class mn{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let i=this.getMatrixCenter(),o=this.getBullsEyeCorners(i);if(n){let f=o[0];o[0]=o[2],o[2]=f}this.extractParameters(o);let c=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),d=this.getMatrixCornerPoints(o);return new Xn(c,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new Q;let i=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(n[0],n[1],i),this.sampleLine(n[1],n[2],i),this.sampleLine(n[2],n[3],i),this.sampleLine(n[3],n[0],i)]);this.shift=this.getRotation(o,i);let c=0;for(let f=0;f<4;f++){let p=o[(this.shift+f)%4];this.compact?(c<<=7,c+=p>>1&127):(c<<=10,c+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(n,i){let o=0;n.forEach((c,d,f)=>{let p=(c>>i-2<<1)+(c&1);o=(o<<3)+p}),o=((o&1)<<11)+(o>>1);for(let c=0;c<4;c++)if(j.bitCount(o^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new Q}getCorrectedParameterData(n,i){let o,c;i?(o=7,c=2):(o=10,c=4);let d=o-c,f=new Int32Array(o);for(let E=o-1;E>=0;--E)f[E]=n&15,n>>=4;try{new cs(mt.AZTEC_PARAM).decode(f,d)}catch{throw new Q}let p=0;for(let E=0;E<c;E++)p=(p<<4)+f[E];return p}getBullsEyeCorners(n){let i=n,o=n,c=n,d=n,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(i,f,1,-1),B=this.getFirstDifferent(o,f,1,1),V=this.getFirstDifferent(c,f,-1,1),G=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let Y=this.distancePoint(G,P)*this.nbCenterLayers/(this.distancePoint(d,i)*(this.nbCenterLayers+2));if(Y<.75||Y>1.25||!this.isWhiteOrBlackRectangle(P,B,V,G))break}i=P,o=B,c=V,d=G,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Q;this.compact=this.nbCenterLayers===5;let p=new Pe(i.getX()+.5,i.getY()-.5),E=new Pe(o.getX()+.5,o.getY()+.5),S=new Pe(c.getX()-.5,c.getY()+.5),I=new Pe(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,E,S,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,i,o,c;try{let p=new bn(this.image).detect();n=p[0],i=p[1],o=p[2],c=p[3]}catch{let E=this.image.getWidth()/2,S=this.image.getHeight()/2;n=this.getFirstDifferent(new fr(E+7,S-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new fr(E+7,S+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new fr(E-7,S+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new fr(E-7,S-7),!1,-1,-1).toResultPoint()}let d=tt.round((n.getX()+c.getX()+i.getX()+o.getX())/4),f=tt.round((n.getY()+c.getY()+i.getY()+o.getY())/4);try{let p=new bn(this.image,15,d,f).detect();n=p[0],i=p[1],o=p[2],c=p[3]}catch{n=this.getFirstDifferent(new fr(d+7,f-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new fr(d+7,f+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new fr(d-7,f+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new fr(d-7,f-7),!1,-1,-1).toResultPoint()}return d=tt.round((n.getX()+c.getX()+i.getX()+o.getX())/4),f=tt.round((n.getY()+c.getY()+i.getY()+o.getY())/4),new fr(d,f)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,i,o,c,d){let f=rn.getInstance(),p=this.getDimension(),E=p/2-this.nbCenterLayers,S=p/2+this.nbCenterLayers;return f.sampleGrid(n,p,p,E,E,S,E,S,S,E,S,i.getX(),i.getY(),o.getX(),o.getY(),c.getX(),c.getY(),d.getX(),d.getY())}sampleLine(n,i,o){let c=0,d=this.distanceResultPoint(n,i),f=d/o,p=n.getX(),E=n.getY(),S=f*(i.getX()-n.getX())/d,I=f*(i.getY()-n.getY())/d;for(let P=0;P<o;P++)this.image.get(tt.round(p+P*S),tt.round(E+P*I))&&(c|=1<<o-P-1);return c}isWhiteOrBlackRectangle(n,i,o,c){let d=3;n=new fr(n.getX()-d,n.getY()+d),i=new fr(i.getX()-d,i.getY()-d),o=new fr(o.getX()+d,o.getY()-d),c=new fr(c.getX()+d,c.getY()+d);let f=this.getColor(c,n);if(f===0)return!1;let p=this.getColor(n,i);return p!==f||(p=this.getColor(i,o),p!==f)?!1:(p=this.getColor(o,c),p===f)}getColor(n,i){let o=this.distancePoint(n,i),c=(i.getX()-n.getX())/o,d=(i.getY()-n.getY())/o,f=0,p=n.getX(),E=n.getY(),S=this.image.get(n.getX(),n.getY()),I=Math.ceil(o);for(let B=0;B<I;B++)p+=c,E+=d,this.image.get(tt.round(p),tt.round(E))!==S&&f++;let P=f/o;return P>.1&&P<.9?0:P<=.1===S?1:-1}getFirstDifferent(n,i,o,c){let d=n.getX()+o,f=n.getY()+c;for(;this.isValid(d,f)&&this.image.get(d,f)===i;)d+=o,f+=c;for(d-=o,f-=c;this.isValid(d,f)&&this.image.get(d,f)===i;)d+=o;for(d-=o;this.isValid(d,f)&&this.image.get(d,f)===i;)f+=c;return f-=c,new fr(d,f)}expandSquare(n,i,o){let c=o/(2*i),d=n[0].getX()-n[2].getX(),f=n[0].getY()-n[2].getY(),p=(n[0].getX()+n[2].getX())/2,E=(n[0].getY()+n[2].getY())/2,S=new Pe(p+c*d,E+c*f),I=new Pe(p-c*d,E-c*f);d=n[1].getX()-n[3].getX(),f=n[1].getY()-n[3].getY(),p=(n[1].getX()+n[3].getX())/2,E=(n[1].getY()+n[3].getY())/2;let P=new Pe(p+c*d,E+c*f),B=new Pe(p-c*d,E-c*f);return[S,P,I,B]}isValid(n,i){return n>=0&&n<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(n){let i=tt.round(n.getX()),o=tt.round(n.getY());return this.isValid(i,o)}distancePoint(n,i){return tt.distance(n.getX(),n.getY(),i.getX(),i.getY())}distanceResultPoint(n,i){return tt.distance(n.getX(),n.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(j.truncDivision(this.nbLayers-4,8)+1)+15}}class kn{decode(n,i=null){let o=null,c=new mn(n.getBlackMatrix()),d=null,f=null;try{let I=c.detectMirror(!1);d=I.getPoints(),this.reportFoundResultPoints(i,d),f=new Nt().decode(I)}catch(I){o=I}if(f==null)try{let I=c.detectMirror(!0);d=I.getPoints(),this.reportFoundResultPoints(i,d),f=new Nt().decode(I)}catch(I){throw o??I}let p=new Me(f.getText(),f.getRawBytes(),f.getNumBits(),d,pe.AZTEC,D.currentTimeMillis()),E=f.getByteSegments();E!=null&&p.putMetadata($e.BYTE_SEGMENTS,E);let S=f.getECLevel();return S!=null&&p.putMetadata($e.ERROR_CORRECTION_LEVEL,S),p}reportFoundResultPoints(n,i){if(n!=null){let o=n.get(te.NEED_RESULT_POINT_CALLBACK);o!=null&&i.forEach((c,d,f)=>{o.foundPossibleResultPoint(c)})}}reset(){}}class Ns extends ke{constructor(n=500){super(new kn,n)}}class $t{decode(n,i){try{return this.doDecode(n,i)}catch{if(i&&i.get(te.TRY_HARDER)===!0&&n.isRotateSupported()){const d=n.rotateCounterClockwise(),f=this.doDecode(d,i),p=f.getResultMetadata();let E=270;p!==null&&p.get($e.ORIENTATION)===!0&&(E=E+p.get($e.ORIENTATION)%360),f.putMetadata($e.ORIENTATION,E);const S=f.getResultPoints();if(S!==null){const I=d.getHeight();for(let P=0;P<S.length;P++)S[P]=new Pe(I-S[P].getY()-1,S[P].getX())}return f}else throw new Q}}reset(){}doDecode(n,i){const o=n.getWidth(),c=n.getHeight();let d=new q(o);const f=i&&i.get(te.TRY_HARDER)===!0,p=Math.max(1,c>>(f?8:5));let E;f?E=c:E=15;const S=Math.trunc(c/2);for(let I=0;I<E;I++){const P=Math.trunc((I+1)/2),B=(I&1)===0,V=S+p*(B?P:-P);if(V<0||V>=c)break;try{d=n.getBlackRow(V,d)}catch{continue}for(let G=0;G<2;G++){if(G===1&&(d.reverse(),i&&i.get(te.NEED_RESULT_POINT_CALLBACK)===!0)){const Y=new Map;i.forEach((J,oe)=>Y.set(oe,J)),Y.delete(te.NEED_RESULT_POINT_CALLBACK),i=Y}try{const Y=this.decodeRow(V,d,i);if(G===1){Y.putMetadata($e.ORIENTATION,180);const J=Y.getResultPoints();J!==null&&(J[0]=new Pe(o-J[0].getX()-1,J[0].getY()),J[1]=new Pe(o-J[1].getX()-1,J[1].getY()))}return Y}catch{}}}throw new Q}static recordPattern(n,i,o){const c=o.length;for(let S=0;S<c;S++)o[S]=0;const d=n.getSize();if(i>=d)throw new Q;let f=!n.get(i),p=0,E=i;for(;E<d;){if(n.get(E)!==f)o[p]++;else{if(++p===c)break;o[p]=1,f=!f}E++}if(!(p===c||p===c-1&&E===d))throw new Q}static recordPatternInReverse(n,i,o){let c=o.length,d=n.get(i);for(;i>0&&c>=0;)n.get(--i)!==d&&(c--,d=!d);if(c>=0)throw new Q;$t.recordPattern(n,i+1,o)}static patternMatchVariance(n,i,o){const c=n.length;let d=0,f=0;for(let S=0;S<c;S++)d+=n[S],f+=i[S];if(d<f)return Number.POSITIVE_INFINITY;const p=d/f;o*=p;let E=0;for(let S=0;S<c;S++){const I=n[S],P=i[S]*p,B=I>P?I-P:P-I;if(B>o)return Number.POSITIVE_INFINITY;E+=B}return E/d}}class _e extends $t{static findStartPattern(n){const i=n.getSize(),o=n.getNextSet(0);let c=0,d=Int32Array.from([0,0,0,0,0,0]),f=o,p=!1;const E=6;for(let S=o;S<i;S++)if(n.get(S)!==p)d[c]++;else{if(c===E-1){let I=_e.MAX_AVG_VARIANCE,P=-1;for(let B=_e.CODE_START_A;B<=_e.CODE_START_C;B++){const V=$t.patternMatchVariance(d,_e.CODE_PATTERNS[B],_e.MAX_INDIVIDUAL_VARIANCE);V<I&&(I=V,P=B)}if(P>=0&&n.isRange(Math.max(0,f-(S-f)/2),f,!1))return Int32Array.from([f,S,P]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[c-1]=0,d[c]=0,c--}else c++;d[c]=1,p=!p}throw new Q}static decodeCode(n,i,o){$t.recordPattern(n,o,i);let c=_e.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<_e.CODE_PATTERNS.length;f++){const p=_e.CODE_PATTERNS[f],E=this.patternMatchVariance(i,p,_e.MAX_INDIVIDUAL_VARIANCE);E<c&&(c=E,d=f)}if(d>=0)return d;throw new Q}decodeRow(n,i,o){const c=o&&o.get(te.ASSUME_GS1)===!0,d=_e.findStartPattern(i),f=d[2];let p=0;const E=new Uint8Array(20);E[p++]=f;let S;switch(f){case _e.CODE_START_A:S=_e.CODE_CODE_A;break;case _e.CODE_START_B:S=_e.CODE_CODE_B;break;case _e.CODE_START_C:S=_e.CODE_CODE_C;break;default:throw new ee}let I=!1,P=!1,B="",V=d[0],G=d[1];const Y=Int32Array.from([0,0,0,0,0,0]);let J=0,oe=0,Ee=f,Ce=0,ye=!0,ft=!1,it=!1;for(;!I;){const fs=P;switch(P=!1,J=oe,oe=_e.decodeCode(i,Y,G),E[p++]=oe,oe!==_e.CODE_STOP&&(ye=!0),oe!==_e.CODE_STOP&&(Ce++,Ee+=Ce*oe),V=G,G+=Y.reduce((Ci,Zo)=>Ci+Zo,0),oe){case _e.CODE_START_A:case _e.CODE_START_B:case _e.CODE_START_C:throw new ee}switch(S){case _e.CODE_CODE_A:if(oe<64)it===ft?B+=String.fromCharCode(32+oe):B+=String.fromCharCode(32+oe+128),it=!1;else if(oe<96)it===ft?B+=String.fromCharCode(oe-64):B+=String.fromCharCode(oe+64),it=!1;else switch(oe!==_e.CODE_STOP&&(ye=!1),oe){case _e.CODE_FNC_1:c&&(B.length===0?B+="]C1":B+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_A:!ft&&it?(ft=!0,it=!1):ft&&it?(ft=!1,it=!1):it=!0;break;case _e.CODE_SHIFT:P=!0,S=_e.CODE_CODE_B;break;case _e.CODE_CODE_B:S=_e.CODE_CODE_B;break;case _e.CODE_CODE_C:S=_e.CODE_CODE_C;break;case _e.CODE_STOP:I=!0;break}break;case _e.CODE_CODE_B:if(oe<96)it===ft?B+=String.fromCharCode(32+oe):B+=String.fromCharCode(32+oe+128),it=!1;else switch(oe!==_e.CODE_STOP&&(ye=!1),oe){case _e.CODE_FNC_1:c&&(B.length===0?B+="]C1":B+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_B:!ft&&it?(ft=!0,it=!1):ft&&it?(ft=!1,it=!1):it=!0;break;case _e.CODE_SHIFT:P=!0,S=_e.CODE_CODE_A;break;case _e.CODE_CODE_A:S=_e.CODE_CODE_A;break;case _e.CODE_CODE_C:S=_e.CODE_CODE_C;break;case _e.CODE_STOP:I=!0;break}break;case _e.CODE_CODE_C:if(oe<100)oe<10&&(B+="0"),B+=oe;else switch(oe!==_e.CODE_STOP&&(ye=!1),oe){case _e.CODE_FNC_1:c&&(B.length===0?B+="]C1":B+="");break;case _e.CODE_CODE_A:S=_e.CODE_CODE_A;break;case _e.CODE_CODE_B:S=_e.CODE_CODE_B;break;case _e.CODE_STOP:I=!0;break}break}fs&&(S=S===_e.CODE_CODE_A?_e.CODE_CODE_B:_e.CODE_CODE_A)}const on=G-V;if(G=i.getNextUnset(G),!i.isRange(G,Math.min(i.getSize(),G+(G-V)/2),!1))throw new Q;if(Ee-=Ce*J,Ee%103!==J)throw new R;const Ln=B.length;if(Ln===0)throw new Q;Ln>0&&ye&&(S===_e.CODE_CODE_C?B=B.substring(0,Ln-2):B=B.substring(0,Ln-1));const Ar=(d[1]+d[0])/2,It=V+on/2,ar=E.length,Kr=new Uint8Array(ar);for(let fs=0;fs<ar;fs++)Kr[fs]=E[fs];const $s=[new Pe(Ar,n),new Pe(It,n)];return new Me(B,Kr,0,$s,pe.CODE_128,new Date().getTime())}}_e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],_e.MAX_AVG_VARIANCE=.25,_e.MAX_INDIVIDUAL_VARIANCE=.7,_e.CODE_SHIFT=98,_e.CODE_CODE_C=99,_e.CODE_CODE_B=100,_e.CODE_CODE_A=101,_e.CODE_FNC_1=102,_e.CODE_FNC_2=97,_e.CODE_FNC_3=96,_e.CODE_FNC_4_A=101,_e.CODE_FNC_4_B=100,_e.CODE_START_A=103,_e.CODE_START_B=104,_e.CODE_START_C=105,_e.CODE_STOP=106;class Jt extends $t{constructor(n=!1,i=!1){super(),this.usingCheckDigit=n,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,i,o){let c=this.counters;c.fill(0),this.decodeRowResult="";let d=Jt.findAsteriskPattern(i,c),f=i.getNextSet(d[1]),p=i.getSize(),E,S;do{Jt.recordPattern(i,f,c);let Y=Jt.toNarrowWidePattern(c);if(Y<0)throw new Q;E=Jt.patternToChar(Y),this.decodeRowResult+=E,S=f;for(let J of c)f+=J;f=i.getNextSet(f)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let Y of c)I+=Y;let P=f-S-I;if(f!==p&&P*2<I)throw new Q;if(this.usingCheckDigit){let Y=this.decodeRowResult.length-1,J=0;for(let oe=0;oe<Y;oe++)J+=Jt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(oe));if(this.decodeRowResult.charAt(Y)!==Jt.ALPHABET_STRING.charAt(J%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,Y)}if(this.decodeRowResult.length===0)throw new Q;let B;this.extendedMode?B=Jt.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let V=(d[1]+d[0])/2,G=S+I/2;return new Me(B,null,0,[new Pe(V,n),new Pe(G,n)],pe.CODE_39,new Date().getTime())}static findAsteriskPattern(n,i){let o=n.getSize(),c=n.getNextSet(0),d=0,f=c,p=!1,E=i.length;for(let S=c;S<o;S++)if(n.get(S)!==p)i[d]++;else{if(d===E-1){if(this.toNarrowWidePattern(i)===Jt.ASTERISK_ENCODING&&n.isRange(Math.max(0,f-Math.floor((S-f)/2)),f,!1))return[f,S];f+=i[0]+i[1],i.copyWithin(0,2,2+d-1),i[d-1]=0,i[d]=0,d--}else d++;i[d]=1,p=!p}throw new Q}static toNarrowWidePattern(n){let i=n.length,o=0,c;do{let d=2147483647;for(let E of n)E<d&&E>o&&(d=E);o=d,c=0;let f=0,p=0;for(let E=0;E<i;E++){let S=n[E];S>o&&(p|=1<<i-1-E,c++,f+=S)}if(c===3){for(let E=0;E<i&&c>0;E++){let S=n[E];if(S>o&&(c--,S*2>=f))return-1}return p}}while(c>3);return-1}static patternToChar(n){for(let i=0;i<Jt.CHARACTER_ENCODINGS.length;i++)if(Jt.CHARACTER_ENCODINGS[i]===n)return Jt.ALPHABET_STRING.charAt(i);if(n===Jt.ASTERISK_ENCODING)return"*";throw new Q}static decodeExtended(n){let i=n.length,o="";for(let c=0;c<i;c++){let d=n.charAt(c);if(d==="+"||d==="$"||d==="%"||d==="/"){let f=n.charAt(c+1),p="\0";switch(d){case"+":if(f>="A"&&f<="Z")p=String.fromCharCode(f.charCodeAt(0)+32);else throw new ee;break;case"$":if(f>="A"&&f<="Z")p=String.fromCharCode(f.charCodeAt(0)-64);else throw new ee;break;case"%":if(f>="A"&&f<="E")p=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")p=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")p=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")p=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")p="\0";else if(f==="V")p="@";else if(f==="W")p="`";else if(f==="X"||f==="Y"||f==="Z")p="";else throw new ee;break;case"/":if(f>="A"&&f<="O")p=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")p=":";else throw new ee;break}o+=p,c++}else o+=d}return o}}Jt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Jt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Jt.ASTERISK_ENCODING=148;class Et extends $t{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,i,o){let c=this.decodeStart(i),d=this.decodeEnd(i),f=new Te;Et.decodeMiddle(i,c[1],d[0],f);let p=f.toString(),E=null;o!=null&&(E=o.get(te.ALLOWED_LENGTHS)),E==null&&(E=Et.DEFAULT_ALLOWED_LENGTHS);let S=p.length,I=!1,P=0;for(let G of E){if(S===G){I=!0;break}G>P&&(P=G)}if(!I&&S>P&&(I=!0),!I)throw new ee;const B=[new Pe(c[1],n),new Pe(d[0],n)];return new Me(p,null,0,B,pe.ITF,new Date().getTime())}static decodeMiddle(n,i,o,c){let d=new Int32Array(10),f=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),f.fill(0),p.fill(0);i<o;){$t.recordPattern(n,i,d);for(let S=0;S<5;S++){let I=2*S;f[S]=d[I],p[S]=d[I+1]}let E=Et.decodeDigit(f);c.append(E.toString()),E=this.decodeDigit(p),c.append(E.toString()),d.forEach(function(S){i+=S})}}decodeStart(n){let i=Et.skipWhiteSpace(n),o=Et.findGuardPattern(n,i,Et.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(n,o[0]),o}validateQuietZone(n,i){let o=this.narrowLineWidth*10;o=o<i?o:i;for(let c=i-1;o>0&&c>=0&&!n.get(c);c--)o--;if(o!==0)throw new Q}static skipWhiteSpace(n){const i=n.getSize(),o=n.getNextSet(0);if(o===i)throw new Q;return o}decodeEnd(n){n.reverse();try{let i=Et.skipWhiteSpace(n),o;try{o=Et.findGuardPattern(n,i,Et.END_PATTERN_REVERSED[0])}catch(d){d instanceof Q&&(o=Et.findGuardPattern(n,i,Et.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,o[0]);let c=o[0];return o[0]=n.getSize()-o[1],o[1]=n.getSize()-c,o}finally{n.reverse()}}static findGuardPattern(n,i,o){let c=o.length,d=new Int32Array(c),f=n.getSize(),p=!1,E=0,S=i;d.fill(0);for(let I=i;I<f;I++)if(n.get(I)!==p)d[E]++;else{if(E===c-1){if($t.patternMatchVariance(d,o,Et.MAX_INDIVIDUAL_VARIANCE)<Et.MAX_AVG_VARIANCE)return[S,I];S+=d[0]+d[1],D.arraycopy(d,2,d,0,E-1),d[E-1]=0,d[E]=0,E--}else E++;d[E]=1,p=!p}throw new Q}static decodeDigit(n){let i=Et.MAX_AVG_VARIANCE,o=-1,c=Et.PATTERNS.length;for(let d=0;d<c;d++){let f=Et.PATTERNS[d],p=$t.patternMatchVariance(n,f,Et.MAX_INDIVIDUAL_VARIANCE);p<i?(i=p,o=d):p===i&&(o=-1)}if(o>=0)return o%10;throw new Q}}Et.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Et.MAX_AVG_VARIANCE=.38,Et.MAX_INDIVIDUAL_VARIANCE=.5,Et.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Et.START_PATTERN=Int32Array.from([1,1,1,1]),Et.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Mt extends $t{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let i=!1,o,c=0,d=Int32Array.from([0,0,0]);for(;!i;){d=Int32Array.from([0,0,0]),o=Mt.findGuardPattern(n,c,!1,this.START_END_PATTERN,d);let f=o[0];c=o[1];let p=f-(c-f);p>=0&&(i=n.isRange(p,f,!1))}return o}static checkChecksum(n){return Mt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let o=parseInt(n.charAt(i-1),10);return Mt.getStandardUPCEANChecksum(n.substring(0,i-1))===o}static getStandardUPCEANChecksum(n){let i=n.length,o=0;for(let c=i-1;c>=0;c-=2){let d=n.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new ee;o+=d}o*=3;for(let c=i-2;c>=0;c-=2){let d=n.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new ee;o+=d}return(1e3-o)%10}static decodeEnd(n,i){return Mt.findGuardPattern(n,i,!1,Mt.START_END_PATTERN,new Int32Array(Mt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,i,o,c){return this.findGuardPattern(n,i,o,c,new Int32Array(c.length))}static findGuardPattern(n,i,o,c,d){let f=n.getSize();i=o?n.getNextUnset(i):n.getNextSet(i);let p=0,E=i,S=c.length,I=o;for(let P=i;P<f;P++)if(n.get(P)!==I)d[p]++;else{if(p===S-1){if($t.patternMatchVariance(d,c,Mt.MAX_INDIVIDUAL_VARIANCE)<Mt.MAX_AVG_VARIANCE)return Int32Array.from([E,P]);E+=d[0]+d[1];let B=d.slice(2,d.length-1);for(let V=0;V<p-1;V++)d[V]=B[V];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,I=!I}throw new Q}static decodeDigit(n,i,o,c){this.recordPattern(n,o,i);let d=this.MAX_AVG_VARIANCE,f=-1,p=c.length;for(let E=0;E<p;E++){let S=c[E],I=$t.patternMatchVariance(i,S,Mt.MAX_INDIVIDUAL_VARIANCE);I<d&&(d=I,f=E)}if(f>=0)return f;throw new Q}}Mt.MAX_AVG_VARIANCE=.48,Mt.MAX_INDIVIDUAL_VARIANCE=.7,Mt.START_END_PATTERN=Int32Array.from([1,1,1]),Mt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Mt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Mt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class On{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,o){let c=this.decodeRowStringBuffer,d=this.decodeMiddle(i,o,c),f=c.toString(),p=On.parseExtensionString(f),E=[new Pe((o[0]+o[1])/2,n),new Pe(d,n)],S=new Me(f,null,0,E,pe.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&S.putAllMetadata(p),S}decodeMiddle(n,i,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=n.getSize(),f=i[1],p=0;for(let S=0;S<5&&f<d;S++){let I=Mt.decodeDigit(n,c,f,Mt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+I%10);for(let P of c)f+=P;I>=10&&(p|=1<<4-S),S!==4&&(f=n.getNextSet(f),f=n.getNextUnset(f))}if(o.length!==5)throw new Q;let E=this.determineCheckDigit(p);if(On.extensionChecksum(o.toString())!==E)throw new Q;return f}static extensionChecksum(n){let i=n.length,o=0;for(let c=i-2;c>=0;c-=2)o+=n.charAt(c).charCodeAt(0)-48;o*=3;for(let c=i-1;c>=0;c-=2)o+=n.charAt(c).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(n){for(let i=0;i<10;i++)if(n===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new Q}static parseExtensionString(n){if(n.length!==5)return null;let i=On.parseExtension5String(n);return i==null?null:new Map([[$e.SUGGESTED_PRICE,i]])}static parseExtension5String(n){let i;switch(n.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let o=parseInt(n.substring(1)),c=(o/100).toString(),d=o%100,f=d<10?"0"+d:d.toString();return i+c+"."+f}}class nn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,o){let c=this.decodeRowStringBuffer,d=this.decodeMiddle(i,o,c),f=c.toString(),p=nn.parseExtensionString(f),E=[new Pe((o[0]+o[1])/2,n),new Pe(d,n)],S=new Me(f,null,0,E,pe.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&S.putAllMetadata(p),S}decodeMiddle(n,i,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=n.getSize(),f=i[1],p=0;for(let E=0;E<2&&f<d;E++){let S=Mt.decodeDigit(n,c,f,Mt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+S%10);for(let I of c)f+=I;S>=10&&(p|=1<<1-E),E!==1&&(f=n.getNextSet(f),f=n.getNextUnset(f))}if(o.length!==2)throw new Q;if(parseInt(o.toString())%4!==p)throw new Q;return f}static parseExtensionString(n){return n.length!==2?null:new Map([[$e.ISSUE_NUMBER,parseInt(n)]])}}class di{static decodeRow(n,i,o){let c=Mt.findGuardPattern(i,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new On().decodeRow(n,i,c)}catch{return new nn().decodeRow(n,i,c)}}}di.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ht extends Mt{constructor(){super(),this.decodeRowStringBuffer="",ht.L_AND_G_PATTERNS=ht.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let i=ht.L_PATTERNS[n-10],o=new Int32Array(i.length);for(let c=0;c<i.length;c++)o[c]=i[i.length-c-1];ht.L_AND_G_PATTERNS[n]=o}}decodeRow(n,i,o){let c=ht.findStartGuardPattern(i),d=o==null?null:o.get(te.NEED_RESULT_POINT_CALLBACK);if(d!=null){const ye=new Pe((c[0]+c[1])/2,n);d.foundPossibleResultPoint(ye)}let f=this.decodeMiddle(i,c,this.decodeRowStringBuffer),p=f.rowOffset,E=f.resultString;if(d!=null){const ye=new Pe(p,n);d.foundPossibleResultPoint(ye)}let S=this.decodeEnd(i,p);if(d!=null){const ye=new Pe((S[0]+S[1])/2,n);d.foundPossibleResultPoint(ye)}let I=S[1],P=I+(I-S[0]);if(P>=i.getSize()||!i.isRange(I,P,!1))throw new Q;let B=E.toString();if(B.length<8)throw new ee;if(!ht.checkChecksum(B))throw new R;let V=(c[1]+c[0])/2,G=(S[1]+S[0])/2,Y=this.getBarcodeFormat(),J=[new Pe(V,n),new Pe(G,n)],oe=new Me(B,null,0,J,Y,new Date().getTime()),Ee=0;try{let ye=di.decodeRow(n,i,S[1]);oe.putMetadata($e.UPC_EAN_EXTENSION,ye.getText()),oe.putAllMetadata(ye.getResultMetadata()),oe.addResultPoints(ye.getResultPoints()),Ee=ye.getText().length}catch{}let Ce=o==null?null:o.get(te.ALLOWED_EAN_EXTENSIONS);if(Ce!=null){let ye=!1;for(let ft in Ce)if(Ee.toString()===ft){ye=!0;break}if(!ye)throw new Q}return oe}decodeEnd(n,i){return ht.findGuardPattern(n,i,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return ht.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let o=parseInt(n.charAt(i-1),10);return ht.getStandardUPCEANChecksum(n.substring(0,i-1))===o}static getStandardUPCEANChecksum(n){let i=n.length,o=0;for(let c=i-1;c>=0;c-=2){let d=n.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new ee;o+=d}o*=3;for(let c=i-2;c>=0;c-=2){let d=n.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new ee;o+=d}return(1e3-o)%10}}class $r extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=n.getSize(),f=i[1],p=0;for(let S=0;S<6&&f<d;S++){let I=ht.decodeDigit(n,c,f,ht.L_AND_G_PATTERNS);o+=String.fromCharCode(48+I%10);for(let P of c)f+=P;I>=10&&(p|=1<<5-S)}o=$r.determineFirstDigit(o,p),f=ht.findGuardPattern(n,f,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&f<d;S++){let I=ht.decodeDigit(n,c,f,ht.L_PATTERNS);o+=String.fromCharCode(48+I);for(let P of c)f+=P}return{rowOffset:f,resultString:o}}getBarcodeFormat(){return pe.EAN_13}static determineFirstDigit(n,i){for(let o=0;o<10;o++)if(i===this.FIRST_DIGIT_ENCODINGS[o])return n=String.fromCharCode(48+o)+n,n;throw new Q}}$r.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class hi extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,o){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=n.getSize(),f=i[1];for(let E=0;E<4&&f<d;E++){let S=ht.decodeDigit(n,c,f,ht.L_PATTERNS);o+=String.fromCharCode(48+S);for(let I of c)f+=I}f=ht.findGuardPattern(n,f,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<4&&f<d;E++){let S=ht.decodeDigit(n,c,f,ht.L_PATTERNS);o+=String.fromCharCode(48+S);for(let I of c)f+=I}return{rowOffset:f,resultString:o}}getBarcodeFormat(){return pe.EAN_8}}class nt extends ht{constructor(){super(...arguments),this.ean13Reader=new $r}getBarcodeFormat(){return pe.UPC_A}decode(n,i){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,i,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,i,o))}decodeMiddle(n,i,o){return this.ean13Reader.decodeMiddle(n,i,o)}maybeReturnResult(n){let i=n.getText();if(i.charAt(0)==="0"){let o=new Me(i.substring(1),null,null,n.getResultPoints(),pe.UPC_A);return n.getResultMetadata()!=null&&o.putAllMetadata(n.getResultMetadata()),o}else throw new Q}reset(){this.ean13Reader.reset()}}class Ct extends ht{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,i,o){const c=this.decodeMiddleCounters.map(S=>S);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const d=n.getSize();let f=i[1],p=0;for(let S=0;S<6&&f<d;S++){const I=Ct.decodeDigit(n,c,f,Ct.L_AND_G_PATTERNS);o+=String.fromCharCode(48+I%10);for(let P of c)f+=P;I>=10&&(p|=1<<5-S)}let E=Ct.determineNumSysAndCheckDigit(o,p);return{rowOffset:f,resultString:E}}decodeEnd(n,i){return Ct.findGuardPatternWithoutCounters(n,i,!0,Ct.MIDDLE_END_PATTERN)}checkChecksum(n){return ht.checkChecksum(Ct.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,i){for(let o=0;o<=1;o++)for(let c=0;c<10;c++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][c]){let d=String.fromCharCode(48+o),f=String.fromCharCode(48+c);return d+n+f}throw Q.getNotFoundInstance()}getBarcodeFormat(){return pe.UPC_E}static convertUPCEtoUPCA(n){const i=n.slice(1,7).split("").map(d=>d.charCodeAt(0)),o=new Te;o.append(n.charAt(0));let c=i[5];switch(c){case 0:case 1:case 2:o.appendChars(i,0,2),o.append(c),o.append("0000"),o.appendChars(i,2,3);break;case 3:o.appendChars(i,0,3),o.append("00000"),o.appendChars(i,3,2);break;case 4:o.appendChars(i,0,4),o.append("00000"),o.append(i[4]);break;default:o.appendChars(i,0,5),o.append("0000"),o.append(c);break}return n.length>=8&&o.append(n.charAt(7)),o.toString()}}Ct.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ct.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class sr extends $t{constructor(n){super();let i=n==null?null:n.get(te.POSSIBLE_FORMATS),o=[];a(i)?(o.push(new $r),o.push(new nt),o.push(new hi),o.push(new Ct)):(i.indexOf(pe.EAN_13)>-1&&o.push(new $r),i.indexOf(pe.UPC_A)>-1&&o.push(new nt),i.indexOf(pe.EAN_8)>-1&&o.push(new hi),i.indexOf(pe.UPC_E)>-1&&o.push(new Ct)),this.readers=o}decodeRow(n,i,o){for(let c of this.readers)try{const d=c.decodeRow(n,i,o),f=d.getBarcodeFormat()===pe.EAN_13&&d.getText().charAt(0)==="0",p=o==null?null:o.get(te.POSSIBLE_FORMATS),E=p==null||p.includes(pe.UPC_A);if(f&&E){const S=d.getRawBytes(),I=new Me(d.getText().substring(1),S,S?S.length:null,d.getResultPoints(),pe.UPC_A);return I.putAllMetadata(d.getResultMetadata()),I}return d}catch{}throw new Q}reset(){for(let n of this.readers)n.reset()}}class At extends $t{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,i){for(let o=0;o<i.length;o++)if($t.patternMatchVariance(n,i[o],At.MAX_INDIVIDUAL_VARIANCE)<At.MAX_AVG_VARIANCE)return o;throw new Q}static count(n){return tt.sum(new Int32Array(n))}static increment(n,i){let o=0,c=i[0];for(let d=1;d<n.length;d++)i[d]>c&&(c=i[d],o=d);n[o]++}static decrement(n,i){let o=0,c=i[0];for(let d=1;d<n.length;d++)i[d]<c&&(c=i[d],o=d);n[o]--}static isFinderPattern(n){let i=n[0]+n[1],o=i+n[2]+n[3],c=i/o;if(c>=At.MIN_FINDER_PATTERN_RATIO&&c<=At.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let p of n)p>f&&(f=p),p<d&&(d=p);return f<10*d}return!1}}At.MAX_AVG_VARIANCE=.2,At.MAX_INDIVIDUAL_VARIANCE=.45,At.MIN_FINDER_PATTERN_RATIO=9.5/12,At.MAX_FINDER_PATTERN_RATIO=12.5/14;class gn{constructor(n,i){this.value=n,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof gn))return!1;const i=n;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Xt{constructor(n,i,o,c,d){this.value=n,this.startEnd=i,this.value=n,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new Pe(o,d)),this.resultPoints.push(new Pe(c,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof Xt))return!1;const i=n;return this.value===i.value}hashCode(){return this.value}}class Ot{constructor(){}static getRSSvalue(n,i,o){let c=0;for(let E of n)c+=E;let d=0,f=0,p=n.length;for(let E=0;E<p-1;E++){let S;for(S=1,f|=1<<E;S<n[E];S++,f&=~(1<<E)){let I=Ot.combins(c-S-1,p-E-2);if(o&&f===0&&c-S-(p-E-1)>=p-E-1&&(I-=Ot.combins(c-S-(p-E),p-E-2)),p-E-1>1){let P=0;for(let B=c-S-(p-E-2);B>i;B--)P+=Ot.combins(c-S-B-1,p-E-3);I-=P*(p-1-E)}else c-S>i&&I--;d+=I}c-=S}return d}static combins(n,i){let o,c;n-i>i?(c=i,o=n-i):(c=n-i,o=i);let d=1,f=1;for(let p=n;p>o;p--)d*=p,f<=c&&(d/=f,f++);for(;f<=c;)d/=f,f++;return d}}class Ts{static buildBitArray(n){let i=n.length*2-1;n[n.length-1].getRightChar()==null&&(i-=1);let o=12*i,c=new q(o),d=0,p=n[0].getRightChar().getValue();for(let E=11;E>=0;--E)(p&1<<E)!=0&&c.set(d),d++;for(let E=1;E<n.length;++E){let S=n[E],I=S.getLeftChar().getValue();for(let P=11;P>=0;--P)(I&1<<P)!=0&&c.set(d),d++;if(S.getRightChar()!=null){let P=S.getRightChar().getValue();for(let B=11;B>=0;--B)(P&1<<B)!=0&&c.set(d),d++}}return c}}class Yt{constructor(n,i){i?this.decodedInformation=null:(this.finished=n,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Xr{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class ir extends Xr{constructor(n,i){super(n),this.value=i}getValue(){return this.value}isFNC1(){return this.value===ir.FNC1}}ir.FNC1="$";class _r extends Xr{constructor(n,i,o){super(n),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ur extends Xr{constructor(n,i,o){if(super(n),i<0||i>10||o<0||o>10)throw new ee;this.firstDigit=i,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ur.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ur.FNC1}isAnyFNC1(){return this.firstDigit===Ur.FNC1||this.secondDigit===Ur.FNC1}}Ur.FNC1=10;class Oe{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new Q;let i=n.substring(0,2);for(let d of Oe.TWO_DIGIT_DATA_LENGTH)if(d[0]===i)return d[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(2,d[2],n):Oe.processFixedAI(2,d[1],n);if(n.length<3)throw new Q;let o=n.substring(0,3);for(let d of Oe.THREE_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(3,d[2],n):Oe.processFixedAI(3,d[1],n);for(let d of Oe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(4,d[2],n):Oe.processFixedAI(4,d[1],n);if(n.length<4)throw new Q;let c=n.substring(0,4);for(let d of Oe.FOUR_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(4,d[2],n):Oe.processFixedAI(4,d[1],n);throw new Q}static processFixedAI(n,i,o){if(o.length<n)throw new Q;let c=o.substring(0,n);if(o.length<n+i)throw new Q;let d=o.substring(n,n+i),f=o.substring(n+i),p="("+c+")"+d,E=Oe.parseFieldsInGeneralPurpose(f);return E==null?p:p+E}static processVariableAI(n,i,o){let c=o.substring(0,n),d;o.length<n+i?d=o.length:d=n+i;let f=o.substring(n,d),p=o.substring(d),E="("+c+")"+f,S=Oe.parseFieldsInGeneralPurpose(p);return S==null?E:E+S}}Oe.VARIABLE_LENGTH=[],Oe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Oe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Oe.VARIABLE_LENGTH,20],["22",Oe.VARIABLE_LENGTH,29],["30",Oe.VARIABLE_LENGTH,8],["37",Oe.VARIABLE_LENGTH,8],["90",Oe.VARIABLE_LENGTH,30],["91",Oe.VARIABLE_LENGTH,30],["92",Oe.VARIABLE_LENGTH,30],["93",Oe.VARIABLE_LENGTH,30],["94",Oe.VARIABLE_LENGTH,30],["95",Oe.VARIABLE_LENGTH,30],["96",Oe.VARIABLE_LENGTH,30],["97",Oe.VARIABLE_LENGTH,3],["98",Oe.VARIABLE_LENGTH,30],["99",Oe.VARIABLE_LENGTH,30]],Oe.THREE_DIGIT_DATA_LENGTH=[["240",Oe.VARIABLE_LENGTH,30],["241",Oe.VARIABLE_LENGTH,30],["242",Oe.VARIABLE_LENGTH,6],["250",Oe.VARIABLE_LENGTH,30],["251",Oe.VARIABLE_LENGTH,30],["253",Oe.VARIABLE_LENGTH,17],["254",Oe.VARIABLE_LENGTH,20],["400",Oe.VARIABLE_LENGTH,30],["401",Oe.VARIABLE_LENGTH,30],["402",17],["403",Oe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Oe.VARIABLE_LENGTH,20],["421",Oe.VARIABLE_LENGTH,15],["422",3],["423",Oe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Oe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Oe.VARIABLE_LENGTH,15],["391",Oe.VARIABLE_LENGTH,18],["392",Oe.VARIABLE_LENGTH,15],["393",Oe.VARIABLE_LENGTH,18],["703",Oe.VARIABLE_LENGTH,30]],Oe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Oe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Oe.VARIABLE_LENGTH,20],["8003",Oe.VARIABLE_LENGTH,30],["8004",Oe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Oe.VARIABLE_LENGTH,30],["8008",Oe.VARIABLE_LENGTH,12],["8018",18],["8020",Oe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Oe.VARIABLE_LENGTH,70],["8200",Oe.VARIABLE_LENGTH,70]];class fi{constructor(n){this.buffer=new Te,this.information=n}decodeAllCodes(n,i){let o=i,c=null;do{let d=this.decodeGeneralPurposeField(o,c),f=Oe.parseFieldsInGeneralPurpose(d.getNewString());if(f!=null&&n.append(f),d.isRemaining()?c=""+d.getRemainingValue():c=null,o===d.getNewPosition())break;o=d.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let i=n;i<n+3;++i)if(this.information.get(i))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(n,4);return d===0?new Ur(this.information.getSize(),Ur.FNC1,Ur.FNC1):new Ur(this.information.getSize(),d-1,Ur.FNC1)}let i=this.extractNumericValueFromBitArray(n,7),o=(i-8)/11,c=(i-8)%11;return new Ur(n+7,o,c)}extractNumericValueFromBitArray(n,i){return fi.extractNumericValueFromBitArray(this.information,n,i)}static extractNumericValueFromBitArray(n,i,o){let c=0;for(let d=0;d<o;++d)n.get(i+d)&&(c|=1<<o-d-1);return c}decodeGeneralPurposeField(n,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(n);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new _r(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new _r(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,i;do{let o=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),n=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),n=i.isFinished()):(i=this.parseNumericBlock(),n=i.isFinished()),!(o!==this.current.getPosition())&&!n)break}while(!n);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let i;return n.isSecondDigitFNC1()?i=new _r(this.current.getPosition(),this.buffer.toString()):i=new _r(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new Yt(!0,i)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let i=new _r(this.current.getPosition(),this.buffer.toString());return new Yt(!0,i)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Yt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new _r(this.current.getPosition(),this.buffer.toString());return new Yt(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Yt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new _r(this.current.getPosition(),this.buffer.toString());return new Yt(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Yt(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<116)return!0;if(n+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(n,8);return c>=232&&c<253}decodeIsoIec646(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new ir(n+5,ir.FNC1);if(i>=5&&i<15)return new ir(n+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<90)return new ir(n+7,""+(o+1));if(o>=90&&o<116)return new ir(n+7,""+(o+7));let c=this.extractNumericValueFromBitArray(n,8),d;switch(c){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new ee}return new ir(n+8,d)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,6);return o>=16&&o<63}decodeAlphanumeric(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new ir(n+5,ir.FNC1);if(i>=5&&i<15)return new ir(n+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(n,6);if(o>=32&&o<58)return new ir(n+6,""+(o+33));let c;switch(o){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new fn("Decoding invalid alphanumeric value: "+o)}return new ir(n+6,c)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<5&&i+n<this.information.getSize();++i)if(i===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+i))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let i=n;i<n+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<4&&i+n<this.information.getSize();++i)if(this.information.get(n+i))return!1;return!0}}class Mo{constructor(n){this.information=n,this.generalDecoder=new fi(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class sn extends Mo{constructor(n){super(n)}encodeCompressedGtin(n,i){n.append("(01)");let o=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,i,o)}encodeCompressedGtinWithoutAI(n,i,o){for(let c=0;c<4;++c){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*c,10);d/100===0&&n.append("0"),d/10===0&&n.append("0"),n.append(d)}sn.appendCheckDigit(n,o)}static appendCheckDigit(n,i){let o=0;for(let c=0;c<13;c++){let d=n.charAt(c+i).charCodeAt(0)-48;o+=(c&1)===0?3*d:d}o=10-o%10,o===10&&(o=0),n.append(o)}}sn.GTIN_SIZE=40;class En extends sn{constructor(n){super(n)}parseInformation(){let n=new Te;n.append("(01)");let i=n.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(En.HEADER_SIZE,4);return n.append(o),this.encodeCompressedGtinWithoutAI(n,En.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(n,En.HEADER_SIZE+44)}}En.HEADER_SIZE=4;class Yi extends Mo{constructor(n){super(n)}parseInformation(){let n=new Te;return this.getGeneralDecoder().decodeAllCodes(n,Yi.HEADER_SIZE)}}Yi.HEADER_SIZE=5;class qi extends sn{constructor(n){super(n)}encodeCompressedWeight(n,i,o){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i,o);this.addWeightCode(n,c);let d=this.checkWeight(c),f=1e5;for(let p=0;p<5;++p)d/f===0&&n.append("0"),f/=10;n.append(d)}}class Yn extends qi{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=Yn.HEADER_SIZE+qi.GTIN_SIZE+Yn.WEIGHT_SIZE)throw new Q;let n=new Te;return this.encodeCompressedGtin(n,Yn.HEADER_SIZE),this.encodeCompressedWeight(n,Yn.HEADER_SIZE+qi.GTIN_SIZE,Yn.WEIGHT_SIZE),n.toString()}}Yn.HEADER_SIZE=5,Yn.WEIGHT_SIZE=15;class nc extends Yn{constructor(n){super(n)}addWeightCode(n,i){n.append("(3103)")}checkWeight(n){return n}}class sc extends Yn{constructor(n){super(n)}addWeightCode(n,i){i<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class Pn extends sn{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<Pn.HEADER_SIZE+sn.GTIN_SIZE)throw new Q;let n=new Te;this.encodeCompressedGtin(n,Pn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Pn.HEADER_SIZE+sn.GTIN_SIZE,Pn.LAST_DIGIT_SIZE);n.append("(392"),n.append(i),n.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(Pn.HEADER_SIZE+sn.GTIN_SIZE+Pn.LAST_DIGIT_SIZE,null);return n.append(o.getNewString()),n.toString()}}Pn.HEADER_SIZE=8,Pn.LAST_DIGIT_SIZE=2;class Vr extends sn{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<Vr.HEADER_SIZE+sn.GTIN_SIZE)throw new Q;let n=new Te;this.encodeCompressedGtin(n,Vr.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Vr.HEADER_SIZE+sn.GTIN_SIZE,Vr.LAST_DIGIT_SIZE);n.append("(393"),n.append(i),n.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Vr.HEADER_SIZE+sn.GTIN_SIZE+Vr.LAST_DIGIT_SIZE,Vr.FIRST_THREE_DIGITS_SIZE);o/100==0&&n.append("0"),o/10==0&&n.append("0"),n.append(o);let c=this.getGeneralDecoder().decodeGeneralPurposeField(Vr.HEADER_SIZE+sn.GTIN_SIZE+Vr.LAST_DIGIT_SIZE+Vr.FIRST_THREE_DIGITS_SIZE,null);return n.append(c.getNewString()),n.toString()}}Vr.HEADER_SIZE=8,Vr.LAST_DIGIT_SIZE=2,Vr.FIRST_THREE_DIGITS_SIZE=10;class Ut extends qi{constructor(n,i,o){super(n),this.dateCode=o,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=Ut.HEADER_SIZE+Ut.GTIN_SIZE+Ut.WEIGHT_SIZE+Ut.DATE_SIZE)throw new Q;let n=new Te;return this.encodeCompressedGtin(n,Ut.HEADER_SIZE),this.encodeCompressedWeight(n,Ut.HEADER_SIZE+Ut.GTIN_SIZE,Ut.WEIGHT_SIZE),this.encodeCompressedDate(n,Ut.HEADER_SIZE+Ut.GTIN_SIZE+Ut.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(i,Ut.DATE_SIZE);if(o==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let c=o%32;o/=32;let d=o%12+1;o/=12;let f=o;f/10==0&&n.append("0"),n.append(f),d/10==0&&n.append("0"),n.append(d),c/10==0&&n.append("0"),n.append(c)}addWeightCode(n,i){n.append("("),n.append(this.firstAIdigits),n.append(i/1e5),n.append(")")}checkWeight(n){return n%1e5}}Ut.HEADER_SIZE=8,Ut.WEIGHT_SIZE=20,Ut.DATE_SIZE=16;function ic(O){try{if(O.get(1))return new En(O);if(!O.get(2))return new Yi(O);switch(fi.extractNumericValueFromBitArray(O,1,4)){case 4:return new nc(O);case 5:return new sc(O)}switch(fi.extractNumericValueFromBitArray(O,1,5)){case 12:return new Pn(O);case 13:return new Vr(O)}switch(fi.extractNumericValueFromBitArray(O,1,7)){case 56:return new Ut(O,"310","11");case 57:return new Ut(O,"320","11");case 58:return new Ut(O,"310","13");case 59:return new Ut(O,"320","13");case 60:return new Ut(O,"310","15");case 61:return new Ut(O,"320","15");case 62:return new Ut(O,"310","17");case 63:return new Ut(O,"320","17")}}catch(n){throw console.log(n),new fn("unknown decoder: "+O)}}class Rt{constructor(n,i,o,c){this.leftchar=n,this.rightchar=i,this.finderpattern=o,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,i){return n instanceof Rt?Rt.equalsOrNull(n.leftchar,i.leftchar)&&Rt.equalsOrNull(n.rightchar,i.rightchar)&&Rt.equalsOrNull(n.finderpattern,i.finderpattern):!1}static equalsOrNull(n,i){return n===null?i===null:Rt.equals(n,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class jo{constructor(n,i,o){this.pairs=n,this.rowNumber=i,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,i){return n instanceof jo?this.checkEqualitity(n,i)&&n.wasReversed===i.wasReversed:!1}checkEqualitity(n,i){if(!n||!i)return;let o;return n.forEach((c,d)=>{i.forEach(f=>{c.getLeftChar().getValue()===f.getLeftChar().getValue()&&c.getRightChar().getValue()===f.getRightChar().getValue()&&c.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(o=!0)})}),o}}class me extends At{constructor(n){super(...arguments),this.pairs=new Array(me.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,i,o){this.pairs.length=0,this.startFromEven=!1;try{return me.constructResult(this.decodeRow2pairs(n,i))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,me.constructResult(this.decodeRow2pairs(n,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,i){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,n))}catch(d){if(d instanceof Q){if(!this.pairs.length)throw new Q;o=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(n,!1),c){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new Q}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return n&&(this.rows=this.rows.reverse()),i}checkRows(n,i){for(let o=i;o<this.rows.length;o++){let c=this.rows[o];this.pairs.length=0;for(let f of n)this.pairs.push(f.getPairs());if(this.pairs.push(c.getPairs()),!me.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(n);d.push(c);try{return this.checkRows(d,o+1)}catch(f){this.verbose&&console.log(f)}}throw new Q}static isValidSequence(n){for(let i of me.FINDER_PATTERN_SEQUENCES){if(n.length>i.length)continue;let o=!0;for(let c=0;c<n.length;c++)if(n[c].getFinderPattern().getValue()!=i[c]){o=!1;break}if(o)return!0}return!1}storeRow(n,i){let o=0,c=!1,d=!1;for(;o<this.rows.length;){let f=this.rows[o];if(f.getRowNumber()>n){d=f.isEquivalent(this.pairs);break}c=f.isEquivalent(this.pairs),o++}d||c||me.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new jo(this.pairs,n,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,i){for(let o of i)if(o.getPairs().length!==n.length){for(let c of o.getPairs())for(let d of n)if(Rt.equals(c,d))break}}static isPartialRow(n,i){for(let o of i){let c=!0;for(let d of n){let f=!1;for(let p of o.getPairs())if(d.equals(p)){f=!0;break}if(!f){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(n){let i=Ts.buildBitArray(n),c=ic(i).parseInformation(),d=n[0].getFinderPattern().getResultPoints(),f=n[n.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],f[0],f[1]];return new Me(c,null,null,p,pe.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),i=n.getLeftChar(),o=n.getRightChar();if(o==null)return!1;let c=o.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let E=this.pairs.get(p);c+=E.getLeftChar().getChecksumPortion(),d++;let S=E.getRightChar();S!=null&&(c+=S.getChecksumPortion(),d++)}return c%=211,211*(d-4)+c==i.getValue()}static getNextSecondBar(n,i){let o;return n.get(i)?(o=n.getNextUnset(i),o=n.getNextSet(o)):(o=n.getNextSet(i),o=n.getNextUnset(o)),o}retrieveNextPair(n,i,o){let c=i.length%2==0;this.startFromEven&&(c=!c);let d,f=!0,p=-1;do this.findNextPair(n,i,p),d=this.parseFoundFinderPattern(n,o,c),d==null?p=me.getNextSecondBar(n,this.startEnd[0]):f=!1;while(f);let E=this.decodeDataCharacter(n,d,c,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new Q;let S;try{S=this.decodeDataCharacter(n,d,c,!1)}catch(I){S=null,this.verbose&&console.log(I)}return new Rt(E,S,d,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,i,o){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=n.getSize(),f;o>=0?f=o:this.isEmptyPair(i)?f=0:f=i[i.length-1].getFinderPattern().getStartEnd()[1];let p=i.length%2!=0;this.startFromEven&&(p=!p);let E=!1;for(;f<d&&(E=!n.get(f),!!E);)f++;let S=0,I=f;for(let P=f;P<d;P++)if(n.get(P)!=E)c[S]++;else{if(S==3){if(p&&me.reverseCounters(c),me.isFinderPattern(c)){this.startEnd[0]=I,this.startEnd[1]=P;return}p&&me.reverseCounters(c),I+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,S--}else S++;c[S]=1,E=!E}throw new Q}static reverseCounters(n){let i=n.length;for(let o=0;o<i/2;++o){let c=n[o];n[o]=n[i-o-1],n[i-o-1]=c}}parseFoundFinderPattern(n,i,o){let c,d,f;if(o){let S=this.startEnd[0]-1;for(;S>=0&&!n.get(S);)S--;S++,c=this.startEnd[0]-S,d=S,f=this.startEnd[1]}else d=this.startEnd[0],f=n.getNextUnset(this.startEnd[1]+1),c=f-this.startEnd[1];let p=this.getDecodeFinderCounters();D.arraycopy(p,0,p,1,p.length-1),p[0]=c;let E;try{E=this.parseFinderValue(p,me.FINDER_PATTERNS)}catch{return null}return new Xt(E,[d,f],d,f,i)}decodeDataCharacter(n,i,o,c){let d=this.getDataCharacterCounters();for(let It=0;It<d.length;It++)d[It]=0;if(c)me.recordPatternInReverse(n,i.getStartEnd()[0],d);else{me.recordPattern(n,i.getStartEnd()[1],d);for(let It=0,ar=d.length-1;It<ar;It++,ar--){let Kr=d[It];d[It]=d[ar],d[ar]=Kr}}let f=17,p=tt.sum(new Int32Array(d))/f,E=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(p-E)/E>.3)throw new Q;let S=this.getOddCounts(),I=this.getEvenCounts(),P=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let It=0;It<d.length;It++){let ar=1*d[It]/p,Kr=ar+.5;if(Kr<1){if(ar<.3)throw new Q;Kr=1}else if(Kr>8){if(ar>8.7)throw new Q;Kr=8}let $s=It/2;(It&1)==0?(S[$s]=Kr,P[$s]=ar-Kr):(I[$s]=Kr,B[$s]=ar-Kr)}this.adjustOddEvenCounts(f);let V=4*i.getValue()+(o?0:2)+(c?0:1)-1,G=0,Y=0;for(let It=S.length-1;It>=0;It--){if(me.isNotA1left(i,o,c)){let ar=me.WEIGHTS[V][2*It];Y+=S[It]*ar}G+=S[It]}let J=0;for(let It=I.length-1;It>=0;It--)if(me.isNotA1left(i,o,c)){let ar=me.WEIGHTS[V][2*It+1];J+=I[It]*ar}let oe=Y+J;if((G&1)!=0||G>13||G<4)throw new Q;let Ee=(13-G)/2,Ce=me.SYMBOL_WIDEST[Ee],ye=9-Ce,ft=Ot.getRSSvalue(S,Ce,!0),it=Ot.getRSSvalue(I,ye,!1),on=me.EVEN_TOTAL_SUBSET[Ee],Ln=me.GSUM[Ee],Ar=ft*on+it+Ln;return new gn(Ar,oe)}static isNotA1left(n,i,o){return!(n.getValue()==0&&i&&o)}adjustOddEvenCounts(n){let i=tt.sum(new Int32Array(this.getOddCounts())),o=tt.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1;i>13?d=!0:i<4&&(c=!0);let f=!1,p=!1;o>13?p=!0:o<4&&(f=!0);let E=i+o-n,S=(i&1)==1,I=(o&1)==0;if(E==1)if(S){if(I)throw new Q;d=!0}else{if(!I)throw new Q;p=!0}else if(E==-1)if(S){if(I)throw new Q;c=!0}else{if(!I)throw new Q;f=!0}else if(E==0){if(S){if(!I)throw new Q;i<o?(c=!0,p=!0):(d=!0,f=!0)}else if(I)throw new Q}else throw new Q;if(c){if(d)throw new Q;me.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&me.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(p)throw new Q;me.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&me.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}me.SYMBOL_WIDEST=[7,5,4,3,1],me.EVEN_TOTAL_SUBSET=[4,20,52,104,204],me.GSUM=[0,348,1388,2948,3988],me.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],me.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],me.FINDER_PAT_A=0,me.FINDER_PAT_B=1,me.FINDER_PAT_C=2,me.FINDER_PAT_D=3,me.FINDER_PAT_E=4,me.FINDER_PAT_F=5,me.FINDER_PATTERN_SEQUENCES=[[me.FINDER_PAT_A,me.FINDER_PAT_A],[me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B],[me.FINDER_PAT_A,me.FINDER_PAT_C,me.FINDER_PAT_B,me.FINDER_PAT_D],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_C],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_D,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_D],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_E],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F]],me.MAX_PAIRS=11;class ac extends gn{constructor(n,i,o){super(n,i),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Lt extends At{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,i,o){const c=this.decodePair(i,!1,n,o);Lt.addOrTally(this.possibleLeftPairs,c),i.reverse();let d=this.decodePair(i,!0,n,o);Lt.addOrTally(this.possibleRightPairs,d),i.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Lt.checkChecksum(f,p))return Lt.constructResult(f,p)}throw new Q}static addOrTally(n,i){if(i==null)return;let o=!1;for(let c of n)if(c.getValue()===i.getValue()){c.incrementCount(),o=!0;break}o||n.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,i){let o=4537077*n.getValue()+i.getValue(),c=new String(o).toString(),d=new Te;for(let S=13-c.length;S>0;S--)d.append("0");d.append(c);let f=0;for(let S=0;S<13;S++){let I=d.charAt(S).charCodeAt(0)-48;f+=(S&1)===0?3*I:I}f=10-f%10,f===10&&(f=0),d.append(f.toString());let p=n.getFinderPattern().getResultPoints(),E=i.getFinderPattern().getResultPoints();return new Me(d.toString(),null,0,[p[0],p[1],E[0],E[1]],pe.RSS_14,new Date().getTime())}static checkChecksum(n,i){let o=(n.getChecksumPortion()+16*i.getChecksumPortion())%79,c=9*n.getFinderPattern().getValue()+i.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,o===c}decodePair(n,i,o,c){try{let d=this.findFinderPattern(n,i),f=this.parseFoundFinderPattern(n,o,i,d),p=c==null?null:c.get(te.NEED_RESULT_POINT_CALLBACK);if(p!=null){let I=(d[0]+d[1])/2;i&&(I=n.getSize()-1-I),p.foundPossibleResultPoint(new Pe(I,o))}let E=this.decodeDataCharacter(n,f,!0),S=this.decodeDataCharacter(n,f,!1);return new ac(1597*E.getValue()+S.getValue(),E.getChecksumPortion()+4*S.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(n,i,o){let c=this.getDataCharacterCounters();for(let J=0;J<c.length;J++)c[J]=0;if(o)$t.recordPatternInReverse(n,i.getStartEnd()[0],c);else{$t.recordPattern(n,i.getStartEnd()[1]+1,c);for(let J=0,oe=c.length-1;J<oe;J++,oe--){let Ee=c[J];c[J]=c[oe],c[oe]=Ee}}let d=o?16:15,f=tt.sum(new Int32Array(c))/d,p=this.getOddCounts(),E=this.getEvenCounts(),S=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let J=0;J<c.length;J++){let oe=c[J]/f,Ee=Math.floor(oe+.5);Ee<1?Ee=1:Ee>8&&(Ee=8);let Ce=Math.floor(J/2);(J&1)===0?(p[Ce]=Ee,S[Ce]=oe-Ee):(E[Ce]=Ee,I[Ce]=oe-Ee)}this.adjustOddEvenCounts(o,d);let P=0,B=0;for(let J=p.length-1;J>=0;J--)B*=9,B+=p[J],P+=p[J];let V=0,G=0;for(let J=E.length-1;J>=0;J--)V*=9,V+=E[J],G+=E[J];let Y=B+3*V;if(o){if((P&1)!==0||P>12||P<4)throw new Q;let J=(12-P)/2,oe=Lt.OUTSIDE_ODD_WIDEST[J],Ee=9-oe,Ce=Ot.getRSSvalue(p,oe,!1),ye=Ot.getRSSvalue(E,Ee,!0),ft=Lt.OUTSIDE_EVEN_TOTAL_SUBSET[J],it=Lt.OUTSIDE_GSUM[J];return new gn(Ce*ft+ye+it,Y)}else{if((G&1)!==0||G>10||G<4)throw new Q;let J=(10-G)/2,oe=Lt.INSIDE_ODD_WIDEST[J],Ee=9-oe,Ce=Ot.getRSSvalue(p,oe,!0),ye=Ot.getRSSvalue(E,Ee,!1),ft=Lt.INSIDE_ODD_TOTAL_SUBSET[J],it=Lt.INSIDE_GSUM[J];return new gn(ye*ft+Ce+it,Y)}}findFinderPattern(n,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let c=n.getSize(),d=!1,f=0;for(;f<c&&(d=!n.get(f),i!==d);)f++;let p=0,E=f;for(let S=f;S<c;S++)if(n.get(S)!==d)o[p]++;else{if(p===3){if(At.isFinderPattern(o))return[E,S];E+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,p--}else p++;o[p]=1,d=!d}throw new Q}parseFoundFinderPattern(n,i,o,c){let d=n.get(c[0]),f=c[0]-1;for(;f>=0&&d!==n.get(f);)f--;f++;const p=c[0]-f,E=this.getDecodeFinderCounters(),S=new Int32Array(E.length);D.arraycopy(E,0,S,1,E.length-1),S[0]=p;const I=this.parseFinderValue(S,Lt.FINDER_PATTERNS);let P=f,B=c[1];return o&&(P=n.getSize()-1-P,B=n.getSize()-1-B),new Xt(I,[f,c[1]],P,B,i)}adjustOddEvenCounts(n,i){let o=tt.sum(new Int32Array(this.getOddCounts())),c=tt.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,p=!1,E=!1;n?(o>12?f=!0:o<4&&(d=!0),c>12?E=!0:c<4&&(p=!0)):(o>11?f=!0:o<5&&(d=!0),c>10?E=!0:c<4&&(p=!0));let S=o+c-i,I=(o&1)===(n?1:0),P=(c&1)===1;if(S===1)if(I){if(P)throw new Q;f=!0}else{if(!P)throw new Q;E=!0}else if(S===-1)if(I){if(P)throw new Q;d=!0}else{if(!P)throw new Q;p=!0}else if(S===0){if(I){if(!P)throw new Q;o<c?(d=!0,E=!0):(f=!0,p=!0)}else if(P)throw new Q}else throw new Q;if(d){if(f)throw new Q;At.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&At.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(E)throw new Q;At.increment(this.getEvenCounts(),this.getOddRoundingErrors())}E&&At.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Lt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Lt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Lt.OUTSIDE_GSUM=[0,161,961,2015,2715],Lt.INSIDE_GSUM=[0,336,1036,1516],Lt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Lt.INSIDE_ODD_WIDEST=[2,4,6,8],Lt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class mi extends $t{constructor(n,i){super(),this.readers=[],this.verbose=i===!0;const o=n?n.get(te.POSSIBLE_FORMATS):null,c=n&&n.get(te.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(pe.EAN_13)||o.includes(pe.UPC_A)||o.includes(pe.EAN_8)||o.includes(pe.UPC_E))&&this.readers.push(new sr(n)),o.includes(pe.CODE_39)&&this.readers.push(new Jt(c)),o.includes(pe.CODE_128)&&this.readers.push(new _e),o.includes(pe.ITF)&&this.readers.push(new Et),o.includes(pe.RSS_14)&&this.readers.push(new Lt),o.includes(pe.RSS_EXPANDED)&&this.readers.push(new me(this.verbose))):(this.readers.push(new sr(n)),this.readers.push(new Jt),this.readers.push(new sr(n)),this.readers.push(new _e),this.readers.push(new Et),this.readers.push(new Lt),this.readers.push(new me(this.verbose)))}decodeRow(n,i,o){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(n,i,o)}catch{}throw new Q}reset(){this.readers.forEach(n=>n.reset())}}class oc extends ke{constructor(n=500,i){super(new mi(i),n,i)}}class bt{constructor(n,i,o){this.ecCodewords=n,this.ecBlocks=[i],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ut{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class pt{constructor(n,i,o,c,d,f){this.versionNumber=n,this.symbolSizeRows=i,this.symbolSizeColumns=o,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=d,this.ecBlocks=f;let p=0;const E=f.getECCodewords(),S=f.getECBlocks();for(let I of S)p+=I.getCount()*(I.getDataCodewords()+E);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,i){if((n&1)!==0||(i&1)!==0)throw new ee;for(let o of pt.VERSIONS)if(o.symbolSizeRows===n&&o.symbolSizeColumns===i)return o;throw new ee}toString(){return""+this.versionNumber}static buildVersions(){return[new pt(1,10,10,8,8,new bt(5,new ut(1,3))),new pt(2,12,12,10,10,new bt(7,new ut(1,5))),new pt(3,14,14,12,12,new bt(10,new ut(1,8))),new pt(4,16,16,14,14,new bt(12,new ut(1,12))),new pt(5,18,18,16,16,new bt(14,new ut(1,18))),new pt(6,20,20,18,18,new bt(18,new ut(1,22))),new pt(7,22,22,20,20,new bt(20,new ut(1,30))),new pt(8,24,24,22,22,new bt(24,new ut(1,36))),new pt(9,26,26,24,24,new bt(28,new ut(1,44))),new pt(10,32,32,14,14,new bt(36,new ut(1,62))),new pt(11,36,36,16,16,new bt(42,new ut(1,86))),new pt(12,40,40,18,18,new bt(48,new ut(1,114))),new pt(13,44,44,20,20,new bt(56,new ut(1,144))),new pt(14,48,48,22,22,new bt(68,new ut(1,174))),new pt(15,52,52,24,24,new bt(42,new ut(2,102))),new pt(16,64,64,14,14,new bt(56,new ut(2,140))),new pt(17,72,72,16,16,new bt(36,new ut(4,92))),new pt(18,80,80,18,18,new bt(48,new ut(4,114))),new pt(19,88,88,20,20,new bt(56,new ut(4,144))),new pt(20,96,96,22,22,new bt(68,new ut(4,174))),new pt(21,104,104,24,24,new bt(56,new ut(6,136))),new pt(22,120,120,18,18,new bt(68,new ut(6,175))),new pt(23,132,132,20,20,new bt(62,new ut(8,163))),new pt(24,144,144,22,22,new bt(62,new ut(8,156),new ut(2,155))),new pt(25,8,18,6,16,new bt(7,new ut(1,5))),new pt(26,8,32,6,14,new bt(11,new ut(1,10))),new pt(27,12,26,10,24,new bt(14,new ut(1,16))),new pt(28,12,36,10,16,new bt(18,new ut(1,22))),new pt(29,16,36,14,16,new bt(24,new ut(1,32))),new pt(30,16,48,14,22,new bt(28,new ut(1,49)))]}}pt.VERSIONS=pt.buildVersions();class pn{constructor(n){const i=n.getHeight();if(i<8||i>144||(i&1)!==0)throw new ee;this.version=pn.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new Ie(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const i=n.getHeight(),o=n.getWidth();return pt.getVersionForDimensions(i,o)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let i=0,o=4,c=0;const d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let p=!1,E=!1,S=!1,I=!1;do if(o===d&&c===0&&!p)n[i++]=this.readCorner1(d,f)&255,o-=2,c+=2,p=!0;else if(o===d-2&&c===0&&(f&3)!==0&&!E)n[i++]=this.readCorner2(d,f)&255,o-=2,c+=2,E=!0;else if(o===d+4&&c===2&&(f&7)===0&&!S)n[i++]=this.readCorner3(d,f)&255,o-=2,c+=2,S=!0;else if(o===d-2&&c===0&&(f&7)===4&&!I)n[i++]=this.readCorner4(d,f)&255,o-=2,c+=2,I=!0;else{do o<d&&c>=0&&!this.readMappingMatrix.get(c,o)&&(n[i++]=this.readUtah(o,c,d,f)&255),o-=2,c+=2;while(o>=0&&c<f);o+=1,c+=3;do o>=0&&c<f&&!this.readMappingMatrix.get(c,o)&&(n[i++]=this.readUtah(o,c,d,f)&255),o+=2,c-=2;while(o<d&&c>=0);o+=3,c+=1}while(o<d||c<f);if(i!==this.version.getTotalCodewords())throw new ee;return n}readModule(n,i,o,c){return n<0&&(n+=o,i+=4-(o+4&7)),i<0&&(i+=c,n+=4-(c+4&7)),this.readMappingMatrix.set(i,n),this.mappingBitMatrix.get(i,n)}readUtah(n,i,o,c){let d=0;return this.readModule(n-2,i-2,o,c)&&(d|=1),d<<=1,this.readModule(n-2,i-1,o,c)&&(d|=1),d<<=1,this.readModule(n-1,i-2,o,c)&&(d|=1),d<<=1,this.readModule(n-1,i-1,o,c)&&(d|=1),d<<=1,this.readModule(n-1,i,o,c)&&(d|=1),d<<=1,this.readModule(n,i-2,o,c)&&(d|=1),d<<=1,this.readModule(n,i-1,o,c)&&(d|=1),d<<=1,this.readModule(n,i,o,c)&&(d|=1),d}readCorner1(n,i){let o=0;return this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,1,n,i)&&(o|=1),o<<=1,this.readModule(n-1,2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(2,i-1,n,i)&&(o|=1),o<<=1,this.readModule(3,i-1,n,i)&&(o|=1),o}readCorner2(n,i){let o=0;return this.readModule(n-3,0,n,i)&&(o|=1),o<<=1,this.readModule(n-2,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(0,i-4,n,i)&&(o|=1),o<<=1,this.readModule(0,i-3,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o}readCorner3(n,i){let o=0;return this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(0,i-3,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-3,n,i)&&(o|=1),o<<=1,this.readModule(1,i-2,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o}readCorner4(n,i){let o=0;return this.readModule(n-3,0,n,i)&&(o|=1),o<<=1,this.readModule(n-2,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(2,i-1,n,i)&&(o|=1),o<<=1,this.readModule(3,i-1,n,i)&&(o|=1),o}extractDataRegion(n){const i=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(n.getHeight()!==i)throw new C("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=i/c|0,p=o/d|0,E=f*c,S=p*d,I=new Ie(S,E);for(let P=0;P<f;++P){const B=P*c;for(let V=0;V<p;++V){const G=V*d;for(let Y=0;Y<c;++Y){const J=P*(c+2)+1+Y,oe=B+Y;for(let Ee=0;Ee<d;++Ee){const Ce=V*(d+2)+1+Ee;if(n.get(Ce,J)){const ye=G+Ee;I.set(ye,oe)}}}}}return I}}class Bo{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i){const o=i.getECBlocks();let c=0;const d=o.getECBlocks();for(let Y of d)c+=Y.getCount();const f=new Array(c);let p=0;for(let Y of d)for(let J=0;J<Y.getCount();J++){const oe=Y.getDataCodewords(),Ee=o.getECCodewords()+oe;f[p++]=new Bo(oe,new Uint8Array(Ee))}const S=f[0].codewords.length-o.getECCodewords(),I=S-1;let P=0;for(let Y=0;Y<I;Y++)for(let J=0;J<p;J++)f[J].codewords[Y]=n[P++];const B=i.getVersionNumber()===24,V=B?8:p;for(let Y=0;Y<V;Y++)f[Y].codewords[S-1]=n[P++];const G=f[0].codewords.length;for(let Y=S;Y<G;Y++)for(let J=0;J<p;J++){const oe=B?(J+8)%p:J,Ee=B&&oe>7?Y-1:Y;f[oe].codewords[Ee]=n[P++]}if(P!==n.length)throw new C;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Lo{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new C(""+n);let i=0,o=this.bitOffset,c=this.byteOffset;const d=this.bytes;if(o>0){const f=8-o,p=n<f?n:f,E=f-p,S=255>>8-p<<E;i=(d[c]&S)>>E,n-=p,o+=p,o===8&&(o=0,c++)}if(n>0){for(;n>=8;)i=i<<8|d[c]&255,c++,n-=8;if(n>0){const f=8-n,p=255>>f<<f;i=i<<n|(d[c]&p)>>f,o+=n}}return this.bitOffset=o,this.byteOffset=c,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Er;(function(O){O[O.PAD_ENCODE=0]="PAD_ENCODE",O[O.ASCII_ENCODE=1]="ASCII_ENCODE",O[O.C40_ENCODE=2]="C40_ENCODE",O[O.TEXT_ENCODE=3]="TEXT_ENCODE",O[O.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",O[O.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",O[O.BASE256_ENCODE=6]="BASE256_ENCODE"})(Er||(Er={}));class Dn{static decode(n){const i=new Lo(n),o=new Te,c=new Te,d=new Array;let f=Er.ASCII_ENCODE;do if(f===Er.ASCII_ENCODE)f=this.decodeAsciiSegment(i,o,c);else{switch(f){case Er.C40_ENCODE:this.decodeC40Segment(i,o);break;case Er.TEXT_ENCODE:this.decodeTextSegment(i,o);break;case Er.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,o);break;case Er.EDIFACT_ENCODE:this.decodeEdifactSegment(i,o);break;case Er.BASE256_ENCODE:this.decodeBase256Segment(i,o,d);break;default:throw new ee}f=Er.ASCII_ENCODE}while(f!==Er.PAD_ENCODE&&i.available()>0);return c.length()>0&&o.append(c.toString()),new wt(n,o.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(n,i,o){let c=!1;do{let d=n.readBits(8);if(d===0)throw new ee;if(d<=128)return c&&(d+=128),i.append(String.fromCharCode(d-1)),Er.ASCII_ENCODE;if(d===129)return Er.PAD_ENCODE;if(d<=229){const f=d-130;f<10&&i.append("0"),i.append(""+f)}else switch(d){case 230:return Er.C40_ENCODE;case 231:return Er.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:i.append("[)>05"),o.insert(0,"");break;case 237:i.append("[)>06"),o.insert(0,"");break;case 238:return Er.ANSIX12_ENCODE;case 239:return Er.TEXT_ENCODE;case 240:return Er.EDIFACT_ENCODE;case 241:break;default:if(d!==254||n.available()!==0)throw new ee;break}}while(n.available()>0);return Er.ASCII_ENCODE}static decodeC40Segment(n,i){let o=!1;const c=[];let d=0;do{if(n.available()===8)return;const f=n.readBits(8);if(f===254)return;this.parseTwoBytes(f,n.readBits(8),c);for(let p=0;p<3;p++){const E=c[p];switch(d){case 0:if(E<3)d=E+1;else if(E<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[E];o?(i.append(String.fromCharCode(S.charCodeAt(0)+128)),o=!1):i.append(S)}else throw new ee;break;case 1:o?(i.append(String.fromCharCode(E+128)),o=!1):i.append(String.fromCharCode(E)),d=0;break;case 2:if(E<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[E];o?(i.append(String.fromCharCode(S.charCodeAt(0)+128)),o=!1):i.append(S)}else switch(E){case 27:i.append("");break;case 30:o=!0;break;default:throw new ee}d=0;break;case 3:o?(i.append(String.fromCharCode(E+224)),o=!1):i.append(String.fromCharCode(E+96)),d=0;break;default:throw new ee}}}while(n.available()>0)}static decodeTextSegment(n,i){let o=!1,c=[],d=0;do{if(n.available()===8)return;const f=n.readBits(8);if(f===254)return;this.parseTwoBytes(f,n.readBits(8),c);for(let p=0;p<3;p++){const E=c[p];switch(d){case 0:if(E<3)d=E+1;else if(E<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[E];o?(i.append(String.fromCharCode(S.charCodeAt(0)+128)),o=!1):i.append(S)}else throw new ee;break;case 1:o?(i.append(String.fromCharCode(E+128)),o=!1):i.append(String.fromCharCode(E)),d=0;break;case 2:if(E<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[E];o?(i.append(String.fromCharCode(S.charCodeAt(0)+128)),o=!1):i.append(S)}else switch(E){case 27:i.append("");break;case 30:o=!0;break;default:throw new ee}d=0;break;case 3:if(E<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[E];o?(i.append(String.fromCharCode(S.charCodeAt(0)+128)),o=!1):i.append(S),d=0}else throw new ee;break;default:throw new ee}}}while(n.available()>0)}static decodeAnsiX12Segment(n,i){const o=[];do{if(n.available()===8)return;const c=n.readBits(8);if(c===254)return;this.parseTwoBytes(c,n.readBits(8),o);for(let d=0;d<3;d++){const f=o[d];switch(f){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(f<14)i.append(String.fromCharCode(f+44));else if(f<40)i.append(String.fromCharCode(f+51));else throw new ee;break}}}while(n.available()>0)}static parseTwoBytes(n,i,o){let c=(n<<8)+i-1,d=Math.floor(c/1600);o[0]=d,c-=d*1600,d=Math.floor(c/40),o[1]=d,o[2]=c-d*40}static decodeEdifactSegment(n,i){do{if(n.available()<=16)return;for(let o=0;o<4;o++){let c=n.readBits(6);if(c===31){const d=8-n.getBitOffset();d!==8&&n.readBits(d);return}(c&32)===0&&(c|=64),i.append(String.fromCharCode(c))}}while(n.available()>0)}static decodeBase256Segment(n,i,o){let c=1+n.getByteOffset();const d=this.unrandomize255State(n.readBits(8),c++);let f;if(d===0?f=n.available()/8|0:d<250?f=d:f=250*(d-249)+this.unrandomize255State(n.readBits(8),c++),f<0)throw new ee;const p=new Uint8Array(f);for(let E=0;E<f;E++){if(n.available()<8)throw new ee;p[E]=this.unrandomize255State(n.readBits(8),c++)}o.push(p);try{i.append(ge.decode(p,he.ISO88591))}catch(E){throw new fn("Platform does not support required encoding: "+E.message)}}static unrandomize255State(n,i){const o=149*i%255+1,c=n-o;return c>=0?c:c+256}}Dn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Dn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Dn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Dn.TEXT_SHIFT2_SET_CHARS=Dn.C40_SHIFT2_SET_CHARS,Dn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Da{constructor(){this.rsDecoder=new cs(mt.DATA_MATRIX_FIELD_256)}decode(n){const i=new pn(n),o=i.getVersion(),c=i.readCodewords(),d=Bo.getDataBlocks(c,o);let f=0;for(let S of d)f+=S.getNumDataCodewords();const p=new Uint8Array(f),E=d.length;for(let S=0;S<E;S++){const I=d[S],P=I.getCodewords(),B=I.getNumDataCodewords();this.correctErrors(P,B);for(let V=0;V<B;V++)p[V*E+S]=P[V]}return Dn.decode(p)}correctErrors(n,i){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-i)}catch{throw new R}for(let c=0;c<i;c++)n[c]=o[c]}}class Ft{constructor(n){this.image=n,this.rectangleDetector=new bn(this.image)}detect(){const n=this.rectangleDetector.detect();let i=this.detectSolid1(n);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new Q;i=this.shiftToModuleCenter(i);const o=i[0],c=i[1],d=i[2],f=i[3];let p=this.transitionsBetween(o,f)+1,E=this.transitionsBetween(d,f)+1;(p&1)===1&&(p+=1),(E&1)===1&&(E+=1),4*p<7*E&&4*E<7*p&&(p=E=Math.max(p,E));let S=Ft.sampleGrid(this.image,o,c,d,f,p,E);return new hr(S,[o,c,d,f])}static shiftPoint(n,i,o){let c=(i.getX()-n.getX())/(o+1),d=(i.getY()-n.getY())/(o+1);return new Pe(n.getX()+c,n.getY()+d)}static moveAway(n,i,o){let c=n.getX(),d=n.getY();return c<i?c-=1:c+=1,d<o?d-=1:d+=1,new Pe(c,d)}detectSolid1(n){let i=n[0],o=n[1],c=n[3],d=n[2],f=this.transitionsBetween(i,o),p=this.transitionsBetween(o,c),E=this.transitionsBetween(c,d),S=this.transitionsBetween(d,i),I=f,P=[d,i,o,c];return I>p&&(I=p,P[0]=i,P[1]=o,P[2]=c,P[3]=d),I>E&&(I=E,P[0]=o,P[1]=c,P[2]=d,P[3]=i),I>S&&(P[0]=c,P[1]=d,P[2]=i,P[3]=o),P}detectSolid2(n){let i=n[0],o=n[1],c=n[2],d=n[3],f=this.transitionsBetween(i,d),p=Ft.shiftPoint(o,c,(f+1)*4),E=Ft.shiftPoint(c,o,(f+1)*4),S=this.transitionsBetween(p,i),I=this.transitionsBetween(E,d);return S<I?(n[0]=i,n[1]=o,n[2]=c,n[3]=d):(n[0]=o,n[1]=c,n[2]=d,n[3]=i),n}correctTopRight(n){let i=n[0],o=n[1],c=n[2],d=n[3],f=this.transitionsBetween(i,d),p=this.transitionsBetween(o,d),E=Ft.shiftPoint(i,o,(p+1)*4),S=Ft.shiftPoint(c,o,(f+1)*4);f=this.transitionsBetween(E,d),p=this.transitionsBetween(S,d);let I=new Pe(d.getX()+(c.getX()-o.getX())/(f+1),d.getY()+(c.getY()-o.getY())/(f+1)),P=new Pe(d.getX()+(i.getX()-o.getX())/(p+1),d.getY()+(i.getY()-o.getY())/(p+1));if(!this.isValid(I))return this.isValid(P)?P:null;if(!this.isValid(P))return I;let B=this.transitionsBetween(E,I)+this.transitionsBetween(S,I),V=this.transitionsBetween(E,P)+this.transitionsBetween(S,P);return B>V?I:P}shiftToModuleCenter(n){let i=n[0],o=n[1],c=n[2],d=n[3],f=this.transitionsBetween(i,d)+1,p=this.transitionsBetween(c,d)+1,E=Ft.shiftPoint(i,o,p*4),S=Ft.shiftPoint(c,o,f*4);f=this.transitionsBetween(E,d)+1,p=this.transitionsBetween(S,d)+1,(f&1)===1&&(f+=1),(p&1)===1&&(p+=1);let I=(i.getX()+o.getX()+c.getX()+d.getX())/4,P=(i.getY()+o.getY()+c.getY()+d.getY())/4;i=Ft.moveAway(i,I,P),o=Ft.moveAway(o,I,P),c=Ft.moveAway(c,I,P),d=Ft.moveAway(d,I,P);let B,V;return E=Ft.shiftPoint(i,o,p*4),E=Ft.shiftPoint(E,d,f*4),B=Ft.shiftPoint(o,i,p*4),B=Ft.shiftPoint(B,c,f*4),S=Ft.shiftPoint(c,d,p*4),S=Ft.shiftPoint(S,o,f*4),V=Ft.shiftPoint(d,c,p*4),V=Ft.shiftPoint(V,i,f*4),[E,B,S,V]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,i,o,c,d,f,p){return rn.getInstance().sampleGrid(n,f,p,.5,.5,f-.5,.5,f-.5,p-.5,.5,p-.5,i.getX(),i.getY(),d.getX(),d.getY(),c.getX(),c.getY(),o.getX(),o.getY())}transitionsBetween(n,i){let o=Math.trunc(n.getX()),c=Math.trunc(n.getY()),d=Math.trunc(i.getX()),f=Math.trunc(i.getY()),p=Math.abs(f-c)>Math.abs(d-o);if(p){let Y=o;o=c,c=Y,Y=d,d=f,f=Y}let E=Math.abs(d-o),S=Math.abs(f-c),I=-E/2,P=c<f?1:-1,B=o<d?1:-1,V=0,G=this.image.get(p?c:o,p?o:c);for(let Y=o,J=c;Y!==d;Y+=B){let oe=this.image.get(p?J:Y,p?Y:J);if(oe!==G&&(V++,G=oe),I+=S,I>0){if(J===f)break;J+=P,I-=E}}return V}}class Mn{constructor(){this.decoder=new Da}decode(n,i=null){let o,c;if(i!=null&&i.has(te.PURE_BARCODE)){const S=Mn.extractPureBits(n.getBlackMatrix());o=this.decoder.decode(S),c=Mn.NO_POINTS}else{const S=new Ft(n.getBlackMatrix()).detect();o=this.decoder.decode(S.getBits()),c=S.getPoints()}const d=o.getRawBytes(),f=new Me(o.getText(),d,8*d.length,c,pe.DATA_MATRIX,D.currentTimeMillis()),p=o.getByteSegments();p!=null&&f.putMetadata($e.BYTE_SEGMENTS,p);const E=o.getECLevel();return E!=null&&f.putMetadata($e.ERROR_CORRECTION_LEVEL,E),f}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(i==null||o==null)throw new Q;const c=this.moduleSize(i,n);let d=i[1];const f=o[1];let p=i[0];const S=(o[0]-p+1)/c,I=(f-d+1)/c;if(S<=0||I<=0)throw new Q;const P=c/2;d+=P,p+=P;const B=new Ie(S,I);for(let V=0;V<I;V++){const G=d+V*c;for(let Y=0;Y<S;Y++)n.get(p+Y*c,G)&&B.set(Y,V)}return B}static moduleSize(n,i){const o=i.getWidth();let c=n[0];const d=n[1];for(;c<o&&i.get(c,d);)c++;if(c===o)throw new Q;const f=c-n[0];if(f===0)throw new Q;return f}}Mn.NO_POINTS=[];class Ju extends ke{constructor(n=500){super(new Mn,n)}}var gi;(function(O){O[O.L=0]="L",O[O.M=1]="M",O[O.Q=2]="Q",O[O.H=3]="H"})(gi||(gi={}));class kt{constructor(n,i,o){this.value=n,this.stringValue=i,this.bits=o,kt.FOR_BITS.set(o,this),kt.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return kt.L;case"M":return kt.M;case"Q":return kt.Q;case"H":return kt.H;default:throw new A(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof kt))return!1;const i=n;return this.value===i.value}static forBits(n){if(n<0||n>=kt.FOR_BITS.size)throw new C;return kt.FOR_BITS.get(n)}}kt.FOR_BITS=new Map,kt.FOR_VALUE=new Map,kt.L=new kt(gi.L,"L",1),kt.M=new kt(gi.M,"M",0),kt.Q=new kt(gi.Q,"Q",3),kt.H=new kt(gi.H,"H",2);class kr{constructor(n){this.errorCorrectionLevel=kt.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,i){return j.bitCount(n^i)}static decodeFormatInformation(n,i){const o=kr.doDecodeFormatInformation(n,i);return o!==null?o:kr.doDecodeFormatInformation(n^kr.FORMAT_INFO_MASK_QR,i^kr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,i){let o=Number.MAX_SAFE_INTEGER,c=0;for(const d of kr.FORMAT_INFO_DECODE_LOOKUP){const f=d[0];if(f===n||f===i)return new kr(d[1]);let p=kr.numBitsDiffering(n,f);p<o&&(c=d[1],o=p),n!==i&&(p=kr.numBitsDiffering(i,f),p<o&&(c=d[1],o=p))}return o<=3?new kr(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof kr))return!1;const i=n;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}kr.FORMAT_INFO_MASK_QR=21522,kr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class re{constructor(n,...i){this.ecCodewordsPerBlock=n,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const i=this.ecBlocks;for(const o of i)n+=o.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class F{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ze{constructor(n,i,...o){this.versionNumber=n,this.alignmentPatternCenters=i,this.ecBlocks=o;let c=0;const d=o[0].getECCodewordsPerBlock(),f=o[0].getECBlocks();for(const p of f)c+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new ee;try{return this.getVersionForNumber((n-17)/4)}catch{throw new ee}}static getVersionForNumber(n){if(n<1||n>40)throw new C;return ze.VERSIONS[n-1]}static decodeVersionInformation(n){let i=Number.MAX_SAFE_INTEGER,o=0;for(let c=0;c<ze.VERSION_DECODE_INFO.length;c++){const d=ze.VERSION_DECODE_INFO[c];if(d===n)return ze.getVersionForNumber(c+7);const f=kr.numBitsDiffering(n,d);f<i&&(o=c+7,i=f)}return i<=3?ze.getVersionForNumber(o):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),i=new Ie(n);i.setRegion(0,0,9,9),i.setRegion(n-8,0,8,9),i.setRegion(0,n-8,9,8);const o=this.alignmentPatternCenters.length;for(let c=0;c<o;c++){const d=this.alignmentPatternCenters[c]-2;for(let f=0;f<o;f++)c===0&&(f===0||f===o-1)||c===o-1&&f===0||i.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return i.setRegion(6,9,1,n-17),i.setRegion(9,6,n-17,1),this.versionNumber>6&&(i.setRegion(n-11,0,3,6),i.setRegion(0,n-11,6,3)),i}toString(){return""+this.versionNumber}}ze.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ze.VERSIONS=[new ze(1,new Int32Array(0),new re(7,new F(1,19)),new re(10,new F(1,16)),new re(13,new F(1,13)),new re(17,new F(1,9))),new ze(2,Int32Array.from([6,18]),new re(10,new F(1,34)),new re(16,new F(1,28)),new re(22,new F(1,22)),new re(28,new F(1,16))),new ze(3,Int32Array.from([6,22]),new re(15,new F(1,55)),new re(26,new F(1,44)),new re(18,new F(2,17)),new re(22,new F(2,13))),new ze(4,Int32Array.from([6,26]),new re(20,new F(1,80)),new re(18,new F(2,32)),new re(26,new F(2,24)),new re(16,new F(4,9))),new ze(5,Int32Array.from([6,30]),new re(26,new F(1,108)),new re(24,new F(2,43)),new re(18,new F(2,15),new F(2,16)),new re(22,new F(2,11),new F(2,12))),new ze(6,Int32Array.from([6,34]),new re(18,new F(2,68)),new re(16,new F(4,27)),new re(24,new F(4,19)),new re(28,new F(4,15))),new ze(7,Int32Array.from([6,22,38]),new re(20,new F(2,78)),new re(18,new F(4,31)),new re(18,new F(2,14),new F(4,15)),new re(26,new F(4,13),new F(1,14))),new ze(8,Int32Array.from([6,24,42]),new re(24,new F(2,97)),new re(22,new F(2,38),new F(2,39)),new re(22,new F(4,18),new F(2,19)),new re(26,new F(4,14),new F(2,15))),new ze(9,Int32Array.from([6,26,46]),new re(30,new F(2,116)),new re(22,new F(3,36),new F(2,37)),new re(20,new F(4,16),new F(4,17)),new re(24,new F(4,12),new F(4,13))),new ze(10,Int32Array.from([6,28,50]),new re(18,new F(2,68),new F(2,69)),new re(26,new F(4,43),new F(1,44)),new re(24,new F(6,19),new F(2,20)),new re(28,new F(6,15),new F(2,16))),new ze(11,Int32Array.from([6,30,54]),new re(20,new F(4,81)),new re(30,new F(1,50),new F(4,51)),new re(28,new F(4,22),new F(4,23)),new re(24,new F(3,12),new F(8,13))),new ze(12,Int32Array.from([6,32,58]),new re(24,new F(2,92),new F(2,93)),new re(22,new F(6,36),new F(2,37)),new re(26,new F(4,20),new F(6,21)),new re(28,new F(7,14),new F(4,15))),new ze(13,Int32Array.from([6,34,62]),new re(26,new F(4,107)),new re(22,new F(8,37),new F(1,38)),new re(24,new F(8,20),new F(4,21)),new re(22,new F(12,11),new F(4,12))),new ze(14,Int32Array.from([6,26,46,66]),new re(30,new F(3,115),new F(1,116)),new re(24,new F(4,40),new F(5,41)),new re(20,new F(11,16),new F(5,17)),new re(24,new F(11,12),new F(5,13))),new ze(15,Int32Array.from([6,26,48,70]),new re(22,new F(5,87),new F(1,88)),new re(24,new F(5,41),new F(5,42)),new re(30,new F(5,24),new F(7,25)),new re(24,new F(11,12),new F(7,13))),new ze(16,Int32Array.from([6,26,50,74]),new re(24,new F(5,98),new F(1,99)),new re(28,new F(7,45),new F(3,46)),new re(24,new F(15,19),new F(2,20)),new re(30,new F(3,15),new F(13,16))),new ze(17,Int32Array.from([6,30,54,78]),new re(28,new F(1,107),new F(5,108)),new re(28,new F(10,46),new F(1,47)),new re(28,new F(1,22),new F(15,23)),new re(28,new F(2,14),new F(17,15))),new ze(18,Int32Array.from([6,30,56,82]),new re(30,new F(5,120),new F(1,121)),new re(26,new F(9,43),new F(4,44)),new re(28,new F(17,22),new F(1,23)),new re(28,new F(2,14),new F(19,15))),new ze(19,Int32Array.from([6,30,58,86]),new re(28,new F(3,113),new F(4,114)),new re(26,new F(3,44),new F(11,45)),new re(26,new F(17,21),new F(4,22)),new re(26,new F(9,13),new F(16,14))),new ze(20,Int32Array.from([6,34,62,90]),new re(28,new F(3,107),new F(5,108)),new re(26,new F(3,41),new F(13,42)),new re(30,new F(15,24),new F(5,25)),new re(28,new F(15,15),new F(10,16))),new ze(21,Int32Array.from([6,28,50,72,94]),new re(28,new F(4,116),new F(4,117)),new re(26,new F(17,42)),new re(28,new F(17,22),new F(6,23)),new re(30,new F(19,16),new F(6,17))),new ze(22,Int32Array.from([6,26,50,74,98]),new re(28,new F(2,111),new F(7,112)),new re(28,new F(17,46)),new re(30,new F(7,24),new F(16,25)),new re(24,new F(34,13))),new ze(23,Int32Array.from([6,30,54,78,102]),new re(30,new F(4,121),new F(5,122)),new re(28,new F(4,47),new F(14,48)),new re(30,new F(11,24),new F(14,25)),new re(30,new F(16,15),new F(14,16))),new ze(24,Int32Array.from([6,28,54,80,106]),new re(30,new F(6,117),new F(4,118)),new re(28,new F(6,45),new F(14,46)),new re(30,new F(11,24),new F(16,25)),new re(30,new F(30,16),new F(2,17))),new ze(25,Int32Array.from([6,32,58,84,110]),new re(26,new F(8,106),new F(4,107)),new re(28,new F(8,47),new F(13,48)),new re(30,new F(7,24),new F(22,25)),new re(30,new F(22,15),new F(13,16))),new ze(26,Int32Array.from([6,30,58,86,114]),new re(28,new F(10,114),new F(2,115)),new re(28,new F(19,46),new F(4,47)),new re(28,new F(28,22),new F(6,23)),new re(30,new F(33,16),new F(4,17))),new ze(27,Int32Array.from([6,34,62,90,118]),new re(30,new F(8,122),new F(4,123)),new re(28,new F(22,45),new F(3,46)),new re(30,new F(8,23),new F(26,24)),new re(30,new F(12,15),new F(28,16))),new ze(28,Int32Array.from([6,26,50,74,98,122]),new re(30,new F(3,117),new F(10,118)),new re(28,new F(3,45),new F(23,46)),new re(30,new F(4,24),new F(31,25)),new re(30,new F(11,15),new F(31,16))),new ze(29,Int32Array.from([6,30,54,78,102,126]),new re(30,new F(7,116),new F(7,117)),new re(28,new F(21,45),new F(7,46)),new re(30,new F(1,23),new F(37,24)),new re(30,new F(19,15),new F(26,16))),new ze(30,Int32Array.from([6,26,52,78,104,130]),new re(30,new F(5,115),new F(10,116)),new re(28,new F(19,47),new F(10,48)),new re(30,new F(15,24),new F(25,25)),new re(30,new F(23,15),new F(25,16))),new ze(31,Int32Array.from([6,30,56,82,108,134]),new re(30,new F(13,115),new F(3,116)),new re(28,new F(2,46),new F(29,47)),new re(30,new F(42,24),new F(1,25)),new re(30,new F(23,15),new F(28,16))),new ze(32,Int32Array.from([6,34,60,86,112,138]),new re(30,new F(17,115)),new re(28,new F(10,46),new F(23,47)),new re(30,new F(10,24),new F(35,25)),new re(30,new F(19,15),new F(35,16))),new ze(33,Int32Array.from([6,30,58,86,114,142]),new re(30,new F(17,115),new F(1,116)),new re(28,new F(14,46),new F(21,47)),new re(30,new F(29,24),new F(19,25)),new re(30,new F(11,15),new F(46,16))),new ze(34,Int32Array.from([6,34,62,90,118,146]),new re(30,new F(13,115),new F(6,116)),new re(28,new F(14,46),new F(23,47)),new re(30,new F(44,24),new F(7,25)),new re(30,new F(59,16),new F(1,17))),new ze(35,Int32Array.from([6,30,54,78,102,126,150]),new re(30,new F(12,121),new F(7,122)),new re(28,new F(12,47),new F(26,48)),new re(30,new F(39,24),new F(14,25)),new re(30,new F(22,15),new F(41,16))),new ze(36,Int32Array.from([6,24,50,76,102,128,154]),new re(30,new F(6,121),new F(14,122)),new re(28,new F(6,47),new F(34,48)),new re(30,new F(46,24),new F(10,25)),new re(30,new F(2,15),new F(64,16))),new ze(37,Int32Array.from([6,28,54,80,106,132,158]),new re(30,new F(17,122),new F(4,123)),new re(28,new F(29,46),new F(14,47)),new re(30,new F(49,24),new F(10,25)),new re(30,new F(24,15),new F(46,16))),new ze(38,Int32Array.from([6,32,58,84,110,136,162]),new re(30,new F(4,122),new F(18,123)),new re(28,new F(13,46),new F(32,47)),new re(30,new F(48,24),new F(14,25)),new re(30,new F(42,15),new F(32,16))),new ze(39,Int32Array.from([6,26,54,82,110,138,166]),new re(30,new F(20,117),new F(4,118)),new re(28,new F(40,47),new F(7,48)),new re(30,new F(43,24),new F(22,25)),new re(30,new F(10,15),new F(67,16))),new ze(40,Int32Array.from([6,30,58,86,114,142,170]),new re(30,new F(19,118),new F(6,119)),new re(28,new F(18,47),new F(31,48)),new re(30,new F(34,24),new F(34,25)),new re(30,new F(20,15),new F(61,16)))];var mr;(function(O){O[O.DATA_MASK_000=0]="DATA_MASK_000",O[O.DATA_MASK_001=1]="DATA_MASK_001",O[O.DATA_MASK_010=2]="DATA_MASK_010",O[O.DATA_MASK_011=3]="DATA_MASK_011",O[O.DATA_MASK_100=4]="DATA_MASK_100",O[O.DATA_MASK_101=5]="DATA_MASK_101",O[O.DATA_MASK_110=6]="DATA_MASK_110",O[O.DATA_MASK_111=7]="DATA_MASK_111"})(mr||(mr={}));class dt{constructor(n,i){this.value=n,this.isMasked=i}unmaskBitMatrix(n,i){for(let o=0;o<i;o++)for(let c=0;c<i;c++)this.isMasked(o,c)&&n.flip(c,o)}}dt.values=new Map([[mr.DATA_MASK_000,new dt(mr.DATA_MASK_000,(O,n)=>(O+n&1)===0)],[mr.DATA_MASK_001,new dt(mr.DATA_MASK_001,(O,n)=>(O&1)===0)],[mr.DATA_MASK_010,new dt(mr.DATA_MASK_010,(O,n)=>n%3===0)],[mr.DATA_MASK_011,new dt(mr.DATA_MASK_011,(O,n)=>(O+n)%3===0)],[mr.DATA_MASK_100,new dt(mr.DATA_MASK_100,(O,n)=>(Math.floor(O/2)+Math.floor(n/3)&1)===0)],[mr.DATA_MASK_101,new dt(mr.DATA_MASK_101,(O,n)=>O*n%6===0)],[mr.DATA_MASK_110,new dt(mr.DATA_MASK_110,(O,n)=>O*n%6<3)],[mr.DATA_MASK_111,new dt(mr.DATA_MASK_111,(O,n)=>(O+n+O*n%3&1)===0)]]);class lc{constructor(n){const i=n.getHeight();if(i<21||(i&3)!==1)throw new ee;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let d=0;d<6;d++)n=this.copyBit(d,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let d=5;d>=0;d--)n=this.copyBit(8,d,n);const i=this.bitMatrix.getHeight();let o=0;const c=i-7;for(let d=i-1;d>=c;d--)o=this.copyBit(8,d,o);for(let d=i-8;d<i;d++)o=this.copyBit(d,8,o);if(this.parsedFormatInfo=kr.decodeFormatInformation(n,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ee}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),i=Math.floor((n-17)/4);if(i<=6)return ze.getVersionForNumber(i);let o=0;const c=n-11;for(let f=5;f>=0;f--)for(let p=n-9;p>=c;p--)o=this.copyBit(p,f,o);let d=ze.decodeVersionInformation(o);if(d!==null&&d.getDimensionForVersion()===n)return this.parsedVersion=d,d;o=0;for(let f=5;f>=0;f--)for(let p=n-9;p>=c;p--)o=this.copyBit(f,p,o);if(d=ze.decodeVersionInformation(o),d!==null&&d.getDimensionForVersion()===n)return this.parsedVersion=d,d;throw new ee}copyBit(n,i,o){return(this.isMirror?this.bitMatrix.get(i,n):this.bitMatrix.get(n,i))?o<<1|1:o<<1}readCodewords(){const n=this.readFormatInformation(),i=this.readVersion(),o=dt.values.get(n.getDataMask()),c=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,c);const d=i.buildFunctionPattern();let f=!0;const p=new Uint8Array(i.getTotalCodewords());let E=0,S=0,I=0;for(let P=c-1;P>0;P-=2){P===6&&P--;for(let B=0;B<c;B++){const V=f?c-1-B:B;for(let G=0;G<2;G++)d.get(P-G,V)||(I++,S<<=1,this.bitMatrix.get(P-G,V)&&(S|=1),I===8&&(p[E++]=S,I=0,S=0))}f=!f}if(E!==i.getTotalCodewords())throw new ee;return p}remask(){if(this.parsedFormatInfo===null)return;const n=dt.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let i=0,o=n.getWidth();i<o;i++)for(let c=i+1,d=n.getHeight();c<d;c++)n.get(i,c)!==n.get(c,i)&&(n.flip(c,i),n.flip(i,c))}}class Ma{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i,o){if(n.length!==i.getTotalCodewords())throw new C;const c=i.getECBlocksForLevel(o);let d=0;const f=c.getECBlocks();for(const G of f)d+=G.getCount();const p=new Array(d);let E=0;for(const G of f)for(let Y=0;Y<G.getCount();Y++){const J=G.getDataCodewords(),oe=c.getECCodewordsPerBlock()+J;p[E++]=new Ma(J,new Uint8Array(oe))}const S=p[0].codewords.length;let I=p.length-1;for(;I>=0&&p[I].codewords.length!==S;)I--;I++;const P=S-c.getECCodewordsPerBlock();let B=0;for(let G=0;G<P;G++)for(let Y=0;Y<E;Y++)p[Y].codewords[G]=n[B++];for(let G=I;G<E;G++)p[G].codewords[P]=n[B++];const V=p[0].codewords.length;for(let G=P;G<V;G++)for(let Y=0;Y<E;Y++){const J=Y<I?G:G+1;p[Y].codewords[J]=n[B++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var an;(function(O){O[O.TERMINATOR=0]="TERMINATOR",O[O.NUMERIC=1]="NUMERIC",O[O.ALPHANUMERIC=2]="ALPHANUMERIC",O[O.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",O[O.BYTE=4]="BYTE",O[O.ECI=5]="ECI",O[O.KANJI=6]="KANJI",O[O.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",O[O.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",O[O.HANZI=9]="HANZI"})(an||(an={}));class Ge{constructor(n,i,o,c){this.value=n,this.stringValue=i,this.characterCountBitsForVersions=o,this.bits=c,Ge.FOR_BITS.set(c,this),Ge.FOR_VALUE.set(n,this)}static forBits(n){const i=Ge.FOR_BITS.get(n);if(i===void 0)throw new C;return i}getCharacterCountBits(n){const i=n.getVersionNumber();let o;return i<=9?o=0:i<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof Ge))return!1;const i=n;return this.value===i.value}toString(){return this.stringValue}}Ge.FOR_BITS=new Map,Ge.FOR_VALUE=new Map,Ge.TERMINATOR=new Ge(an.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ge.NUMERIC=new Ge(an.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ge.ALPHANUMERIC=new Ge(an.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ge.STRUCTURED_APPEND=new Ge(an.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ge.BYTE=new Ge(an.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ge.ECI=new Ge(an.ECI,"ECI",Int32Array.from([0,0,0]),7),Ge.KANJI=new Ge(an.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ge.FNC1_FIRST_POSITION=new Ge(an.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ge.FNC1_SECOND_POSITION=new Ge(an.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ge.HANZI=new Ge(an.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Vt{static decode(n,i,o,c){const d=new Lo(n);let f=new Te;const p=new Array;let E=-1,S=-1;try{let I=null,P=!1,B;do{if(d.available()<4)B=Ge.TERMINATOR;else{const V=d.readBits(4);B=Ge.forBits(V)}switch(B){case Ge.TERMINATOR:break;case Ge.FNC1_FIRST_POSITION:case Ge.FNC1_SECOND_POSITION:P=!0;break;case Ge.STRUCTURED_APPEND:if(d.available()<16)throw new ee;E=d.readBits(8),S=d.readBits(8);break;case Ge.ECI:const V=Vt.parseECIValue(d);if(I=se.getCharacterSetECIByValue(V),I===null)throw new ee;break;case Ge.HANZI:const G=d.readBits(4),Y=d.readBits(B.getCharacterCountBits(i));G===Vt.GB2312_SUBSET&&Vt.decodeHanziSegment(d,f,Y);break;default:const J=d.readBits(B.getCharacterCountBits(i));switch(B){case Ge.NUMERIC:Vt.decodeNumericSegment(d,f,J);break;case Ge.ALPHANUMERIC:Vt.decodeAlphanumericSegment(d,f,J,P);break;case Ge.BYTE:Vt.decodeByteSegment(d,f,J,I,p,c);break;case Ge.KANJI:Vt.decodeKanjiSegment(d,f,J);break;default:throw new ee}break}}while(B!==Ge.TERMINATOR)}catch{throw new ee}return new wt(n,f.toString(),p.length===0?null:p,o===null?null:o.toString(),E,S)}static decodeHanziSegment(n,i,o){if(o*13>n.available())throw new ee;const c=new Uint8Array(2*o);let d=0;for(;o>0;){const f=n.readBits(13);let p=f/96<<8&4294967295|f%96;p<959?p+=41377:p+=42657,c[d]=p>>8&255,c[d+1]=p&255,d+=2,o--}try{i.append(ge.decode(c,he.GB2312))}catch(f){throw new ee(f)}}static decodeKanjiSegment(n,i,o){if(o*13>n.available())throw new ee;const c=new Uint8Array(2*o);let d=0;for(;o>0;){const f=n.readBits(13);let p=f/192<<8&4294967295|f%192;p<7936?p+=33088:p+=49472,c[d]=p>>8,c[d+1]=p,d+=2,o--}try{i.append(ge.decode(c,he.SHIFT_JIS))}catch(f){throw new ee(f)}}static decodeByteSegment(n,i,o,c,d,f){if(8*o>n.available())throw new ee;const p=new Uint8Array(o);for(let S=0;S<o;S++)p[S]=n.readBits(8);let E;c===null?E=he.guessEncoding(p,f):E=c.getName();try{i.append(ge.decode(p,E))}catch(S){throw new ee(S)}d.push(p)}static toAlphaNumericChar(n){if(n>=Vt.ALPHANUMERIC_CHARS.length)throw new ee;return Vt.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,i,o,c){const d=i.length();for(;o>1;){if(n.available()<11)throw new ee;const f=n.readBits(11);i.append(Vt.toAlphaNumericChar(Math.floor(f/45))),i.append(Vt.toAlphaNumericChar(f%45)),o-=2}if(o===1){if(n.available()<6)throw new ee;i.append(Vt.toAlphaNumericChar(n.readBits(6)))}if(c)for(let f=d;f<i.length();f++)i.charAt(f)==="%"&&(f<i.length()-1&&i.charAt(f+1)==="%"?i.deleteCharAt(f+1):i.setCharAt(f,""))}static decodeNumericSegment(n,i,o){for(;o>=3;){if(n.available()<10)throw new ee;const c=n.readBits(10);if(c>=1e3)throw new ee;i.append(Vt.toAlphaNumericChar(Math.floor(c/100))),i.append(Vt.toAlphaNumericChar(Math.floor(c/10)%10)),i.append(Vt.toAlphaNumericChar(c%10)),o-=3}if(o===2){if(n.available()<7)throw new ee;const c=n.readBits(7);if(c>=100)throw new ee;i.append(Vt.toAlphaNumericChar(Math.floor(c/10))),i.append(Vt.toAlphaNumericChar(c%10))}else if(o===1){if(n.available()<4)throw new ee;const c=n.readBits(4);if(c>=10)throw new ee;i.append(Vt.toAlphaNumericChar(c))}}static parseECIValue(n){const i=n.readBits(8);if((i&128)===0)return i&127;if((i&192)===128){const o=n.readBits(8);return(i&63)<<8&4294967295|o}if((i&224)===192){const o=n.readBits(16);return(i&31)<<16&4294967295|o}throw new ee}}Vt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Vt.GB2312_SUBSET=1;class Fo{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const i=n[0];n[0]=n[2],n[2]=i}}class Uo{constructor(){this.rsDecoder=new cs(mt.QR_CODE_FIELD_256)}decodeBooleanArray(n,i){return this.decodeBitMatrix(Ie.parseFromBooleanArray(n),i)}decodeBitMatrix(n,i){const o=new lc(n);let c=null;try{return this.decodeBitMatrixParser(o,i)}catch(d){c=d}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const d=this.decodeBitMatrixParser(o,i);return d.setOther(new Fo(!0)),d}catch(d){throw c!==null?c:d}}decodeBitMatrixParser(n,i){const o=n.readVersion(),c=n.readFormatInformation().getErrorCorrectionLevel(),d=n.readCodewords(),f=Ma.getDataBlocks(d,o,c);let p=0;for(const I of f)p+=I.getNumDataCodewords();const E=new Uint8Array(p);let S=0;for(const I of f){const P=I.getCodewords(),B=I.getNumDataCodewords();this.correctErrors(P,B);for(let V=0;V<B;V++)E[S++]=P[V]}return Vt.decode(E,o,c,i)}correctErrors(n,i){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-i)}catch{throw new R}for(let c=0;c<i;c++)n[c]=o[c]}}class pi extends Pe{constructor(n,i,o){super(n,i),this.estimatedModuleSize=o}aboutEquals(n,i,o){if(Math.abs(i-this.getY())<=n&&Math.abs(o-this.getX())<=n){const c=Math.abs(n-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(n,i,o){const c=(this.getX()+i)/2,d=(this.getY()+n)/2,f=(this.estimatedModuleSize+o)/2;return new pi(c,d,f)}}class jn{constructor(n,i,o,c,d,f,p){this.image=n,this.startX=i,this.startY=o,this.width=c,this.height=d,this.moduleSize=f,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,i=this.height,o=this.width,c=n+o,d=this.startY+i/2,f=new Int32Array(3),p=this.image;for(let E=0;E<i;E++){const S=d+((E&1)===0?Math.floor((E+1)/2):-Math.floor((E+1)/2));f[0]=0,f[1]=0,f[2]=0;let I=n;for(;I<c&&!p.get(I,S);)I++;let P=0;for(;I<c;){if(p.get(I,S))if(P===1)f[1]++;else if(P===2){if(this.foundPatternCross(f)){const B=this.handlePossibleCenter(f,S,I);if(B!==null)return B}f[0]=f[2],f[1]=1,f[2]=0,P=1}else f[++P]++;else P===1&&P++,f[P]++;I++}if(this.foundPatternCross(f)){const B=this.handlePossibleCenter(f,S,c);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Q}static centerFromEnd(n,i){return i-n[2]-n[1]/2}foundPatternCross(n){const i=this.moduleSize,o=i/2;for(let c=0;c<3;c++)if(Math.abs(i-n[c])>=o)return!1;return!0}crossCheckVertical(n,i,o,c){const d=this.image,f=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let E=n;for(;E>=0&&d.get(i,E)&&p[1]<=o;)p[1]++,E--;if(E<0||p[1]>o)return NaN;for(;E>=0&&!d.get(i,E)&&p[0]<=o;)p[0]++,E--;if(p[0]>o)return NaN;for(E=n+1;E<f&&d.get(i,E)&&p[1]<=o;)p[1]++,E++;if(E===f||p[1]>o)return NaN;for(;E<f&&!d.get(i,E)&&p[2]<=o;)p[2]++,E++;if(p[2]>o)return NaN;const S=p[0]+p[1]+p[2];return 5*Math.abs(S-c)>=2*c?NaN:this.foundPatternCross(p)?jn.centerFromEnd(p,E):NaN}handlePossibleCenter(n,i,o){const c=n[0]+n[1]+n[2],d=jn.centerFromEnd(n,o),f=this.crossCheckVertical(i,d,2*n[1],c);if(!isNaN(f)){const p=(n[0]+n[1]+n[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(p,f,d))return S.combineEstimate(f,d,p);const E=new pi(d,f,p);this.possibleCenters.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return null}}class qn extends Pe{constructor(n,i,o,c){super(n,i),this.estimatedModuleSize=o,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,i,o){if(Math.abs(i-this.getY())<=n&&Math.abs(o-this.getX())<=n){const c=Math.abs(n-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(n,i,o){const c=this.count+1,d=(this.count*this.getX()+i)/c,f=(this.count*this.getY()+n)/c,p=(this.count*this.estimatedModuleSize+o)/c;return new qn(d,f,p,c)}}class Is{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class er{constructor(n,i){this.image=n,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const i=n!=null&&n.get(te.TRY_HARDER)!==void 0,o=n!=null&&n.get(te.PURE_BARCODE)!==void 0,c=this.image,d=c.getHeight(),f=c.getWidth();let p=Math.floor(3*d/(4*er.MAX_MODULES));(p<er.MIN_SKIP||i)&&(p=er.MIN_SKIP);let E=!1;const S=new Int32Array(5);for(let P=p-1;P<d&&!E;P+=p){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let B=0;for(let V=0;V<f;V++)if(c.get(V,P))(B&1)===1&&B++,S[B]++;else if((B&1)===0)if(B===4)if(er.foundPatternCross(S)){if(this.handlePossibleCenter(S,P,V,o)===!0)if(p=2,this.hasSkipped===!0)E=this.haveMultiplyConfirmedCenters();else{const Y=this.findRowSkip();Y>S[2]&&(P+=Y-S[2]-p,V=f-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,B=3;continue}B=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,B=3;else S[++B]++;else S[B]++;er.foundPatternCross(S)&&this.handlePossibleCenter(S,P,f,o)===!0&&(p=S[0],this.hasSkipped&&(E=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return Pe.orderBestPatterns(I),new Is(I)}static centerFromEnd(n,i){return i-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let i=0;for(let d=0;d<5;d++){const f=n[d];if(f===0)return!1;i+=f}if(i<7)return!1;const o=i/7,c=o/2;return Math.abs(o-n[0])<c&&Math.abs(o-n[1])<c&&Math.abs(3*o-n[2])<3*c&&Math.abs(o-n[3])<c&&Math.abs(o-n[4])<c}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,i,o,c){const d=this.getCrossCheckStateCount();let f=0;const p=this.image;for(;n>=f&&i>=f&&p.get(i-f,n-f);)d[2]++,f++;if(n<f||i<f)return!1;for(;n>=f&&i>=f&&!p.get(i-f,n-f)&&d[1]<=o;)d[1]++,f++;if(n<f||i<f||d[1]>o)return!1;for(;n>=f&&i>=f&&p.get(i-f,n-f)&&d[0]<=o;)d[0]++,f++;if(d[0]>o)return!1;const E=p.getHeight(),S=p.getWidth();for(f=1;n+f<E&&i+f<S&&p.get(i+f,n+f);)d[2]++,f++;if(n+f>=E||i+f>=S)return!1;for(;n+f<E&&i+f<S&&!p.get(i+f,n+f)&&d[3]<o;)d[3]++,f++;if(n+f>=E||i+f>=S||d[3]>=o)return!1;for(;n+f<E&&i+f<S&&p.get(i+f,n+f)&&d[4]<o;)d[4]++,f++;if(d[4]>=o)return!1;const I=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(I-c)<2*c&&er.foundPatternCross(d)}crossCheckVertical(n,i,o,c){const d=this.image,f=d.getHeight(),p=this.getCrossCheckStateCount();let E=n;for(;E>=0&&d.get(i,E);)p[2]++,E--;if(E<0)return NaN;for(;E>=0&&!d.get(i,E)&&p[1]<=o;)p[1]++,E--;if(E<0||p[1]>o)return NaN;for(;E>=0&&d.get(i,E)&&p[0]<=o;)p[0]++,E--;if(p[0]>o)return NaN;for(E=n+1;E<f&&d.get(i,E);)p[2]++,E++;if(E===f)return NaN;for(;E<f&&!d.get(i,E)&&p[3]<o;)p[3]++,E++;if(E===f||p[3]>=o)return NaN;for(;E<f&&d.get(i,E)&&p[4]<o;)p[4]++,E++;if(p[4]>=o)return NaN;const S=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(S-c)>=2*c?NaN:er.foundPatternCross(p)?er.centerFromEnd(p,E):NaN}crossCheckHorizontal(n,i,o,c){const d=this.image,f=d.getWidth(),p=this.getCrossCheckStateCount();let E=n;for(;E>=0&&d.get(E,i);)p[2]++,E--;if(E<0)return NaN;for(;E>=0&&!d.get(E,i)&&p[1]<=o;)p[1]++,E--;if(E<0||p[1]>o)return NaN;for(;E>=0&&d.get(E,i)&&p[0]<=o;)p[0]++,E--;if(p[0]>o)return NaN;for(E=n+1;E<f&&d.get(E,i);)p[2]++,E++;if(E===f)return NaN;for(;E<f&&!d.get(E,i)&&p[3]<o;)p[3]++,E++;if(E===f||p[3]>=o)return NaN;for(;E<f&&d.get(E,i)&&p[4]<o;)p[4]++,E++;if(p[4]>=o)return NaN;const S=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(S-c)>=c?NaN:er.foundPatternCross(p)?er.centerFromEnd(p,E):NaN}handlePossibleCenter(n,i,o,c){const d=n[0]+n[1]+n[2]+n[3]+n[4];let f=er.centerFromEnd(n,o),p=this.crossCheckVertical(i,Math.floor(f),n[2],d);if(!isNaN(p)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(p),n[2],d),!isNaN(f)&&(!c||this.crossCheckDiagonal(Math.floor(p),Math.floor(f),n[2],d)))){const E=d/7;let S=!1;const I=this.possibleCenters;for(let P=0,B=I.length;P<B;P++){const V=I[P];if(V.aboutEquals(E,p,f)){I[P]=V.combineEstimate(p,f,E),S=!0;break}}if(!S){const P=new qn(f,p,E);I.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const o of this.possibleCenters)if(o.getCount()>=er.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,i=0;const o=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=er.CENTER_QUORUM&&(n++,i+=f.getEstimatedModuleSize());if(n<3)return!1;const c=i/o;let d=0;for(const f of this.possibleCenters)d+=Math.abs(f.getEstimatedModuleSize()-c);return d<=.05*i}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new Q;const i=this.possibleCenters;let o;if(n>3){let c=0,d=0;for(const E of this.possibleCenters){const S=E.getEstimatedModuleSize();c+=S,d+=S*S}o=c/n;let f=Math.sqrt(d/n-o*o);i.sort((E,S)=>{const I=Math.abs(S.getEstimatedModuleSize()-o),P=Math.abs(E.getEstimatedModuleSize()-o);return I<P?-1:I>P?1:0});const p=Math.max(.2*o,f);for(let E=0;E<i.length&&i.length>3;E++){const S=i[E];Math.abs(S.getEstimatedModuleSize()-o)>p&&(i.splice(E,1),E--)}}if(i.length>3){let c=0;for(const d of i)c+=d.getEstimatedModuleSize();o=c/i.length,i.sort((d,f)=>{if(f.getCount()===d.getCount()){const p=Math.abs(f.getEstimatedModuleSize()-o),E=Math.abs(d.getEstimatedModuleSize()-o);return p<E?1:p>E?-1:0}else return f.getCount()-d.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}er.CENTER_QUORUM=2,er.MIN_SKIP=3,er.MAX_MODULES=57;class us{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(te.NEED_RESULT_POINT_CALLBACK);const o=new er(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(o)}processFinderPatternInfo(n){const i=n.getTopLeft(),o=n.getTopRight(),c=n.getBottomLeft(),d=this.calculateModuleSize(i,o,c);if(d<1)throw new Q("No pattern found in proccess finder.");const f=us.computeDimension(i,o,c,d),p=ze.getProvisionalVersionForDimension(f),E=p.getDimensionForVersion()-7;let S=null;if(p.getAlignmentPatternCenters().length>0){const V=o.getX()-i.getX()+c.getX(),G=o.getY()-i.getY()+c.getY(),Y=1-3/E,J=Math.floor(i.getX()+Y*(V-i.getX())),oe=Math.floor(i.getY()+Y*(G-i.getY()));for(let Ee=4;Ee<=16;Ee<<=1)try{S=this.findAlignmentInRegion(d,J,oe,Ee);break}catch(Ce){if(!(Ce instanceof Q))throw Ce}}const I=us.createTransform(i,o,c,S,f),P=us.sampleGrid(this.image,I,f);let B;return S===null?B=[c,i,o]:B=[c,i,o,S],new hr(P,B)}static createTransform(n,i,o,c,d){const f=d-3.5;let p,E,S,I;return c!==null?(p=c.getX(),E=c.getY(),S=f-3,I=S):(p=i.getX()-n.getX()+o.getX(),E=i.getY()-n.getY()+o.getY(),S=f,I=f),Rr.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,S,I,3.5,f,n.getX(),n.getY(),i.getX(),i.getY(),p,E,o.getX(),o.getY())}static sampleGrid(n,i,o){return rn.getInstance().sampleGridWithTransform(n,o,o,i)}static computeDimension(n,i,o,c){const d=tt.round(Pe.distance(n,i)/c),f=tt.round(Pe.distance(n,o)/c);let p=Math.floor((d+f)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new Q("Dimensions could be not found.")}return p}calculateModuleSize(n,i,o){return(this.calculateModuleSizeOneWay(n,i)+this.calculateModuleSizeOneWay(n,o))/2}calculateModuleSizeOneWay(n,i){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(i.getX()),Math.floor(i.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(o)?c/7:isNaN(c)?o/7:(o+c)/14}sizeOfBlackWhiteBlackRunBothWays(n,i,o,c){let d=this.sizeOfBlackWhiteBlackRun(n,i,o,c),f=1,p=n-(o-n);p<0?(f=n/(n-p),p=0):p>=this.image.getWidth()&&(f=(this.image.getWidth()-1-n)/(p-n),p=this.image.getWidth()-1);let E=Math.floor(i-(c-i)*f);return f=1,E<0?(f=i/(i-E),E=0):E>=this.image.getHeight()&&(f=(this.image.getHeight()-1-i)/(E-i),E=this.image.getHeight()-1),p=Math.floor(n+(p-n)*f),d+=this.sizeOfBlackWhiteBlackRun(n,i,p,E),d-1}sizeOfBlackWhiteBlackRun(n,i,o,c){const d=Math.abs(c-i)>Math.abs(o-n);if(d){let V=n;n=i,i=V,V=o,o=c,c=V}const f=Math.abs(o-n),p=Math.abs(c-i);let E=-f/2;const S=n<o?1:-1,I=i<c?1:-1;let P=0;const B=o+S;for(let V=n,G=i;V!==B;V+=S){const Y=d?G:V,J=d?V:G;if(P===1===this.image.get(Y,J)){if(P===2)return tt.distance(V,G,n,i);P++}if(E+=p,E>0){if(G===c)break;G+=I,E-=f}}return P===2?tt.distance(o+S,c,n,i):NaN}findAlignmentInRegion(n,i,o,c){const d=Math.floor(c*n),f=Math.max(0,i-d),p=Math.min(this.image.getWidth()-1,i+d);if(p-f<n*3)throw new Q("Alignment top exceeds estimated module size.");const E=Math.max(0,o-d),S=Math.min(this.image.getHeight()-1,o+d);if(S-E<n*3)throw new Q("Alignment bottom exceeds estimated module size.");return new jn(this.image,f,E,p-f,S-E,n,this.resultPointCallback).find()}}class Yr{constructor(){this.decoder=new Uo}getDecoder(){return this.decoder}decode(n,i){let o,c;if(i!=null&&i.get(te.PURE_BARCODE)!==void 0){const E=Yr.extractPureBits(n.getBlackMatrix());o=this.decoder.decodeBitMatrix(E,i),c=Yr.NO_POINTS}else{const E=new us(n.getBlackMatrix()).detect(i);o=this.decoder.decodeBitMatrix(E.getBits(),i),c=E.getPoints()}o.getOther()instanceof Fo&&o.getOther().applyMirroredCorrection(c);const d=new Me(o.getText(),o.getRawBytes(),void 0,c,pe.QR_CODE,void 0),f=o.getByteSegments();f!==null&&d.putMetadata($e.BYTE_SEGMENTS,f);const p=o.getECLevel();return p!==null&&d.putMetadata($e.ERROR_CORRECTION_LEVEL,p),o.hasStructuredAppend()&&(d.putMetadata($e.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),d.putMetadata($e.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),d}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(i===null||o===null)throw new Q;const c=this.moduleSize(i,n);let d=i[1],f=o[1],p=i[0],E=o[0];if(p>=E||d>=f)throw new Q;if(f-d!==E-p&&(E=p+(f-d),E>=n.getWidth()))throw new Q;const S=Math.round((E-p+1)/c),I=Math.round((f-d+1)/c);if(S<=0||I<=0)throw new Q;if(I!==S)throw new Q;const P=Math.floor(c/2);d+=P,p+=P;const B=p+Math.floor((S-1)*c)-E;if(B>0){if(B>P)throw new Q;p-=B}const V=d+Math.floor((I-1)*c)-f;if(V>0){if(V>P)throw new Q;d-=V}const G=new Ie(S,I);for(let Y=0;Y<I;Y++){const J=d+Math.floor(Y*c);for(let oe=0;oe<S;oe++)n.get(p+Math.floor(oe*c),J)&&G.set(oe,Y)}return G}static moduleSize(n,i){const o=i.getHeight(),c=i.getWidth();let d=n[0],f=n[1],p=!0,E=0;for(;d<c&&f<o;){if(p!==i.get(d,f)){if(++E===5)break;p=!p}d++,f++}if(d===c||f===o)throw new Q;return(d-n[0])/7}}Yr.NO_POINTS=new Array;class Ze{PDF417Common(){}static getBitCountSum(n){return tt.sum(n)}static toIntArray(n){if(n==null||!n.length)return Ze.EMPTY_INT_ARRAY;const i=new Int32Array(n.length);let o=0;for(const c of n)i[o++]=c;return i}static getCodeword(n){const i=W.binarySearch(Ze.SYMBOL_TABLE,n&262143);return i<0?-1:(Ze.CODEWORD_TABLE[i]-1)%Ze.NUMBER_OF_CODEWORDS}}Ze.NUMBER_OF_CODEWORDS=929,Ze.MAX_CODEWORDS_IN_BARCODE=Ze.NUMBER_OF_CODEWORDS-1,Ze.MIN_ROWS_IN_BARCODE=3,Ze.MAX_ROWS_IN_BARCODE=90,Ze.MODULES_IN_CODEWORD=17,Ze.MODULES_IN_STOP_PATTERN=18,Ze.BARS_IN_MODULE=8,Ze.EMPTY_INT_ARRAY=new Int32Array([]),Ze.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ze.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class cc{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class st{static detectMultiple(n,i,o){let c=n.getBlackMatrix(),d=st.detect(o,c);return d.length||(c=c.clone(),c.rotate180(),d=st.detect(o,c)),new cc(c,d)}static detect(n,i){const o=new Array;let c=0,d=0,f=!1;for(;c<i.getHeight();){const p=st.findVertices(i,c,d);if(p[0]==null&&p[3]==null){if(!f)break;f=!1,d=0;for(const E of o)E[1]!=null&&(c=Math.trunc(Math.max(c,E[1].getY()))),E[3]!=null&&(c=Math.max(c,Math.trunc(E[3].getY())));c+=st.ROW_STEP;continue}if(f=!0,o.push(p),!n)break;p[2]!=null?(d=Math.trunc(p[2].getX()),c=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),c=Math.trunc(p[4].getY()))}return o}static findVertices(n,i,o){const c=n.getHeight(),d=n.getWidth(),f=new Array(8);return st.copyToResult(f,st.findRowsWithPattern(n,c,d,i,o,st.START_PATTERN),st.INDEXES_START_PATTERN),f[4]!=null&&(o=Math.trunc(f[4].getX()),i=Math.trunc(f[4].getY())),st.copyToResult(f,st.findRowsWithPattern(n,c,d,i,o,st.STOP_PATTERN),st.INDEXES_STOP_PATTERN),f}static copyToResult(n,i,o){for(let c=0;c<o.length;c++)n[o[c]]=i[c]}static findRowsWithPattern(n,i,o,c,d,f){const p=new Array(4);let E=!1;const S=new Int32Array(f.length);for(;c<i;c+=st.ROW_STEP){let P=st.findGuardPattern(n,d,c,o,!1,f,S);if(P!=null){for(;c>0;){const B=st.findGuardPattern(n,d,--c,o,!1,f,S);if(B!=null)P=B;else{c++;break}}p[0]=new Pe(P[0],c),p[1]=new Pe(P[1],c),E=!0;break}}let I=c+1;if(E){let P=0,B=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;I<i;I++){const V=st.findGuardPattern(n,B[0],I,o,!1,f,S);if(V!=null&&Math.abs(B[0]-V[0])<st.MAX_PATTERN_DRIFT&&Math.abs(B[1]-V[1])<st.MAX_PATTERN_DRIFT)B=V,P=0;else{if(P>st.SKIPPED_ROW_COUNT_MAX)break;P++}}I-=P+1,p[2]=new Pe(B[0],I),p[3]=new Pe(B[1],I)}return I-c<st.BARCODE_MIN_HEIGHT&&W.fill(p,null),p}static findGuardPattern(n,i,o,c,d,f,p){W.fillWithin(p,0,p.length,0);let E=i,S=0;for(;n.get(E,o)&&E>0&&S++<st.MAX_PIXEL_DRIFT;)E--;let I=E,P=0,B=f.length;for(let V=d;I<c;I++)if(n.get(I,o)!==V)p[P]++;else{if(P===B-1){if(st.patternMatchVariance(p,f,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return new Int32Array([E,I]);E+=p[0]+p[1],D.arraycopy(p,2,p,0,P-1),p[P-1]=0,p[P]=0,P--}else P++;p[P]=1,V=!V}return P===B-1&&st.patternMatchVariance(p,f,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE?new Int32Array([E,I-1]):null}static patternMatchVariance(n,i,o){let c=n.length,d=0,f=0;for(let S=0;S<c;S++)d+=n[S],f+=i[S];if(d<f)return 1/0;let p=d/f;o*=p;let E=0;for(let S=0;S<c;S++){let I=n[S],P=i[S]*p,B=I>P?I-P:P-I;if(B>o)return 1/0;E+=B}return E/d}}st.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),st.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),st.MAX_AVG_VARIANCE=.42,st.MAX_INDIVIDUAL_VARIANCE=.8,st.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),st.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),st.MAX_PIXEL_DRIFT=3,st.MAX_PATTERN_DRIFT=5,st.SKIPPED_ROW_COUNT_MAX=25,st.ROW_STEP=5,st.BARCODE_MIN_HEIGHT=10;class Or{constructor(n,i){if(i.length===0)throw new C;this.field=n;let o=i.length;if(o>1&&i[0]===0){let c=1;for(;c<o&&i[c]===0;)c++;c===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-c),D.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let c=0;for(let d of this.coefficients)c=this.field.add(c,d);return c}let i=this.coefficients[0],o=this.coefficients.length;for(let c=1;c<o;c++)i=this.field.add(this.field.multiply(n,i),this.coefficients[c]);return i}add(n){if(!this.field.equals(n.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,o=n.coefficients;if(i.length>o.length){let f=i;i=o,o=f}let c=new Int32Array(o.length),d=o.length-i.length;D.arraycopy(o,0,c,0,d);for(let f=d;f<o.length;f++)c[f]=this.field.add(i[f-d],o[f]);return new Or(this.field,c)}subtract(n){if(!this.field.equals(n.field))throw new C("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Or?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Or(this.field,new Int32Array([0]));let i=this.coefficients,o=i.length,c=n.coefficients,d=c.length,f=new Int32Array(o+d-1);for(let p=0;p<o;p++){let E=i[p];for(let S=0;S<d;S++)f[p+S]=this.field.add(f[p+S],this.field.multiply(E,c[S]))}return new Or(this.field,f)}negative(){let n=this.coefficients.length,i=new Int32Array(n);for(let o=0;o<n;o++)i[o]=this.field.subtract(0,this.coefficients[o]);return new Or(this.field,i)}multiplyScalar(n){if(n===0)return new Or(this.field,new Int32Array([0]));if(n===1)return this;let i=this.coefficients.length,o=new Int32Array(i);for(let c=0;c<i;c++)o[c]=this.field.multiply(this.coefficients[c],n);return new Or(this.field,o)}multiplyByMonomial(n,i){if(n<0)throw new C;if(i===0)return new Or(this.field,new Int32Array([0]));let o=this.coefficients.length,c=new Int32Array(o+n);for(let d=0;d<o;d++)c[d]=this.field.multiply(this.coefficients[d],i);return new Or(this.field,c)}toString(){let n=new Te;for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);o!==0&&(o<0?(n.append(" - "),o=-o):n.length()>0&&n.append(" + "),(i===0||o!==1)&&n.append(o),i!==0&&(i===1?n.append("x"):(n.append("x^"),n.append(i))))}return n.toString()}}class uc{add(n,i){return(n+i)%this.modulus}subtract(n,i){return(this.modulus+n-i)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new C;return this.logTable[n]}inverse(n){if(n===0)throw new _s;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class xi extends uc{constructor(n,i){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let o=1;for(let c=0;c<n;c++)this.expTable[c]=o,o=o*i%n;for(let c=0;c<n-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Or(this,new Int32Array([0])),this.one=new Or(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new C;if(i===0)return this.zero;let o=new Int32Array(n+1);return o[0]=i,new Or(this,o)}}xi.PDF417_GF=new xi(Ze.NUMBER_OF_CODEWORDS,3);class Vo{constructor(){this.field=xi.PDF417_GF}decode(n,i,o){let c=new Or(this.field,n),d=new Int32Array(i),f=!1;for(let G=i;G>0;G--){let Y=c.evaluateAt(this.field.exp(G));d[i-G]=Y,Y!==0&&(f=!0)}if(!f)return 0;let p=this.field.getOne();if(o!=null)for(const G of o){let Y=this.field.exp(n.length-1-G),J=new Or(this.field,new Int32Array([this.field.subtract(0,Y),1]));p=p.multiply(J)}let E=new Or(this.field,d),S=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),E,i),I=S[0],P=S[1],B=this.findErrorLocations(I),V=this.findErrorMagnitudes(P,I,B);for(let G=0;G<B.length;G++){let Y=n.length-1-this.field.log(B[G]);if(Y<0)throw R.getChecksumInstance();n[Y]=this.field.subtract(n[Y],V[G])}return B.length}runEuclideanAlgorithm(n,i,o){if(n.getDegree()<i.getDegree()){let B=n;n=i,i=B}let c=n,d=i,f=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(o/2);){let B=c,V=f;if(c=d,f=p,c.isZero())throw R.getChecksumInstance();d=B;let G=this.field.getZero(),Y=c.getCoefficient(c.getDegree()),J=this.field.inverse(Y);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){let oe=d.getDegree()-c.getDegree(),Ee=this.field.multiply(d.getCoefficient(d.getDegree()),J);G=G.add(this.field.buildMonomial(oe,Ee)),d=d.subtract(c.multiplyByMonomial(oe,Ee))}p=G.multiply(f).subtract(V).negative()}let E=p.getCoefficient(0);if(E===0)throw R.getChecksumInstance();let S=this.field.inverse(E),I=p.multiply(S),P=d.multiply(S);return[I,P]}findErrorLocations(n){let i=n.getDegree(),o=new Int32Array(i),c=0;for(let d=1;d<this.field.getSize()&&c<i;d++)n.evaluateAt(d)===0&&(o[c]=this.field.inverse(d),c++);if(c!==i)throw R.getChecksumInstance();return o}findErrorMagnitudes(n,i,o){let c=i.getDegree(),d=new Int32Array(c);for(let S=1;S<=c;S++)d[c-S]=this.field.multiply(S,i.getCoefficient(S));let f=new Or(this.field,d),p=o.length,E=new Int32Array(p);for(let S=0;S<p;S++){let I=this.field.inverse(o[S]),P=this.field.subtract(0,n.evaluateAt(I)),B=this.field.inverse(f.evaluateAt(I));E[S]=this.field.multiply(P,B)}return E}}class Ws{constructor(n,i,o,c,d){n instanceof Ws?this.constructor_2(n):this.constructor_1(n,i,o,c,d)}constructor_1(n,i,o,c,d){const f=i==null||o==null,p=c==null||d==null;if(f&&p)throw new Q;f?(i=new Pe(0,c.getY()),o=new Pe(0,d.getY())):p&&(c=new Pe(n.getWidth()-1,i.getY()),d=new Pe(n.getWidth()-1,o.getY())),this.image=n,this.topLeft=i,this.bottomLeft=o,this.topRight=c,this.bottomRight=d,this.minX=Math.trunc(Math.min(i.getX(),o.getX())),this.maxX=Math.trunc(Math.max(c.getX(),d.getX())),this.minY=Math.trunc(Math.min(i.getY(),c.getY())),this.maxY=Math.trunc(Math.max(o.getY(),d.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,i){return n==null?i:i==null?n:new Ws(n.image,n.topLeft,n.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(n,i,o){let c=this.topLeft,d=this.bottomLeft,f=this.topRight,p=this.bottomRight;if(n>0){let E=o?this.topLeft:this.topRight,S=Math.trunc(E.getY()-n);S<0&&(S=0);let I=new Pe(E.getX(),S);o?c=I:f=I}if(i>0){let E=o?this.bottomLeft:this.bottomRight,S=Math.trunc(E.getY()+i);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let I=new Pe(E.getX(),S);o?d=I:p=I}return new Ws(this.image,c,d,f,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ki{constructor(n,i,o,c){this.columnCount=n,this.errorCorrectionLevel=c,this.rowCountUpperPart=i,this.rowCountLowerPart=o,this.rowCount=i+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ds{constructor(){this.buffer=""}static form(n,i){let o=-1;function c(f,p,E,S,I,P){if(f==="%%")return"%";if(i[++o]===void 0)return;f=S?parseInt(S.substr(1)):void 0;let B=I?parseInt(I.substr(1)):void 0,V;switch(P){case"s":V=i[o];break;case"c":V=i[o][0];break;case"f":V=parseFloat(i[o]).toFixed(f);break;case"p":V=parseFloat(i[o]).toPrecision(f);break;case"e":V=parseFloat(i[o]).toExponential(f);break;case"x":V=parseInt(i[o]).toString(B||16);break;case"d":V=parseFloat(parseInt(i[o],B||10).toPrecision(f)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(B);let G=parseInt(E),Y=E&&E[0]+""=="0"?"0":" ";for(;V.length<G;)V=p!==void 0?V+Y:Y+V;return V}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(d,c)}format(n,...i){this.buffer+=ds.form(n,i)}toString(){return this.buffer}}class Kn{constructor(n){this.boundingBox=new Ws(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let i=this.getCodeword(n);if(i!=null)return i;for(let o=1;o<Kn.MAX_NEARBY_DISTANCE;o++){let c=this.imageRowToCodewordIndex(n)-o;if(c>=0&&(i=this.codewords[c],i!=null)||(c=this.imageRowToCodewordIndex(n)+o,c<this.codewords.length&&(i=this.codewords[c],i!=null)))return i}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,i){this.codewords[this.imageRowToCodewordIndex(n)]=i}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new ds;let i=0;for(const o of this.codewords){if(o==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}return n.toString()}}Kn.MAX_NEARBY_DISTANCE=5;class Rs{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let i=this.values.get(n);i==null&&(i=0),i++,this.values.set(n,i)}getValue(){let n=-1,i=new Array;for(const[o,c]of this.values.entries()){const d={getKey:()=>o,getValue:()=>c};d.getValue()>n?(n=d.getValue(),i=[],i.push(d.getKey())):d.getValue()===n&&i.push(d.getKey())}return Ze.toIntArray(i)}getConfidence(n){return this.values.get(n)}}class dc extends Kn{constructor(n,i){super(n),this._isLeft=i}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,n);let o=this.getBoundingBox(),c=this._isLeft?o.getTopLeft():o.getTopRight(),d=this._isLeft?o.getBottomLeft():o.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),E=-1,S=1,I=0;for(let P=f;P<p;P++){if(i[P]==null)continue;let B=i[P],V=B.getRowNumber()-E;if(V===0)I++;else if(V===1)S=Math.max(S,I),I=1,E=B.getRowNumber();else if(V<0||B.getRowNumber()>=n.getRowCount()||V>P)i[P]=null;else{let G;S>2?G=(S-2)*V:G=V;let Y=G>=P;for(let J=1;J<=G&&!Y;J++)Y=i[P-J]!=null;Y?i[P]=null:(E=B.getRowNumber(),I=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let i=new Int32Array(n.getRowCount());for(let o of this.getCodewords())if(o!=null){let c=o.getRowNumber();if(c>=i.length)continue;i[c]++}return i}adjustIncompleteIndicatorColumnRowNumbers(n){let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.getCodewords(),E=-1;for(let S=d;S<f;S++){if(p[S]==null)continue;let I=p[S];I.setRowNumberAsRowIndicatorColumn();let P=I.getRowNumber()-E;P===0||(P===1?E=I.getRowNumber():I.getRowNumber()>=n.getRowCount()?p[S]=null:E=I.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),i=new Rs,o=new Rs,c=new Rs,d=new Rs;for(let p of n){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let E=p.getValue()%30,S=p.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:o.setValue(E*3+1);break;case 1:d.setValue(E/3),c.setValue(E%3);break;case 2:i.setValue(E+1);break}}if(i.getValue().length===0||o.getValue().length===0||c.getValue().length===0||d.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+c.getValue()[0]<Ze.MIN_ROWS_IN_BARCODE||o.getValue()[0]+c.getValue()[0]>Ze.MAX_ROWS_IN_BARCODE)return null;let f=new Ki(i.getValue()[0],o.getValue()[0],c.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(n,f),f}removeIncorrectCodewords(n,i){for(let o=0;o<n.length;o++){let c=n[o];if(n[o]==null)continue;let d=c.getValue()%30,f=c.getRowNumber();if(f>i.getRowCount()){n[o]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:d*3+1!==i.getRowCountUpperPart()&&(n[o]=null);break;case 1:(Math.trunc(d/3)!==i.getErrorCorrectionLevel()||d%3!==i.getRowCountLowerPart())&&(n[o]=null);break;case 2:d+1!==i.getColumnCount()&&(n[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Zi{constructor(n,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=Ze.MAX_CODEWORDS_IN_BARCODE,i;do i=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let o=this.detectionResultColumns[i].getCodewords();for(let c=0;c<o.length;c++)o[c]!=null&&(o[c].hasValidRowNumber()||this.adjustRowNumbers(i,c,o))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<n.length;o++)if(n[o]!=null&&i[o]!=null&&n[o].getRowNumber()===i[o].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let d=this.detectionResultColumns[c].getCodewords()[o];d!=null&&(d.setRowNumber(n[o].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let c=i[o].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let p=this.detectionResultColumns[f].getCodewords()[o];p!=null&&(d=Zi.adjustRowNumberIfValid(c,d,p),p.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,i=this.detectionResultColumns[0].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let c=i[o].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let p=this.detectionResultColumns[f].getCodewords()[o];p!=null&&(d=Zi.adjustRowNumberIfValid(c,d,p),p.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,i,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(n)?(o.setRowNumber(n),i=0):++i),i}adjustRowNumbers(n,i,o){if(!this.detectionResultColumns[n-1])return;let c=o[i],d=this.detectionResultColumns[n-1].getCodewords(),f=d;this.detectionResultColumns[n+1]!=null&&(f=this.detectionResultColumns[n+1].getCodewords());let p=new Array(14);p[2]=d[i],p[3]=f[i],i>0&&(p[0]=o[i-1],p[4]=d[i-1],p[5]=f[i-1]),i>1&&(p[8]=o[i-2],p[10]=d[i-2],p[11]=f[i-2]),i<o.length-1&&(p[1]=o[i+1],p[6]=d[i+1],p[7]=f[i+1]),i<o.length-2&&(p[9]=o[i+2],p[12]=d[i+2],p[13]=f[i+2]);for(let E of p)if(Zi.adjustRowNumber(c,E))return}static adjustRowNumber(n,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===n.getBucket()?(n.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,i){this.detectionResultColumns[n]=i}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new ds;for(let o=0;o<n.getCodewords().length;o++){i.format("CW %3d:",o);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){i.format("    |   ");continue}let d=this.detectionResultColumns[c].getCodewords()[o];if(d==null){i.format("    |   ");continue}i.format(" %3d|%3d",d.getRowNumber(),d.getValue())}i.format("%n")}return i.toString()}}class zs{constructor(n,i,o,c){this.rowNumber=zs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(i),this.bucket=Math.trunc(o),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==zs.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}zs.BARCODE_ROW_UNKNOWN=-1;class Pr{static initialize(){for(let n=0;n<Ze.SYMBOL_TABLE.length;n++){let i=Ze.SYMBOL_TABLE[n],o=i&1;for(let c=0;c<Ze.BARS_IN_MODULE;c++){let d=0;for(;(i&1)===o;)d+=1,i>>=1;o=i&1,Pr.RATIOS_TABLE[n]||(Pr.RATIOS_TABLE[n]=new Array(Ze.BARS_IN_MODULE)),Pr.RATIOS_TABLE[n][Ze.BARS_IN_MODULE-c-1]=Math.fround(d/Ze.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let i=Pr.getDecodedCodewordValue(Pr.sampleBitCounts(n));return i!==-1?i:Pr.getClosestDecodedValue(n)}static sampleBitCounts(n){let i=tt.sum(n),o=new Int32Array(Ze.BARS_IN_MODULE),c=0,d=0;for(let f=0;f<Ze.MODULES_IN_CODEWORD;f++){let p=i/(2*Ze.MODULES_IN_CODEWORD)+f*i/Ze.MODULES_IN_CODEWORD;d+n[c]<=p&&(d+=n[c],c++),o[c]++}return o}static getDecodedCodewordValue(n){let i=Pr.getBitValue(n);return Ze.getCodeword(i)===-1?-1:i}static getBitValue(n){let i=0;for(let o=0;o<n.length;o++)for(let c=0;c<n[o];c++)i=i<<1|(o%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(n){let i=tt.sum(n),o=new Array(Ze.BARS_IN_MODULE);if(i>1)for(let f=0;f<o.length;f++)o[f]=Math.fround(n[f]/i);let c=$n.MAX_VALUE,d=-1;this.bSymbolTableReady||Pr.initialize();for(let f=0;f<Pr.RATIOS_TABLE.length;f++){let p=0,E=Pr.RATIOS_TABLE[f];for(let S=0;S<Ze.BARS_IN_MODULE;S++){let I=Math.fround(E[S]-o[S]);if(p+=Math.fround(I*I),p>=c)break}p<c&&(c=p,d=Ze.SYMBOL_TABLE[f])}return d}}Pr.bSymbolTableReady=!1,Pr.RATIOS_TABLE=new Array(Ze.SYMBOL_TABLE.length).map(O=>new Array(Ze.BARS_IN_MODULE));class ja{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class Wo{static parseLong(n,i=void 0){return parseInt(n,i)}}class hs extends w{}hs.kind="NullPointerException";class zo{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,i,o){if(n==null)throw new hs;if(i<0||i>n.length||o<0||i+o>n.length||i+o<0)throw new L;if(o===0)return;for(let c=0;c<o;c++)this.write(n[i+c])}flush(){}close(){}}class Ba extends w{}class hc extends zo{constructor(n=32){if(super(),this.count=0,n<0)throw new C("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let o=this.buf.length<<1;if(o-n<0&&(o=n),o<0){if(n<0)throw new Ba;o=j.MAX_VALUE}this.buf=W.copyOfUint8Array(this.buf,o)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,i,o){if(i<0||i>n.length||o<0||i+o-n.length>0)throw new L;this.ensureCapacity(this.count+o),D.arraycopy(n,i,this.buf,this.count,o),this.count+=o}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return W.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var St;(function(O){O[O.ALPHA=0]="ALPHA",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.PUNCT=3]="PUNCT",O[O.ALPHA_SHIFT=4]="ALPHA_SHIFT",O[O.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(St||(St={}));function Qi(){if(typeof window<"u")return window.BigInt||null;if(typeof cu<"u")return cu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ji;function gr(O){if(typeof Ji>"u"&&(Ji=Qi()),Ji===null)throw new Error("BigInt is not supported!");return Ji(O)}function yi(){let O=[];O[0]=gr(1);let n=gr(900);O[1]=n;for(let i=2;i<16;i++)O[i]=O[i-1]*n;return O}class le{static decode(n,i){let o=new Te(""),c=se.ISO8859_1;o.enableDecoding(c);let d=1,f=n[d++],p=new ja;for(;d<n[0];){switch(f){case le.TEXT_COMPACTION_MODE_LATCH:d=le.textCompaction(n,d,o);break;case le.BYTE_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:d=le.byteCompaction(f,n,c,d,o);break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[d++]);break;case le.NUMERIC_COMPACTION_MODE_LATCH:d=le.numericCompaction(n,d,o);break;case le.ECI_CHARSET:se.getCharacterSetECIByValue(n[d++]);break;case le.ECI_GENERAL_PURPOSE:d+=2;break;case le.ECI_USER_DEFINED:d++;break;case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=le.decodeMacroBlock(n,d,p);break;case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:throw new ee;default:d--,d=le.textCompaction(n,d,o);break}if(d<n.length)f=n[d++];else throw ee.getFormatInstance()}if(o.length()===0)throw ee.getFormatInstance();let E=new wt(null,o.toString(),null,i);return E.setOther(p),E}static decodeMacroBlock(n,i,o){if(i+le.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw ee.getFormatInstance();let c=new Int32Array(le.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<le.NUMBER_OF_SEQUENCE_CODEWORDS;p++,i++)c[p]=n[i];o.setSegmentIndex(j.parseInt(le.decodeBase900toBase10(c,le.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new Te;i=le.textCompaction(n,i,d),o.setFileId(d.toString());let f=-1;for(n[i]===le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=i+1);i<n[0];)switch(n[i]){case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,n[i]){case le.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new Te;i=le.textCompaction(n,i+1,p),o.setFileName(p.toString());break;case le.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let E=new Te;i=le.textCompaction(n,i+1,E),o.setSender(E.toString());break;case le.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new Te;i=le.textCompaction(n,i+1,S),o.setAddressee(S.toString());break;case le.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new Te;i=le.numericCompaction(n,i+1,I),o.setSegmentCount(j.parseInt(I.toString()));break;case le.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new Te;i=le.numericCompaction(n,i+1,P),o.setTimestamp(Wo.parseLong(P.toString()));break;case le.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new Te;i=le.numericCompaction(n,i+1,B),o.setChecksum(j.parseInt(B.toString()));break;case le.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let V=new Te;i=le.numericCompaction(n,i+1,V),o.setFileSize(Wo.parseLong(V.toString()));break;default:throw ee.getFormatInstance()}break;case le.MACRO_PDF417_TERMINATOR:i++,o.setLastSegment(!0);break;default:throw ee.getFormatInstance()}if(f!==-1){let p=i-f;o.isLastSegment()&&p--,o.setOptionalData(W.copyOfRange(n,f,f+p))}return i}static textCompaction(n,i,o){let c=new Int32Array((n[0]-i)*2),d=new Int32Array((n[0]-i)*2),f=0,p=!1;for(;i<n[0]&&!p;){let E=n[i++];if(E<le.TEXT_COMPACTION_MODE_LATCH)c[f]=E/30,c[f+1]=E%30,f+=2;else switch(E){case le.TEXT_COMPACTION_MODE_LATCH:c[f++]=le.TEXT_COMPACTION_MODE_LATCH;break;case le.BYTE_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:case le.NUMERIC_COMPACTION_MODE_LATCH:case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:i--,p=!0;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[f]=le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,E=n[i++],d[f]=E,f++;break}}return le.decodeTextCompaction(c,d,f,o),i}static decodeTextCompaction(n,i,o,c){let d=St.ALPHA,f=St.ALPHA,p=0;for(;p<o;){let E=n[p],S="";switch(d){case St.ALPHA:if(E<26)S=String.fromCharCode(65+E);else switch(E){case 26:S=" ";break;case le.LL:d=St.LOWER;break;case le.ML:d=St.MIXED;break;case le.PS:f=d,d=St.PUNCT_SHIFT;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[p]);break;case le.TEXT_COMPACTION_MODE_LATCH:d=St.ALPHA;break}break;case St.LOWER:if(E<26)S=String.fromCharCode(97+E);else switch(E){case 26:S=" ";break;case le.AS:f=d,d=St.ALPHA_SHIFT;break;case le.ML:d=St.MIXED;break;case le.PS:f=d,d=St.PUNCT_SHIFT;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[p]);break;case le.TEXT_COMPACTION_MODE_LATCH:d=St.ALPHA;break}break;case St.MIXED:if(E<le.PL)S=le.MIXED_CHARS[E];else switch(E){case le.PL:d=St.PUNCT;break;case 26:S=" ";break;case le.LL:d=St.LOWER;break;case le.AL:d=St.ALPHA;break;case le.PS:f=d,d=St.PUNCT_SHIFT;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[p]);break;case le.TEXT_COMPACTION_MODE_LATCH:d=St.ALPHA;break}break;case St.PUNCT:if(E<le.PAL)S=le.PUNCT_CHARS[E];else switch(E){case le.PAL:d=St.ALPHA;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[p]);break;case le.TEXT_COMPACTION_MODE_LATCH:d=St.ALPHA;break}break;case St.ALPHA_SHIFT:if(d=f,E<26)S=String.fromCharCode(65+E);else switch(E){case 26:S=" ";break;case le.TEXT_COMPACTION_MODE_LATCH:d=St.ALPHA;break}break;case St.PUNCT_SHIFT:if(d=f,E<le.PAL)S=le.PUNCT_CHARS[E];else switch(E){case le.PAL:d=St.ALPHA;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[p]);break;case le.TEXT_COMPACTION_MODE_LATCH:d=St.ALPHA;break}break}S!==""&&c.append(S),p++}}static byteCompaction(n,i,o,c,d){let f=new hc,p=0,E=0,S=!1;switch(n){case le.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),P=i[c++];for(;c<i[0]&&!S;)switch(I[p++]=P,E=900*E+P,P=i[c++],P){case le.TEXT_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH:case le.NUMERIC_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:c--,S=!0;break;default:if(p%5===0&&p>0){for(let B=0;B<6;++B)f.write(Number(gr(E)>>gr(8*(5-B))));E=0,p=0}break}c===i[0]&&P<le.TEXT_COMPACTION_MODE_LATCH&&(I[p++]=P);for(let B=0;B<p;B++)f.write(I[B]);break;case le.BYTE_COMPACTION_MODE_LATCH_6:for(;c<i[0]&&!S;){let B=i[c++];if(B<le.TEXT_COMPACTION_MODE_LATCH)p++,E=900*E+B;else switch(B){case le.TEXT_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH:case le.NUMERIC_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:c--,S=!0;break}if(p%5===0&&p>0){for(let V=0;V<6;++V)f.write(Number(gr(E)>>gr(8*(5-V))));E=0,p=0}}break}return d.append(ge.decode(f.toByteArray(),o)),c}static numericCompaction(n,i,o){let c=0,d=!1,f=new Int32Array(le.MAX_NUMERIC_CODEWORDS);for(;i<n[0]&&!d;){let p=n[i++];if(i===n[0]&&(d=!0),p<le.TEXT_COMPACTION_MODE_LATCH)f[c]=p,c++;else switch(p){case le.TEXT_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:i--,d=!0;break}(c%le.MAX_NUMERIC_CODEWORDS===0||p===le.NUMERIC_COMPACTION_MODE_LATCH||d)&&c>0&&(o.append(le.decodeBase900toBase10(f,c)),c=0)}return i}static decodeBase900toBase10(n,i){let o=gr(0);for(let d=0;d<i;d++)o+=le.EXP900[i-d-1]*gr(n[d]);let c=o.toString();if(c.charAt(0)!=="1")throw new ee;return c.substring(1)}}le.TEXT_COMPACTION_MODE_LATCH=900,le.BYTE_COMPACTION_MODE_LATCH=901,le.NUMERIC_COMPACTION_MODE_LATCH=902,le.BYTE_COMPACTION_MODE_LATCH_6=924,le.ECI_USER_DEFINED=925,le.ECI_GENERAL_PURPOSE=926,le.ECI_CHARSET=927,le.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,le.MACRO_PDF417_TERMINATOR=922,le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,le.MAX_NUMERIC_CODEWORDS=15,le.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,le.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,le.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,le.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,le.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,le.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,le.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,le.PL=25,le.LL=27,le.AS=27,le.ML=28,le.AL=28,le.PS=29,le.PAL=29,le.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,le.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",le.EXP900=Qi()?yi():[],le.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ot{constructor(){}static decode(n,i,o,c,d,f,p){let E=new Ws(n,i,o,c,d),S=null,I=null,P;for(let G=!0;;G=!1){if(i!=null&&(S=ot.getRowIndicatorColumn(n,E,i,!0,f,p)),c!=null&&(I=ot.getRowIndicatorColumn(n,E,c,!1,f,p)),P=ot.merge(S,I),P==null)throw Q.getNotFoundInstance();let Y=P.getBoundingBox();if(G&&Y!=null&&(Y.getMinY()<E.getMinY()||Y.getMaxY()>E.getMaxY()))E=Y;else break}P.setBoundingBox(E);let B=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,S),P.setDetectionResultColumn(B,I);let V=S!=null;for(let G=1;G<=B;G++){let Y=V?G:B-G;if(P.getDetectionResultColumn(Y)!==void 0)continue;let J;Y===0||Y===B?J=new dc(E,Y===0):J=new Kn(E),P.setDetectionResultColumn(Y,J);let oe=-1,Ee=oe;for(let Ce=E.getMinY();Ce<=E.getMaxY();Ce++){if(oe=ot.getStartColumn(P,Y,Ce,V),oe<0||oe>E.getMaxX()){if(Ee===-1)continue;oe=Ee}let ye=ot.detectCodeword(n,E.getMinX(),E.getMaxX(),V,oe,Ce,f,p);ye!=null&&(J.setCodeword(Ce,ye),Ee=oe,f=Math.min(f,ye.getWidth()),p=Math.max(p,ye.getWidth()))}}return ot.createDecoderResult(P)}static merge(n,i){if(n==null&&i==null)return null;let o=ot.getBarcodeMetadata(n,i);if(o==null)return null;let c=Ws.merge(ot.adjustBoundingBox(n),ot.adjustBoundingBox(i));return new Zi(o,c)}static adjustBoundingBox(n){if(n==null)return null;let i=n.getRowHeights();if(i==null)return null;let o=ot.getMax(i),c=0;for(let p of i)if(c+=o-p,p>0)break;let d=n.getCodewords();for(let p=0;c>0&&d[p]==null;p++)c--;let f=0;for(let p=i.length-1;p>=0&&(f+=o-i[p],!(i[p]>0));p--);for(let p=d.length-1;f>0&&d[p]==null;p--)f--;return n.getBoundingBox().addMissingRows(c,f,n.isLeft())}static getMax(n){let i=-1;for(let o of n)i=Math.max(i,o);return i}static getBarcodeMetadata(n,i){let o;if(n==null||(o=n.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let c;return i==null||(c=i.getBarcodeMetadata())==null?o:o.getColumnCount()!==c.getColumnCount()&&o.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&o.getRowCount()!==c.getRowCount()?null:o}static getRowIndicatorColumn(n,i,o,c,d,f){let p=new dc(i,c);for(let E=0;E<2;E++){let S=E===0?1:-1,I=Math.trunc(Math.trunc(o.getX()));for(let P=Math.trunc(Math.trunc(o.getY()));P<=i.getMaxY()&&P>=i.getMinY();P+=S){let B=ot.detectCodeword(n,0,n.getWidth(),c,I,P,d,f);B!=null&&(p.setCodeword(P,B),c?I=B.getStartX():I=B.getEndX())}}return p}static adjustCodewordCount(n,i){let o=i[0][1],c=o.getValue(),d=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-ot.getNumberOfECCodeWords(n.getBarcodeECLevel());if(c.length===0){if(d<1||d>Ze.MAX_CODEWORDS_IN_BARCODE)throw Q.getNotFoundInstance();o.setValue(d)}else c[0]!==d&&o.setValue(d)}static createDecoderResult(n){let i=ot.createBarcodeMatrix(n);ot.adjustCodewordCount(n,i);let o=new Array,c=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),d=[],f=new Array;for(let E=0;E<n.getBarcodeRowCount();E++)for(let S=0;S<n.getBarcodeColumnCount();S++){let I=i[E][S+1].getValue(),P=E*n.getBarcodeColumnCount()+S;I.length===0?o.push(P):I.length===1?c[P]=I[0]:(f.push(P),d.push(I))}let p=new Array(d.length);for(let E=0;E<p.length;E++)p[E]=d[E];return ot.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),c,Ze.toIntArray(o),Ze.toIntArray(f),p)}static createDecoderResultFromAmbiguousValues(n,i,o,c,d){let f=new Int32Array(c.length),p=100;for(;p-- >0;){for(let E=0;E<f.length;E++)i[c[E]]=d[E][f[E]];try{return ot.decodeCodewords(i,n,o)}catch(E){if(!(E instanceof R))throw E}if(f.length===0)throw R.getChecksumInstance();for(let E=0;E<f.length;E++)if(f[E]<d[E].length-1){f[E]++;break}else if(f[E]=0,E===f.length-1)throw R.getChecksumInstance()}throw R.getChecksumInstance()}static createBarcodeMatrix(n){let i=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let c=0;c<i.length;c++)for(let d=0;d<i[c].length;d++)i[c][d]=new Rs;let o=0;for(let c of n.getDetectionResultColumns()){if(c!=null){for(let d of c.getCodewords())if(d!=null){let f=d.getRowNumber();if(f>=0){if(f>=i.length)continue;i[f][o].setValue(d.getValue())}}}o++}return i}static isValidBarcodeColumn(n,i){return i>=0&&i<=n.getBarcodeColumnCount()+1}static getStartColumn(n,i,o,c){let d=c?1:-1,f=null;if(ot.isValidBarcodeColumn(n,i-d)&&(f=n.getDetectionResultColumn(i-d).getCodeword(o)),f!=null)return c?f.getEndX():f.getStartX();if(f=n.getDetectionResultColumn(i).getCodewordNearby(o),f!=null)return c?f.getStartX():f.getEndX();if(ot.isValidBarcodeColumn(n,i-d)&&(f=n.getDetectionResultColumn(i-d).getCodewordNearby(o)),f!=null)return c?f.getEndX():f.getStartX();let p=0;for(;ot.isValidBarcodeColumn(n,i-d);){i-=d;for(let E of n.getDetectionResultColumn(i).getCodewords())if(E!=null)return(c?E.getEndX():E.getStartX())+d*p*(E.getEndX()-E.getStartX());p++}return c?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,i,o,c,d,f,p,E){d=ot.adjustCodewordStartColumn(n,i,o,c,d,f);let S=ot.getModuleBitCount(n,i,o,c,d,f);if(S==null)return null;let I,P=tt.sum(S);if(c)I=d+P;else{for(let G=0;G<S.length/2;G++){let Y=S[G];S[G]=S[S.length-1-G],S[S.length-1-G]=Y}I=d,d=I-P}if(!ot.checkCodewordSkew(P,p,E))return null;let B=Pr.getDecodedValue(S),V=Ze.getCodeword(B);return V===-1?null:new zs(d,I,ot.getCodewordBucketNumber(B),V)}static getModuleBitCount(n,i,o,c,d,f){let p=d,E=new Int32Array(8),S=0,I=c?1:-1,P=c;for(;(c?p<o:p>=i)&&S<E.length;)n.get(p,f)===P?(E[S]++,p+=I):(S++,P=!P);return S===E.length||p===(c?o:i)&&S===E.length-1?E:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,i,o,c,d,f){let p=d,E=c?-1:1;for(let S=0;S<2;S++){for(;(c?p>=i:p<o)&&c===n.get(p,f);){if(Math.abs(d-p)>ot.CODEWORD_SKEW_SIZE)return d;p+=E}E=-E,c=!c}return p}static checkCodewordSkew(n,i,o){return i-ot.CODEWORD_SKEW_SIZE<=n&&n<=o+ot.CODEWORD_SKEW_SIZE}static decodeCodewords(n,i,o){if(n.length===0)throw ee.getFormatInstance();let c=1<<i+1,d=ot.correctErrors(n,o,c);ot.verifyCodewordCount(n,c);let f=le.decode(n,""+i);return f.setErrorsCorrected(d),f.setErasures(o.length),f}static correctErrors(n,i,o){if(i!=null&&i.length>o/2+ot.MAX_ERRORS||o<0||o>ot.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return ot.errorCorrection.decode(n,o,i)}static verifyCodewordCount(n,i){if(n.length<4)throw ee.getFormatInstance();let o=n[0];if(o>n.length)throw ee.getFormatInstance();if(o===0)if(i<n.length)n[0]=n.length-i;else throw ee.getFormatInstance()}static getBitCountForCodeword(n){let i=new Int32Array(8),o=0,c=i.length-1;for(;!((n&1)!==o&&(o=n&1,c--,c<0));)i[c]++,n>>=1;return i}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return ot.getCodewordBucketNumber(ot.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let i=new ds;for(let o=0;o<n.length;o++){i.format("Row %2d: ",o);for(let c=0;c<n[o].length;c++){let d=n[o][c];d.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}i.format("%n")}return i.toString()}}ot.CODEWORD_SKEW_SIZE=2,ot.MAX_ERRORS=3,ot.MAX_EC_CODEWORDS=512,ot.errorCorrection=new Vo;class Dr{decode(n,i=null){let o=Dr.decode(n,i,!1);if(o==null||o.length===0||o[0]==null)throw Q.getNotFoundInstance();return o[0]}decodeMultiple(n,i=null){try{return Dr.decode(n,i,!0)}catch(o){throw o instanceof ee||o instanceof R?Q.getNotFoundInstance():o}}static decode(n,i,o){const c=new Array,d=st.detectMultiple(n,i,o);for(const f of d.getPoints()){const p=ot.decode(d.getBits(),f[4],f[5],f[6],f[7],Dr.getMinCodewordWidth(f),Dr.getMaxCodewordWidth(f)),E=new Me(p.getText(),p.getRawBytes(),void 0,f,pe.PDF_417);E.putMetadata($e.ERROR_CORRECTION_LEVEL,p.getECLevel());const S=p.getOther();S!=null&&E.putMetadata($e.PDF417_EXTRA_METADATA,S),c.push(E)}return c.map(f=>f)}static getMaxWidth(n,i){return n==null||i==null?0:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMinWidth(n,i){return n==null||i==null?j.MAX_VALUE:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Dr.getMaxWidth(n[0],n[4]),Dr.getMaxWidth(n[6],n[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.max(Dr.getMaxWidth(n[1],n[5]),Dr.getMaxWidth(n[7],n[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Dr.getMinWidth(n[0],n[4]),Dr.getMinWidth(n[6],n[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.min(Dr.getMinWidth(n[1],n[5]),Dr.getMinWidth(n[7],n[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}reset(){}}class wi extends w{}wi.kind="ReaderException";class La{constructor(n,i){this.verbose=n===!0,i&&this.setHints(i)}decode(n,i){return i&&this.setHints(i),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const i=!a(n)&&n.get(te.TRY_HARDER)===!0,o=a(n)?null:n.get(te.POSSIBLE_FORMATS),c=new Array;if(!a(o)){const d=o.some(f=>f===pe.UPC_A||f===pe.UPC_E||f===pe.EAN_13||f===pe.EAN_8||f===pe.CODABAR||f===pe.CODE_39||f===pe.CODE_93||f===pe.CODE_128||f===pe.ITF||f===pe.RSS_14||f===pe.RSS_EXPANDED);d&&!i&&c.push(new mi(n,this.verbose)),o.includes(pe.QR_CODE)&&c.push(new Yr),o.includes(pe.DATA_MATRIX)&&c.push(new Mn),o.includes(pe.AZTEC)&&c.push(new kn),o.includes(pe.PDF_417)&&c.push(new Dr),d&&i&&c.push(new mi(n,this.verbose))}c.length===0&&(i||c.push(new mi(n,this.verbose)),c.push(new Yr),c.push(new Mn),c.push(new kn),c.push(new Dr),i&&c.push(new mi(n,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new wi("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(n,this.hints)}catch(o){if(o instanceof wi)continue}throw new Q("No MultiFormat Readers were able to detect the code.")}}class ea extends ke{constructor(n=null,i=500){const o=new La;o.setHints(n),super(o,i)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class Fa extends ke{constructor(n=500){super(new Dr,n)}}class fc extends ke{constructor(n=500){super(new Yr,n)}}var Ho;(function(O){O[O.ERROR_CORRECTION=0]="ERROR_CORRECTION",O[O.CHARACTER_SET=1]="CHARACTER_SET",O[O.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",O[O.MIN_SIZE=3]="MIN_SIZE",O[O.MAX_SIZE=4]="MAX_SIZE",O[O.MARGIN=5]="MARGIN",O[O.PDF417_COMPACT=6]="PDF417_COMPACT",O[O.PDF417_COMPACTION=7]="PDF417_COMPACTION",O[O.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",O[O.AZTEC_LAYERS=9]="AZTEC_LAYERS",O[O.QR_VERSION=10]="QR_VERSION"})(Ho||(Ho={}));var Cr=Ho;class Go{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new br(n,Int32Array.from([1])))}buildGenerator(n){const i=this.cachedGenerators;if(n>=i.length){let o=i[i.length-1];const c=this.field;for(let d=i.length;d<=n;d++){const f=o.multiply(new br(c,Int32Array.from([1,c.exp(d-1+c.getGeneratorBase())])));i.push(f),o=f}}return i[n]}encode(n,i){if(i===0)throw new C("No error correction bytes");const o=n.length-i;if(o<=0)throw new C("No data bytes provided");const c=this.buildGenerator(i),d=new Int32Array(o);D.arraycopy(n,0,d,0,o);let f=new br(this.field,d);f=f.multiplyByMonomial(i,1);const E=f.divide(c)[1].getCoefficients(),S=i-E.length;for(let I=0;I<S;I++)n[o+I]=0;D.arraycopy(E,0,n,o+S,E.length)}}class Wt{constructor(){}static applyMaskPenaltyRule1(n){return Wt.applyMaskPenaltyRule1Internal(n,!0)+Wt.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let i=0;const o=n.getArray(),c=n.getWidth(),d=n.getHeight();for(let f=0;f<d-1;f++){const p=o[f];for(let E=0;E<c-1;E++){const S=p[E];S===p[E+1]&&S===o[f+1][E]&&S===o[f+1][E+1]&&i++}}return Wt.N2*i}static applyMaskPenaltyRule3(n){let i=0;const o=n.getArray(),c=n.getWidth(),d=n.getHeight();for(let f=0;f<d;f++)for(let p=0;p<c;p++){const E=o[f];p+6<c&&E[p]===1&&E[p+1]===0&&E[p+2]===1&&E[p+3]===1&&E[p+4]===1&&E[p+5]===0&&E[p+6]===1&&(Wt.isWhiteHorizontal(E,p-4,p)||Wt.isWhiteHorizontal(E,p+7,p+11))&&i++,f+6<d&&o[f][p]===1&&o[f+1][p]===0&&o[f+2][p]===1&&o[f+3][p]===1&&o[f+4][p]===1&&o[f+5][p]===0&&o[f+6][p]===1&&(Wt.isWhiteVertical(o,p,f-4,f)||Wt.isWhiteVertical(o,p,f+7,f+11))&&i++}return i*Wt.N3}static isWhiteHorizontal(n,i,o){i=Math.max(i,0),o=Math.min(o,n.length);for(let c=i;c<o;c++)if(n[c]===1)return!1;return!0}static isWhiteVertical(n,i,o,c){o=Math.max(o,0),c=Math.min(c,n.length);for(let d=o;d<c;d++)if(n[d][i]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let i=0;const o=n.getArray(),c=n.getWidth(),d=n.getHeight();for(let E=0;E<d;E++){const S=o[E];for(let I=0;I<c;I++)S[I]===1&&i++}const f=n.getHeight()*n.getWidth();return Math.floor(Math.abs(i*2-f)*10/f)*Wt.N4}static getDataMaskBit(n,i,o){let c,d;switch(n){case 0:c=o+i&1;break;case 1:c=o&1;break;case 2:c=i%3;break;case 3:c=(o+i)%3;break;case 4:c=Math.floor(o/2)+Math.floor(i/3)&1;break;case 5:d=o*i,c=(d&1)+d%3;break;case 6:d=o*i,c=(d&1)+d%3&1;break;case 7:d=o*i,c=d%3+(o+i&1)&1;break;default:throw new C("Invalid mask pattern: "+n)}return c===0}static applyMaskPenaltyRule1Internal(n,i){let o=0;const c=i?n.getHeight():n.getWidth(),d=i?n.getWidth():n.getHeight(),f=n.getArray();for(let p=0;p<c;p++){let E=0,S=-1;for(let I=0;I<d;I++){const P=i?f[p][I]:f[I][p];P===S?E++:(E>=5&&(o+=Wt.N1+(E-5)),E=1,S=P)}E>=5&&(o+=Wt.N1+(E-5))}return o}}Wt.N1=3,Wt.N2=3,Wt.N3=40,Wt.N4=10;class Ua{constructor(n,i){this.width=n,this.height=i;const o=new Array(i);for(let c=0;c!==i;c++)o[c]=new Uint8Array(n);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(n,i){return this.bytes[i][n]}getArray(){return this.bytes}setNumber(n,i,o){this.bytes[i][n]=o}setBoolean(n,i,o){this.bytes[i][n]=o?1:0}clear(n){for(const i of this.bytes)W.fill(i,n)}equals(n){if(!(n instanceof Ua))return!1;const i=n;if(this.width!==i.width||this.height!==i.height)return!1;for(let o=0,c=this.height;o<c;++o){const d=this.bytes[o],f=i.bytes[o];for(let p=0,E=this.width;p<E;++p)if(d[p]!==f[p])return!1}return!0}toString(){const n=new Te;for(let i=0,o=this.height;i<o;++i){const c=this.bytes[i];for(let d=0,f=this.width;d<f;++d)switch(c[d]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class Hs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new Te;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<Hs.NUM_MASK_PATTERNS}}Hs.NUM_MASK_PATTERNS=8;class Pt extends w{}Pt.kind="WriterException";class Ye{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,i,o,c,d){Ye.clearMatrix(d),Ye.embedBasicPatterns(o,d),Ye.embedTypeInfo(i,c,d),Ye.maybeEmbedVersionInfo(o,d),Ye.embedDataBits(n,c,d)}static embedBasicPatterns(n,i){Ye.embedPositionDetectionPatternsAndSeparators(i),Ye.embedDarkDotAtLeftBottomCorner(i),Ye.maybeEmbedPositionAdjustmentPatterns(n,i),Ye.embedTimingPatterns(i)}static embedTypeInfo(n,i,o){const c=new q;Ye.makeTypeInfoBits(n,i,c);for(let d=0,f=c.getSize();d<f;++d){const p=c.get(c.getSize()-1-d),E=Ye.TYPE_INFO_COORDINATES[d],S=E[0],I=E[1];if(o.setBoolean(S,I,p),d<8){const P=o.getWidth()-d-1;o.setBoolean(P,8,p)}else{const B=o.getHeight()-7+(d-8);o.setBoolean(8,B,p)}}}static maybeEmbedVersionInfo(n,i){if(n.getVersionNumber()<7)return;const o=new q;Ye.makeVersionInfoBits(n,o);let c=17;for(let d=0;d<6;++d)for(let f=0;f<3;++f){const p=o.get(c);c--,i.setBoolean(d,i.getHeight()-11+f,p),i.setBoolean(i.getHeight()-11+f,d,p)}}static embedDataBits(n,i,o){let c=0,d=-1,f=o.getWidth()-1,p=o.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);p>=0&&p<o.getHeight();){for(let E=0;E<2;++E){const S=f-E;if(!Ye.isEmpty(o.get(S,p)))continue;let I;c<n.getSize()?(I=n.get(c),++c):I=!1,i!==255&&Wt.getDataMaskBit(i,S,p)&&(I=!I),o.setBoolean(S,p,I)}p+=d}d=-d,p+=d,f-=2}if(c!==n.getSize())throw new Pt("Not all bits consumed: "+c+"/"+n.getSize())}static findMSBSet(n){return 32-j.numberOfLeadingZeros(n)}static calculateBCHCode(n,i){if(i===0)throw new C("0 polynomial");const o=Ye.findMSBSet(i);for(n<<=o-1;Ye.findMSBSet(n)>=o;)n^=i<<Ye.findMSBSet(n)-o;return n}static makeTypeInfoBits(n,i,o){if(!Hs.isValidMaskPattern(i))throw new Pt("Invalid mask pattern");const c=n.getBits()<<3|i;o.appendBits(c,5);const d=Ye.calculateBCHCode(c,Ye.TYPE_INFO_POLY);o.appendBits(d,10);const f=new q;if(f.appendBits(Ye.TYPE_INFO_MASK_PATTERN,15),o.xor(f),o.getSize()!==15)throw new Pt("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(n,i){i.appendBits(n.getVersionNumber(),6);const o=Ye.calculateBCHCode(n.getVersionNumber(),Ye.VERSION_INFO_POLY);if(i.appendBits(o,12),i.getSize()!==18)throw new Pt("should not happen but we got: "+i.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let i=8;i<n.getWidth()-8;++i){const o=(i+1)%2;Ye.isEmpty(n.get(i,6))&&n.setNumber(i,6,o),Ye.isEmpty(n.get(6,i))&&n.setNumber(6,i,o)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new Pt;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,i,o){for(let c=0;c<8;++c){if(!Ye.isEmpty(o.get(n+c,i)))throw new Pt;o.setNumber(n+c,i,0)}}static embedVerticalSeparationPattern(n,i,o){for(let c=0;c<7;++c){if(!Ye.isEmpty(o.get(n,i+c)))throw new Pt;o.setNumber(n,i+c,0)}}static embedPositionAdjustmentPattern(n,i,o){for(let c=0;c<5;++c){const d=Ye.POSITION_ADJUSTMENT_PATTERN[c];for(let f=0;f<5;++f)o.setNumber(n+f,i+c,d[f])}}static embedPositionDetectionPattern(n,i,o){for(let c=0;c<7;++c){const d=Ye.POSITION_DETECTION_PATTERN[c];for(let f=0;f<7;++f)o.setNumber(n+f,i+c,d[f])}}static embedPositionDetectionPatternsAndSeparators(n){const i=Ye.POSITION_DETECTION_PATTERN[0].length;Ye.embedPositionDetectionPattern(0,0,n),Ye.embedPositionDetectionPattern(n.getWidth()-i,0,n),Ye.embedPositionDetectionPattern(0,n.getWidth()-i,n);const o=8;Ye.embedHorizontalSeparationPattern(0,o-1,n),Ye.embedHorizontalSeparationPattern(n.getWidth()-o,o-1,n),Ye.embedHorizontalSeparationPattern(0,n.getWidth()-o,n);const c=7;Ye.embedVerticalSeparationPattern(c,0,n),Ye.embedVerticalSeparationPattern(n.getHeight()-c-1,0,n),Ye.embedVerticalSeparationPattern(c,n.getHeight()-c,n)}static maybeEmbedPositionAdjustmentPatterns(n,i){if(n.getVersionNumber()<2)return;const o=n.getVersionNumber()-1,c=Ye.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let d=0,f=c.length;d!==f;d++){const p=c[d];if(p>=0)for(let E=0;E!==f;E++){const S=c[E];S>=0&&Ye.isEmpty(i.get(S,p))&&Ye.embedPositionAdjustmentPattern(S-2,p-2,i)}}}}Ye.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ye.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ye.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ye.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ye.VERSION_INFO_POLY=7973,Ye.TYPE_INFO_POLY=1335,Ye.TYPE_INFO_MASK_PATTERN=21522;class ed{constructor(n,i){this.dataBytes=n,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class jt{constructor(){}static calculateMaskPenalty(n){return Wt.applyMaskPenaltyRule1(n)+Wt.applyMaskPenaltyRule2(n)+Wt.applyMaskPenaltyRule3(n)+Wt.applyMaskPenaltyRule4(n)}static encode(n,i,o=null){let c=jt.DEFAULT_BYTE_MODE_ENCODING;const d=o!==null&&o.get(Cr.CHARACTER_SET)!==void 0;d&&(c=o.get(Cr.CHARACTER_SET).toString());const f=this.chooseMode(n,c),p=new q;if(f===Ge.BYTE&&(d||jt.DEFAULT_BYTE_MODE_ENCODING!==c)){const Ce=se.getCharacterSetECIByName(c);Ce!==void 0&&this.appendECI(Ce,p)}this.appendModeInfo(f,p);const E=new q;this.appendBytes(n,f,E,c);let S;if(o!==null&&o.get(Cr.QR_VERSION)!==void 0){const Ce=Number.parseInt(o.get(Cr.QR_VERSION).toString(),10);S=ze.getVersionForNumber(Ce);const ye=this.calculateBitsNeeded(f,p,E,S);if(!this.willFit(ye,S,i))throw new Pt("Data too big for requested version")}else S=this.recommendVersion(i,f,p,E);const I=new q;I.appendBitArray(p);const P=f===Ge.BYTE?E.getSizeInBytes():n.length;this.appendLengthInfo(P,S,f,I),I.appendBitArray(E);const B=S.getECBlocksForLevel(i),V=S.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(V,I);const G=this.interleaveWithECBytes(I,S.getTotalCodewords(),V,B.getNumBlocks()),Y=new Hs;Y.setECLevel(i),Y.setMode(f),Y.setVersion(S);const J=S.getDimensionForVersion(),oe=new Ua(J,J),Ee=this.chooseMaskPattern(G,i,S,oe);return Y.setMaskPattern(Ee),Ye.buildMatrix(G,i,S,Ee,oe),Y.setMatrix(oe),Y}static recommendVersion(n,i,o,c){const d=this.calculateBitsNeeded(i,o,c,ze.getVersionForNumber(1)),f=this.chooseVersion(d,n),p=this.calculateBitsNeeded(i,o,c,f);return this.chooseVersion(p,n)}static calculateBitsNeeded(n,i,o,c){return i.getSize()+n.getCharacterCountBits(c)+o.getSize()}static getAlphanumericCode(n){return n<jt.ALPHANUMERIC_TABLE.length?jt.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,i=null){if(se.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(n))return Ge.KANJI;let o=!1,c=!1;for(let d=0,f=n.length;d<f;++d){const p=n.charAt(d);if(jt.isDigit(p))o=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)c=!0;else return Ge.BYTE}return c?Ge.ALPHANUMERIC:o?Ge.NUMERIC:Ge.BYTE}static isOnlyDoubleByteKanji(n){let i;try{i=ge.encode(n,se.SJIS)}catch{return!1}const o=i.length;if(o%2!==0)return!1;for(let c=0;c<o;c+=2){const d=i[c]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(n,i,o,c){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let p=0;p<Hs.NUM_MASK_PATTERNS;p++){Ye.buildMatrix(n,i,o,p,c);let E=this.calculateMaskPenalty(c);E<d&&(d=E,f=p)}return f}static chooseVersion(n,i){for(let o=1;o<=40;o++){const c=ze.getVersionForNumber(o);if(jt.willFit(n,c,i))return c}throw new Pt("Data too big")}static willFit(n,i,o){const c=i.getTotalCodewords(),f=i.getECBlocksForLevel(o).getTotalECCodewords(),p=c-f,E=(n+7)/8;return p>=E}static terminateBits(n,i){const o=n*8;if(i.getSize()>o)throw new Pt("data bits cannot fit in the QR Code"+i.getSize()+" > "+o);for(let f=0;f<4&&i.getSize()<o;++f)i.appendBit(!1);const c=i.getSize()&7;if(c>0)for(let f=c;f<8;f++)i.appendBit(!1);const d=n-i.getSizeInBytes();for(let f=0;f<d;++f)i.appendBits((f&1)===0?236:17,8);if(i.getSize()!==o)throw new Pt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,i,o,c,d,f){if(c>=o)throw new Pt("Block ID too large");const p=n%o,E=o-p,S=Math.floor(n/o),I=S+1,P=Math.floor(i/o),B=P+1,V=S-P,G=I-B;if(V!==G)throw new Pt("EC bytes mismatch");if(o!==E+p)throw new Pt("RS blocks mismatch");if(n!==(P+V)*E+(B+G)*p)throw new Pt("Total bytes mismatch");c<E?(d[0]=P,f[0]=V):(d[0]=B,f[0]=G)}static interleaveWithECBytes(n,i,o,c){if(n.getSizeInBytes()!==o)throw new Pt("Number of bits and data bytes does not match");let d=0,f=0,p=0;const E=new Array;for(let I=0;I<c;++I){const P=new Int32Array(1),B=new Int32Array(1);jt.getNumDataBytesAndNumECBytesForBlockID(i,o,c,I,P,B);const V=P[0],G=new Uint8Array(V);n.toBytes(8*d,G,0,V);const Y=jt.generateECBytes(G,B[0]);E.push(new ed(G,Y)),f=Math.max(f,V),p=Math.max(p,Y.length),d+=P[0]}if(o!==d)throw new Pt("Data bytes does not match offset");const S=new q;for(let I=0;I<f;++I)for(const P of E){const B=P.getDataBytes();I<B.length&&S.appendBits(B[I],8)}for(let I=0;I<p;++I)for(const P of E){const B=P.getErrorCorrectionBytes();I<B.length&&S.appendBits(B[I],8)}if(i!==S.getSizeInBytes())throw new Pt("Interleaving error: "+i+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(n,i){const o=n.length,c=new Int32Array(o+i);for(let f=0;f<o;f++)c[f]=n[f]&255;new Go(mt.QR_CODE_FIELD_256).encode(c,i);const d=new Uint8Array(i);for(let f=0;f<i;f++)d[f]=c[o+f];return d}static appendModeInfo(n,i){i.appendBits(n.getBits(),4)}static appendLengthInfo(n,i,o,c){const d=o.getCharacterCountBits(i);if(n>=1<<d)throw new Pt(n+" is bigger than "+((1<<d)-1));c.appendBits(n,d)}static appendBytes(n,i,o,c){switch(i){case Ge.NUMERIC:jt.appendNumericBytes(n,o);break;case Ge.ALPHANUMERIC:jt.appendAlphanumericBytes(n,o);break;case Ge.BYTE:jt.append8BitBytes(n,o,c);break;case Ge.KANJI:jt.appendKanjiBytes(n,o);break;default:throw new Pt("Invalid mode: "+i)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const i=jt.getDigit(n);return i>=0&&i<=9}static appendNumericBytes(n,i){const o=n.length;let c=0;for(;c<o;){const d=jt.getDigit(n.charAt(c));if(c+2<o){const f=jt.getDigit(n.charAt(c+1)),p=jt.getDigit(n.charAt(c+2));i.appendBits(d*100+f*10+p,10),c+=3}else if(c+1<o){const f=jt.getDigit(n.charAt(c+1));i.appendBits(d*10+f,7),c+=2}else i.appendBits(d,4),c++}}static appendAlphanumericBytes(n,i){const o=n.length;let c=0;for(;c<o;){const d=jt.getAlphanumericCode(n.charCodeAt(c));if(d===-1)throw new Pt;if(c+1<o){const f=jt.getAlphanumericCode(n.charCodeAt(c+1));if(f===-1)throw new Pt;i.appendBits(d*45+f,11),c+=2}else i.appendBits(d,6),c++}}static append8BitBytes(n,i,o){let c;try{c=ge.encode(n,o)}catch(d){throw new Pt(d)}for(let d=0,f=c.length;d!==f;d++){const p=c[d];i.appendBits(p,8)}}static appendKanjiBytes(n,i){let o;try{o=ge.encode(n,se.SJIS)}catch(d){throw new Pt(d)}const c=o.length;for(let d=0;d<c;d+=2){const f=o[d]&255,p=o[d+1]&255,E=f<<8&4294967295|p;let S=-1;if(E>=33088&&E<=40956?S=E-33088:E>=57408&&E<=60351&&(S=E-49472),S===-1)throw new Pt("Invalid byte sequence");const I=(S>>8)*192+(S&255);i.appendBits(I,13)}}static appendECI(n,i){i.appendBits(Ge.ECI.getBits(),4),i.appendBits(n.getValue(),8)}}jt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),jt.DEFAULT_BYTE_MODE_ENCODING=se.UTF8.getName();class Gs{write(n,i,o,c=null){if(n.length===0)throw new C("Found empty contents");if(i<0||o<0)throw new C("Requested dimensions are too small: "+i+"x"+o);let d=kt.L,f=Gs.QUIET_ZONE_SIZE;c!==null&&(c.get(Cr.ERROR_CORRECTION)!==void 0&&(d=kt.fromString(c.get(Cr.ERROR_CORRECTION).toString())),c.get(Cr.MARGIN)!==void 0&&(f=Number.parseInt(c.get(Cr.MARGIN).toString(),10)));const p=jt.encode(n,d,c);return this.renderResult(p,i,o,f)}writeToDom(n,i,o,c,d=null){typeof n=="string"&&(n=document.querySelector(n));const f=this.write(i,o,c,d);n&&n.appendChild(f)}renderResult(n,i,o,c){const d=n.getMatrix();if(d===null)throw new fn;const f=d.getWidth(),p=d.getHeight(),E=f+c*2,S=p+c*2,I=Math.max(i,E),P=Math.max(o,S),B=Math.min(Math.floor(I/E),Math.floor(P/S)),V=Math.floor((I-f*B)/2),G=Math.floor((P-p*B)/2),Y=this.createSVGElement(I,P);for(let J=0,oe=G;J<p;J++,oe+=B)for(let Ee=0,Ce=V;Ee<f;Ee++,Ce+=B)if(d.get(Ee,J)===1){const ye=this.createSvgRectElement(Ce,oe,B,B);Y.appendChild(ye)}return Y}createSVGElement(n,i){const o=document.createElementNS(Gs.SVG_NS,"svg");return o.setAttributeNS(null,"height",n.toString()),o.setAttributeNS(null,"width",i.toString()),o}createSvgRectElement(n,i,o,c){const d=document.createElementNS(Gs.SVG_NS,"rect");return d.setAttributeNS(null,"x",n.toString()),d.setAttributeNS(null,"y",i.toString()),d.setAttributeNS(null,"height",o.toString()),d.setAttributeNS(null,"width",c.toString()),d.setAttributeNS(null,"fill","#000000"),d}}Gs.QUIET_ZONE_SIZE=4,Gs.SVG_NS="http://www.w3.org/2000/svg";class vi{encode(n,i,o,c,d){if(n.length===0)throw new C("Found empty contents");if(i!==pe.QR_CODE)throw new C("Can only encode QR_CODE, but got "+i);if(o<0||c<0)throw new C(`Requested dimensions are too small: ${o}x${c}`);let f=kt.L,p=vi.QUIET_ZONE_SIZE;d!==null&&(d.get(Cr.ERROR_CORRECTION)!==void 0&&(f=kt.fromString(d.get(Cr.ERROR_CORRECTION).toString())),d.get(Cr.MARGIN)!==void 0&&(p=Number.parseInt(d.get(Cr.MARGIN).toString(),10)));const E=jt.encode(n,f,d);return vi.renderResult(E,o,c,p)}static renderResult(n,i,o,c){const d=n.getMatrix();if(d===null)throw new fn;const f=d.getWidth(),p=d.getHeight(),E=f+c*2,S=p+c*2,I=Math.max(i,E),P=Math.max(o,S),B=Math.min(Math.floor(I/E),Math.floor(P/S)),V=Math.floor((I-f*B)/2),G=Math.floor((P-p*B)/2),Y=new Ie(I,P);for(let J=0,oe=G;J<p;J++,oe+=B)for(let Ee=0,Ce=V;Ee<f;Ee++,Ce+=B)d.get(Ee,J)===1&&Y.setRegion(Ce,oe,B,B);return Y}}vi.QUIET_ZONE_SIZE=4;class td{encode(n,i,o,c,d){let f;switch(i){case pe.QR_CODE:f=new vi;break;default:throw new C("No encoder available for format "+i)}return f.encode(n,i,o,c,d)}}class Zn extends de{constructor(n,i,o,c,d,f,p,E){if(super(f,p),this.yuvData=n,this.dataWidth=i,this.dataHeight=o,this.left=c,this.top=d,c+f>i||d+p>o)throw new C("Crop rectangle does not fit within image data.");E&&this.reverseHorizontal(f,p)}getRow(n,i){if(n<0||n>=this.getHeight())throw new C("Requested row is outside the image: "+n);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const c=(n+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,c,i,0,o),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.yuvData;const o=n*i,c=new Uint8ClampedArray(o);let d=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return D.arraycopy(this.yuvData,d,c,0,o),c;for(let f=0;f<i;f++){const p=f*n;D.arraycopy(this.yuvData,d,c,p,n),d+=this.dataWidth}return c}isCropSupported(){return!0}crop(n,i,o,c){return new Zn(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+i,o,c,!1)}renderThumbnail(){const n=this.getWidth()/Zn.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Zn.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(n*i),c=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let f=0;f<i;f++){const p=f*n;for(let E=0;E<n;E++){const S=c[d+E*Zn.THUMBNAIL_SCALE_FACTOR]&255;o[p+E]=4278190080|S*65793}d+=this.dataWidth*Zn.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/Zn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Zn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,i){const o=this.yuvData;for(let c=0,d=this.top*this.dataWidth+this.left;c<i;c++,d+=this.dataWidth){const f=d+n/2;for(let p=d,E=d+n-1;p<f;p++,E--){const S=o[p];o[p]=o[E],o[E]=S}}}invert(){return new Ne(this)}}Zn.THUMBNAIL_SCALE_FACTOR=2;class ta extends de{constructor(n,i,o,c,d,f,p){if(super(i,o),this.dataWidth=c,this.dataHeight=d,this.left=f,this.top=p,n.BYTES_PER_ELEMENT===4){const E=i*o,S=new Uint8ClampedArray(E);for(let I=0;I<E;I++){const P=n[I],B=P>>16&255,V=P>>7&510,G=P&255;S[I]=(B+V+G)/4&255}this.luminances=S}else this.luminances=n;if(c===void 0&&(this.dataWidth=i),d===void 0&&(this.dataHeight=o),f===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+o>this.dataHeight)throw new C("Crop rectangle does not fit within image data.")}getRow(n,i){if(n<0||n>=this.getHeight())throw new C("Requested row is outside the image: "+n);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const c=(n+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,c,i,0,o),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.luminances;const o=n*i,c=new Uint8ClampedArray(o);let d=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return D.arraycopy(this.luminances,d,c,0,o),c;for(let f=0;f<i;f++){const p=f*n;D.arraycopy(this.luminances,d,c,p,n),d+=this.dataWidth}return c}isCropSupported(){return!0}crop(n,i,o,c){return new ta(this.luminances,o,c,this.dataWidth,this.dataHeight,this.left+n,this.top+i)}invert(){return new Ne(this)}}class mc extends se{static forName(n){return this.getCharacterSetECIByName(n)}}class $o{}$o.ISO_8859_1=se.ISO8859_1;class gc{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Xo{static singletonList(n){return[n]}static min(n,i){return n.sort(i)[0]}}class rd{constructor(n){this.previous=n}getPrevious(){return this.previous}}class bi extends rd{constructor(n,i,o){super(n),this.value=i,this.bitCount=o}appendTo(n,i){n.appendBits(this.value,this.bitCount)}add(n,i){return new bi(this,n,i)}addBinaryShift(n,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new bi(this,n,i)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+j.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class Yo extends bi{constructor(n,i,o){super(n,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=o}appendTo(n,i){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):o===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(i[this.binaryShiftStart+o],8)}addBinaryShift(n,i){return new Yo(this,n,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function nd(O,n,i){return new Yo(O,n,i)}function ra(O,n,i){return new bi(O,n,i)}const sd=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ks=0,Ei=1,Wr=2,pc=3,Bn=4,xc=new bi(null,0,0),Va=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function yc(O){for(let n of O)W.fill(n,-1);return O[ks][Bn]=0,O[Ei][Bn]=0,O[Ei][ks]=28,O[pc][Bn]=0,O[Wr][Bn]=0,O[Wr][ks]=15,O}const qo=yc(W.createInt32Array(6,6));class qr{constructor(n,i,o,c){this.token=n,this.mode=i,this.binaryShiftByteCount=o,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,i){let o=this.bitCount,c=this.token;if(n!==this.mode){let f=Va[this.mode][n];c=ra(c,f&65535,f>>16),o+=f>>16}let d=n===Wr?4:5;return c=ra(c,i,d),new qr(c,n,0,o+d)}shiftAndAppend(n,i){let o=this.token,c=this.mode===Wr?4:5;return o=ra(o,qo[this.mode][n],c),o=ra(o,i,5),new qr(o,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(n){let i=this.token,o=this.mode,c=this.bitCount;if(this.mode===Bn||this.mode===Wr){let p=Va[o][ks];i=ra(i,p&65535,p>>16),c+=p>>16,o=ks}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new qr(i,o,this.binaryShiftByteCount+1,c+d);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(n+1)),f}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=nd(i,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new qr(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let i=this.bitCount+(Va[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?i+=qr.calculateBinaryShiftCost(n)-qr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(i+=10),i<=n.bitCount}toBitArray(n){let i=[];for(let c=this.endBinaryShift(n.length).token;c!==null;c=c.getPrevious())i.unshift(c);let o=new q;for(const c of i)c.appendTo(o,n);return o}toString(){return he.format("%s bits=%d bytes=%d",sd[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}qr.INITIAL_STATE=new qr(xc,ks,0,0);function id(O){const n=he.getCharCode(" "),i=he.getCharCode("."),o=he.getCharCode(",");O[ks][n]=1;const c=he.getCharCode("Z"),d=he.getCharCode("A");for(let B=d;B<=c;B++)O[ks][B]=B-d+2;O[Ei][n]=1;const f=he.getCharCode("z"),p=he.getCharCode("a");for(let B=p;B<=f;B++)O[Ei][B]=B-p+2;O[Wr][n]=1;const E=he.getCharCode("9"),S=he.getCharCode("0");for(let B=S;B<=E;B++)O[Wr][B]=B-S+2;O[Wr][o]=12,O[Wr][i]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<I.length;B++)O[pc][he.getCharCode(I[B])]=B;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<P.length;B++)he.getCharCode(P[B])>0&&(O[Bn][he.getCharCode(P[B])]=B);return O}const Ko=id(W.createInt32Array(5,256));class na{constructor(n){this.text=n}encode(){const n=he.getCharCode(" "),i=he.getCharCode(`
`);let o=Xo.singletonList(qr.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case he.getCharCode("\r"):f=p===i?2:0;break;case he.getCharCode("."):f=p===n?3:0;break;case he.getCharCode(","):f=p===n?4:0;break;case he.getCharCode(":"):f=p===n?5:0;break;default:f=0}f>0?(o=na.updateStateListForPair(o,d,f),d++):o=this.updateStateListForChar(o,d)}return Xo.min(o,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,i){const o=[];for(let c of n)this.updateStateForChar(c,i,o);return na.simplifyStates(o)}updateStateForChar(n,i,o){let c=this.text[i]&255,d=Ko[n.getMode()][c]>0,f=null;for(let p=0;p<=Bn;p++){let E=Ko[p][c];if(E>0){if(f==null&&(f=n.endBinaryShift(i)),!d||p===n.getMode()||p===Wr){const S=f.latchAndAppend(p,E);o.push(S)}if(!d&&qo[n.getMode()][p]>=0){const S=f.shiftAndAppend(p,E);o.push(S)}}}if(n.getBinaryShiftByteCount()>0||Ko[n.getMode()][c]===0){let p=n.addBinaryShiftChar(i);o.push(p)}}static updateStateListForPair(n,i,o){const c=[];for(let d of n)this.updateStateForPair(d,i,o,c);return this.simplifyStates(c)}static updateStateForPair(n,i,o,c){let d=n.endBinaryShift(i);if(c.push(d.latchAndAppend(Bn,o)),n.getMode()!==Bn&&c.push(d.shiftAndAppend(Bn,o)),o===3||o===4){let f=d.latchAndAppend(Wr,16-o).latchAndAppend(Wr,1);c.push(f)}if(n.getBinaryShiftByteCount()>0){let f=n.addBinaryShiftChar(i).addBinaryShiftChar(i+1);c.push(f)}}static simplifyStates(n){let i=[];for(const o of n){let c=!0;for(const d of i){if(d.isBetterThanOrEqualTo(o)){c=!1;break}o.isBetterThanOrEqualTo(d)&&(i=i.filter(f=>f!==d))}c&&i.push(o)}return i}}class vt{constructor(){}static encodeBytes(n){return vt.encode(n,vt.DEFAULT_EC_PERCENT,vt.DEFAULT_AZTEC_LAYERS)}static encode(n,i,o){let c=new na(n).encode(),d=j.truncDivision(c.getSize()*i,100)+11,f=c.getSize()+d,p,E,S,I,P;if(o!==vt.DEFAULT_AZTEC_LAYERS){if(p=o<0,E=Math.abs(o),E>(p?vt.MAX_NB_BITS_COMPACT:vt.MAX_NB_BITS))throw new C(he.format("Illegal value %s for layers",o));S=vt.totalBitsInLayer(E,p),I=vt.WORD_SIZE[E];let ye=S-S%I;if(P=vt.stuffBits(c,I),P.getSize()+d>ye)throw new C("Data to large for user specified layer");if(p&&P.getSize()>I*64)throw new C("Data to large for user specified layer")}else{I=0,P=null;for(let ye=0;;ye++){if(ye>vt.MAX_NB_BITS)throw new C("Data too large for an Aztec code");if(p=ye<=3,E=p?ye+1:ye,S=vt.totalBitsInLayer(E,p),f>S)continue;(P==null||I!==vt.WORD_SIZE[E])&&(I=vt.WORD_SIZE[E],P=vt.stuffBits(c,I));let ft=S-S%I;if(!(p&&P.getSize()>I*64)&&P.getSize()+d<=ft)break}}let B=vt.generateCheckWords(P,S,I),V=P.getSize()/I,G=vt.generateModeMessage(p,E,V),Y=(p?11:14)+E*4,J=new Int32Array(Y),oe;if(p){oe=Y;for(let ye=0;ye<J.length;ye++)J[ye]=ye}else{oe=Y+1+2*j.truncDivision(j.truncDivision(Y,2)-1,15);let ye=j.truncDivision(Y,2),ft=j.truncDivision(oe,2);for(let it=0;it<ye;it++){let on=it+j.truncDivision(it,15);J[ye-it-1]=ft-on-1,J[ye+it]=ft+on+1}}let Ee=new Ie(oe);for(let ye=0,ft=0;ye<E;ye++){let it=(E-ye)*4+(p?9:12);for(let on=0;on<it;on++){let Ln=on*2;for(let Ar=0;Ar<2;Ar++)B.get(ft+Ln+Ar)&&Ee.set(J[ye*2+Ar],J[ye*2+on]),B.get(ft+it*2+Ln+Ar)&&Ee.set(J[ye*2+on],J[Y-1-ye*2-Ar]),B.get(ft+it*4+Ln+Ar)&&Ee.set(J[Y-1-ye*2-Ar],J[Y-1-ye*2-on]),B.get(ft+it*6+Ln+Ar)&&Ee.set(J[Y-1-ye*2-on],J[ye*2+Ar])}ft+=it*8}if(vt.drawModeMessage(Ee,p,oe,G),p)vt.drawBullsEye(Ee,j.truncDivision(oe,2),5);else{vt.drawBullsEye(Ee,j.truncDivision(oe,2),7);for(let ye=0,ft=0;ye<j.truncDivision(Y,2)-1;ye+=15,ft+=16)for(let it=j.truncDivision(oe,2)&1;it<oe;it+=2)Ee.set(j.truncDivision(oe,2)-ft,it),Ee.set(j.truncDivision(oe,2)+ft,it),Ee.set(it,j.truncDivision(oe,2)-ft),Ee.set(it,j.truncDivision(oe,2)+ft)}let Ce=new gc;return Ce.setCompact(p),Ce.setSize(oe),Ce.setLayers(E),Ce.setCodeWords(V),Ce.setMatrix(Ee),Ce}static drawBullsEye(n,i,o){for(let c=0;c<o;c+=2)for(let d=i-c;d<=i+c;d++)n.set(d,i-c),n.set(d,i+c),n.set(i-c,d),n.set(i+c,d);n.set(i-o,i-o),n.set(i-o+1,i-o),n.set(i-o,i-o+1),n.set(i+o,i-o),n.set(i+o,i-o+1),n.set(i+o,i+o-1)}static generateModeMessage(n,i,o){let c=new q;return n?(c.appendBits(i-1,2),c.appendBits(o-1,6),c=vt.generateCheckWords(c,28,4)):(c.appendBits(i-1,5),c.appendBits(o-1,11),c=vt.generateCheckWords(c,40,4)),c}static drawModeMessage(n,i,o,c){let d=j.truncDivision(o,2);if(i)for(let f=0;f<7;f++){let p=d-3+f;c.get(f)&&n.set(p,d-5),c.get(f+7)&&n.set(d+5,p),c.get(20-f)&&n.set(p,d+5),c.get(27-f)&&n.set(d-5,p)}else for(let f=0;f<10;f++){let p=d-5+f+j.truncDivision(f,5);c.get(f)&&n.set(p,d-7),c.get(f+10)&&n.set(d+7,p),c.get(29-f)&&n.set(p,d+7),c.get(39-f)&&n.set(d-7,p)}}static generateCheckWords(n,i,o){let c=n.getSize()/o,d=new Go(vt.getGF(o)),f=j.truncDivision(i,o),p=vt.bitsToWords(n,o,f);d.encode(p,f-c);let E=i%o,S=new q;S.appendBits(0,E);for(const I of Array.from(p))S.appendBits(I,o);return S}static bitsToWords(n,i,o){let c=new Int32Array(o),d,f;for(d=0,f=n.getSize()/i;d<f;d++){let p=0;for(let E=0;E<i;E++)p|=n.get(d*i+E)?1<<i-E-1:0;c[d]=p}return c}static getGF(n){switch(n){case 4:return mt.AZTEC_PARAM;case 6:return mt.AZTEC_DATA_6;case 8:return mt.AZTEC_DATA_8;case 10:return mt.AZTEC_DATA_10;case 12:return mt.AZTEC_DATA_12;default:throw new C("Unsupported word size "+n)}}static stuffBits(n,i){let o=new q,c=n.getSize(),d=(1<<i)-2;for(let f=0;f<c;f+=i){let p=0;for(let E=0;E<i;E++)(f+E>=c||n.get(f+E))&&(p|=1<<i-1-E);(p&d)===d?(o.appendBits(p&d,i),f--):(p&d)===0?(o.appendBits(p|1,i),f--):o.appendBits(p,i)}return o}static totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}vt.DEFAULT_EC_PERCENT=33,vt.DEFAULT_AZTEC_LAYERS=0,vt.MAX_NB_BITS=32,vt.MAX_NB_BITS_COMPACT=4,vt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class sa{encode(n,i,o,c){return this.encodeWithHints(n,i,o,c,null)}encodeWithHints(n,i,o,c,d){let f=$o.ISO_8859_1,p=vt.DEFAULT_EC_PERCENT,E=vt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Cr.CHARACTER_SET)&&(f=mc.forName(d.get(Cr.CHARACTER_SET).toString())),d.has(Cr.ERROR_CORRECTION)&&(p=j.parseInt(d.get(Cr.ERROR_CORRECTION).toString())),d.has(Cr.AZTEC_LAYERS)&&(E=j.parseInt(d.get(Cr.AZTEC_LAYERS).toString()))),sa.encodeLayers(n,i,o,c,f,p,E)}static encodeLayers(n,i,o,c,d,f,p){if(i!==pe.AZTEC)throw new C("Can only encode AZTEC, but got "+i);let E=vt.encode(he.getBytes(n,d),f,p);return sa.renderResult(E,o,c)}static renderResult(n,i,o){let c=n.getMatrix();if(c==null)throw new fn;let d=c.getWidth(),f=c.getHeight(),p=Math.max(i,d),E=Math.max(o,f),S=Math.min(p/d,E/f),I=(p-d*S)/2,P=(E-f*S)/2,B=new Ie(p,E);for(let V=0,G=P;V<f;V++,G+=S)for(let Y=0,J=I;Y<d;Y++,J+=S)c.get(Y,V)&&B.setRegion(J,G,S,S);return B}}r.AbstractExpandedDecoder=Mo,r.ArgumentException=A,r.ArithmeticException=_s,r.AztecCode=gc,r.AztecCodeReader=kn,r.AztecCodeWriter=sa,r.AztecDecoder=Nt,r.AztecDetector=mn,r.AztecDetectorResult=Xn,r.AztecEncoder=vt,r.AztecHighLevelEncoder=na,r.AztecPoint=fr,r.BarcodeFormat=pe,r.Binarizer=k,r.BinaryBitmap=T,r.BitArray=q,r.BitMatrix=Ie,r.BitSource=Lo,r.BrowserAztecCodeReader=Ns,r.BrowserBarcodeReader=oc,r.BrowserCodeReader=ke,r.BrowserDatamatrixCodeReader=Ju,r.BrowserMultiFormatReader=ea,r.BrowserPDF417Reader=Fa,r.BrowserQRCodeReader=fc,r.BrowserQRCodeSvgWriter=Gs,r.CharacterSetECI=se,r.ChecksumException=R,r.Code128Reader=_e,r.Code39Reader=Jt,r.DataMatrixDecodedBitStreamParser=Dn,r.DataMatrixReader=Mn,r.DecodeHintType=te,r.DecoderResult=wt,r.DefaultGridSampler=ui,r.DetectorResult=hr,r.EAN13Reader=$r,r.EncodeHintType=Cr,r.Exception=w,r.FormatException=ee,r.GenericGF=mt,r.GenericGFPoly=br,r.GlobalHistogramBinarizer=Re,r.GridSampler=ci,r.GridSamplerInstance=rn,r.HTMLCanvasElementLuminanceSource=Ae,r.HybridBinarizer=fe,r.ITFReader=Et,r.IllegalArgumentException=C,r.IllegalStateException=fn,r.InvertedLuminanceSource=Ne,r.LuminanceSource=de,r.MathUtils=tt,r.MultiFormatOneDReader=mi,r.MultiFormatReader=La,r.MultiFormatWriter=td,r.NotFoundException=Q,r.OneDReader=$t,r.PDF417DecodedBitStreamParser=le,r.PDF417DecoderErrorCorrection=Vo,r.PDF417Reader=Dr,r.PDF417ResultMetadata=ja,r.PerspectiveTransform=Rr,r.PlanarYUVLuminanceSource=Zn,r.QRCodeByteMatrix=Ua,r.QRCodeDataMask=dt,r.QRCodeDecodedBitStreamParser=Vt,r.QRCodeDecoderErrorCorrectionLevel=kt,r.QRCodeDecoderFormatInformation=kr,r.QRCodeEncoder=jt,r.QRCodeEncoderQRCode=Hs,r.QRCodeMaskUtil=Wt,r.QRCodeMatrixUtil=Ye,r.QRCodeMode=Ge,r.QRCodeReader=Yr,r.QRCodeVersion=ze,r.QRCodeWriter=vi,r.RGBLuminanceSource=ta,r.RSS14Reader=Lt,r.RSSExpandedReader=me,r.ReaderException=wi,r.ReedSolomonDecoder=cs,r.ReedSolomonEncoder=Go,r.ReedSolomonException=vn,r.Result=Me,r.ResultMetadataType=$e,r.ResultPoint=Pe,r.StringUtils=he,r.UnsupportedOperationException=Ue,r.VideoInputDevice=$,r.WhiteRectangleDetector=bn,r.WriterException=Pt,r.ZXingArrays=W,r.ZXingCharset=mc,r.ZXingInteger=j,r.ZXingStandardCharsets=$o,r.ZXingStringBuilder=Te,r.ZXingStringEncoding=ge,r.ZXingSystem=D,r.createAbstractExpandedDecoder=ic,Object.defineProperty(r,"__esModule",{value:!0})}))})(_l,_l.exports)),_l.exports}var Zt=gT();const pT=Gf(Zt),xT=j2({__proto__:null,default:pT},[Zt]);var Xp=(function(){function t(e,r,a){if(this.formatMap=new Map([[Be.QR_CODE,Zt.BarcodeFormat.QR_CODE],[Be.AZTEC,Zt.BarcodeFormat.AZTEC],[Be.CODABAR,Zt.BarcodeFormat.CODABAR],[Be.CODE_39,Zt.BarcodeFormat.CODE_39],[Be.CODE_93,Zt.BarcodeFormat.CODE_93],[Be.CODE_128,Zt.BarcodeFormat.CODE_128],[Be.DATA_MATRIX,Zt.BarcodeFormat.DATA_MATRIX],[Be.MAXICODE,Zt.BarcodeFormat.MAXICODE],[Be.ITF,Zt.BarcodeFormat.ITF],[Be.EAN_13,Zt.BarcodeFormat.EAN_13],[Be.EAN_8,Zt.BarcodeFormat.EAN_8],[Be.PDF_417,Zt.BarcodeFormat.PDF_417],[Be.RSS_14,Zt.BarcodeFormat.RSS_14],[Be.RSS_EXPANDED,Zt.BarcodeFormat.RSS_EXPANDED],[Be.UPC_A,Zt.BarcodeFormat.UPC_A],[Be.UPC_E,Zt.BarcodeFormat.UPC_E],[Be.UPC_EAN_EXTENSION,Zt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!xT)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=a;var u=this.createZXingFormats(e),h=new Map;h.set(Zt.DecodeHintType.POSSIBLE_FORMATS,u),h.set(Zt.DecodeHintType.TRY_HARDER,!1),this.hints=h}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(a,u){try{a(r.decode(e))}catch(h){u(h)}})},t.prototype.decode=function(e){var r=new Zt.MultiFormatReader(this.verbose,this.hints),a=new Zt.HTMLCanvasElementLuminanceSource(e),u=new Zt.BinaryBitmap(new Zt.HybridBinarizer(a)),h=r.decode(u);return{text:h.text,format:Ww.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,a,u){e.set(r,a)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],a=0,u=e;a<u.length;a++){var h=u[a];this.formatMap.has(h)?r.push(this.formatMap.get(h)):this.logger.logError("".concat(h," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t})(),yT=function(t,e,r,a){function u(h){return h instanceof r?h:new r(function(g){g(h)})}return new(r||(r=Promise))(function(h,g){function v(A){try{w(a.next(A))}catch(C){g(C)}}function y(A){try{w(a.throw(A))}catch(C){g(C)}}function w(A){A.done?h(A.value):u(A.value).then(v,y)}w((a=a.apply(t,e||[])).next())})},wT=function(t,e){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},a,u,h,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(w){return function(A){return y([w,A])}}function y(w){if(a)throw new TypeError("Generator is already executing.");for(;g&&(g=0,w[0]&&(r=0)),r;)try{if(a=1,u&&(h=w[0]&2?u.return:w[0]?u.throw||((h=u.return)&&h.call(u),0):u.next)&&!(h=h.call(u,w[1])).done)return h;switch(u=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,u=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=e.call(t,r)}catch(A){w=[6,A],u=0}finally{a=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Yp=(function(){function t(e,r,a){if(this.formatMap=new Map([[Be.QR_CODE,"qr_code"],[Be.AZTEC,"aztec"],[Be.CODABAR,"codabar"],[Be.CODE_39,"code_39"],[Be.CODE_93,"code_93"],[Be.CODE_128,"code_128"],[Be.DATA_MATRIX,"data_matrix"],[Be.ITF,"itf"],[Be.EAN_13,"ean_13"],[Be.EAN_8,"ean_8"],[Be.PDF_417,"pdf417"],[Be.UPC_A,"upc_a"],[Be.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=a;var u=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return yT(this,void 0,void 0,function(){var r,a;return wT(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=u.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return a=this.selectLargestBarcode(r),[2,{text:a.rawValue,format:Ww.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,a=0,u=0,h=e;u<h.length;u++){var g=h[u],v=g.boundingBox.width*g.boundingBox.height;v>a&&(a=v,r=g)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],a=0,u=e;a<u.length;a++){var h=u[a];this.formatMap.has(h)?r.push(this.formatMap.get(h)):this.logger.warn("".concat(h," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,a,u){e.set(r,a)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t})(),qp=function(t,e,r,a){function u(h){return h instanceof r?h:new r(function(g){g(h)})}return new(r||(r=Promise))(function(h,g){function v(A){try{w(a.next(A))}catch(C){g(C)}}function y(A){try{w(a.throw(A))}catch(C){g(C)}}function w(A){A.done?h(A.value):u(A.value).then(v,y)}w((a=a.apply(t,e||[])).next())})},Kp=function(t,e){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},a,u,h,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(w){return function(A){return y([w,A])}}function y(w){if(a)throw new TypeError("Generator is already executing.");for(;g&&(g=0,w[0]&&(r=0)),r;)try{if(a=1,u&&(h=w[0]&2?u.return:w[0]?u.throw||((h=u.return)&&h.call(u),0):u.next)&&!(h=h.call(u,w[1])).done)return h;switch(u=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,u=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=e.call(t,r)}catch(A){w=[6,A],u=0}finally{a=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},vT=(function(){function t(e,r,a,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=a,r&&Yp.isSupported()?(this.primaryDecoder=new Yp(e,a,u),this.secondaryDecoder=new Xp(e,a,u)):this.primaryDecoder=new Xp(e,a,u)}return t.prototype.decodeAsync=function(e){return qp(this,void 0,void 0,function(){var r;return Kp(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,a.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return qp(this,void 0,void 0,function(){var r,a;return Kp(this,function(u){switch(u.label){case 0:r=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,u.sent()];case 3:if(a=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw a;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,a=this.executionResults;r<a.length;r++){var u=a[r];e+=u}var h=e/this.executionResults.length;console.log("".concat(h," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t})(),j0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(a[h]=u[h])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}})(),Wu=function(t,e,r,a){function u(h){return h instanceof r?h:new r(function(g){g(h)})}return new(r||(r=Promise))(function(h,g){function v(A){try{w(a.next(A))}catch(C){g(C)}}function y(A){try{w(a.throw(A))}catch(C){g(C)}}function w(A){A.done?h(A.value):u(A.value).then(v,y)}w((a=a.apply(t,e||[])).next())})},zu=function(t,e){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},a,u,h,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(w){return function(A){return y([w,A])}}function y(w){if(a)throw new TypeError("Generator is already executing.");for(;g&&(g=0,w[0]&&(r=0)),r;)try{if(a=1,u&&(h=w[0]&2?u.return:w[0]?u.throw||((h=u.return)&&h.call(u),0):u.next)&&!(h=h.call(u,w[1])).done)return h;switch(u=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,u=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=e.call(t,r)}catch(A){w=[6,A],u=0}finally{a=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Hw=(function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var a={advanced:[r]};return this.track.applyConstraints(a)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t})(),bT=(function(t){j0(e,t);function e(r,a){return t.call(this,r,a)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var a={};a[this.name]=r;var u={advanced:[a]};return this.track.applyConstraints(u)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),a=r[this.name];return{min:a.min,max:a.max,step:a.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Hw),ET=(function(t){j0(e,t);function e(r){return t.call(this,"zoom",r)||this}return e})(bT),CT=(function(t){j0(e,t);function e(r){return t.call(this,"torch",r)||this}return e})(Hw),AT=(function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new ET(this.track)},t.prototype.torchFeature=function(){return new CT(this.track)},t})(),ST=(function(){function t(e,r,a){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=a,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var a=e.surface.clientWidth,u=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(a,u),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,a,u){return Wu(this,void 0,void 0,function(){var h,g;return zu(this,function(v){switch(v.label){case 0:return h=new t(e,r,u),a.aspectRatio?(g={aspectRatio:a.aspectRatio},[4,h.getFirstTrackOrFail().applyConstraints(g)]):[3,2];case 1:v.sent(),v.label=2;case 2:return h.setupSurface(),[2,h]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,a=function(){setTimeout(e,200),r.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Wu(this,void 0,void 0,function(){return zu(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,a){var u=e.mediaStream.getVideoTracks(),h=u.length,g=0;e.mediaStream.getVideoTracks().forEach(function(v){e.mediaStream.removeTrack(v),v.stop(),++g,g>=h&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new AT(this.getFirstTrackOrFail())},t})(),_T=(function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,a){return Wu(this,void 0,void 0,function(){return zu(this,function(u){return[2,ST.create(e,this.mediaStream,r,a)]})})},t.create=function(e){return Wu(this,void 0,void 0,function(){var r,a;return zu(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return a=u.sent(),[2,new t(a)]}})})},t})(),Zp=function(t,e,r,a){function u(h){return h instanceof r?h:new r(function(g){g(h)})}return new(r||(r=Promise))(function(h,g){function v(A){try{w(a.next(A))}catch(C){g(C)}}function y(A){try{w(a.throw(A))}catch(C){g(C)}}function w(A){A.done?h(A.value):u(A.value).then(v,y)}w((a=a.apply(t,e||[])).next())})},Qp=function(t,e){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},a,u,h,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(w){return function(A){return y([w,A])}}function y(w){if(a)throw new TypeError("Generator is already executing.");for(;g&&(g=0,w[0]&&(r=0)),r;)try{if(a=1,u&&(h=w[0]&2?u.return:w[0]?u.throw||((h=u.return)&&h.call(u),0):u.next)&&!(h=h.call(u,w[1])).done)return h;switch(u=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,u=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=e.call(t,r)}catch(A){w=[6,A],u=0}finally{a=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},NT=(function(){function t(){}return t.failIfNotSupported=function(){return Zp(this,void 0,void 0,function(){return Qp(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Zp(this,void 0,void 0,function(){return Qp(this,function(r){return[2,_T.create(e)]})})},t})(),TT=function(t,e,r,a){function u(h){return h instanceof r?h:new r(function(g){g(h)})}return new(r||(r=Promise))(function(h,g){function v(A){try{w(a.next(A))}catch(C){g(C)}}function y(A){try{w(a.throw(A))}catch(C){g(C)}}function w(A){A.done?h(A.value):u(A.value).then(v,y)}w((a=a.apply(t,e||[])).next())})},IT=function(t,e){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},a,u,h,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(w){return function(A){return y([w,A])}}function y(w){if(a)throw new TypeError("Generator is already executing.");for(;g&&(g=0,w[0]&&(r=0)),r;)try{if(a=1,u&&(h=w[0]&2?u.return:w[0]?u.throw||((h=u.return)&&h.call(u),0):u.next)&&!(h=h.call(u,w[1])).done)return h;switch(u=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,u=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=e.call(t,r)}catch(A){w=[6,A],u=0}finally{a=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},RT=(function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Eo.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Eo.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return TT(this,void 0,void 0,function(){var e,r,a,u,h,g,v;return IT(this,function(y){switch(y.label){case 0:return e=function(w){for(var A=w.getVideoTracks(),C=0,T=A;C<T.length;C++){var R=T[C];R.enabled=!1,R.stop(),w.removeTrack(R)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=y.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(a=y.sent(),u=[],h=0,g=a;h<g.length;h++)v=g[h],v.kind==="videoinput"&&u.push({id:v.deviceId,label:v.label});return e(r),[2,u]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var a=function(h){for(var g=[],v=0,y=h;v<y.length;v++){var w=y[v];w.kind==="video"&&g.push({id:w.id,label:w.label})}e(g)},u=MediaStreamTrack;u.getSources(a)})},t})(),yr;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(yr||(yr={}));var kT=(function(){function t(){this.state=yr.NOT_STARTED,this.onGoingTransactionNewState=yr.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===yr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=yr.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===yr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=yr.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==yr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case yr.UNKNOWN:throw"Transition from unknown is not allowed";case yr.NOT_STARTED:this.failIfNewStateIs(e,[yr.PAUSED]);break;case yr.SCANNING:break;case yr.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var a=0,u=r;a<u.length;a++){var h=u[a];if(e===h)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t})(),OT=(function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===yr.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==yr.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===yr.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===yr.PAUSED},t})(),PT=(function(){function t(){}return t.create=function(){return new OT(new kT)},t})(),DT=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(a[h]=u[h])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}})(),zn=(function(t){DT(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(dT),MT=(function(){function t(e,r){this.logger=r,this.fps=zn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=zn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?zw.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!ti(this.qrbox)},t.create=function(e,r){return new t(e,r)},t})(),jT=(function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var a;typeof r=="boolean"?this.verbose=r===!0:r&&(a=r,this.verbose=a.verbose===!0,a.experimentalFeatures),this.logger=new fT(this.verbose),this.qrcode=new vT(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(a),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=PT.create()}return t.prototype.start=function(e,r,a,u){var h=this;if(!e)throw"cameraIdOrConfig is required";if(!a||typeof a!="function")throw"qrCodeSuccessCallback is required and should be a function.";var g;u?g=u:g=this.verbose?this.logger.log:function(){};var v=MT.create(r,this.logger);this.clearElement();var y=!1;v.videoConstraints&&(v.isMediaStreamConstraintsValid()?y=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=y,A=document.getElementById(this.elementId);A.clientWidth?A.clientWidth:zn.DEFAULT_WIDTH,A.style.position="relative",this.shouldScan=!0,this.element=A;var C=this,T=this.stateManagerProxy.startTransition(yr.SCANNING);return new Promise(function(R,k){var D=w?v.videoConstraints:C.createVideoConstraints(e);if(!D){T.cancel(),k("videoConstraints should be defined");return}var L={};(!w||v.aspectRatio)&&(L.aspectRatio=v.aspectRatio);var U={onRenderSurfaceReady:function(W,j){C.setupUi(W,j,v),C.isScanning=!0,C.foreverScan(v,a,g)}};NT.failIfNotSupported().then(function(W){W.create(D).then(function(j){return j.render(h.element,L,U).then(function(q){C.renderedCamera=q,T.execute(),R(null)}).catch(function(q){T.cancel(),k(q)})}).catch(function(j){T.cancel(),k(Eo.errorGettingUserMedia(j))})}).catch(function(W){T.cancel(),k(Eo.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(yr.PAUSED),this.showPausedState(),(ti(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(yr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(yr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var a=function(){if(e.element){var h=document.getElementById(zn.SHADED_REGION_ELEMENT_ID);h&&e.element.removeChild(h)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),a(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),r.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(a){return a.decodedText})},t.prototype.scanFileV2=function(e,r){var a=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ti(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,h){a.possiblyCloseLastScanImageFile(),a.clearElement(),a.lastScanImageFile=URL.createObjectURL(e);var g=new Image;g.onload=function(){var v=g.width,y=g.height,w=document.getElementById(a.elementId),A=w.clientWidth?w.clientWidth:zn.DEFAULT_WIDTH,C=Math.max(w.clientHeight?w.clientHeight:y,zn.FILE_SCAN_MIN_HEIGHT),T=a.computeCanvasDrawConfig(v,y,A,C);if(r){var R=a.createCanvasElement(A,C,"qr-canvas-visible");R.style.display="inline-block",w.appendChild(R);var k=R.getContext("2d");if(!k)throw"Unable to get 2d context from canvas";k.canvas.width=A,k.canvas.height=C,k.drawImage(g,0,0,v,y,T.x,T.y,T.width,T.height)}var D=zn.FILE_SCAN_HIDDEN_CANVAS_PADDING,L=Math.max(g.width,T.width),U=Math.max(g.height,T.height),W=L+2*D,j=U+2*D,q=a.createCanvasElement(W,j);w.appendChild(q);var Z=q.getContext("2d");if(!Z)throw"Unable to get 2d context from canvas";Z.canvas.width=W,Z.canvas.height=j,Z.drawImage(g,0,0,v,y,D,D,L,U);try{a.qrcode.decodeRobustlyAsync(q).then(function(te){u(Gp.createFromQrcodeResult(te))}).catch(h)}catch(te){h("QR code parse error, error = ".concat(te))}},g.onerror=h,g.onabort=h,g.onstalled=h,g.onsuspend=h,g.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return RT.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!zw.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[Be.QR_CODE,Be.AZTEC,Be.CODABAR,Be.CODE_39,Be.CODE_93,Be.CODE_128,Be.DATA_MATRIX,Be.MAXICODE,Be.ITF,Be.EAN_13,Be.EAN_8,Be.PDF_417,Be.RSS_14,Be.RSS_EXPANDED,Be.UPC_A,Be.UPC_E,Be.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var a=[],u=0,h=e.formatsToSupport;u<h.length;u++){var g=h[u];uT(g)?a.push(g):this.logger.warn("Invalid format: ".concat(g," passed in config, ignoring."))}if(a.length===0)throw"None of formatsToSupport match supported values.";return a},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ti(e))return!0;if(!ti(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ti(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return ti(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,a){var u=this,h=a.qrbox;this.validateQrboxConfig(h);var g=this.toQrdimensions(e,r,h),v=function(w){if(w<zn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(zn.MIN_QR_BOX_SIZE,"px.")},y=function(w){return w>e&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=e),w};v(g.width),v(g.height),g.width=y(g.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,a){if(typeof a=="number")return{width:a,height:a};if(typeof a=="function")try{return a(e,r)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return a},t.prototype.setupUi=function(e,r,a){a.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,a);var u=ti(a.qrbox)?{width:e,height:r}:a.qrbox;this.validateQrboxConfig(u);var h=this.toQrdimensions(e,r,u);h.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var g=a.isShadedBoxEnabled()&&h.height<=r,v={x:0,y:0,width:e,height:r},y=g?this.getShadedRegionBounds(e,r,h):v,w=this.createCanvasElement(y.width,y.height),A={willReadFrequently:!0},C=w.getContext("2d",A);C.canvas.width=y.width,C.canvas.height=y.height,this.element.append(w),g&&this.possiblyInsertShadingElement(this.element,e,r,h),this.createScannerPausedUiElement(this.element),this.qrRegion=y,this.context=C,this.canvasElement=w},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=Eo.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var a=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return e(u.text,Gp.createFromQrcodeResult(u)),a.possiblyUpdateShaders(!0),!0}).catch(function(u){a.possiblyUpdateShaders(!1);var h=Eo.codeParseError(u);return r(h,hT.createFrom(h)),!1})},t.prototype.foreverScan=function(e,r,a){var u=this;if(this.shouldScan&&this.renderedCamera){var h=this.renderedCamera.getSurface(),g=h.videoWidth/h.clientWidth,v=h.videoHeight/h.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var y=this.qrRegion.width*g,w=this.qrRegion.height*v,A=this.qrRegion.x*g,C=this.qrRegion.y*v;this.context.drawImage(h,A,C,y,w,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(e,r,a)},u.getTimeoutFps(e.fps))};this.scanContext(r,a).then(function(R){!R&&e.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(r,a).finally(function(){T()})):T()}).catch(function(R){u.logger.logError("Error happend while scanning context",R),T()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",a="deviceId",u={user:!0,environment:!0},h="exact",g=function(k){if(k in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(k,"'")},v=Object.keys(e);if(v.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(v.length," keys");var y=Object.keys(e)[0];if(y!==r&&y!==a)throw"Only '".concat(r,"' and '").concat(a,"' ")+" are supported for 'cameraIdOrConfig'";if(y===r){var w=e.facingMode;if(typeof w=="string"){if(g(w))return{facingMode:w}}else if(typeof w=="object")if(h in w){if(g(w["".concat(h)]))return{facingMode:{exact:w["".concat(h)]}}}else throw"'facingMode' should be string or object with"+" ".concat(h," as key.");else{var A=typeof w;throw"Invalid type of 'facingMode' = ".concat(A)}}else{var C=e.deviceId;if(typeof C=="string")return{deviceId:C};if(typeof C=="object"){if(h in C)return{deviceId:{exact:C["".concat(h)]}};throw"'deviceId' should be string or object with"+" ".concat(h," as key.")}else{var T=typeof C;throw"Invalid type of 'deviceId' = ".concat(T)}}}var R=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(R)},t.prototype.computeCanvasDrawConfig=function(e,r,a,u){if(e<=a&&r<=u){var h=(a-e)/2,g=(u-r)/2;return{x:h,y:g,width:e,height:r}}else{var v=e,y=r;return e>a&&(r=a/e*r,e=a),r>u&&(e=u/r*e,r=u),this.logger.log("Image downsampled from "+"".concat(v,"X").concat(y)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,a,u)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?zn.BORDER_SHADER_MATCH_COLOR:zn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,a){var u=e,h=r,g=document.createElement("canvas");return g.style.width="".concat(u,"px"),g.style.height="".concat(h,"px"),g.style.display="none",g.id=ti(a)?"qr-canvas":a,g},t.prototype.getShadedRegionBounds=function(e,r,a){if(a.width>e||a.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-a.width)/2,y:(r-a.height)/2,width:a.width,height:a.height}},t.prototype.possiblyInsertShadingElement=function(e,r,a,u){if(!(r-u.width<1||a-u.height<1)){var h=document.createElement("div");h.style.position="absolute";var g=(r-u.width)/2,v=(a-u.height)/2;if(h.style.borderLeft="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderRight="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderTop="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderBottom="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),h.style.boxSizing="border-box",h.style.top="0px",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.id="".concat(zn.SHADED_REGION_ELEMENT_ID),r-u.width<11||a-u.height<11)this.hasBorderShaders=!1;else{var y=5,w=40;this.insertShaderBorders(h,w,y,-y,null,0,!0),this.insertShaderBorders(h,w,y,-y,null,0,!1),this.insertShaderBorders(h,w,y,null,-y,0,!0),this.insertShaderBorders(h,w,y,null,-y,0,!1),this.insertShaderBorders(h,y,w+y,-y,null,-y,!0),this.insertShaderBorders(h,y,w+y,null,-y,-y,!0),this.insertShaderBorders(h,y,w+y,-y,null,-y,!1),this.insertShaderBorders(h,y,w+y,null,-y,-y,!1),this.hasBorderShaders=!0}e.append(h)}},t.prototype.insertShaderBorders=function(e,r,a,u,h,g,v){var y=document.createElement("div");y.style.position="absolute",y.style.backgroundColor=zn.BORDER_SHADER_DEFAULT_COLOR,y.style.width="".concat(r,"px"),y.style.height="".concat(a,"px"),u!==null&&(y.style.top="".concat(u,"px")),h!==null&&(y.style.bottom="".concat(h,"px")),v?y.style.left="".concat(g,"px"):y.style.right="".concat(g,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(y),e.appendChild(y)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t})(),Jp;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Jp||(Jp={}));function BT(){const t=As(),{user:e,isAdmin:r,isAuthenticated:a,isLoading:u}=Vs(),[h,g]=z.useState(null),[v,y]=z.useState(!1),[w,A]=z.useState(!1),[C,T]=z.useState(null),R=z.useRef(null);z.useEffect(()=>{u||r||(Qt.error("Admin access only"),t("/"))},[r,u,t]),z.useEffect(()=>()=>{R.current&&w&&R.current.stop().catch(console.error)},[w]);const k=async()=>{T(null);try{R.current||(R.current=new jT("qr-reader")),await R.current.start({facingMode:"environment"},{fps:10,qrbox:{width:280,height:280}},L,Z=>{}),A(!0),Qt.success("Camera started")}catch(Z){console.error("Camera error:",Z),T(Z.message||"Failed to start camera"),Qt.error("Could not access camera")}},D=async()=>{if(R.current&&w)try{await R.current.stop(),A(!1)}catch(Z){console.error("Error stopping scanner:",Z)}},L=async Z=>{console.log("Scanned:",Z),await W(Z)},U=async()=>{await new Promise(Z=>setTimeout(Z,1500)),g(null)},W=async Z=>{if(!v){y(!0),await D();try{let te=Z;if(Z.startsWith("cloudcafe:")&&(te=Z.replace("cloudcafe:","")),console.log("Parsed userId:",te),!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(te))throw new Error("Invalid QR code format");const{data:ue,error:se}=await Xe.rpc("get_user_info",{user_id:te}).single();if(se){console.error("Failed to get user info:",se),Qt.error("Failed to get user information"),y(!1);return}const Ue=ue;let{data:ge,error:he}=await Xe.from("user_rewards").select("stamps, pending_reward, updated_at").eq("user_id",te).single();if(he&&he.code==="PGRST116"){const{data:Te,error:Ie}=await Xe.from("user_rewards").insert({user_id:te,stamps:0,pending_reward:!1}).select().single();if(Ie)throw new Error("Failed to create rewards record");ge=Te}else if(he)throw new Error("Failed to fetch user rewards");ge&&(g({id:te,email:(Ue==null?void 0:Ue.email)||`User ID: ${te.slice(0,8)}...`,firstName:(Ue==null?void 0:Ue.first_name)||"Customer",lastName:(Ue==null?void 0:Ue.last_name)||"",stamps:ge.stamps,pending_reward:ge.pending_reward,lastVisit:ge.updated_at}),Qt.success("Customer found!"))}catch(te){console.error("Scan error:",te),Qt.error(te.message||"Failed to scan QR code")}finally{y(!1)}}},j=async()=>{if(!(!h||!e)){y(!0);try{const{error:Z}=await Xe.from("user_rewards").update({pending_reward:!1,updated_at:new Date().toISOString()}).eq("user_id",h.id);if(Z)throw Z;g({...h,pending_reward:!1}),Qt.success(" Reward redeemed!"),await U()}catch(Z){console.error("Redeem error:",Z),Qt.error("Failed to redeem reward")}finally{y(!1)}}},q=async()=>{if(console.log("addStamp called",{scannedUser:h,user:e}),!h||!e){console.log("Missing scannedUser or user"),Qt.error("Invalid state - please scan again");return}if(h.pending_reward){Qt.error("User must redeem their reward before earning more stamps");return}y(!0),Qt.info("Adding stamp...");try{const Z=h.stamps+1,te=Z>=10;console.log("Updating stamps:",{scannedUserId:h.id,newStamps:Z,willConvert:te});const{data:ee,error:ue}=await Xe.from("user_rewards").update({stamps:te?0:Z,pending_reward:te?!0:h.pending_reward,updated_at:new Date().toISOString()}).eq("user_id",h.id).select();if(console.log("Update result:",{data:ee,updateError:ue}),ue)throw console.error("Update error:",ue),ue;g({...h,stamps:te?0:Z,pending_reward:te?!0:h.pending_reward}),te?Qt.success(" Stamp added!"):Qt.success(" Stamp added!"),await U()}catch(Z){console.error("Add stamp error:",Z),Qt.error(`Failed: ${Z.message||"Unknown error"}`)}finally{y(!1)}};return x.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[x.jsx("div",{className:"bg-[#1a1a1a] text-white border-b border-gray-800 sticky top-0 z-10",children:x.jsxs("div",{className:"max-w-4xl mx-auto px-6 h-16 flex items-center justify-between",children:[x.jsxs("button",{onClick:()=>t("/admin/orders"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[x.jsx(No,{className:"w-5 h-5"}),"Back"]}),x.jsx("h1",{className:"text-xl font-bold",children:"QR Scanner"}),x.jsx("span",{className:"bg-[#B88A68] text-white text-xs px-2 py-1 rounded font-bold",children:"ADMIN"})]})}),x.jsx("div",{className:"max-w-2xl mx-auto px-6 py-8",children:h?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[x.jsx(LE,{className:"w-6 h-6 text-green-600"}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Customer Found"})]}),x.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[x.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Name"}),x.jsx("p",{className:"font-semibold text-gray-900",children:h.firstName||h.lastName?`${h.firstName||""} ${h.lastName||""}`.trim():"N/A"}),x.jsx("p",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Email"}),x.jsx("p",{className:"font-semibold text-gray-900",children:h.email}),h.lastVisit&&x.jsxs(x.Fragment,{children:[x.jsx("p",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Last Visit"}),x.jsxs("p",{className:"font-semibold text-gray-900",children:[new Date(h.lastVisit).toLocaleDateString()," at ",new Date(h.lastVisit).toLocaleTimeString()]})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[x.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-center",children:[x.jsx(PE,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),x.jsx("p",{className:"text-3xl font-bold text-blue-600",children:h.stamps}),x.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Stamps"})]}),x.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-center",children:[x.jsx(Co,{className:"w-8 h-8 text-amber-600 mx-auto mb-2"}),x.jsx("p",{className:"text-3xl font-bold text-amber-600",children:h.pending_reward?"1":"0"}),x.jsx("p",{className:"text-sm text-amber-800 font-medium",children:"Pending Reward"})]})]}),h.pending_reward&&x.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6 flex items-start gap-3",children:[x.jsx(Co,{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5 animate-bounce"}),x.jsxs("div",{children:[x.jsx("p",{className:"font-bold text-amber-900 text-lg",children:"Reward Available!"}),x.jsx("p",{className:"text-amber-800",children:"User has a pending reward. Redeem it now?"})]})]}),x.jsx("div",{className:"flex flex-col gap-3",children:h.pending_reward?x.jsx("button",{onClick:j,disabled:v,className:"w-full px-6 py-4 bg-amber-600 text-white text-lg font-bold rounded-xl hover:bg-amber-700 transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:v?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):x.jsxs(x.Fragment,{children:[x.jsx(Co,{className:"w-6 h-6"}),"Redeem Reward"]})}):x.jsx("button",{onClick:q,disabled:v,className:"w-full px-6 py-4 bg-[#B88A68] text-white text-lg font-bold rounded-xl hover:bg-[#A67958] transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:v?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):x.jsxs(x.Fragment,{children:[x.jsx(Ia,{className:"w-6 h-6"}),"Add 1 Stamp"]})})})]}),h.stamps===0&&h.pending_reward&&x.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 flex items-center gap-3",children:[x.jsx(Ia,{className:"w-6 h-6 text-green-600"}),x.jsx("p",{className:"text-green-800 font-medium",children:"Customer earned a reward! Stamps have been converted."})]})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx(nf,{className:"w-6 h-6 text-[#B88A68]"}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan Customer QR Code"})]}),x.jsx("p",{className:"text-gray-600 mb-6",children:"Ask the customer to show their rewards QR code, then scan it to add points."}),C&&x.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-4 flex items-start gap-3",children:[x.jsx(Kl,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-red-800",children:"Camera Error"}),x.jsx("p",{className:"text-sm text-red-600",children:C})]})]}),!w&&x.jsxs("button",{onClick:k,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-[#B88A68] text-white font-bold text-lg rounded-xl hover:bg-[#A67958] transition-colors mb-4",children:[x.jsx(Tu,{className:"w-6 h-6"}),"Start Camera"]}),!h&&x.jsx("div",{id:"qr-reader",className:"rounded-xl overflow-hidden bg-gray-100 min-h-[300px]",style:{visibility:w?"visible":"hidden",position:"relative",zIndex:0}})]}),x.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4",children:x.jsxs("p",{className:"text-sm text-blue-800",children:[x.jsx("strong",{children:"Tip:"})," Hold the camera steady and ensure good lighting. The QR code should be clearly visible within the frame."]})})]})})]})}function LT(){const{cartCount:t}=Pa();return Us().pathname.startsWith("/admin")?null:x.jsxs(at,{to:"/cart",className:"fixed bottom-8 right-6 z-[100] bg-[#B88A68] hover:bg-[#A67958] text-white rounded-full p-4 shadow-2xl transition-all hover:scale-110 group flex items-center justify-center","aria-label":`Shopping cart with ${t} items`,children:[x.jsx(Hi,{className:"w-6 h-6"}),t>0&&x.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center animate-pulse",children:t>99?"99+":t})]})}function FT(){var k,D,L,U;const t=As(),{user:e,isAuthenticated:r}=Vs(),[a,u]=z.useState(!1),[h,g]=z.useState(!1),[v,y]=z.useState({firstName:((k=e==null?void 0:e.user_metadata)==null?void 0:k.first_name)||"",lastName:((D=e==null?void 0:e.user_metadata)==null?void 0:D.last_name)||"",phone:((L=e==null?void 0:e.user_metadata)==null?void 0:L.phone)||"",shopName:((U=e==null?void 0:e.user_metadata)==null?void 0:U.shop_name)||""}),[w,A]=z.useState({currentPassword:"",newPassword:"",confirmPassword:""});if(!r)return x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-gray-600 mb-4",children:"Please sign in to view your account settings"}),x.jsx(at,{to:"/signin",className:"text-[#B88A68] font-semibold hover:underline",children:"Go to Sign In"})]})});const C=async W=>{W.preventDefault(),g(!0);try{const{error:j}=await Xe.auth.updateUser({data:{first_name:v.firstName,last_name:v.lastName,phone:v.phone,shop_name:v.shopName}});if(j)throw j;Qt.success("Profile updated successfully!")}catch(j){Qt.error(j.message||"Failed to update profile")}finally{g(!1)}},T=async W=>{if(W.preventDefault(),w.newPassword!==w.confirmPassword){Qt.error("New passwords do not match");return}if(w.newPassword.length<6){Qt.error("Password must be at least 6 characters");return}u(!0);try{const{error:j}=await Xe.auth.updateUser({password:w.newPassword});if(j)throw j;A({currentPassword:"",newPassword:"",confirmPassword:""}),Qt.success("Password updated successfully!")}catch(j){Qt.error(j.message||"Failed to update password")}finally{u(!1)}},R=async()=>{if(e!=null&&e.email)try{const{error:W}=await Xe.auth.resetPasswordForEmail(e.email,{redirectTo:`${window.location.origin}/reset-password`});if(W)throw W;Qt.success("Password reset email sent! Check your inbox.")}catch(W){Qt.error(W.message||"Failed to send reset email")}};return x.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-6",children:x.jsxs("div",{className:"max-w-3xl mx-auto",children:[x.jsxs("div",{className:"mb-8",children:[x.jsx("button",{onClick:()=>t(-1),className:"text-gray-600 hover:text-gray-900 mb-4 flex items-center gap-2",children:" Back"}),x.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Account Settings"}),x.jsx("p",{className:"text-gray-600",children:"Manage your account information and preferences"})]}),x.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[x.jsx(Iu,{className:"w-6 h-6 text-[#B88A68]"}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Profile Information"})]}),x.jsxs("form",{onSubmit:C,className:"space-y-4",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"First Name"}),x.jsx("input",{type:"text",value:v.firstName,onChange:W=>y({...v,firstName:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B88A68]"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Last Name"}),x.jsx("input",{type:"text",value:v.lastName,onChange:W=>y({...v,lastName:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B88A68]"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone"}),x.jsx("input",{type:"tel",value:v.phone,onChange:W=>y({...v,phone:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B88A68]"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Shop Name (Optional)"}),x.jsx("input",{type:"text",value:v.shopName,onChange:W=>y({...v,shopName:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B88A68]"})]}),x.jsx("button",{type:"submit",disabled:h,className:"w-full bg-[#B88A68] text-white py-3 rounded-lg font-semibold hover:bg-[#A67958] transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:h?x.jsxs(x.Fragment,{children:[x.jsx(Dl,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):"Save Profile"})]})]}),x.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx(Qf,{className:"w-6 h-6 text-[#B88A68]"}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Email Address"})]}),x.jsx("p",{className:"text-gray-600 mb-2",children:"Current Email:"}),x.jsx("p",{className:"font-semibold text-gray-900 mb-4",children:e==null?void 0:e.email}),x.jsx("p",{className:"text-sm text-gray-500",children:"To change your email, please contact support or create a new account."})]}),x.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[x.jsx(Nu,{className:"w-6 h-6 text-[#B88A68]"}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Change Password"})]}),x.jsxs("form",{onSubmit:T,className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),x.jsx("input",{type:"password",value:w.newPassword,onChange:W=>A({...w,newPassword:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B88A68]",minLength:6})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New Password"}),x.jsx("input",{type:"password",value:w.confirmPassword,onChange:W=>A({...w,confirmPassword:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B88A68]",minLength:6})]}),x.jsx("button",{type:"submit",disabled:a,className:"w-full bg-[#B88A68] text-white py-3 rounded-lg font-semibold hover:bg-[#A67958] transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:a?x.jsxs(x.Fragment,{children:[x.jsx(Dl,{className:"w-5 h-5 animate-spin"}),"Updating..."]}):"Update Password"})]}),x.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:x.jsx("button",{onClick:R,className:"text-[#B88A68] font-semibold hover:underline text-sm",children:"Forgot your password? Send reset email"})})]})]})})}const Fi=[{src:"/gallery/Ice-latte-1.JPEG",type:"image",alt:"Iced Latte"},{src:"/gallery/IMG_7599.jpeg",type:"image",alt:"Cloud Cafe"},{src:"/gallery/IMG_8494.JPG",type:"image",alt:"Cloud Cafe"},{src:"/gallery/IMG_8496.JPG",type:"image",alt:"Cloud Cafe"},{src:"/gallery/Burgers.MP4",type:"video",alt:"Burgers"},{src:"/gallery/Chip porky.MP4",type:"video",alt:"Chip Porky"},{src:"/gallery/Placing 3.MP4",type:"video",alt:"Food Preparation"}];function UT(){const[t,e]=z.useState(null),r=g=>{e(g)},a=()=>{e(null)},u=()=>{t!==null&&e(t===0?Fi.length-1:t-1)},h=()=>{t!==null&&e(t===Fi.length-1?0:t+1)};return x.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[x.jsxs("div",{className:"relative bg-[#B88A68] text-white py-20",children:[x.jsx("div",{className:"absolute inset-0 bg-black/10"}),x.jsxs("div",{className:"relative max-w-6xl mx-auto px-6 text-center",children:[x.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Gallery"}),x.jsx("p",{className:"text-xl text-white/90",children:"A glimpse into Cloud Cafe"})]})]}),x.jsx("div",{className:"max-w-6xl mx-auto px-6 py-12",children:x.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Fi.map((g,v)=>x.jsxs("div",{className:"relative aspect-square rounded-2xl overflow-hidden cursor-pointer group shadow-md hover:shadow-xl transition-all duration-300",onClick:()=>r(v),children:[g.type==="image"?x.jsx("img",{src:g.src,alt:g.alt,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):x.jsxs("div",{className:"relative w-full h-full",children:[x.jsx("video",{src:g.src,className:"w-full h-full object-cover",muted:!0,playsInline:!0}),x.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/40 transition-colors",children:x.jsx("div",{className:"w-16 h-16 rounded-full bg-white/90 flex items-center justify-center",children:x.jsx(Tu,{className:"w-8 h-8 text-[#B88A68] ml-1",fill:"currentColor"})})})]}),x.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:x.jsx("div",{className:"absolute bottom-4 left-4 text-white font-medium",children:g.alt})})]},v))})}),t!==null&&x.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center",onClick:a,children:[x.jsx("button",{className:"absolute top-4 right-4 p-2 text-white/80 hover:text-white transition-colors z-10",onClick:a,children:x.jsx(WE,{className:"w-8 h-8"})}),x.jsx("button",{className:"absolute left-4 p-2 text-white/80 hover:text-white transition-colors z-10",onClick:g=>{g.stopPropagation(),u()},children:x.jsx(Lb,{className:"w-10 h-10"})}),x.jsx("button",{className:"absolute right-4 p-2 text-white/80 hover:text-white transition-colors z-10",onClick:g=>{g.stopPropagation(),h()},children:x.jsx(Ub,{className:"w-10 h-10"})}),x.jsxs("div",{className:"max-w-5xl max-h-[90vh] w-full mx-4",onClick:g=>g.stopPropagation(),children:[Fi[t].type==="image"?x.jsx("img",{src:Fi[t].src,alt:Fi[t].alt,className:"w-full h-full object-contain max-h-[85vh]"}):x.jsx("video",{src:Fi[t].src,className:"w-full h-full object-contain max-h-[85vh]",controls:!0,autoPlay:!0,playsInline:!0}),x.jsx("p",{className:"text-white text-center mt-4 text-lg",children:Fi[t].alt})]})]})]})}function VT(){return x.jsx("footer",{className:"bg-gray-100 border-t border-gray-200 py-8 mt-12",children:x.jsxs("div",{className:"max-w-[1440px] mx-auto px-6 lg:px-12",children:[x.jsx("div",{className:"md:hidden mb-6",children:x.jsxs("a",{href:"https://maps.app.goo.gl/aq1tUzUN4q4EaTH69",target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-[#B88A68] text-white rounded-lg font-semibold hover:bg-[#A67958] transition-colors",children:[x.jsx(Cx,{className:"w-5 h-5"}),x.jsx("span",{className:"text-sm",children:"Find Us"})]})}),x.jsxs("div",{className:"flex justify-center gap-6 mb-8",children:[x.jsx("a",{href:"https://www.instagram.com/cloudcafeglasgow/",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 flex items-center justify-center rounded-full bg-white border border-gray-300 hover:bg-[#B88A68] hover:border-[#B88A68] hover:text-white transition-all duration-300","aria-label":"Instagram",children:x.jsx(sE,{className:"w-5 h-5"})}),x.jsx("a",{href:"https://www.google.com/maps/search/cloud+cafe+glasgow",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 flex items-center justify-center rounded-full bg-white border border-gray-300 hover:bg-[#B88A68] hover:border-[#B88A68] hover:text-white transition-all duration-300","aria-label":"Google",children:x.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:[x.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),x.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),x.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),x.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})})]}),x.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-6 md:gap-8",children:[x.jsx("a",{href:"#",className:"text-sm text-gray-600 hover:text-[#B88A68] transition-colors",children:"Privacy"}),x.jsx("span",{className:"hidden md:inline text-gray-400",children:"|"}),x.jsx("a",{href:"#",className:"text-sm text-gray-600 hover:text-[#B88A68] transition-colors",children:"Cookie"}),x.jsx("span",{className:"hidden md:inline text-gray-400",children:"|"}),x.jsx("a",{href:"#",className:"text-sm text-gray-600 hover:text-[#B88A68] transition-colors",children:"Terms and Conditions"})]}),x.jsx("div",{className:"text-center mt-6",children:x.jsx("p",{className:"text-xs text-gray-500",children:" 2026 Cloud Cafe. All rights reserved."})})]})})}const WT={success:{icon:x.jsx(Ia,{className:"w-20 h-20"}),title:"Payment Successful!",message:"Your order has been placed and is being prepared.",bgColor:"bg-green-500",iconColor:"text-green-500"},failure:{icon:x.jsx($m,{className:"w-20 h-20"}),title:"Payment Failed",message:"Your payment was declined. Please try again with a different payment method.",bgColor:"bg-red-500",iconColor:"text-red-500"},cancel:{icon:x.jsx($m,{className:"w-20 h-20"}),title:"Payment Cancelled",message:"You cancelled the payment. Your cart items are still saved.",bgColor:"bg-gray-500",iconColor:"text-gray-500"},pending:{icon:x.jsx(Gb,{className:"w-20 h-20"}),title:"Payment Pending",message:"Your payment is being processed. We will notify you once it is confirmed.",bgColor:"bg-yellow-500",iconColor:"text-yellow-500"},error:{icon:x.jsx(_x,{className:"w-20 h-20"}),title:"Payment Error",message:"An error occurred during payment. Please try again or contact support.",bgColor:"bg-orange-500",iconColor:"text-orange-500"}};function rc({status:t}){const[e]=xb(),r=As(),[a,u]=z.useState(5),{clearCart:h,cartItems:g,pendingReward:v,rewardApplied:y,fetchUserRewards:w}=Pa(),A=z.useRef(!1),C=e.get("order"),T=WT[t];return z.useEffect(()=>{t==="success"&&C&&!A.current&&(A.current=!0,(async()=>{try{const{data:{user:k}}=await Xe.auth.getUser();if(!k)return;const{data:D,error:L}=await Xe.from("orders").select("payment_status, status").eq("id",C).single();if(L||!D){console.error("Error verifying order status:",L);return}if(D.payment_status==="completed"||D.status==="confirmed"){if(y&&v)await Xe.from("user_rewards").update({stamps:0,pending_reward:!1,updated_at:new Date().toISOString()}).eq("user_id",k.id),await Xe.from("reward_transactions").insert({user_id:k.id,type:"reward_redeemed",amount:1,order_id:C});else if(!v){const U=["Coffee","Tea","Hot Drink","Iced"],W=g.filter(j=>j.category&&U.includes(j.category)).reduce((j,q)=>j+q.quantity,0);if(W>0){const{data:j}=await Xe.from("user_rewards").select("stamps").eq("user_id",k.id).single(),Z=((j==null?void 0:j.stamps)||0)+W,te=Z>=10;await Xe.from("user_rewards").update({stamps:te?0:Z,pending_reward:te,updated_at:new Date().toISOString()}).eq("user_id",k.id),await Xe.from("reward_transactions").insert({user_id:k.id,type:"stamp_earned",amount:W,order_id:C}),te&&await Xe.from("reward_transactions").insert({user_id:k.id,type:"reward_earned",amount:1})}}h(),await w()}else console.warn("Order status not authorized yet:",D.payment_status)}catch(k){console.error("Error processing payment success:",k)}})())},[t,C,g,y,v,h,w]),z.useEffect(()=>{if(t==="success"&&a>0){const R=setTimeout(()=>u(a-1),1e3);return()=>clearTimeout(R)}t==="success"&&a===0&&r("/orders")},[t,a,r]),x.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[x.jsxs("div",{className:`relative ${T.bgColor} text-white py-20`,children:[x.jsx("div",{className:"absolute inset-0 bg-black/10"}),x.jsxs("div",{className:"relative max-w-6xl mx-auto px-6 text-center",children:[x.jsx("div",{className:"flex justify-center mb-6",children:T.icon}),x.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:T.title}),x.jsx("p",{className:"text-xl text-white/90",children:T.message})]})]}),x.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-12",children:[x.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 text-center",children:[C&&x.jsxs("div",{className:"mb-6",children:[x.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Order Reference"}),x.jsx("p",{className:"font-mono text-lg font-semibold text-gray-900",children:C.substring(0,8).toUpperCase()})]}),t==="success"&&x.jsx("div",{className:"mb-6",children:x.jsxs("p",{className:"text-gray-600",children:["Redirecting to your orders in ",a," seconds..."]})}),x.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:t==="success"?x.jsxs(at,{to:"/orders",className:"inline-flex items-center justify-center gap-2 px-6 py-3 bg-[#B88A68] text-white font-semibold rounded-full hover:bg-[#A67958] transition-colors",children:[x.jsx(Jf,{className:"w-5 h-5"}),"View My Orders"]}):x.jsxs(x.Fragment,{children:[x.jsxs(at,{to:"/cart",className:"inline-flex items-center justify-center gap-2 px-6 py-3 bg-[#B88A68] text-white font-semibold rounded-full hover:bg-[#A67958] transition-colors",children:[x.jsx(No,{className:"w-5 h-5"}),"Back to Cart"]}),x.jsx(at,{to:"/menu",className:"inline-flex items-center justify-center gap-2 px-6 py-3 border-2 border-[#B88A68] text-[#B88A68] font-semibold rounded-full hover:bg-[#B88A68]/10 transition-colors",children:"Continue Shopping"})]})})]}),(t==="failure"||t==="error")&&x.jsxs("div",{className:"mt-8 bg-gray-50 rounded-xl p-6",children:[x.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Need Help?"}),x.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[x.jsx("li",{children:"- Check that your card details are correct"}),x.jsx("li",{children:"- Ensure you have sufficient funds"}),x.jsx("li",{children:"- Try a different payment method"}),x.jsx("li",{children:"- Contact your bank if the problem persists"})]})]})]})]})}function zT(){return x.jsx(rc,{status:"success"})}function HT(){return x.jsx(rc,{status:"failure"})}function GT(){return x.jsx(rc,{status:"cancel"})}function $T(){return x.jsx(rc,{status:"pending"})}function XT(){return x.jsx(rc,{status:"error"})}function YT(){return x.jsx(A8,{children:x.jsx(C8,{children:x.jsxs(Q8,{children:[x.jsx(hb,{children:x.jsxs("div",{className:"min-h-screen bg-white",children:[x.jsx(sA,{}),x.jsxs(Vv,{children:[x.jsx(Br,{path:"/",element:x.jsx(lA,{})}),x.jsx(Br,{path:"/menu",element:x.jsx(cA,{})}),x.jsx(Br,{path:"/rewards",element:x.jsx(ZN,{})}),x.jsx(Br,{path:"/signin",element:x.jsx(QN,{})}),x.jsx(Br,{path:"/register",element:x.jsx(JN,{})}),x.jsx(Br,{path:"/cart",element:x.jsx(e6,{})}),x.jsx(Br,{path:"/verified",element:x.jsx(t6,{})}),x.jsx(Br,{path:"/staff",element:x.jsx(r6,{})}),x.jsx(Br,{path:"/orders",element:x.jsx(lT,{})}),x.jsx(Br,{path:"/account",element:x.jsx(FT,{})}),x.jsx(Br,{path:"/gallery",element:x.jsx(UT,{})}),x.jsx(Br,{path:"/admin/orders",element:x.jsx(cT,{})}),x.jsx(Br,{path:"/admin/scan",element:x.jsx(BT,{})}),x.jsx(Br,{path:"/payment/success",element:x.jsx(zT,{})}),x.jsx(Br,{path:"/payment/failure",element:x.jsx(HT,{})}),x.jsx(Br,{path:"/payment/cancel",element:x.jsx(GT,{})}),x.jsx(Br,{path:"/payment/pending",element:x.jsx($T,{})}),x.jsx(Br,{path:"/payment/error",element:x.jsx(XT,{})})]}),x.jsx(LT,{}),x.jsx(VT,{})]})}),x.jsx(Z8,{position:"top-right",richColors:!0,closeButton:!0})]})})})}H2.createRoot(document.getElementById("root")).render(x.jsx(YT,{}));
